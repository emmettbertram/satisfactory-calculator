var rf=Object.defineProperty;var lf=(e,t,n)=>t in e?rf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ae=(e,t,n)=>lf(e,typeof t!="symbol"?t+"":t,n);import{a2 as gs,k as we,E as se,a3 as sf,p as ve,a4 as Pe,m as Ye,b as nn,c as Ct,g as be,C as Te,a5 as gt,H as io,d as on,W as En,s as Ce,I as mn,u as Ln,e as B,a6 as yo,t as oe,h as Ee,i as b,G as he,a7 as kr,R as Ve,a8 as et,a9 as fi,D as kn,aa as Xe,U as Kt,ab as ms,ac as Rt,ad as hi,F as ye,ae as Le,af as je,ag as Hn,B as $n,ah as ps,ai as vi,a0 as ie,aj as ys,M as za,L as rt,N as ra,K as de,ak as uf,al as ws,am as bs,V as gi,an as cf,Q as pn,S as la,ao as mi,ap as df,aq as ff,ar as $r,j as Ge,as as hf,at as vf,au as gf,P as yn,J as cn,av as mf,aw as _s,v as Oe,ax as pf,ay as yf,az as wf,aA as Xo,aB as wo,aC as Cr,x as at,aD as Tn,aE as xs,o as ae,l as $e,w as ue,aF as Ss,n as ge,aG as Ne,aH as vt,aI as Es,aJ as Fa,q as ze,aK as Ue,aL as Me,aM as ks,aN as bf,aO as $s,aP as Cs,aQ as Lt,aR as ao,aS as _f,r as ro,aT as xf,aU as La,aV as Sf,aW as xe,_ as xt,aX as Se,aY as dn,aZ as Ef,a_ as kf,a$ as $f,b0 as Is,O as Cf,b1 as If}from"./index-DO7DeOzD.js";import{m as Ns,s as Cn,a as Ps,b as Ha,v as Ms,w as Ga,R as Ts,V as Ke,x as lo,y as so,u as pi,z as yi,A as Vs,M as Ya,B as Ir,C as Nf,c as Pf,D as Mf,d as Tf,e as As,E as Vf,F as Af,G as Df,H as Ds,h as Ot,I as Uo,J as Os,K as Bs,L as Rs,N as Of,O as Bf,P as zs,l as Xa,n as Gn,Q as Rf,_ as uo,o as Xt,p as sn,q as un,S as zf,r as Ff}from"./VList-B8hom3L4.js";import{V as bt,a as Oo,b as Fs,u as Ls}from"./data-CigwBIxq.js";import{a as We,g as Hs,h as Ua,i as Gs,j as Ys,m as Lf,c as Xs,u as Us,k as Nr,V as Pr,f as co,n as Hf,l as Ws,s as Ks,o as Gf,b as Yf,p as Xf,q as Uf}from"./dialog-transition-CwDQYz9f.js";function Mr(e,t,n){return Object.keys(e).filter(o=>gs(o)&&o.endsWith(t)).reduce((o,i)=>(o[i.slice(0,-t.length)]=a=>e[i](a,n(a)),o),{})}const Wf=we({props:{factory:{type:Object,required:!0}},data(){return{itemTableHeaders:[{title:"Item",key:"item.name"},{title:"Amount Per Minute",key:"amountPerMinute"}],buildingTableHeaders:[{title:"Building",key:"building.name"},{title:"Amount",key:"amount"}]}},computed:{resources(){return this.factory.steps.filter(e=>e.isResourceStep).flatMap(e=>e.outputs)},products(){return this.factory.steps.filter(e=>e.isFinalProductStep).flatMap(e=>e.inputs)},buildings(){return this.factory.steps.reduce((e,t)=>{if(t.building){const n=e.find(o=>{var i;return o.building.slug===((i=t.building)==null?void 0:i.slug)});n?n.amount+=Math.ceil(t.numberOfBuildings):e.push({building:t.building,amount:Math.ceil(t.numberOfBuildings)})}return e},[])},power(){return this.factory.steps.reduce((e,t)=>(t.building&&(e+=t.building.metadata.powerConsumption*Math.ceil(t.numberOfBuildings)),e),0)}}});function Kf(){const e=se([]);sf(()=>e.value=[]);function t(n,o){e.value[o]=n}return{refs:e,updateRef:t}}const qf=ve({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:Pe,default:"$first"},prevIcon:{type:Pe,default:"$prev"},nextIcon:{type:Pe,default:"$next"},lastIcon:{type:Pe,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Ns(),...Ye(),...Cn(),...Ps(),...Ha(),...Ms(),...nn({tag:"nav"}),...Ct(),...Ga({variant:"text"})},"VPagination"),Tr=be()({name:"VPagination",props:qf(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,t){let{slots:n,emit:o}=t;const i=Te(e,"modelValue"),{t:a,n:r}=gt(),{isRtl:l}=io(),{themeClasses:s}=on(e),{width:u}=En(),c=Ce(-1);mn(void 0,{scoped:!0});const{resizeRef:d}=Ln(z=>{if(!z.length)return;const{target:O,contentRect:V}=z[0],$=O.querySelector(".v-pagination__list > *");if(!$)return;const K=V.width,Z=$.offsetWidth+parseFloat(getComputedStyle($).marginRight)*2;c.value=v(K,Z)}),f=B(()=>parseInt(e.length,10)),h=B(()=>parseInt(e.start,10)),g=B(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):c.value>=0?c.value:v(u.value,58));function v(z,O){const V=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((z-O*V)/O).toFixed(2)))}const p=B(()=>{if(f.value<=0||isNaN(f.value)||f.value>Number.MAX_SAFE_INTEGER)return[];if(g.value<=0)return[];if(g.value===1)return[i.value];if(f.value<=g.value)return yo(f.value,h.value);const z=g.value%2===0,O=z?g.value/2:Math.floor(g.value/2),V=z?O:O+1,$=f.value-O;if(V-i.value>=0)return[...yo(Math.max(1,g.value-1),h.value),e.ellipsis,f.value];if(i.value-$>=(z?1:0)){const K=g.value-1,Z=f.value-K+h.value;return[h.value,e.ellipsis,...yo(K,Z)]}else{const K=Math.max(1,g.value-3),Z=K===1?i.value:i.value-Math.ceil(K/2)+h.value;return[h.value,e.ellipsis,...yo(K,Z),e.ellipsis,f.value]}});function w(z,O,V){z.preventDefault(),i.value=O,V&&o(V,O)}const{refs:y,updateRef:M}=Kf();mn({VPaginationBtn:{color:oe(e,"color"),border:oe(e,"border"),density:oe(e,"density"),size:oe(e,"size"),variant:oe(e,"variant"),rounded:oe(e,"rounded"),elevation:oe(e,"elevation")}});const E=B(()=>p.value.map((z,O)=>{const V=$=>M($,O);if(typeof z=="string")return{isActive:!1,key:`ellipsis-${O}`,page:z,props:{ref:V,ellipsis:!0,icon:!0,disabled:!0}};{const $=z===i.value;return{isActive:$,key:z,page:r(z),props:{ref:V,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:$?e.activeColor:e.color,"aria-current":$,"aria-label":a($?e.currentPageAriaLabel:e.pageAriaLabel,z),onClick:K=>w(K,z)}}}})),P=B(()=>{const z=!!e.disabled||i.value<=h.value,O=!!e.disabled||i.value>=h.value+f.value-1;return{first:e.showFirstLastPage?{icon:l.value?e.lastIcon:e.firstIcon,onClick:V=>w(V,h.value,"first"),disabled:z,"aria-label":a(e.firstAriaLabel),"aria-disabled":z}:void 0,prev:{icon:l.value?e.nextIcon:e.prevIcon,onClick:V=>w(V,i.value-1,"prev"),disabled:z,"aria-label":a(e.previousAriaLabel),"aria-disabled":z},next:{icon:l.value?e.prevIcon:e.nextIcon,onClick:V=>w(V,i.value+1,"next"),disabled:O,"aria-label":a(e.nextAriaLabel),"aria-disabled":O},last:e.showFirstLastPage?{icon:l.value?e.firstIcon:e.lastIcon,onClick:V=>w(V,h.value+f.value-1,"last"),disabled:O,"aria-label":a(e.lastAriaLabel),"aria-disabled":O}:void 0}});function L(){var O;const z=i.value-h.value;(O=y.value[z])==null||O.$el.focus()}function D(z){z.key===kr.left&&!e.disabled&&i.value>+e.start?(i.value=i.value-1,Ve(L)):z.key===kr.right&&!e.disabled&&i.value<h.value+f.value-1&&(i.value=i.value+1,Ve(L))}return Ee(()=>b(e.tag,{ref:d,class:["v-pagination",s.value,e.class],style:e.style,role:"navigation","aria-label":a(e.ariaLabel),onKeydown:D,"data-test":"v-pagination-root"},{default:()=>[b("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&b("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(P.value.first):b(We,he({_as:"VPaginationBtn"},P.value.first),null)]),b("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(P.value.prev):b(We,he({_as:"VPaginationBtn"},P.value.prev),null)]),E.value.map((z,O)=>b("li",{key:z.key,class:["v-pagination__item",{"v-pagination__item--is-active":z.isActive}],"data-test":"v-pagination-item"},[n.item?n.item(z):b(We,he({_as:"VPaginationBtn"},z.props),{default:()=>[z.page]})])),b("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(P.value.next):b(We,he({_as:"VPaginationBtn"},P.value.next),null)]),e.showFirstLastPage&&b("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(P.value.last):b(We,he({_as:"VPaginationBtn"},P.value.last),null)])])]})),{}}}),Zf=ve({text:String,onClick:et(),...Ye(),...Ct()},"VLabel"),qs=be()({name:"VLabel",props:Zf(),setup(e,t){let{slots:n}=t;return Ee(()=>{var o;return b("label",{class:["v-label",{"v-label--clickable":!!e.onClick},e.class],style:e.style,onClick:e.onClick},[e.text,(o=n.default)==null?void 0:o.call(n)])}),{}}}),Zs=Symbol.for("vuetify:selection-control-group"),js=ve({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:Pe,trueIcon:Pe,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:fi},...Ye(),...Cn(),...Ct()},"SelectionControlGroup"),jf=ve({...js({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");be()({name:"VSelectionControlGroup",props:jf(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const o=Te(e,"modelValue"),i=kn(),a=B(()=>e.id||`v-selection-control-group-${i}`),r=B(()=>e.name||a.value),l=new Set;return Xe(Zs,{modelValue:o,forceUpdate:()=>{l.forEach(s=>s())},onForceUpdate:s=>{l.add(s),Kt(()=>{l.delete(s)})}}),mn({[e.defaultsTarget]:{color:oe(e,"color"),disabled:oe(e,"disabled"),density:oe(e,"density"),error:oe(e,"error"),inline:oe(e,"inline"),modelValue:o,multiple:B(()=>!!e.multiple||e.multiple==null&&Array.isArray(o.value)),name:r,falseIcon:oe(e,"falseIcon"),trueIcon:oe(e,"trueIcon"),readonly:oe(e,"readonly"),ripple:oe(e,"ripple"),type:oe(e,"type"),valueComparator:oe(e,"valueComparator")}}),Ee(()=>{var s;return b("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class],style:e.style,role:e.type==="radio"?"radiogroup":void 0},[(s=n.default)==null?void 0:s.call(n)])}),{}}});const Qs=ve({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Ye(),...js()},"VSelectionControl");function Qf(e){const t=Le(Zs,void 0),{densityClasses:n}=lo(e),o=Te(e,"modelValue"),i=B(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),a=B(()=>e.falseValue!==void 0?e.falseValue:!1),r=B(()=>!!e.multiple||e.multiple==null&&Array.isArray(o.value)),l=B({get(){const h=t?t.modelValue.value:o.value;return r.value?je(h).some(g=>e.valueComparator(g,i.value)):e.valueComparator(h,i.value)},set(h){if(e.readonly)return;const g=h?i.value:a.value;let v=g;r.value&&(v=h?[...je(o.value),g]:je(o.value).filter(p=>!e.valueComparator(p,i.value))),t?t.modelValue.value=v:o.value=v}}),{textColorClasses:s,textColorStyles:u}=so(B(()=>{if(!(e.error||e.disabled))return l.value?e.color:e.baseColor})),{backgroundColorClasses:c,backgroundColorStyles:d}=pi(B(()=>l.value&&!e.error&&!e.disabled?e.color:e.baseColor)),f=B(()=>l.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:i,falseValue:a,model:l,textColorClasses:s,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:d,icon:f}}const Vr=be()({name:"VSelectionControl",directives:{Ripple:Ts},inheritAttrs:!1,props:Qs(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:o}=t;const{group:i,densityClasses:a,icon:r,model:l,textColorClasses:s,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:d,trueValue:f}=Qf(e),h=kn(),g=Ce(!1),v=Ce(!1),p=se(),w=B(()=>e.id||`input-${h}`),y=B(()=>!e.disabled&&!e.readonly);i==null||i.onForceUpdate(()=>{p.value&&(p.value.checked=l.value)});function M(D){y.value&&(g.value=!0,Hn(D.target,":focus-visible")!==!1&&(v.value=!0))}function E(){g.value=!1,v.value=!1}function P(D){D.stopPropagation()}function L(D){if(!y.value){p.value&&(p.value.checked=l.value);return}e.readonly&&i&&Ve(()=>i.forceUpdate()),l.value=D.target.checked}return Ee(()=>{var $,K;const D=o.label?o.label({label:e.label,props:{for:w.value}}):e.label,[z,O]=ms(n),V=b("input",he({ref:p,checked:l.value,disabled:!!e.disabled,id:w.value,onBlur:E,onFocus:M,onInput:L,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:f.value,name:e.name,"aria-checked":e.type==="checkbox"?l.value:void 0},O),null);return b("div",he({class:["v-selection-control",{"v-selection-control--dirty":l.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":g.value,"v-selection-control--focus-visible":v.value,"v-selection-control--inline":e.inline},a.value,e.class]},z,{style:e.style}),[b("div",{class:["v-selection-control__wrapper",s.value],style:u.value},[($=o.default)==null?void 0:$.call(o,{backgroundColorClasses:c,backgroundColorStyles:d}),Rt(b("div",{class:["v-selection-control__input"]},[((K=o.input)==null?void 0:K.call(o,{model:l,textColorClasses:s,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:d,inputNode:V,icon:r.value,props:{onFocus:M,onBlur:E,id:w.value}}))??b(ye,null,[r.value&&b(Ke,{key:"icon",icon:r.value},null),V])]),[[hi("ripple"),e.ripple&&[!e.disabled&&!e.readonly,null,["center","circle"]]]])]),D&&b(qs,{for:w.value,onClick:P},{default:()=>[D]})])}),{isFocused:g,input:p}}}),Jf=ve({indeterminate:Boolean,indeterminateIcon:{type:Pe,default:"$checkboxIndeterminate"},...Qs({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),fo=be()({name:"VCheckboxBtn",props:Jf(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const o=Te(e,"indeterminate"),i=Te(e,"modelValue");function a(s){o.value&&(o.value=!1)}const r=B(()=>o.value?e.indeterminateIcon:e.falseIcon),l=B(()=>o.value?e.indeterminateIcon:e.trueIcon);return Ee(()=>{const s=$n(Vr.filterProps(e),["modelValue"]);return b(Vr,he(s,{modelValue:i.value,"onUpdate:modelValue":[u=>i.value=u,a],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:r.value,trueIcon:l.value,"aria-checked":o.value?"mixed":void 0}),n)}),{}}});function Js(e){const{t}=gt();function n(o){let{name:i}=o;const a={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[i],r=e[`onClick:${i}`],l=r&&a?t(`$vuetify.input.${a}`,e.label??""):void 0;return b(Ke,{icon:e[`${i}Icon`],"aria-label":l,onClick:r},null)}return{InputIcon:n}}const eh=ve({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Ye(),...yi({transition:{component:Vs,leaveAbsolute:!0,group:!0}})},"VMessages"),th=be()({name:"VMessages",props:eh(),setup(e,t){let{slots:n}=t;const o=B(()=>je(e.messages)),{textColorClasses:i,textColorStyles:a}=so(B(()=>e.color));return Ee(()=>b(Ya,{transition:e.transition,tag:"div",class:["v-messages",i.value,e.class],style:[a.value,e.style],role:"alert","aria-live":"polite"},{default:()=>[e.active&&o.value.map((r,l)=>b("div",{class:"v-messages__message",key:`${l}-${o.value}`},[n.message?n.message({message:r}):r]))]})),{}}}),eu=ve({focused:Boolean,"onUpdate:focused":et()},"focus");function tu(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ps();const n=Te(e,"focused"),o=B(()=>({[`${t}--focused`]:n.value}));function i(){n.value=!0}function a(){n.value=!1}return{focusClasses:o,isFocused:n,focus:i,blur:a}}const nh=Symbol.for("vuetify:form");function Wa(){return Le(nh,null)}const oh=ve({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...eu()},"validation");function ih(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ps(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kn();const o=Te(e,"modelValue"),i=B(()=>e.validationValue===void 0?o.value:e.validationValue),a=Wa(),r=se([]),l=Ce(!0),s=B(()=>!!(je(o.value===""?null:o.value).length||je(i.value===""?null:i.value).length)),u=B(()=>!!(e.disabled??(a==null?void 0:a.isDisabled.value))),c=B(()=>!!(e.readonly??(a==null?void 0:a.isReadonly.value))),d=B(()=>{var P;return(P=e.errorMessages)!=null&&P.length?je(e.errorMessages).concat(r.value).slice(0,Math.max(0,+e.maxErrors)):r.value}),f=B(()=>{let P=(e.validateOn??(a==null?void 0:a.validateOn.value))||"input";P==="lazy"&&(P="input lazy");const L=new Set((P==null?void 0:P.split(" "))??[]);return{blur:L.has("blur")||L.has("input"),input:L.has("input"),submit:L.has("submit"),lazy:L.has("lazy")}}),h=B(()=>{var P;return e.error||(P=e.errorMessages)!=null&&P.length?!1:e.rules.length?l.value?r.value.length||f.value.lazy?null:!0:!r.value.length:!0}),g=Ce(!1),v=B(()=>({[`${t}--error`]:h.value===!1,[`${t}--dirty`]:s.value,[`${t}--disabled`]:u.value,[`${t}--readonly`]:c.value})),p=vi("validation"),w=B(()=>e.name??ie(n));ys(()=>{a==null||a.register({id:w.value,vm:p,validate:E,reset:y,resetValidation:M})}),za(()=>{a==null||a.unregister(w.value)}),rt(async()=>{f.value.lazy||await E(!0),a==null||a.update(w.value,h.value,d.value)}),ra(()=>f.value.input,()=>{de(i,()=>{if(i.value!=null)E();else if(e.focused){const P=de(()=>e.focused,L=>{L||E(),P()})}})}),ra(()=>f.value.blur,()=>{de(()=>e.focused,P=>{P||E()})}),de([h,d],()=>{a==null||a.update(w.value,h.value,d.value)});async function y(){o.value=null,await Ve(),await M()}async function M(){l.value=!0,f.value.lazy?r.value=[]:await E(!0)}async function E(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const L=[];g.value=!0;for(const D of e.rules){if(L.length>=+(e.maxErrors??1))break;const O=await(typeof D=="function"?D:()=>D)(i.value);if(O!==!0){if(O!==!1&&typeof O!="string"){console.warn(`${O} is not a valid value. Rule functions must return boolean true or a string.`);continue}L.push(O||"")}}return r.value=L,g.value=!1,l.value=P,r.value}return{errorMessages:d,isDirty:s,isDisabled:u,isReadonly:c,isPristine:l,isValid:h,isValidating:g,reset:y,resetValidation:M,validate:E,validationClasses:v}}const nu=ve({id:String,appendIcon:Pe,centerAffix:{type:Boolean,default:!0},prependIcon:Pe,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":et(),"onClick:append":et(),...Ye(),...Cn(),...uf(ws(),["maxWidth","minWidth","width"]),...Ct(),...oh()},"VInput"),Ar=be()({name:"VInput",props:{...nu()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:o,emit:i}=t;const{densityClasses:a}=lo(e),{dimensionStyles:r}=bs(e),{themeClasses:l}=on(e),{rtlClasses:s}=io(),{InputIcon:u}=Js(e),c=kn(),d=B(()=>e.id||`input-${c}`),f=B(()=>`${d.value}-messages`),{errorMessages:h,isDirty:g,isDisabled:v,isReadonly:p,isPristine:w,isValid:y,isValidating:M,reset:E,resetValidation:P,validate:L,validationClasses:D}=ih(e,"v-input",d),z=B(()=>({id:d,messagesId:f,isDirty:g,isDisabled:v,isReadonly:p,isPristine:w,isValid:y,isValidating:M,reset:E,resetValidation:P,validate:L})),O=B(()=>{var V;return(V=e.errorMessages)!=null&&V.length||!w.value&&h.value.length?h.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages});return Ee(()=>{var m,N,S,A;const V=!!(o.prepend||e.prependIcon),$=!!(o.append||e.appendIcon),K=O.value.length>0,Z=!e.hideDetails||e.hideDetails==="auto"&&(K||!!o.details);return b("div",{class:["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--hide-spin-buttons":e.hideSpinButtons},a.value,l.value,s.value,D.value,e.class],style:[r.value,e.style]},[V&&b("div",{key:"prepend",class:"v-input__prepend"},[(m=o.prepend)==null?void 0:m.call(o,z.value),e.prependIcon&&b(u,{key:"prepend-icon",name:"prepend"},null)]),o.default&&b("div",{class:"v-input__control"},[(N=o.default)==null?void 0:N.call(o,z.value)]),$&&b("div",{key:"append",class:"v-input__append"},[e.appendIcon&&b(u,{key:"append-icon",name:"append"},null),(S=o.append)==null?void 0:S.call(o,z.value)]),Z&&b("div",{class:"v-input__details"},[b(th,{id:f.value,active:K,messages:O.value},{message:o.message}),(A=o.details)==null?void 0:A.call(o,z.value)])])}),{reset:E,resetValidation:P,validate:L,isValid:y,errorMessages:h}}});function ah(e){let{selectedElement:t,containerElement:n,isRtl:o,isHorizontal:i}=e;const a=Yn(i,n),r=ou(i,o,n),l=Yn(i,t),s=iu(i,t),u=l*.4;return r>s?s-u:r+a<s+l?s-a+l+u:r}function rh(e){let{selectedElement:t,containerElement:n,isHorizontal:o}=e;const i=Yn(o,n),a=iu(o,t),r=Yn(o,t);return a-i/2+r/2}function Dr(e,t){const n=e?"scrollWidth":"scrollHeight";return(t==null?void 0:t[n])||0}function lh(e,t){const n=e?"clientWidth":"clientHeight";return(t==null?void 0:t[n])||0}function ou(e,t,n){if(!n)return 0;const{scrollLeft:o,offsetWidth:i,scrollWidth:a}=n;return e?t?a-i+o:o:n.scrollTop}function Yn(e,t){const n=e?"offsetWidth":"offsetHeight";return(t==null?void 0:t[n])||0}function iu(e,t){const n=e?"offsetLeft":"offsetTop";return(t==null?void 0:t[n])||0}const sh=Symbol.for("vuetify:v-slide-group"),Ka=ve({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:sh},nextIcon:{type:Pe,default:"$next"},prevIcon:{type:Pe,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...Ye(),...gi({mobile:null}),...nn(),...Hs({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Wo=be()({name:"VSlideGroup",props:Ka(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:o}=io(),{displayClasses:i,mobile:a}=En(e),r=Ua(e,e.symbol),l=Ce(!1),s=Ce(0),u=Ce(0),c=Ce(0),d=B(()=>e.direction==="horizontal"),{resizeRef:f,contentRect:h}=Ln(),{resizeRef:g,contentRect:v}=Ln(),p=cf(),w=B(()=>({container:f.el,duration:200,easing:"easeOutQuart"})),y=B(()=>r.selected.value.length?r.items.value.findIndex(k=>k.id===r.selected.value[0]):-1),M=B(()=>r.selected.value.length?r.items.value.findIndex(k=>k.id===r.selected.value[r.selected.value.length-1]):-1);if(pn){let k=-1;de(()=>[r.selected.value,h.value,v.value,d.value],()=>{cancelAnimationFrame(k),k=requestAnimationFrame(()=>{if(h.value&&v.value){const T=d.value?"width":"height";u.value=h.value[T],c.value=v.value[T],l.value=u.value+1<c.value}if(y.value>=0&&g.el){const T=g.el.children[M.value];P(T,e.centerActive)}})})}const E=Ce(!1);function P(k,T){let Y=0;T?Y=rh({containerElement:f.el,isHorizontal:d.value,selectedElement:k}):Y=ah({containerElement:f.el,isHorizontal:d.value,isRtl:o.value,selectedElement:k}),L(Y)}function L(k){if(!pn||!f.el)return;const T=Yn(d.value,f.el),Y=ou(d.value,o.value,f.el);if(!(Dr(d.value,f.el)<=T||Math.abs(k-Y)<16)){if(d.value&&o.value&&f.el){const{scrollWidth:G,offsetWidth:U}=f.el;k=G-U-k}d.value?p.horizontal(k,w.value):p(k,w.value)}}function D(k){const{scrollTop:T,scrollLeft:Y}=k.target;s.value=d.value?Y:T}function z(k){if(E.value=!0,!(!l.value||!g.el)){for(const T of k.composedPath())for(const Y of g.el.children)if(Y===T){P(Y);return}}}function O(k){E.value=!1}let V=!1;function $(k){var T;!V&&!E.value&&!(k.relatedTarget&&((T=g.el)!=null&&T.contains(k.relatedTarget)))&&m(),V=!1}function K(){V=!0}function Z(k){if(!g.el)return;function T(Y){k.preventDefault(),m(Y)}d.value?k.key==="ArrowRight"?T(o.value?"prev":"next"):k.key==="ArrowLeft"&&T(o.value?"next":"prev"):k.key==="ArrowDown"?T("next"):k.key==="ArrowUp"&&T("prev"),k.key==="Home"?T("first"):k.key==="End"&&T("last")}function m(k){var Y,X;if(!g.el)return;let T;if(!k)T=la(g.el)[0];else if(k==="next"){if(T=(Y=g.el.querySelector(":focus"))==null?void 0:Y.nextElementSibling,!T)return m("first")}else if(k==="prev"){if(T=(X=g.el.querySelector(":focus"))==null?void 0:X.previousElementSibling,!T)return m("last")}else k==="first"?T=g.el.firstElementChild:k==="last"&&(T=g.el.lastElementChild);T&&T.focus({preventScroll:!0})}function N(k){const T=d.value&&o.value?-1:1,Y=(k==="prev"?-T:T)*u.value;let X=s.value+Y;if(d.value&&o.value&&f.el){const{scrollWidth:G,offsetWidth:U}=f.el;X+=G-U}L(X)}const S=B(()=>({next:r.next,prev:r.prev,select:r.select,isSelected:r.isSelected})),A=B(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!a.value;case!0:return l.value||Math.abs(s.value)>0;case"mobile":return a.value||l.value||Math.abs(s.value)>0;default:return!a.value&&(l.value||Math.abs(s.value)>0)}}),C=B(()=>Math.abs(s.value)>1),I=B(()=>{if(!f.value)return!1;const k=Dr(d.value,f.el),T=lh(d.value,f.el);return k-T-Math.abs(s.value)>1});return Ee(()=>b(e.tag,{class:["v-slide-group",{"v-slide-group--vertical":!d.value,"v-slide-group--has-affixes":A.value,"v-slide-group--is-overflowing":l.value},i.value,e.class],style:e.style,tabindex:E.value||r.selected.value.length?-1:0,onFocus:$},{default:()=>{var k,T,Y;return[A.value&&b("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!C.value}],onMousedown:K,onClick:()=>C.value&&N("prev")},[((k=n.prev)==null?void 0:k.call(n,S.value))??b(Ir,null,{default:()=>[b(Ke,{icon:o.value?e.nextIcon:e.prevIcon},null)]})]),b("div",{key:"container",ref:f,class:"v-slide-group__container",onScroll:D},[b("div",{ref:g,class:"v-slide-group__content",onFocusin:z,onFocusout:O,onKeydown:Z},[(T=n.default)==null?void 0:T.call(n,S.value)])]),A.value&&b("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!I.value}],onMousedown:K,onClick:()=>I.value&&N("next")},[((Y=n.next)==null?void 0:Y.call(n,S.value))??b(Ir,null,{default:()=>[b(Ke,{icon:o.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:r.selected,scrollTo:N,scrollOffset:s,focus:m}}}),au=Symbol.for("vuetify:v-chip-group"),uh=ve({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:fi},...Ka(),...Ye(),...Hs({selectedClass:"v-chip--selected"}),...nn(),...Ct(),...Ga({variant:"tonal"})},"VChipGroup");be()({name:"VChipGroup",props:uh(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:o}=on(e),{isSelected:i,select:a,next:r,prev:l,selected:s}=Ua(e,au);return mn({VChip:{color:oe(e,"color"),disabled:oe(e,"disabled"),filter:oe(e,"filter"),variant:oe(e,"variant")}}),Ee(()=>{const u=Wo.filterProps(e);return b(Wo,he(u,{class:["v-chip-group",{"v-chip-group--column":e.column},o.value,e.class],style:e.style}),{default:()=>{var c;return[(c=n.default)==null?void 0:c.call(n,{isSelected:i,select:a,next:r,prev:l,selected:s.value})]}})}),{}}});const ch=ve({activeClass:String,appendAvatar:String,appendIcon:Pe,closable:Boolean,closeIcon:{type:Pe,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:Pe,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:et(),onClickOnce:et(),...Ns(),...Ye(),...Cn(),...Ps(),...Gs(),...Ha(),...Nf(),...Ms(),...nn({tag:"span"}),...Ct(),...Ga({variant:"tonal"})},"VChip"),qa=be()({name:"VChip",directives:{Ripple:Ts},props:ch(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:o,slots:i}=t;const{t:a}=gt(),{borderClasses:r}=Pf(e),{colorClasses:l,colorStyles:s,variantClasses:u}=Mf(e),{densityClasses:c}=lo(e),{elevationClasses:d}=Tf(e),{roundedClasses:f}=As(e),{sizeClasses:h}=Vf(e),{themeClasses:g}=on(e),v=Te(e,"modelValue"),p=Ys(e,au,!1),w=Af(e,n),y=B(()=>e.link!==!1&&w.isLink.value),M=B(()=>!e.disabled&&e.link!==!1&&(!!p||e.link||w.isClickable.value)),E=B(()=>({"aria-label":a(e.closeLabel),onClick(D){D.preventDefault(),D.stopPropagation(),v.value=!1,o("click:close",D)}}));function P(D){var z;o("click",D),M.value&&((z=w.navigate)==null||z.call(w,D),p==null||p.toggle())}function L(D){(D.key==="Enter"||D.key===" ")&&(D.preventDefault(),P(D))}return()=>{const D=w.isLink.value?"a":e.tag,z=!!(e.appendIcon||e.appendAvatar),O=!!(z||i.append),V=!!(i.close||e.closable),$=!!(i.filter||e.filter)&&p,K=!!(e.prependIcon||e.prependAvatar),Z=!!(K||i.prepend),m=!p||p.isSelected.value;return v.value&&Rt(b(D,{class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":M.value,"v-chip--filter":$,"v-chip--pill":e.pill},g.value,r.value,m?l.value:void 0,c.value,d.value,f.value,h.value,u.value,p==null?void 0:p.selectedClass.value,e.class],style:[m?s.value:void 0,e.style],disabled:e.disabled||void 0,draggable:e.draggable,href:w.href.value,tabindex:M.value?0:void 0,onClick:P,onKeydown:M.value&&!y.value&&L},{default:()=>{var N;return[Df(M.value,"v-chip"),$&&b(Ds,{key:"filter"},{default:()=>[Rt(b("div",{class:"v-chip__filter"},[i.filter?b(Ot,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},i.filter):b(Ke,{key:"filter-icon",icon:e.filterIcon},null)]),[[mi,p.isSelected.value]])]}),Z&&b("div",{key:"prepend",class:"v-chip__prepend"},[i.prepend?b(Ot,{key:"prepend-defaults",disabled:!K,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},i.prepend):b(ye,null,[e.prependIcon&&b(Ke,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&b(Uo,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),b("div",{class:"v-chip__content","data-no-activator":""},[((N=i.default)==null?void 0:N.call(i,{isSelected:p==null?void 0:p.isSelected.value,selectedClass:p==null?void 0:p.selectedClass.value,select:p==null?void 0:p.select,toggle:p==null?void 0:p.toggle,value:p==null?void 0:p.value.value,disabled:e.disabled}))??e.text]),O&&b("div",{key:"append",class:"v-chip__append"},[i.append?b(Ot,{key:"append-defaults",disabled:!z,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},i.append):b(ye,null,[e.appendIcon&&b(Ke,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&b(Uo,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),V&&b("button",he({key:"close",class:"v-chip__close",type:"button"},E.value),[i.close?b(Ot,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},i.close):b(Ke,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[hi("ripple"),M.value&&e.ripple,null]])}}}),dh=ve({id:String,...$n(Lf({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Xs}}),["absolute"])},"VMenu"),ru=be()({name:"VMenu",props:dh(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const o=Te(e,"modelValue"),{scopeId:i}=Us(),a=kn(),r=B(()=>e.id||`v-menu-${a}`),l=se(),s=Le(Nr,null),u=Ce(0);Xe(Nr,{register(){++u.value},unregister(){--u.value},closeParents(v){setTimeout(()=>{!u.value&&!e.persistent&&(v==null||v&&!df(v,l.value.contentEl))&&(o.value=!1,s==null||s.closeParents())},40)}});async function c(v){var y,M,E;const p=v.relatedTarget,w=v.target;await Ve(),o.value&&p!==w&&((y=l.value)!=null&&y.contentEl)&&((M=l.value)!=null&&M.globalTop)&&![document,l.value.contentEl].includes(w)&&!l.value.contentEl.contains(w)&&((E=la(l.value.contentEl)[0])==null||E.focus())}de(o,v=>{v?(s==null||s.register(),document.addEventListener("focusin",c,{once:!0})):(s==null||s.unregister(),document.removeEventListener("focusin",c))});function d(v){s==null||s.closeParents(v)}function f(v){var p,w,y;if(!e.disabled)if(v.key==="Tab"||v.key==="Enter"&&!e.closeOnContentClick){if(v.key==="Enter"&&(v.target instanceof HTMLTextAreaElement||v.target instanceof HTMLInputElement&&v.target.closest("form")))return;v.key==="Enter"&&v.preventDefault(),ff(la((p=l.value)==null?void 0:p.contentEl,!1),v.shiftKey?"prev":"next",E=>E.tabIndex>=0)||(o.value=!1,(y=(w=l.value)==null?void 0:w.activatorEl)==null||y.focus())}else["Enter"," "].includes(v.key)&&e.closeOnContentClick&&(o.value=!1,s==null||s.closeParents())}function h(v){var w;if(e.disabled)return;const p=(w=l.value)==null?void 0:w.contentEl;p&&o.value?v.key==="ArrowDown"?(v.preventDefault(),$r(p,"next")):v.key==="ArrowUp"&&(v.preventDefault(),$r(p,"prev")):["ArrowDown","ArrowUp"].includes(v.key)&&(o.value=!0,v.preventDefault(),setTimeout(()=>setTimeout(()=>h(v))))}const g=B(()=>he({"aria-haspopup":"menu","aria-expanded":String(o.value),"aria-owns":r.value,onKeydown:h},e.activatorProps));return Ee(()=>{const v=Pr.filterProps(e);return b(Pr,he({ref:l,id:r.value,class:["v-menu",e.class],style:e.style},v,{modelValue:o.value,"onUpdate:modelValue":p=>o.value=p,absolute:!0,activatorProps:g.value,"onClick:outside":d,onKeydown:f},i),{activator:n.activator,default:function(){for(var p=arguments.length,w=new Array(p),y=0;y<p;y++)w[y]=arguments[y];return b(Ot,{root:"VMenu"},{default:()=>{var M;return[(M=n.default)==null?void 0:M.call(n,...w)]}})}})}),co({id:r,ΨopenChildren:u},l)}}),fh=ve({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Ye(),...yi({transition:{component:Vs}})},"VCounter"),hh=be()({name:"VCounter",functional:!0,props:fh(),setup(e,t){let{slots:n}=t;const o=B(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return Ee(()=>b(Ya,{transition:e.transition},{default:()=>[Rt(b("div",{class:["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class],style:e.style},[n.default?n.default({counter:o.value,max:e.max,value:e.value}):o.value]),[[mi,e.active]])]})),{}}}),vh=ve({floating:Boolean,...Ye()},"VFieldLabel"),bo=be()({name:"VFieldLabel",props:vh(),setup(e,t){let{slots:n}=t;return Ee(()=>b(qs,{class:["v-field-label",{"v-field-label--floating":e.floating},e.class],style:e.style,"aria-hidden":e.floating||void 0},n)),{}}}),gh=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],lu=ve({appendInnerIcon:Pe,bgColor:String,clearable:Boolean,clearIcon:{type:Pe,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:Pe,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>gh.includes(e)},"onClick:clear":et(),"onClick:appendInner":et(),"onClick:prependInner":et(),...Ye(),...Os(),...Ha(),...Ct()},"VField"),su=be()({name:"VField",inheritAttrs:!1,props:{id:String,...eu(),...lu()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:o,slots:i}=t;const{themeClasses:a}=on(e),{loaderClasses:r}=Bs(e),{focusClasses:l,isFocused:s,focus:u,blur:c}=tu(e),{InputIcon:d}=Js(e),{roundedClasses:f}=As(e),{rtlClasses:h}=io(),g=B(()=>e.dirty||e.active),v=B(()=>!e.singleLine&&!!(e.label||i.label)),p=kn(),w=B(()=>e.id||`input-${p}`),y=B(()=>`${w.value}-messages`),M=se(),E=se(),P=se(),L=B(()=>["plain","underlined"].includes(e.variant)),{backgroundColorClasses:D,backgroundColorStyles:z}=pi(oe(e,"bgColor")),{textColorClasses:O,textColorStyles:V}=so(B(()=>e.error||e.disabled?void 0:g.value&&s.value?e.color:e.baseColor));de(g,m=>{if(v.value){const N=M.value.$el,S=E.value.$el;requestAnimationFrame(()=>{const A=Hf(N),C=S.getBoundingClientRect(),I=C.x-A.x,k=C.y-A.y-(A.height/2-C.height/2),T=C.width/.75,Y=Math.abs(T-A.width)>1?{maxWidth:Ge(T)}:void 0,X=getComputedStyle(N),G=getComputedStyle(S),U=parseFloat(X.transitionDuration)*1e3||150,te=parseFloat(G.getPropertyValue("--v-field-label-scale")),ee=G.getPropertyValue("color");N.style.visibility="visible",S.style.visibility="hidden",Ws(N,{transform:`translate(${I}px, ${k}px) scale(${te})`,color:ee,...Y},{duration:U,easing:Ks,direction:m?"normal":"reverse"}).finished.then(()=>{N.style.removeProperty("visibility"),S.style.removeProperty("visibility")})})}},{flush:"post"});const $=B(()=>({isActive:g,isFocused:s,controlRef:P,blur:c,focus:u}));function K(m){m.target!==document.activeElement&&m.preventDefault()}function Z(m){var N;m.key!=="Enter"&&m.key!==" "||(m.preventDefault(),m.stopPropagation(),(N=e["onClick:clear"])==null||N.call(e,new MouseEvent("click")))}return Ee(()=>{var I,k,T;const m=e.variant==="outlined",N=!!(i["prepend-inner"]||e.prependInnerIcon),S=!!(e.clearable||i.clear),A=!!(i["append-inner"]||e.appendInnerIcon||S),C=()=>i.label?i.label({...$.value,label:e.label,props:{for:w.value}}):e.label;return b("div",he({class:["v-field",{"v-field--active":g.value,"v-field--appended":A,"v-field--center-affix":e.centerAffix??!L.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":N,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!C(),[`v-field--variant-${e.variant}`]:!0},a.value,D.value,l.value,r.value,f.value,h.value,e.class],style:[z.value,e.style],onClick:K},n),[b("div",{class:"v-field__overlay"},null),b(Rs,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:i.loader}),N&&b("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&b(d,{key:"prepend-icon",name:"prependInner"},null),(I=i["prepend-inner"])==null?void 0:I.call(i,$.value)]),b("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&v.value&&b(bo,{key:"floating-label",ref:E,class:[O.value],floating:!0,for:w.value,style:V.value},{default:()=>[C()]}),b(bo,{ref:M,for:w.value},{default:()=>[C()]}),(k=i.default)==null?void 0:k.call(i,{...$.value,props:{id:w.value,class:"v-field__input","aria-describedby":y.value},focus:u,blur:c})]),S&&b(Ds,{key:"clear"},{default:()=>[Rt(b("div",{class:"v-field__clearable",onMousedown:Y=>{Y.preventDefault(),Y.stopPropagation()}},[b(Ot,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[i.clear?i.clear({...$.value,props:{onKeydown:Z,onFocus:u,onBlur:c,onClick:e["onClick:clear"]}}):b(d,{name:"clear",onKeydown:Z,onFocus:u,onBlur:c},null)]})]),[[mi,e.dirty]])]}),A&&b("div",{key:"append",class:"v-field__append-inner"},[(T=i["append-inner"])==null?void 0:T.call(i,$.value),e.appendInnerIcon&&b(d,{key:"append-icon",name:"appendInner"},null)]),b("div",{class:["v-field__outline",O.value],style:V.value},[m&&b(ye,null,[b("div",{class:"v-field__outline__start"},null),v.value&&b("div",{class:"v-field__outline__notch"},[b(bo,{ref:E,floating:!0,for:w.value},{default:()=>[C()]})]),b("div",{class:"v-field__outline__end"},null)]),L.value&&v.value&&b(bo,{ref:E,floating:!0,for:w.value},{default:()=>[C()]})])])}),{controlRef:P}}});function mh(e){const t=Object.keys(su.props).filter(n=>!gs(n)&&n!=="class"&&n!=="style");return hf(e,t)}const ph=["color","file","time","date","datetime-local","week","month"],Za=ve({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...nu(),...lu()},"VTextField"),Xn=be()({name:"VTextField",directives:{Intersect:Of},inheritAttrs:!1,props:Za(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:o,slots:i}=t;const a=Te(e,"modelValue"),{isFocused:r,focus:l,blur:s}=tu(e),u=B(()=>typeof e.counterValue=="function"?e.counterValue(a.value):typeof e.counterValue=="number"?e.counterValue:(a.value??"").toString().length),c=B(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),d=B(()=>["plain","underlined"].includes(e.variant));function f(L,D){var z,O;!e.autofocus||!L||(O=(z=D[0].target)==null?void 0:z.focus)==null||O.call(z)}const h=se(),g=se(),v=se(),p=B(()=>ph.includes(e.type)||e.persistentPlaceholder||r.value||e.active);function w(){var L;v.value!==document.activeElement&&((L=v.value)==null||L.focus()),r.value||l()}function y(L){o("mousedown:control",L),L.target!==v.value&&(w(),L.preventDefault())}function M(L){w(),o("click:control",L)}function E(L){L.stopPropagation(),w(),Ve(()=>{a.value=null,gf(e["onClick:clear"],L)})}function P(L){var z;const D=L.target;if(a.value=D.value,(z=e.modelModifiers)!=null&&z.trim&&["text","search","password","tel","url"].includes(e.type)){const O=[D.selectionStart,D.selectionEnd];Ve(()=>{D.selectionStart=O[0],D.selectionEnd=O[1]})}}return Ee(()=>{const L=!!(i.counter||e.counter!==!1&&e.counter!=null),D=!!(L||i.details),[z,O]=ms(n),{modelValue:V,...$}=Ar.filterProps(e),K=mh(e);return b(Ar,he({ref:h,modelValue:a.value,"onUpdate:modelValue":Z=>a.value=Z,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":d.value},e.class],style:e.style},z,$,{centerAffix:!d.value,focused:r.value}),{...i,default:Z=>{let{id:m,isDisabled:N,isDirty:S,isReadonly:A,isValid:C}=Z;return b(su,he({ref:g,onMousedown:y,onClick:M,"onClick:clear":E,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},K,{id:m.value,active:p.value||S.value,dirty:S.value||e.dirty,disabled:N.value,focused:r.value,error:C.value===!1}),{...i,default:I=>{let{props:{class:k,...T}}=I;const Y=Rt(b("input",he({ref:v,value:a.value,onInput:P,autofocus:e.autofocus,readonly:A.value,disabled:N.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:w,onBlur:s},T,O),null),[[hi("intersect"),{handler:f},null,{once:!0}]]);return b(ye,null,[e.prefix&&b("span",{class:"v-text-field__prefix"},[b("span",{class:"v-text-field__prefix__text"},[e.prefix])]),i.default?b("div",{class:k,"data-no-activator":""},[i.default(),Y]):vf(Y,{class:k}),e.suffix&&b("span",{class:"v-text-field__suffix"},[b("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:D?Z=>{var m;return b(ye,null,[(m=i.details)==null?void 0:m.call(i,Z),L&&b(ye,null,[b("span",null,null),b(hh,{active:e.persistentCounter||r.value,value:u.value,max:c.value,disabled:e.disabled},i.counter)])])}:void 0})}),co({},h,g,v)}}),yh=ve({renderless:Boolean,...Ye()},"VVirtualScrollItem"),wh=be()({name:"VVirtualScrollItem",inheritAttrs:!1,props:yh(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:o,slots:i}=t;const{resizeRef:a,contentRect:r}=Ln(void 0,"border");de(()=>{var l;return(l=r.value)==null?void 0:l.height},l=>{l!=null&&o("update:height",l)}),Ee(()=>{var l,s;return e.renderless?b(ye,null,[(l=i.default)==null?void 0:l.call(i,{itemRef:a})]):b("div",he({ref:a,class:["v-virtual-scroll__item",e.class],style:e.style},n),[(s=i.default)==null?void 0:s.call(i)])})}}),bh=-1,_h=1,Oi=100,xh=ve({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function Sh(e,t){const n=En(),o=Ce(0);yn(()=>{o.value=parseFloat(e.itemHeight||0)});const i=Ce(0),a=Ce(Math.ceil((parseInt(e.height)||n.height.value)/(o.value||16))||1),r=Ce(0),l=Ce(0),s=se(),u=se();let c=0;const{resizeRef:d,contentRect:f}=Ln();yn(()=>{d.value=s.value});const h=B(()=>{var I;return s.value===document.documentElement?n.height.value:((I=f.value)==null?void 0:I.height)||parseInt(e.height)||0}),g=B(()=>!!(s.value&&u.value&&h.value&&o.value));let v=Array.from({length:t.value.length}),p=Array.from({length:t.value.length});const w=Ce(0);let y=-1;function M(I){return v[I]||o.value}const E=mf(()=>{const I=performance.now();p[0]=0;const k=t.value.length;for(let T=1;T<=k-1;T++)p[T]=(p[T-1]||0)+M(T-1);w.value=Math.max(w.value,performance.now()-I)},w),P=de(g,I=>{I&&(P(),c=u.value.offsetTop,E.immediate(),N(),~y&&Ve(()=>{pn&&window.requestAnimationFrame(()=>{A(y),y=-1})}))});Kt(()=>{E.clear()});function L(I,k){const T=v[I],Y=o.value;o.value=Y?Math.min(o.value,k):k,(T!==k||Y!==o.value)&&(v[I]=k,E())}function D(I){return I=cn(I,0,t.value.length-1),p[I]||0}function z(I){return Eh(p,I)}let O=0,V=0,$=0;de(h,(I,k)=>{k&&(N(),I<k&&requestAnimationFrame(()=>{V=0,N()}))});function K(){if(!s.value||!u.value)return;const I=s.value.scrollTop,k=performance.now();k-$>500?(V=Math.sign(I-O),c=u.value.offsetTop):V=I-O,O=I,$=k,N()}function Z(){!s.value||!u.value||(V=0,$=0,N())}let m=-1;function N(){cancelAnimationFrame(m),m=requestAnimationFrame(S)}function S(){if(!s.value||!h.value)return;const I=O-c,k=Math.sign(V),T=Math.max(0,I-Oi),Y=cn(z(T),0,t.value.length),X=I+h.value+Oi,G=cn(z(X)+1,Y+1,t.value.length);if((k!==bh||Y<i.value)&&(k!==_h||G>a.value)){const U=D(i.value)-D(Y),te=D(G)-D(a.value);Math.max(U,te)>Oi?(i.value=Y,a.value=G):(Y<=0&&(i.value=Y),G>=t.value.length&&(a.value=G))}r.value=D(i.value),l.value=D(t.value.length)-D(a.value)}function A(I){const k=D(I);!s.value||I&&!k?y=I:s.value.scrollTop=k}const C=B(()=>t.value.slice(i.value,a.value).map((I,k)=>({raw:I,index:k+i.value})));return de(t,()=>{v=Array.from({length:t.value.length}),p=Array.from({length:t.value.length}),E.immediate(),N()},{deep:!0}),{containerRef:s,markerRef:u,computedItems:C,paddingTop:r,paddingBottom:l,scrollToIndex:A,handleScroll:K,handleScrollend:Z,handleItemResize:L}}function Eh(e,t){let n=e.length-1,o=0,i=0,a=null,r=-1;if(e[n]<t)return n;for(;o<=n;)if(i=o+n>>1,a=e[i],a>t)n=i-1;else if(a<t)r=i,o=i+1;else return a===t?i:o;return r}const kh=ve({items:{type:Array,default:()=>[]},renderless:Boolean,...xh(),...Ye(),...ws()},"VVirtualScroll"),uu=be()({name:"VVirtualScroll",props:kh(),setup(e,t){let{slots:n}=t;const o=vi("VVirtualScroll"),{dimensionStyles:i}=bs(e),{containerRef:a,markerRef:r,handleScroll:l,handleScrollend:s,handleItemResize:u,scrollToIndex:c,paddingTop:d,paddingBottom:f,computedItems:h}=Sh(e,oe(e,"items"));return ra(()=>e.renderless,()=>{function g(){var w,y;const p=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";a.value===document.documentElement?(document[p]("scroll",l,{passive:!0}),document[p]("scrollend",s)):((w=a.value)==null||w[p]("scroll",l,{passive:!0}),(y=a.value)==null||y[p]("scrollend",s))}rt(()=>{a.value=Gf(o.vnode.el,!0),g(!0)}),Kt(g)}),Ee(()=>{const g=h.value.map(v=>b(wh,{key:v.index,renderless:e.renderless,"onUpdate:height":p=>u(v.index,p)},{default:p=>{var w;return(w=n.default)==null?void 0:w.call(n,{item:v.raw,index:v.index,...p})}}));return e.renderless?b(ye,null,[b("div",{ref:r,class:"v-virtual-scroll__spacer",style:{paddingTop:Ge(d.value)}},null),g,b("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Ge(f.value)}},null)]):b("div",{ref:a,class:["v-virtual-scroll",e.class],onScrollPassive:l,onScrollend:s,style:[i.value,e.style]},[b("div",{ref:r,class:"v-virtual-scroll__container",style:{paddingTop:Ge(d.value),paddingBottom:Ge(f.value)}},[g])])}),{scrollToIndex:c}}});function cu(e,t){const n=Ce(!1);let o;function i(l){cancelAnimationFrame(o),n.value=!0,o=requestAnimationFrame(()=>{o=requestAnimationFrame(()=>{n.value=!1})})}async function a(){await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>{if(n.value){const s=de(n,()=>{s(),l()})}else l()})}async function r(l){var c,d;if(l.key==="Tab"&&((c=t.value)==null||c.focus()),!["PageDown","PageUp","Home","End"].includes(l.key))return;const s=(d=e.value)==null?void 0:d.$el;if(!s)return;(l.key==="Home"||l.key==="End")&&s.scrollTo({top:l.key==="Home"?0:s.scrollHeight,behavior:"smooth"}),await a();const u=s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(l.key==="PageDown"||l.key==="Home"){const f=s.getBoundingClientRect().top;for(const h of u)if(h.getBoundingClientRect().top>=f){h.focus();break}}else{const f=s.getBoundingClientRect().bottom;for(const h of[...u].reverse())if(h.getBoundingClientRect().bottom<=f){h.focus();break}}}return{onListScroll:i,onListKeydown:r}}const du=ve({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Pe,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Bf({itemChildren:!1})},"Select"),$h=ve({...du(),...$n(Za({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...yi({transition:{component:Xs}})},"VSelect"),fu=be()({name:"VSelect",props:$h(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:o}=gt(),i=se(),a=se(),r=se(),l=Te(e,"menu"),s=B({get:()=>l.value,set:C=>{var I;l.value&&!C&&((I=a.value)!=null&&I.ΨopenChildren)||(l.value=C)}}),{items:u,transformIn:c,transformOut:d}=zs(e),f=Te(e,"modelValue",[],C=>c(C===null?[null]:je(C)),C=>{const I=d(C);return e.multiple?I:I[0]??null}),h=B(()=>typeof e.counterValue=="function"?e.counterValue(f.value):typeof e.counterValue=="number"?e.counterValue:f.value.length),g=Wa(),v=B(()=>f.value.map(C=>C.value)),p=Ce(!1),w=B(()=>s.value?e.closeText:e.openText);let y="",M;const E=B(()=>e.hideSelected?u.value.filter(C=>!f.value.some(I=>e.valueComparator(I,C))):u.value),P=B(()=>e.hideNoData&&!E.value.length||e.readonly||(g==null?void 0:g.isReadonly.value)),L=B(()=>{var C;return{...e.menuProps,activatorProps:{...((C=e.menuProps)==null?void 0:C.activatorProps)||{},"aria-haspopup":"listbox"}}}),D=se(),{onListScroll:z,onListKeydown:O}=cu(D,i);function V(C){e.openOnClear&&(s.value=!0)}function $(){P.value||(s.value=!s.value)}function K(C){var X,G;if(!C.key||e.readonly||g!=null&&g.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(C.key)&&C.preventDefault(),["Enter","ArrowDown"," "].includes(C.key)&&(s.value=!0),["Escape","Tab"].includes(C.key)&&(s.value=!1),C.key==="Home"?(X=D.value)==null||X.focus("first"):C.key==="End"&&((G=D.value)==null||G.focus("last"));const I=1e3;function k(U){const te=U.key.length===1,ee=!U.ctrlKey&&!U.metaKey&&!U.altKey;return te&&ee}if(e.multiple||!k(C))return;const T=performance.now();T-M>I&&(y=""),y+=C.key.toLowerCase(),M=T;const Y=u.value.find(U=>U.title.toLowerCase().startsWith(y));if(Y!==void 0){f.value=[Y];const U=E.value.indexOf(Y);pn&&window.requestAnimationFrame(()=>{var te;U>=0&&((te=r.value)==null||te.scrollToIndex(U))})}}function Z(C){let I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!C.props.disabled)if(e.multiple){const k=f.value.findIndex(Y=>e.valueComparator(Y.value,C.value)),T=I??!~k;if(~k){const Y=T?[...f.value,C]:[...f.value];Y.splice(k,1),f.value=Y}else T&&(f.value=[...f.value,C])}else{const k=I!==!1;f.value=k?[C]:[],Ve(()=>{s.value=!1})}}function m(C){var I;(I=D.value)!=null&&I.$el.contains(C.relatedTarget)||(s.value=!1)}function N(){var C;p.value&&((C=i.value)==null||C.focus())}function S(C){p.value=!0}function A(C){if(C==null)f.value=[];else if(Hn(i.value,":autofill")||Hn(i.value,":-webkit-autofill")){const I=u.value.find(k=>k.title===C);I&&Z(I)}else i.value&&(i.value.value="")}return de(s,()=>{if(!e.hideSelected&&s.value&&f.value.length){const C=E.value.findIndex(I=>f.value.some(k=>e.valueComparator(k.value,I.value)));pn&&window.requestAnimationFrame(()=>{var I;C>=0&&((I=r.value)==null||I.scrollToIndex(C))})}}),de(()=>e.items,(C,I)=>{s.value||p.value&&!I.length&&C.length&&(s.value=!0)}),Ee(()=>{const C=!!(e.chips||n.chip),I=!!(!e.hideNoData||E.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),k=f.value.length>0,T=Xn.filterProps(e),Y=k||!p.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return b(Xn,he({ref:i},T,{modelValue:f.value.map(X=>X.props.value).join(", "),"onUpdate:modelValue":A,focused:p.value,"onUpdate:focused":X=>p.value=X,validationValue:f.externalValue,counterValue:h.value,dirty:k,class:["v-select",{"v-select--active-menu":s.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":f.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:Y,"onClick:clear":V,"onMousedown:control":$,onBlur:m,onKeydown:K,"aria-label":o(w.value),title:o(w.value)}),{...n,default:()=>b(ye,null,[b(ru,he({ref:a,modelValue:s.value,"onUpdate:modelValue":X=>s.value=X,activator:"parent",contentClass:"v-select__content",disabled:P.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:N},L.value),{default:()=>[I&&b(Xa,he({ref:D,selected:v.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:X=>X.preventDefault(),onKeydown:O,onFocusin:S,onScrollPassive:z,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var X,G,U;return[(X=n["prepend-item"])==null?void 0:X.call(n),!E.value.length&&!e.hideNoData&&(((G=n["no-data"])==null?void 0:G.call(n))??b(Gn,{title:o(e.noDataText)},null)),b(uu,{ref:r,renderless:!0,items:E.value},{default:te=>{var q;let{item:ee,index:ce,itemRef:ne}=te;const W=he(ee.props,{ref:ne,key:ce,onClick:()=>Z(ee,null)});return((q=n.item)==null?void 0:q.call(n,{item:ee,index:ce,props:W}))??b(Gn,he(W,{role:"option"}),{prepend:j=>{let{isSelected:x}=j;return b(ye,null,[e.multiple&&!e.hideSelected?b(fo,{key:ee.value,modelValue:x,ripple:!1,tabindex:"-1"},null):void 0,ee.props.prependAvatar&&b(Uo,{image:ee.props.prependAvatar},null),ee.props.prependIcon&&b(Ke,{icon:ee.props.prependIcon},null)])}})}}),(U=n["append-item"])==null?void 0:U.call(n)]}})]}),f.value.map((X,G)=>{function U(ne){ne.stopPropagation(),ne.preventDefault(),Z(X,!1)}const te={"onClick:close":U,onKeydown(ne){ne.key!=="Enter"&&ne.key!==" "||(ne.preventDefault(),ne.stopPropagation(),U(ne))},onMousedown(ne){ne.preventDefault(),ne.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ee=C?!!n.chip:!!n.selection,ce=ee?_s(C?n.chip({item:X,index:G,props:te}):n.selection({item:X,index:G})):void 0;if(!(ee&&!ce))return b("div",{key:X.value,class:"v-select__selection"},[C?n.chip?b(Ot,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:X.title}}},{default:()=>[ce]}):b(qa,he({key:"chip",closable:e.closableChips,size:"small",text:X.title,disabled:X.props.disabled},te),null):ce??b("span",{class:"v-select__selection-text"},[X.title,e.multiple&&G<f.value.length-1&&b("span",{class:"v-select__selection-comma"},[Oe(",")])])])})]),"append-inner":function(){var te;for(var X=arguments.length,G=new Array(X),U=0;U<X;U++)G[U]=arguments[U];return b(ye,null,[(te=n["append-inner"])==null?void 0:te.call(n,...G),e.menuIcon?b(Ke,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),co({isFocused:p,menu:s,select:Z},i)}}),Ch=ve({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),hu=Symbol.for("vuetify:data-table-pagination");function Ih(e){const t=Te(e,"page",void 0,o=>+(o??1)),n=Te(e,"itemsPerPage",void 0,o=>+(o??10));return{page:t,itemsPerPage:n}}function Nh(e){const{page:t,itemsPerPage:n,itemsLength:o}=e,i=B(()=>n.value===-1?0:n.value*(t.value-1)),a=B(()=>n.value===-1?o.value:Math.min(o.value,i.value+n.value)),r=B(()=>n.value===-1||o.value===0?1:Math.ceil(o.value/n.value));yn(()=>{t.value>r.value&&(t.value=r.value)});function l(f){n.value=f,t.value=1}function s(){t.value=cn(t.value+1,1,r.value)}function u(){t.value=cn(t.value-1,1,r.value)}function c(f){t.value=cn(f,1,r.value)}const d={page:t,itemsPerPage:n,startIndex:i,stopIndex:a,pageCount:r,itemsLength:o,nextPage:s,prevPage:u,setPage:c,setItemsPerPage:l};return Xe(hu,d),d}function Ph(){const e=Le(hu);if(!e)throw new Error("Missing pagination!");return e}function Mh(e){const t=vi("usePaginatedItems"),{items:n,startIndex:o,stopIndex:i,itemsPerPage:a}=e,r=B(()=>a.value<=0?n.value:n.value.slice(o.value,i.value));return de(r,l=>{t.emit("update:currentItems",l)}),{paginatedItems:r}}const vu=ve({prevIcon:{type:Pe,default:"$prev"},nextIcon:{type:Pe,default:"$next"},firstIcon:{type:Pe,default:"$first"},lastIcon:{type:Pe,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),Or=be()({name:"VDataTableFooter",props:vu(),setup(e,t){let{slots:n}=t;const{t:o}=gt(),{page:i,pageCount:a,startIndex:r,stopIndex:l,itemsLength:s,itemsPerPage:u,setItemsPerPage:c}=Ph(),d=B(()=>e.itemsPerPageOptions.map(f=>typeof f=="number"?{value:f,title:f===-1?o("$vuetify.dataFooter.itemsPerPageAll"):String(f)}:{...f,title:isNaN(Number(f.title))?o(f.title):f.title}));return Ee(()=>{var h;const f=Tr.filterProps(e);return b("div",{class:"v-data-table-footer"},[(h=n.prepend)==null?void 0:h.call(n),b("div",{class:"v-data-table-footer__items-per-page"},[b("span",null,[o(e.itemsPerPageText)]),b(fu,{items:d.value,modelValue:u.value,"onUpdate:modelValue":g=>c(Number(g)),density:"compact",variant:"outlined","hide-details":!0},null)]),b("div",{class:"v-data-table-footer__info"},[b("div",null,[o(e.pageText,s.value?r.value+1:0,l.value,s.value)])]),b("div",{class:"v-data-table-footer__pagination"},[b(Tr,he({modelValue:i.value,"onUpdate:modelValue":g=>i.value=g,density:"comfortable","first-aria-label":e.firstPageLabel,"last-aria-label":e.lastPageLabel,length:a.value,"next-aria-label":e.nextPageLabel,"previous-aria-label":e.prevPageLabel,rounded:!0,"show-first-last-page":!0,"total-visible":e.showCurrentPage?1:0,variant:"plain"},f),null)])])}),{}}}),Ko=pf({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,t)=>{let{slots:n}=t;const o=e.tag??"td";return b(o,{class:["v-data-table__td",{"v-data-table-column--fixed":e.fixed,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`],style:{height:Ge(e.height),width:Ge(e.width),maxWidth:Ge(e.maxWidth),left:Ge(e.fixedOffset||null)}},{default:()=>{var i;return[(i=n.default)==null?void 0:i.call(n)]}})}),Th=ve({headers:Array},"DataTable-header"),gu=Symbol.for("vuetify:data-table-headers"),mu={title:"",sortable:!1},Vh={...mu,width:48};function Ah(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(n=>({element:n,priority:0}));return{enqueue:(n,o)=>{let i=!1;for(let a=0;a<t.length;a++)if(t[a].priority>o){t.splice(a,0,{element:n,priority:o}),i=!0;break}i||t.push({element:n,priority:o})},size:()=>t.length,count:()=>{let n=0;if(!t.length)return 0;const o=Math.floor(t[0].priority);for(let i=0;i<t.length;i++)Math.floor(t[i].priority)===o&&(n+=1);return n},dequeue:()=>t.shift()}}function sa(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)t.push(e);else for(const n of e.children)sa(n,t);return t}function pu(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const n of e)n.key&&t.add(n.key),n.children&&pu(n.children,t);return t}function Dh(e){if(e.key){if(e.key==="data-table-group")return mu;if(["data-table-expand","data-table-select"].includes(e.key))return Vh}}function ja(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(t,...e.children.map(n=>ja(n,t+1))):t}function Oh(e){let t=!1;function n(a){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(a)if(r&&(a.fixed=!0),a.fixed)if(a.children)for(let l=a.children.length-1;l>=0;l--)n(a.children[l],!0);else t?isNaN(+a.width)&&wf(`Multiple fixed columns should have a static width (key: ${a.key})`):a.lastFixed=!0,t=!0;else if(a.children)for(let l=a.children.length-1;l>=0;l--)n(a.children[l]);else t=!1}for(let a=e.length-1;a>=0;a--)n(e[a]);function o(a){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!a)return r;if(a.children){a.fixedOffset=r;for(const l of a.children)r=o(l,r)}else a.fixed&&(a.fixedOffset=r,r+=parseFloat(a.width||"0")||0);return r}let i=0;for(const a of e)i=o(a,i)}function Bh(e,t){const n=[];let o=0;const i=Ah(e);for(;i.size()>0;){let r=i.count();const l=[];let s=1;for(;r>0;){const{element:u,priority:c}=i.dequeue(),d=t-o-ja(u);if(l.push({...u,rowspan:d??1,colspan:u.children?sa(u).length:1}),u.children)for(const f of u.children){const h=c%1+s/Math.pow(10,o+2);i.enqueue(f,o+d+h)}s+=1,r-=1}o+=1,n.push(l)}return{columns:e.map(r=>sa(r)).flat(),headers:n}}function yu(e){const t=[];for(const n of e){const o={...Dh(n),...n},i=o.key??(typeof o.value=="string"?o.value:null),a=o.value??i??null,r={...o,key:i,value:a,sortable:o.sortable??(o.key!=null||!!o.sort),children:o.children?yu(o.children):void 0};t.push(r)}return t}function Rh(e,t){const n=se([]),o=se([]),i=se({}),a=se({}),r=se({});yn(()=>{var v,p,w;const u=(e.headers||Object.keys(e.items[0]??{}).map(y=>({key:y,title:yf(y)}))).slice(),c=pu(u);(v=t==null?void 0:t.groupBy)!=null&&v.value.length&&!c.has("data-table-group")&&u.unshift({key:"data-table-group",title:"Group"}),(p=t==null?void 0:t.showSelect)!=null&&p.value&&!c.has("data-table-select")&&u.unshift({key:"data-table-select"}),(w=t==null?void 0:t.showExpand)!=null&&w.value&&!c.has("data-table-expand")&&u.push({key:"data-table-expand"});const d=yu(u);Oh(d);const f=Math.max(...d.map(y=>ja(y)))+1,h=Bh(d,f);n.value=h.headers,o.value=h.columns;const g=h.headers.flat(1);for(const y of g)y.key&&(y.sortable&&(y.sort&&(i.value[y.key]=y.sort),y.sortRaw&&(a.value[y.key]=y.sortRaw)),y.filter&&(r.value[y.key]=y.filter))});const l={headers:n,columns:o,sortFunctions:i,sortRawFunctions:a,filterFunctions:r};return Xe(gu,l),l}function wi(){const e=Le(gu);if(!e)throw new Error("Missing headers!");return e}const zh={showSelectAll:!1,allSelected:()=>[],select:e=>{var o;let{items:t,value:n}=e;return new Set(n?[(o=t[0])==null?void 0:o.value]:[])},selectAll:e=>{let{selected:t}=e;return t}},wu={showSelectAll:!0,allSelected:e=>{let{currentPage:t}=e;return t},select:e=>{let{items:t,value:n,selected:o}=e;for(const i of t)n?o.add(i.value):o.delete(i.value);return o},selectAll:e=>{let{value:t,currentPage:n,selected:o}=e;return wu.select({items:n,value:t,selected:o})}},bu={showSelectAll:!0,allSelected:e=>{let{allItems:t}=e;return t},select:e=>{let{items:t,value:n,selected:o}=e;for(const i of t)n?o.add(i.value):o.delete(i.value);return o},selectAll:e=>{let{value:t,allItems:n,selected:o}=e;return bu.select({items:n,value:t,selected:o})}},Fh=ve({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:fi}},"DataTable-select"),_u=Symbol.for("vuetify:data-table-selection");function Lh(e,t){let{allItems:n,currentPage:o}=t;const i=Te(e,"modelValue",e.modelValue,w=>new Set(je(w).map(y=>{var M;return((M=n.value.find(E=>e.valueComparator(y,E.value)))==null?void 0:M.value)??y})),w=>[...w.values()]),a=B(()=>n.value.filter(w=>w.selectable)),r=B(()=>o.value.filter(w=>w.selectable)),l=B(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return zh;case"all":return bu;case"page":default:return wu}});function s(w){return je(w).every(y=>i.value.has(y.value))}function u(w){return je(w).some(y=>i.value.has(y.value))}function c(w,y){const M=l.value.select({items:w,value:y,selected:new Set(i.value)});i.value=M}function d(w){c([w],!s([w]))}function f(w){const y=l.value.selectAll({value:w,allItems:a.value,currentPage:r.value,selected:new Set(i.value)});i.value=y}const h=B(()=>i.value.size>0),g=B(()=>{const w=l.value.allSelected({allItems:a.value,currentPage:r.value});return!!w.length&&s(w)}),v=B(()=>l.value.showSelectAll),p={toggleSelect:d,select:c,selectAll:f,isSelected:s,isSomeSelected:u,someSelected:h,allSelected:g,showSelectAll:v};return Xe(_u,p),p}function bi(){const e=Le(_u);if(!e)throw new Error("Missing selection!");return e}const Hh=ve({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),xu=Symbol.for("vuetify:data-table-sort");function Gh(e){const t=Te(e,"sortBy"),n=oe(e,"mustSort"),o=oe(e,"multiSort");return{sortBy:t,mustSort:n,multiSort:o}}function Yh(e){const{sortBy:t,mustSort:n,multiSort:o,page:i}=e,a=s=>{if(s.key==null)return;let u=t.value.map(d=>({...d}))??[];const c=u.find(d=>d.key===s.key);c?c.order==="desc"?n.value?c.order="asc":u=u.filter(d=>d.key!==s.key):c.order="desc":o.value?u=[...u,{key:s.key,order:"asc"}]:u=[{key:s.key,order:"asc"}],t.value=u,i&&(i.value=1)};function r(s){return!!t.value.find(u=>u.key===s.key)}const l={sortBy:t,toggleSort:a,isSorted:r};return Xe(xu,l),l}function Su(){const e=Le(xu);if(!e)throw new Error("Missing sort!");return e}function Xh(e,t,n,o){const i=gt();return{sortedItems:B(()=>{var r,l;return n.value.length?Uh(t.value,n.value,i.current.value,{transform:o==null?void 0:o.transform,sortFunctions:{...e.customKeySort,...(r=o==null?void 0:o.sortFunctions)==null?void 0:r.value},sortRawFunctions:(l=o==null?void 0:o.sortRawFunctions)==null?void 0:l.value}):t.value})}}function Uh(e,t,n,o){const i=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"});return e.map(r=>[r,o!=null&&o.transform?o.transform(r):r]).sort((r,l)=>{var s,u;for(let c=0;c<t.length;c++){let d=!1;const f=t[c].key,h=t[c].order??"asc";if(h===!1)continue;let g=Xo(r[1],f),v=Xo(l[1],f),p=r[0].raw,w=l[0].raw;if(h==="desc"&&([g,v]=[v,g],[p,w]=[w,p]),(s=o==null?void 0:o.sortRawFunctions)!=null&&s[f]){const y=o.sortRawFunctions[f](p,w);if(y==null)continue;if(d=!0,y)return y}if((u=o==null?void 0:o.sortFunctions)!=null&&u[f]){const y=o.sortFunctions[f](g,v);if(y==null)continue;if(d=!0,y)return y}if(!d){if(g instanceof Date&&v instanceof Date)return g.getTime()-v.getTime();if([g,v]=[g,v].map(y=>y!=null?y.toString().toLocaleLowerCase():y),g!==v)return wo(g)&&wo(v)?0:wo(g)?-1:wo(v)?1:!isNaN(g)&&!isNaN(v)?Number(g)-Number(v):i.compare(g,v)}}return 0}).map(r=>{let[l]=r;return l})}const Eu=ve({color:String,sticky:Boolean,disableSort:Boolean,multiSort:Boolean,sortAscIcon:{type:Pe,default:"$sortAsc"},sortDescIcon:{type:Pe,default:"$sortDesc"},headerProps:{type:Object},...gi(),...Os()},"VDataTableHeaders"),Br=be()({name:"VDataTableHeaders",props:Eu(),setup(e,t){let{slots:n}=t;const{t:o}=gt(),{toggleSort:i,sortBy:a,isSorted:r}=Su(),{someSelected:l,allSelected:s,selectAll:u,showSelectAll:c}=bi(),{columns:d,headers:f}=wi(),{loaderClasses:h}=Bs(e);function g(z,O){if(!(!e.sticky&&!z.fixed))return{position:"sticky",left:z.fixed?Ge(z.fixedOffset):void 0,top:e.sticky?`calc(var(--v-table-header-height) * ${O})`:void 0}}function v(z){const O=a.value.find(V=>V.key===z.key);return O?O.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:p,backgroundColorStyles:w}=pi(e,"color"),{displayClasses:y,mobile:M}=En(e),E=B(()=>({headers:f.value,columns:d.value,toggleSort:i,isSorted:r,sortBy:a.value,someSelected:l.value,allSelected:s.value,selectAll:u,getSortIcon:v})),P=B(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky},y.value,h.value]),L=z=>{let{column:O,x:V,y:$}=z;const K=O.key==="data-table-select"||O.key==="data-table-expand",Z=he(e.headerProps??{},O.headerProps??{});return b(Ko,he({tag:"th",align:O.align,class:[{"v-data-table__th--sortable":O.sortable&&!e.disableSort,"v-data-table__th--sorted":r(O),"v-data-table__th--fixed":O.fixed},...P.value],style:{width:Ge(O.width),minWidth:Ge(O.minWidth),maxWidth:Ge(O.maxWidth),...g(O,$)},colspan:O.colspan,rowspan:O.rowspan,onClick:O.sortable?()=>i(O):void 0,fixed:O.fixed,nowrap:O.nowrap,lastFixed:O.lastFixed,noPadding:K},Z),{default:()=>{var S;const m=`header.${O.key}`,N={column:O,selectAll:u,isSorted:r,toggleSort:i,sortBy:a.value,someSelected:l.value,allSelected:s.value,getSortIcon:v};return n[m]?n[m](N):O.key==="data-table-select"?((S=n["header.data-table-select"])==null?void 0:S.call(n,N))??(c.value&&b(fo,{modelValue:s.value,indeterminate:l.value&&!s.value,"onUpdate:modelValue":u},null)):b("div",{class:"v-data-table-header__content"},[b("span",null,[O.title]),O.sortable&&!e.disableSort&&b(Ke,{key:"icon",class:"v-data-table-header__sort-icon",icon:v(O)},null),e.multiSort&&r(O)&&b("div",{key:"badge",class:["v-data-table-header__sort-badge",...p.value],style:w.value},[a.value.findIndex(A=>A.key===O.key)+1])])}})},D=()=>{const z=he(e.headerProps??{}??{}),O=B(()=>d.value.filter($=>($==null?void 0:$.sortable)&&!e.disableSort)),V=B(()=>{if(d.value.find(K=>K.key==="data-table-select")!=null)return s.value?"$checkboxOn":l.value?"$checkboxIndeterminate":"$checkboxOff"});return b(Ko,he({tag:"th",class:[...P.value],colspan:f.value.length+1},z),{default:()=>[b("div",{class:"v-data-table-header__content"},[b(fu,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:O.value,label:o("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>a.value=[],appendIcon:V.value,"onClick:append":()=>u(!s.value)},{...n,chip:$=>{var K;return b(qa,{onClick:(K=$.item.raw)!=null&&K.sortable?()=>i($.item.raw):void 0,onMousedown:Z=>{Z.preventDefault(),Z.stopPropagation()}},{default:()=>[$.item.title,b(Ke,{class:["v-data-table__td-sort-icon",r($.item.raw)&&"v-data-table__td-sort-icon-active"],icon:v($.item.raw),size:"small"},null)]})}})])]})};Ee(()=>M.value?b("tr",null,[b(D,null,null)]):b(ye,null,[n.headers?n.headers(E.value):f.value.map((z,O)=>b("tr",null,[z.map((V,$)=>b(L,{column:V,x:$,y:O},null))])),e.loading&&b("tr",{class:"v-data-table-progress"},[b("th",{colspan:d.value.length},[b(Rs,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:n.loader})])])]))}}),Wh=ve({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),ku=Symbol.for("vuetify:data-table-group");function Kh(e){return{groupBy:Te(e,"groupBy")}}function qh(e){const{disableSort:t,groupBy:n,sortBy:o}=e,i=se(new Set),a=B(()=>n.value.map(c=>({...c,order:c.order??!1})).concat(t!=null&&t.value?[]:o.value));function r(c){return i.value.has(c.id)}function l(c){const d=new Set(i.value);r(c)?d.delete(c.id):d.add(c.id),i.value=d}function s(c){function d(f){const h=[];for(const g of f.items)"type"in g&&g.type==="group"?h.push(...d(g)):h.push(g);return h}return d({type:"group",items:c,id:"dummy",key:"dummy",value:"dummy",depth:0})}const u={sortByWithGroups:a,toggleGroup:l,opened:i,groupBy:n,extractRows:s,isGroupOpen:r};return Xe(ku,u),u}function $u(){const e=Le(ku);if(!e)throw new Error("Missing group!");return e}function Zh(e,t){if(!e.length)return[];const n=new Map;for(const o of e){const i=Xo(o.raw,t);n.has(i)||n.set(i,[]),n.get(i).push(o)}return n}function Cu(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!t.length)return[];const i=Zh(e,t[0]),a=[],r=t.slice(1);return i.forEach((l,s)=>{const u=t[0],c=`${o}_${u}_${s}`;a.push({depth:n,id:c,key:u,value:s,items:r.length?Cu(l,r,n+1,c):l,type:"group"})}),a}function Iu(e,t){const n=[];for(const o of e)"type"in o&&o.type==="group"?(o.value!=null&&n.push(o),(t.has(o.id)||o.value==null)&&n.push(...Iu(o.items,t))):n.push(o);return n}function jh(e,t,n){return{flatItems:B(()=>{if(!t.value.length)return e.value;const i=Cu(e.value,t.value.map(a=>a.key));return Iu(i,n.value)})}}const Qh=ve({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),Jh=be()({name:"VDataTableGroupHeaderRow",props:Qh(),setup(e,t){let{slots:n}=t;const{isGroupOpen:o,toggleGroup:i,extractRows:a}=$u(),{isSelected:r,isSomeSelected:l,select:s}=bi(),{columns:u}=wi(),c=B(()=>a([e.item]));return()=>b("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[u.value.map(d=>{var f,h;if(d.key==="data-table-group"){const g=o(e.item)?"$expand":"$next",v=()=>i(e.item);return((f=n["data-table-group"])==null?void 0:f.call(n,{item:e.item,count:c.value.length,props:{icon:g,onClick:v}}))??b(Ko,{class:"v-data-table-group-header-row__column"},{default:()=>[b(We,{size:"small",variant:"text",icon:g,onClick:v},null),b("span",null,[e.item.value]),b("span",null,[Oe("("),c.value.length,Oe(")")])]})}if(d.key==="data-table-select"){const g=r(c.value),v=l(c.value)&&!g,p=w=>s(c.value,w);return((h=n["data-table-select"])==null?void 0:h.call(n,{props:{modelValue:g,indeterminate:v,"onUpdate:modelValue":p}}))??b("td",null,[b(fo,{modelValue:g,indeterminate:v,"onUpdate:modelValue":p},null)])}return b("td",null,null)})])}}),ev=ve({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),Nu=Symbol.for("vuetify:datatable:expanded");function tv(e){const t=oe(e,"expandOnClick"),n=Te(e,"expanded",e.expanded,l=>new Set(l),l=>[...l.values()]);function o(l,s){const u=new Set(n.value);s?u.add(l.value):u.delete(l.value),n.value=u}function i(l){return n.value.has(l.value)}function a(l){o(l,!i(l))}const r={expand:o,expanded:n,expandOnClick:t,isExpanded:i,toggleExpand:a};return Xe(Nu,r),r}function Pu(){const e=Le(Nu);if(!e)throw new Error("foo");return e}const nv=ve({index:Number,item:Object,cellProps:[Object,Function],onClick:et(),onContextmenu:et(),onDblclick:et(),...gi()},"VDataTableRow"),ov=be()({name:"VDataTableRow",props:nv(),setup(e,t){let{slots:n}=t;const{displayClasses:o,mobile:i}=En(e,"v-data-table__tr"),{isSelected:a,toggleSelect:r,someSelected:l,allSelected:s,selectAll:u}=bi(),{isExpanded:c,toggleExpand:d}=Pu(),{toggleSort:f,sortBy:h,isSorted:g}=Su(),{columns:v}=wi();Ee(()=>b("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},o.value],onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&v.value.map((p,w)=>{const y=e.item,M=`item.${p.key}`,E=`header.${p.key}`,P={index:e.index,item:y.raw,internalItem:y,value:Xo(y.columns,p.key),column:p,isSelected:a,toggleSelect:r,isExpanded:c,toggleExpand:d},L={column:p,selectAll:u,isSorted:g,toggleSort:f,sortBy:h.value,someSelected:l.value,allSelected:s.value,getSortIcon:()=>""},D=typeof e.cellProps=="function"?e.cellProps({index:P.index,item:P.item,internalItem:P.internalItem,value:P.value,column:p}):e.cellProps,z=typeof p.cellProps=="function"?p.cellProps({index:P.index,item:P.item,internalItem:P.internalItem,value:P.value}):p.cellProps;return b(Ko,he({align:p.align,class:{"v-data-table__td--expanded-row":p.key==="data-table-expand","v-data-table__td--select-row":p.key==="data-table-select"},fixed:p.fixed,fixedOffset:p.fixedOffset,lastFixed:p.lastFixed,maxWidth:i.value?void 0:p.maxWidth,noPadding:p.key==="data-table-select"||p.key==="data-table-expand",nowrap:p.nowrap,width:i.value?void 0:p.width},D,z),{default:()=>{var V,$,K,Z,m;if(n[M]&&!i.value)return(V=n[M])==null?void 0:V.call(n,P);if(p.key==="data-table-select")return(($=n["item.data-table-select"])==null?void 0:$.call(n,P))??b(fo,{disabled:!y.selectable,modelValue:a([y]),onClick:Cr(()=>r(y),["stop"])},null);if(p.key==="data-table-expand")return((K=n["item.data-table-expand"])==null?void 0:K.call(n,P))??b(We,{icon:c(y)?"$collapse":"$expand",size:"small",variant:"text",onClick:Cr(()=>d(y),["stop"])},null);const O=at(P.value);return i.value?b(ye,null,[b("div",{class:"v-data-table__td-title"},[((Z=n[E])==null?void 0:Z.call(n,L))??p.title]),b("div",{class:"v-data-table__td-value"},[((m=n[M])==null?void 0:m.call(n,P))??O])]):O}})})]))}}),Mu=ve({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...gi()},"VDataTableRows"),Rr=be()({name:"VDataTableRows",inheritAttrs:!1,props:Mu(),setup(e,t){let{attrs:n,slots:o}=t;const{columns:i}=wi(),{expandOnClick:a,toggleExpand:r,isExpanded:l}=Pu(),{isSelected:s,toggleSelect:u}=bi(),{toggleGroup:c,isGroupOpen:d}=$u(),{t:f}=gt(),{mobile:h}=En(e);return Ee(()=>{var g,v;return e.loading&&(!e.items.length||o.loading)?b("tr",{class:"v-data-table-rows-loading",key:"loading"},[b("td",{colspan:i.value.length},[((g=o.loading)==null?void 0:g.call(o))??f(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?b("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[b("td",{colspan:i.value.length},[((v=o["no-data"])==null?void 0:v.call(o))??f(e.noDataText)])]):b(ye,null,[e.items.map((p,w)=>{var E;if(p.type==="group"){const P={index:w,item:p,columns:i.value,isExpanded:l,toggleExpand:r,isSelected:s,toggleSelect:u,toggleGroup:c,isGroupOpen:d};return o["group-header"]?o["group-header"](P):b(Jh,he({key:`group-header_${p.id}`,item:p},Mr(n,":group-header",()=>P)),o)}const y={index:w,item:p.raw,internalItem:p,columns:i.value,isExpanded:l,toggleExpand:r,isSelected:s,toggleSelect:u},M={...y,props:he({key:`item_${p.key??p.index}`,onClick:a.value?()=>{r(p)}:void 0,index:w,item:p,cellProps:e.cellProps,mobile:h.value},Mr(n,":row",()=>y),typeof e.rowProps=="function"?e.rowProps({item:y.item,index:y.index,internalItem:y.internalItem}):e.rowProps)};return b(ye,{key:M.props.key},[o.item?o.item(M):b(ov,M.props,o),l(p)&&((E=o["expanded-row"])==null?void 0:E.call(o,y))])})])}),{}}}),Tu=ve({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...Ye(),...Cn(),...nn(),...Ct()},"VTable"),zr=be()({name:"VTable",props:Tu(),setup(e,t){let{slots:n,emit:o}=t;const{themeClasses:i}=on(e),{densityClasses:a}=lo(e);return Ee(()=>b(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":e.hover},i.value,a.value,e.class],style:e.style},{default:()=>{var r,l,s;return[(r=n.top)==null?void 0:r.call(n),n.default?b("div",{class:"v-table__wrapper",style:{height:Ge(e.height)}},[b("table",null,[n.default()])]):(l=n.wrapper)==null?void 0:l.call(n),(s=n.bottom)==null?void 0:s.call(n)]}})),{}}}),iv=ve({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function av(e,t,n,o){const i=e.returnObject?t:Tn(t,e.itemValue),a=Tn(t,e.itemSelectable,!0),r=o.reduce((l,s)=>(s.key!=null&&(l[s.key]=Tn(t,s.value)),l),{});return{type:"item",key:e.returnObject?Tn(t,e.itemValue):i,index:n,value:i,selectable:a,columns:r,raw:t}}function rv(e,t,n){return t.map((o,i)=>av(e,o,i,n))}function lv(e,t){return{items:B(()=>rv(e,e.items,t.value))}}function sv(e){let{page:t,itemsPerPage:n,sortBy:o,groupBy:i,search:a}=e;const r=vi("VDataTable"),l=B(()=>({page:t.value,itemsPerPage:n.value,sortBy:o.value,groupBy:i.value,search:a.value}));let s=null;de(l,()=>{fi(s,l.value)||(s&&s.search!==l.value.search&&(t.value=1),r.emit("update:options",l.value),s=l.value)},{deep:!0,immediate:!0})}const uv=(e,t,n)=>e==null||t==null?-1:e.toString().toLocaleLowerCase().indexOf(t.toString().toLocaleLowerCase()),Vu=ve({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function cv(e,t,n){var l;const o=[],i=(n==null?void 0:n.default)??uv,a=n!=null&&n.filterKeys?je(n.filterKeys):!1,r=Object.keys((n==null?void 0:n.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return o;e:for(let s=0;s<e.length;s++){const[u,c=u]=je(e[s]),d={},f={};let h=-1;if((t||r>0)&&!(n!=null&&n.noFilter)){if(typeof u=="object"){const p=a||Object.keys(c);for(const w of p){const y=Tn(c,w),M=(l=n==null?void 0:n.customKeyFilter)==null?void 0:l[w];if(h=M?M(y,t,u):i(y,t,u),h!==-1&&h!==!1)M?d[w]=h:f[w]=h;else if((n==null?void 0:n.filterMode)==="every")continue e}}else h=i(u,t,u),h!==-1&&h!==!1&&(f.title=h);const g=Object.keys(f).length,v=Object.keys(d).length;if(!g&&!v||(n==null?void 0:n.filterMode)==="union"&&v!==r&&!g||(n==null?void 0:n.filterMode)==="intersection"&&(v!==r||!g))continue}o.push({index:s,matches:{...f,...d}})}return o}function Au(e,t,n,o){const i=se([]),a=se(new Map),r=B(()=>o!=null&&o.transform?ie(t).map(s=>[s,o.transform(s)]):ie(t));yn(()=>{const s=typeof n=="function"?n():ie(n),u=typeof s!="string"&&typeof s!="number"?"":String(s),c=cv(r.value,u,{customKeyFilter:{...e.customKeyFilter,...ie(o==null?void 0:o.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),d=ie(t),f=[],h=new Map;c.forEach(g=>{let{index:v,matches:p}=g;const w=d[v];f.push(w),h.set(w.value,p)}),i.value=f,a.value=h});function l(s){return a.value.get(s.value)}return{filteredItems:i,filteredMatches:a,getMatches:l}}const dv=ve({...Mu(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...ev(),...Wh(),...Th(),...iv(),...Fh(),...Hh(),...Eu(),...Tu()},"DataTable"),fv=ve({...Ch(),...dv(),...Vu(),...vu()},"VDataTable"),Bi=be()({name:"VDataTable",props:fv(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,t){let{attrs:n,slots:o}=t;const{groupBy:i}=Kh(e),{sortBy:a,multiSort:r,mustSort:l}=Gh(e),{page:s,itemsPerPage:u}=Ih(e),{disableSort:c}=xs(e),{columns:d,headers:f,sortFunctions:h,sortRawFunctions:g,filterFunctions:v}=Rh(e,{groupBy:i,showSelect:oe(e,"showSelect"),showExpand:oe(e,"showExpand")}),{items:p}=lv(e,d),w=oe(e,"search"),{filteredItems:y}=Au(e,p,w,{transform:ee=>ee.columns,customKeyFilter:v}),{toggleSort:M}=Yh({sortBy:a,multiSort:r,mustSort:l,page:s}),{sortByWithGroups:E,opened:P,extractRows:L,isGroupOpen:D,toggleGroup:z}=qh({groupBy:i,sortBy:a,disableSort:c}),{sortedItems:O}=Xh(e,y,E,{transform:ee=>({...ee.raw,...ee.columns}),sortFunctions:h,sortRawFunctions:g}),{flatItems:V}=jh(O,i,P),$=B(()=>V.value.length),{startIndex:K,stopIndex:Z,pageCount:m,setItemsPerPage:N}=Nh({page:s,itemsPerPage:u,itemsLength:$}),{paginatedItems:S}=Mh({items:V,startIndex:K,stopIndex:Z,itemsPerPage:u}),A=B(()=>L(S.value)),{isSelected:C,select:I,selectAll:k,toggleSelect:T,someSelected:Y,allSelected:X}=Lh(e,{allItems:p,currentPage:A}),{isExpanded:G,toggleExpand:U}=tv(e);sv({page:s,itemsPerPage:u,sortBy:a,groupBy:i,search:w}),mn({VDataTableRows:{hideNoData:oe(e,"hideNoData"),noDataText:oe(e,"noDataText"),loading:oe(e,"loading"),loadingText:oe(e,"loadingText")}});const te=B(()=>({page:s.value,itemsPerPage:u.value,sortBy:a.value,pageCount:m.value,toggleSort:M,setItemsPerPage:N,someSelected:Y.value,allSelected:X.value,isSelected:C,select:I,selectAll:k,toggleSelect:T,isExpanded:G,toggleExpand:U,isGroupOpen:D,toggleGroup:z,items:A.value.map(ee=>ee.raw),internalItems:A.value,groupedItems:S.value,columns:d.value,headers:f.value}));return Ee(()=>{const ee=Or.filterProps(e),ce=Br.filterProps(e),ne=Rr.filterProps(e),W=zr.filterProps(e);return b(zr,he({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},W),{top:()=>{var q;return(q=o.top)==null?void 0:q.call(o,te.value)},default:()=>{var q,j,x,_,H,R;return o.default?o.default(te.value):b(ye,null,[(q=o.colgroup)==null?void 0:q.call(o,te.value),!e.hideDefaultHeader&&b("thead",{key:"thead"},[b(Br,ce,o)]),(j=o.thead)==null?void 0:j.call(o,te.value),!e.hideDefaultBody&&b("tbody",null,[(x=o["body.prepend"])==null?void 0:x.call(o,te.value),o.body?o.body(te.value):b(Rr,he(n,ne,{items:S.value}),o),(_=o["body.append"])==null?void 0:_.call(o,te.value)]),(H=o.tbody)==null?void 0:H.call(o,te.value),(R=o.tfoot)==null?void 0:R.call(o,te.value)])},bottom:()=>o.bottom?o.bottom(te.value):!e.hideDefaultFooter&&b(ye,null,[b(Rf,null,null),b(Or,ee,{prepend:o["footer.prepend"]})])})}),{}}});function hv(e,t,n,o,i,a){return ae(),$e(Fs,{fluid:""},{default:ue(()=>[b(Oo,null,{default:ue(()=>[b(bt,{cols:"4",md:"4"},{default:ue(()=>[b(Xt,{elevation:3},{default:ue(()=>[b(sn,null,{default:ue(()=>[Oe(" Resources ")]),_:1}),b(un,null,{default:ue(()=>[b(Bi,{density:"compact",headers:e.itemTableHeaders,"hide-default-footer":"",items:e.resources,"items-per-page":-1,"no-data-text":"No items.","sort-by":[{key:"amountPerMinute",order:"desc"}]},null,8,["headers","items"])]),_:1})]),_:1})]),_:1}),b(bt,{cols:"4",md:"4"},{default:ue(()=>[b(Xt,{elevation:3},{default:ue(()=>[b(sn,null,{default:ue(()=>[Oe(" Products ")]),_:1}),b(un,null,{default:ue(()=>[b(Bi,{density:"compact",headers:e.itemTableHeaders,"hide-default-footer":"",items:e.products,"items-per-page":-1,"no-data-text":"No items.","sort-by":[{key:"amountPerMinute",order:"desc"}]},null,8,["headers","items"])]),_:1})]),_:1})]),_:1}),b(bt,{cols:"4",md:"4"},{default:ue(()=>[b(Xt,{elevation:3},{default:ue(()=>[b(sn,null,{default:ue(()=>[Oe(" Buildings ")]),_:1}),b(un,null,{default:ue(()=>[b(Bi,{density:"compact",headers:e.buildingTableHeaders,"hide-default-footer":"",items:e.buildings,"items-per-page":-1,"no-data-text":"No buildings.","sort-by":[{key:"amount",order:"desc"}]},null,8,["headers","items"])]),_:1})]),_:1})]),_:1}),b(bt,{cols:"4",md:"4"},{default:ue(()=>[b(Xt,{elevation:3},{default:ue(()=>[b(sn,null,{default:ue(()=>[Oe(" Power Usage ")]),_:1}),b(un,null,{default:ue(()=>[Oe(at(e.power)+" MW ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const Du=uo(Wf,[["render",hv]]);function _i(e){return Cs()?(Kt(e),!0):!1}function _t(e){return typeof e=="function"?e():ie(e)}const vv=typeof window<"u"&&typeof document<"u",gv=e=>typeof e<"u",mv=Object.prototype.toString,pv=e=>mv.call(e)==="[object Object]",yv=()=>{};function wv(e,t){function n(...o){return new Promise((i,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(a)})}return n}const Ou=e=>e();function bv(e=Ou){const t=se(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...a)=>{t.value&&e(...a)};return{isActive:Ef(t),pause:n,resume:o,eventFilter:i}}function Fr(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function _v(e,t,n={}){const{eventFilter:o=Ou,...i}=n;return de(e,wv(o,t),i)}function ln(e,t,n={}){const{eventFilter:o,...i}=n,{eventFilter:a,pause:r,resume:l,isActive:s}=bv(o);return{stop:_v(e,t,{...i,eventFilter:a}),pause:r,resume:l,isActive:s}}function xv(e,t={}){if(!La(e))return xs(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=Sf(()=>({get(){return e.value[o]},set(i){var a;if((a=_t(t.replaceRef))!=null?a:!0)if(Array.isArray(e.value)){const l=[...e.value];l[o]=i,e.value=l}else{const l={...e.value,[o]:i};Object.setPrototypeOf(l,Object.getPrototypeOf(e.value)),e.value=l}else e.value[o]=i}}));return n}function ua(e,t=!1){function n(d,{flush:f="sync",deep:h=!1,timeout:g,throwOnTimeout:v}={}){let p=null;const y=[new Promise(M=>{p=de(e,E=>{d(E)!==t&&(p==null||p(),M(E))},{flush:f,deep:h,immediate:!0})})];return g!=null&&y.push(Fr(g,v).then(()=>_t(e)).finally(()=>p==null?void 0:p())),Promise.race(y)}function o(d,f){if(!La(d))return n(E=>E===d,f);const{flush:h="sync",deep:g=!1,timeout:v,throwOnTimeout:p}=f??{};let w=null;const M=[new Promise(E=>{w=de([e,d],([P,L])=>{t!==(P===L)&&(w==null||w(),E(P))},{flush:h,deep:g,immediate:!0})})];return v!=null&&M.push(Fr(v,p).then(()=>_t(e)).finally(()=>(w==null||w(),_t(e)))),Promise.race(M)}function i(d){return n(f=>!!f,d)}function a(d){return o(null,d)}function r(d){return o(void 0,d)}function l(d){return n(Number.isNaN,d)}function s(d,f){return n(h=>{const g=Array.from(h);return g.includes(d)||g.includes(_t(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let h=-1;return n(()=>(h+=1,h>=d),f)}return Array.isArray(_t(e))?{toMatch:n,toContains:s,changed:u,changedTimes:c,get not(){return ua(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:a,toBeNaN:l,toBeUndefined:r,changed:u,changedTimes:c,get not(){return ua(e,!t)}}}function ca(e){return ua(e)}function Sv(e){var t;const n=_t(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Bu=vv?window:void 0;function Ru(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=Bu):[t,n,o,i]=e,!t)return yv;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],r=()=>{a.forEach(c=>c()),a.length=0},l=(c,d,f,h)=>(c.addEventListener(d,f,h),()=>c.removeEventListener(d,f,h)),s=de(()=>[Sv(t),_t(i)],([c,d])=>{if(r(),!c)return;const f=pv(d)?{...d}:d;a.push(...n.flatMap(h=>o.map(g=>l(c,h,g,f))))},{immediate:!0,flush:"post"}),u=()=>{s(),r()};return _i(u),u}function Ev(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Lr(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=Bu,eventName:a="keydown",passive:r=!1,dedupe:l=!1}=o,s=Ev(t);return Ru(i,a,c=>{c.repeat&&_t(l)||s(c)&&n(c)},r)}function kv(e){return JSON.parse(JSON.stringify(e))}function Ri(e,t,n,o={}){var i,a,r;const{clone:l=!1,passive:s=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=o,h=ao(),g=n||(h==null?void 0:h.emit)||((i=h==null?void 0:h.$emit)==null?void 0:i.bind(h))||((r=(a=h==null?void 0:h.proxy)==null?void 0:a.$emit)==null?void 0:r.bind(h==null?void 0:h.proxy));let v=u;t||(t="modelValue"),v=v||`update:${t.toString()}`;const p=M=>l?typeof l=="function"?l(M):kv(M):M,w=()=>gv(e[t])?p(e[t]):d,y=M=>{f?f(M)&&g(v,M):g(v,M)};if(s){const M=w(),E=se(M);let P=!1;return de(()=>e[t],L=>{P||(P=!0,E.value=p(L),Ve(()=>P=!1))}),de(E,L=>{!P&&(L!==e[t]||c)&&y(L)},{deep:c}),E}else return B({get(){return w()},set(M){y(M)}})}var $v={value:()=>{}};function xi(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Bo(n)}function Bo(e){this._=e}function Cv(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Bo.prototype=xi.prototype={constructor:Bo,on:function(e,t){var n=this._,o=Cv(e+"",n),i,a=-1,r=o.length;if(arguments.length<2){for(;++a<r;)if((i=(e=o[a]).type)&&(i=Iv(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<r;)if(i=(e=o[a]).type)n[i]=Hr(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Hr(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Bo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,a;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,i=a.length;o<i;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,n)}};function Iv(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Hr(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=$v,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var da="http://www.w3.org/1999/xhtml";const Gr={svg:"http://www.w3.org/2000/svg",xhtml:da,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Si(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Gr.hasOwnProperty(t)?{space:Gr[t],local:e}:e}function Nv(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===da&&t.documentElement.namespaceURI===da?t.createElement(e):t.createElementNS(n,e)}}function Pv(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function zu(e){var t=Si(e);return(t.local?Pv:Nv)(t)}function Mv(){}function Qa(e){return e==null?Mv:function(){return this.querySelector(e)}}function Tv(e){typeof e!="function"&&(e=Qa(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],r=a.length,l=o[i]=new Array(r),s,u,c=0;c<r;++c)(s=a[c])&&(u=e.call(s,s.__data__,c,a))&&("__data__"in s&&(u.__data__=s.__data__),l[c]=u);return new Qe(o,this._parents)}function Vv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Av(){return[]}function Fu(e){return e==null?Av:function(){return this.querySelectorAll(e)}}function Dv(e){return function(){return Vv(e.apply(this,arguments))}}function Ov(e){typeof e=="function"?e=Dv(e):e=Fu(e);for(var t=this._groups,n=t.length,o=[],i=[],a=0;a<n;++a)for(var r=t[a],l=r.length,s,u=0;u<l;++u)(s=r[u])&&(o.push(e.call(s,s.__data__,u,r)),i.push(s));return new Qe(o,i)}function Lu(e){return function(){return this.matches(e)}}function Hu(e){return function(t){return t.matches(e)}}var Bv=Array.prototype.find;function Rv(e){return function(){return Bv.call(this.children,e)}}function zv(){return this.firstElementChild}function Fv(e){return this.select(e==null?zv:Rv(typeof e=="function"?e:Hu(e)))}var Lv=Array.prototype.filter;function Hv(){return Array.from(this.children)}function Gv(e){return function(){return Lv.call(this.children,e)}}function Yv(e){return this.selectAll(e==null?Hv:Gv(typeof e=="function"?e:Hu(e)))}function Xv(e){typeof e!="function"&&(e=Lu(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],r=a.length,l=o[i]=[],s,u=0;u<r;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&l.push(s);return new Qe(o,this._parents)}function Gu(e){return new Array(e.length)}function Uv(){return new Qe(this._enter||this._groups.map(Gu),this._parents)}function qo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}qo.prototype={constructor:qo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Wv(e){return function(){return e}}function Kv(e,t,n,o,i,a){for(var r=0,l,s=t.length,u=a.length;r<u;++r)(l=t[r])?(l.__data__=a[r],o[r]=l):n[r]=new qo(e,a[r]);for(;r<s;++r)(l=t[r])&&(i[r]=l)}function qv(e,t,n,o,i,a,r){var l,s,u=new Map,c=t.length,d=a.length,f=new Array(c),h;for(l=0;l<c;++l)(s=t[l])&&(f[l]=h=r.call(s,s.__data__,l,t)+"",u.has(h)?i[l]=s:u.set(h,s));for(l=0;l<d;++l)h=r.call(e,a[l],l,a)+"",(s=u.get(h))?(o[l]=s,s.__data__=a[l],u.delete(h)):n[l]=new qo(e,a[l]);for(l=0;l<c;++l)(s=t[l])&&u.get(f[l])===s&&(i[l]=s)}function Zv(e){return e.__data__}function jv(e,t){if(!arguments.length)return Array.from(this,Zv);var n=t?qv:Kv,o=this._parents,i=this._groups;typeof e!="function"&&(e=Wv(e));for(var a=i.length,r=new Array(a),l=new Array(a),s=new Array(a),u=0;u<a;++u){var c=o[u],d=i[u],f=d.length,h=Qv(e.call(c,c&&c.__data__,u,o)),g=h.length,v=l[u]=new Array(g),p=r[u]=new Array(g),w=s[u]=new Array(f);n(c,d,v,p,w,h,t);for(var y=0,M=0,E,P;y<g;++y)if(E=v[y]){for(y>=M&&(M=y+1);!(P=p[M])&&++M<g;);E._next=P||null}}return r=new Qe(r,o),r._enter=l,r._exit=s,r}function Qv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Jv(){return new Qe(this._exit||this._groups.map(Gu),this._parents)}function eg(e,t,n){var o=this.enter(),i=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),o&&i?o.merge(i).order():i}function tg(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,a=o.length,r=Math.min(i,a),l=new Array(i),s=0;s<r;++s)for(var u=n[s],c=o[s],d=u.length,f=l[s]=new Array(d),h,g=0;g<d;++g)(h=u[g]||c[g])&&(f[g]=h);for(;s<i;++s)l[s]=n[s];return new Qe(l,this._parents)}function ng(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,a=o[i],r;--i>=0;)(r=o[i])&&(a&&r.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(r,a),a=r);return this}function og(e){e||(e=ig);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a){for(var r=n[a],l=r.length,s=i[a]=new Array(l),u,c=0;c<l;++c)(u=r[c])&&(s[c]=u);s.sort(t)}return new Qe(i,this._parents).order()}function ig(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ag(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function rg(){return Array.from(this)}function lg(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length;i<a;++i){var r=o[i];if(r)return r}return null}function sg(){let e=0;for(const t of this)++e;return e}function ug(){return!this.node()}function cg(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],a=0,r=i.length,l;a<r;++a)(l=i[a])&&e.call(l,l.__data__,a,i);return this}function dg(e){return function(){this.removeAttribute(e)}}function fg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hg(e,t){return function(){this.setAttribute(e,t)}}function vg(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function gg(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function mg(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function pg(e,t){var n=Si(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?fg:dg:typeof t=="function"?n.local?mg:gg:n.local?vg:hg)(n,t))}function Yu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function yg(e){return function(){this.style.removeProperty(e)}}function wg(e,t,n){return function(){this.style.setProperty(e,t,n)}}function bg(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function _g(e,t,n){return arguments.length>1?this.each((t==null?yg:typeof t=="function"?bg:wg)(e,t,n??"")):wn(this.node(),e)}function wn(e,t){return e.style.getPropertyValue(t)||Yu(e).getComputedStyle(e,null).getPropertyValue(t)}function xg(e){return function(){delete this[e]}}function Sg(e,t){return function(){this[e]=t}}function Eg(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function kg(e,t){return arguments.length>1?this.each((t==null?xg:typeof t=="function"?Eg:Sg)(e,t)):this.node()[e]}function Xu(e){return e.trim().split(/^|\s+/)}function Ja(e){return e.classList||new Uu(e)}function Uu(e){this._node=e,this._names=Xu(e.getAttribute("class")||"")}Uu.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Wu(e,t){for(var n=Ja(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Ku(e,t){for(var n=Ja(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function $g(e){return function(){Wu(this,e)}}function Cg(e){return function(){Ku(this,e)}}function Ig(e,t){return function(){(t.apply(this,arguments)?Wu:Ku)(this,e)}}function Ng(e,t){var n=Xu(e+"");if(arguments.length<2){for(var o=Ja(this.node()),i=-1,a=n.length;++i<a;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Ig:t?$g:Cg)(n,t))}function Pg(){this.textContent=""}function Mg(e){return function(){this.textContent=e}}function Tg(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Vg(e){return arguments.length?this.each(e==null?Pg:(typeof e=="function"?Tg:Mg)(e)):this.node().textContent}function Ag(){this.innerHTML=""}function Dg(e){return function(){this.innerHTML=e}}function Og(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Bg(e){return arguments.length?this.each(e==null?Ag:(typeof e=="function"?Og:Dg)(e)):this.node().innerHTML}function Rg(){this.nextSibling&&this.parentNode.appendChild(this)}function zg(){return this.each(Rg)}function Fg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Lg(){return this.each(Fg)}function Hg(e){var t=typeof e=="function"?e:zu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Gg(){return null}function Yg(e,t){var n=typeof e=="function"?e:zu(e),o=t==null?Gg:typeof t=="function"?t:Qa(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Xg(){var e=this.parentNode;e&&e.removeChild(this)}function Ug(){return this.each(Xg)}function Wg(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kg(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qg(e){return this.select(e?Kg:Wg)}function Zg(e){return arguments.length?this.property("__data__",e):this.node().__data__}function jg(e){return function(t){e.call(this,t,this.__data__)}}function Qg(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Jg(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function em(e,t,n){return function(){var o=this.__on,i,a=jg(t);if(o){for(var r=0,l=o.length;r<l;++r)if((i=o[r]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(i):this.__on=[i]}}function tm(e,t,n){var o=Qg(e+""),i,a=o.length,r;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,c;s<u;++s)for(i=0,c=l[s];i<a;++i)if((r=o[i]).type===c.type&&r.name===c.name)return c.value}return}for(l=t?em:Jg,i=0;i<a;++i)this.each(l(o[i],t,n));return this}function qu(e,t,n){var o=Yu(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function nm(e,t){return function(){return qu(this,e,t)}}function om(e,t){return function(){return qu(this,e,t.apply(this,arguments))}}function im(e,t){return this.each((typeof t=="function"?om:nm)(e,t))}function*am(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length,r;i<a;++i)(r=o[i])&&(yield r)}var Zu=[null];function Qe(e,t){this._groups=e,this._parents=t}function ho(){return new Qe([[document.documentElement]],Zu)}function rm(){return this}Qe.prototype=ho.prototype={constructor:Qe,select:Tv,selectAll:Ov,selectChild:Fv,selectChildren:Yv,filter:Xv,data:jv,enter:Uv,exit:Jv,join:eg,merge:tg,selection:rm,order:ng,sort:og,call:ag,nodes:rg,node:lg,size:sg,empty:ug,each:cg,attr:pg,style:_g,property:kg,classed:Ng,text:Vg,html:Bg,raise:zg,lower:Lg,append:Hg,insert:Yg,remove:Ug,clone:qg,datum:Zg,on:tm,dispatch:im,[Symbol.iterator]:am};function nt(e){return typeof e=="string"?new Qe([[document.querySelector(e)]],[document.documentElement]):new Qe([[e]],Zu)}function lm(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ct(e,t){if(e=lm(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const sm={passive:!1},Un={capture:!0,passive:!1};function zi(e){e.stopImmediatePropagation()}function fn(e){e.preventDefault(),e.stopImmediatePropagation()}function ju(e){var t=e.document.documentElement,n=nt(e).on("dragstart.drag",fn,Un);"onselectstart"in t?n.on("selectstart.drag",fn,Un):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Qu(e,t){var n=e.document.documentElement,o=nt(e).on("dragstart.drag",null);t&&(o.on("click.drag",fn,Un),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const _o=e=>()=>e;function fa(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:a,x:r,y:l,dx:s,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}fa.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function um(e){return!e.ctrlKey&&!e.button}function cm(){return this.parentNode}function dm(e,t){return t??{x:e.x,y:e.y}}function fm(){return navigator.maxTouchPoints||"ontouchstart"in this}function hm(){var e=um,t=cm,n=dm,o=fm,i={},a=xi("start","drag","end"),r=0,l,s,u,c,d=0;function f(E){E.on("mousedown.drag",h).filter(o).on("touchstart.drag",p).on("touchmove.drag",w,sm).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(E,P){if(!(c||!e.call(this,E,P))){var L=M(this,t.call(this,E,P),E,P,"mouse");L&&(nt(E.view).on("mousemove.drag",g,Un).on("mouseup.drag",v,Un),ju(E.view),zi(E),u=!1,l=E.clientX,s=E.clientY,L("start",E))}}function g(E){if(fn(E),!u){var P=E.clientX-l,L=E.clientY-s;u=P*P+L*L>d}i.mouse("drag",E)}function v(E){nt(E.view).on("mousemove.drag mouseup.drag",null),Qu(E.view,u),fn(E),i.mouse("end",E)}function p(E,P){if(e.call(this,E,P)){var L=E.changedTouches,D=t.call(this,E,P),z=L.length,O,V;for(O=0;O<z;++O)(V=M(this,D,E,P,L[O].identifier,L[O]))&&(zi(E),V("start",E,L[O]))}}function w(E){var P=E.changedTouches,L=P.length,D,z;for(D=0;D<L;++D)(z=i[P[D].identifier])&&(fn(E),z("drag",E,P[D]))}function y(E){var P=E.changedTouches,L=P.length,D,z;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),D=0;D<L;++D)(z=i[P[D].identifier])&&(zi(E),z("end",E,P[D]))}function M(E,P,L,D,z,O){var V=a.copy(),$=ct(O||L,P),K,Z,m;if((m=n.call(E,new fa("beforestart",{sourceEvent:L,target:f,identifier:z,active:r,x:$[0],y:$[1],dx:0,dy:0,dispatch:V}),D))!=null)return K=m.x-$[0]||0,Z=m.y-$[1]||0,function N(S,A,C){var I=$,k;switch(S){case"start":i[z]=N,k=r++;break;case"end":delete i[z],--r;case"drag":$=ct(C||A,P),k=r;break}V.call(S,E,new fa(S,{sourceEvent:A,subject:m,target:f,identifier:z,active:k,x:$[0]+K,y:$[1]+Z,dx:$[0]-I[0],dy:$[1]-I[1],dispatch:V}),D)}}return f.filter=function(E){return arguments.length?(e=typeof E=="function"?E:_o(!!E),f):e},f.container=function(E){return arguments.length?(t=typeof E=="function"?E:_o(E),f):t},f.subject=function(E){return arguments.length?(n=typeof E=="function"?E:_o(E),f):n},f.touchable=function(E){return arguments.length?(o=typeof E=="function"?E:_o(!!E),f):o},f.on=function(){var E=a.on.apply(a,arguments);return E===a?f:E},f.clickDistance=function(E){return arguments.length?(d=(E=+E)*E,f):Math.sqrt(d)},f}function er(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ju(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function vo(){}var Wn=.7,Zo=1/Wn,hn="\\s*([+-]?\\d+)\\s*",Kn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vm=/^#([0-9a-f]{3,8})$/,gm=new RegExp(`^rgb\\(${hn},${hn},${hn}\\)$`),mm=new RegExp(`^rgb\\(${ft},${ft},${ft}\\)$`),pm=new RegExp(`^rgba\\(${hn},${hn},${hn},${Kn}\\)$`),ym=new RegExp(`^rgba\\(${ft},${ft},${ft},${Kn}\\)$`),wm=new RegExp(`^hsl\\(${Kn},${ft},${ft}\\)$`),bm=new RegExp(`^hsla\\(${Kn},${ft},${ft},${Kn}\\)$`),Yr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};er(vo,qn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Xr,formatHex:Xr,formatHex8:_m,formatHsl:xm,formatRgb:Ur,toString:Ur});function Xr(){return this.rgb().formatHex()}function _m(){return this.rgb().formatHex8()}function xm(){return ec(this).formatHsl()}function Ur(){return this.rgb().formatRgb()}function qn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=vm.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Wr(t):n===3?new qe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?xo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?xo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gm.exec(e))?new qe(t[1],t[2],t[3],1):(t=mm.exec(e))?new qe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pm.exec(e))?xo(t[1],t[2],t[3],t[4]):(t=ym.exec(e))?xo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=wm.exec(e))?Zr(t[1],t[2]/100,t[3]/100,1):(t=bm.exec(e))?Zr(t[1],t[2]/100,t[3]/100,t[4]):Yr.hasOwnProperty(e)?Wr(Yr[e]):e==="transparent"?new qe(NaN,NaN,NaN,0):null}function Wr(e){return new qe(e>>16&255,e>>8&255,e&255,1)}function xo(e,t,n,o){return o<=0&&(e=t=n=NaN),new qe(e,t,n,o)}function Sm(e){return e instanceof vo||(e=qn(e)),e?(e=e.rgb(),new qe(e.r,e.g,e.b,e.opacity)):new qe}function ha(e,t,n,o){return arguments.length===1?Sm(e):new qe(e,t,n,o??1)}function qe(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}er(qe,ha,Ju(vo,{brighter(e){return e=e==null?Zo:Math.pow(Zo,e),new qe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Wn:Math.pow(Wn,e),new qe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new qe(qt(this.r),qt(this.g),qt(this.b),jo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Kr,formatHex:Kr,formatHex8:Em,formatRgb:qr,toString:qr}));function Kr(){return`#${Ut(this.r)}${Ut(this.g)}${Ut(this.b)}`}function Em(){return`#${Ut(this.r)}${Ut(this.g)}${Ut(this.b)}${Ut((isNaN(this.opacity)?1:this.opacity)*255)}`}function qr(){const e=jo(this.opacity);return`${e===1?"rgb(":"rgba("}${qt(this.r)}, ${qt(this.g)}, ${qt(this.b)}${e===1?")":`, ${e})`}`}function jo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ut(e){return e=qt(e),(e<16?"0":"")+e.toString(16)}function Zr(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ot(e,t,n,o)}function ec(e){if(e instanceof ot)return new ot(e.h,e.s,e.l,e.opacity);if(e instanceof vo||(e=qn(e)),!e)return new ot;if(e instanceof ot)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),a=Math.max(t,n,o),r=NaN,l=a-i,s=(a+i)/2;return l?(t===a?r=(n-o)/l+(n<o)*6:n===a?r=(o-t)/l+2:r=(t-n)/l+4,l/=s<.5?a+i:2-a-i,r*=60):l=s>0&&s<1?0:r,new ot(r,l,s,e.opacity)}function km(e,t,n,o){return arguments.length===1?ec(e):new ot(e,t,n,o??1)}function ot(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}er(ot,km,Ju(vo,{brighter(e){return e=e==null?Zo:Math.pow(Zo,e),new ot(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Wn:Math.pow(Wn,e),new ot(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new qe(Fi(e>=240?e-240:e+120,i,o),Fi(e,i,o),Fi(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new ot(jr(this.h),So(this.s),So(this.l),jo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jo(this.opacity);return`${e===1?"hsl(":"hsla("}${jr(this.h)}, ${So(this.s)*100}%, ${So(this.l)*100}%${e===1?")":`, ${e})`}`}}));function jr(e){return e=(e||0)%360,e<0?e+360:e}function So(e){return Math.max(0,Math.min(1,e||0))}function Fi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const tc=e=>()=>e;function $m(e,t){return function(n){return e+n*t}}function Cm(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Im(e){return(e=+e)==1?nc:function(t,n){return n-t?Cm(t,n,e):tc(isNaN(t)?n:t)}}function nc(e,t){var n=t-e;return n?$m(e,n):tc(isNaN(e)?t:e)}const Qr=function e(t){var n=Im(t);function o(i,a){var r=n((i=ha(i)).r,(a=ha(a)).r),l=n(i.g,a.g),s=n(i.b,a.b),u=nc(i.opacity,a.opacity);return function(c){return i.r=r(c),i.g=l(c),i.b=s(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function Tt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var va=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Li=new RegExp(va.source,"g");function Nm(e){return function(){return e}}function Pm(e){return function(t){return e(t)+""}}function Mm(e,t){var n=va.lastIndex=Li.lastIndex=0,o,i,a,r=-1,l=[],s=[];for(e=e+"",t=t+"";(o=va.exec(e))&&(i=Li.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[r]?l[r]+=a:l[++r]=a),(o=o[0])===(i=i[0])?l[r]?l[r]+=i:l[++r]=i:(l[++r]=null,s.push({i:r,x:Tt(o,i)})),n=Li.lastIndex;return n<t.length&&(a=t.slice(n),l[r]?l[r]+=a:l[++r]=a),l.length<2?s[0]?Pm(s[0].x):Nm(t):(t=s.length,function(u){for(var c=0,d;c<t;++c)l[(d=s[c]).i]=d.x(u);return l.join("")})}var Jr=180/Math.PI,ga={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function oc(e,t,n,o,i,a){var r,l,s;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,s/=l),e*o<t*n&&(e=-e,t=-t,s=-s,r=-r),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Jr,skewX:Math.atan(s)*Jr,scaleX:r,scaleY:l}}var Eo;function Tm(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ga:oc(t.a,t.b,t.c,t.d,t.e,t.f)}function Vm(e){return e==null||(Eo||(Eo=document.createElementNS("http://www.w3.org/2000/svg","g")),Eo.setAttribute("transform",e),!(e=Eo.transform.baseVal.consolidate()))?ga:(e=e.matrix,oc(e.a,e.b,e.c,e.d,e.e,e.f))}function ic(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function a(u,c,d,f,h,g){if(u!==d||c!==f){var v=h.push("translate(",null,t,null,n);g.push({i:v-4,x:Tt(u,d)},{i:v-2,x:Tt(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function r(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,o)-2,x:Tt(u,c)})):c&&d.push(i(d)+"rotate("+c+o)}function l(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,o)-2,x:Tt(u,c)}):c&&d.push(i(d)+"skewX("+c+o)}function s(u,c,d,f,h,g){if(u!==d||c!==f){var v=h.push(i(h)+"scale(",null,",",null,")");g.push({i:v-4,x:Tt(u,d)},{i:v-2,x:Tt(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),a(u.translateX,u.translateY,c.translateX,c.translateY,d,f),r(u.rotate,c.rotate,d,f),l(u.skewX,c.skewX,d,f),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var g=-1,v=f.length,p;++g<v;)d[(p=f[g]).i]=p.x(h);return d.join("")}}}var Am=ic(Tm,"px, ","px)","deg)"),Dm=ic(Vm,", ",")",")"),Om=1e-12;function el(e){return((e=Math.exp(e))+1/e)/2}function Bm(e){return((e=Math.exp(e))-1/e)/2}function Rm(e){return((e=Math.exp(2*e))-1)/(e+1)}const zm=function e(t,n,o){function i(a,r){var l=a[0],s=a[1],u=a[2],c=r[0],d=r[1],f=r[2],h=c-l,g=d-s,v=h*h+g*g,p,w;if(v<Om)w=Math.log(f/u)/t,p=function(D){return[l+D*h,s+D*g,u*Math.exp(t*D*w)]};else{var y=Math.sqrt(v),M=(f*f-u*u+o*v)/(2*u*n*y),E=(f*f-u*u-o*v)/(2*f*n*y),P=Math.log(Math.sqrt(M*M+1)-M),L=Math.log(Math.sqrt(E*E+1)-E);w=(L-P)/t,p=function(D){var z=D*w,O=el(P),V=u/(n*y)*(O*Rm(t*z+P)-Bm(P));return[l+V*h,s+V*g,u*O/el(t*z+P)]}}return p.duration=w*1e3*t/Math.SQRT2,p}return i.rho=function(a){var r=Math.max(.001,+a),l=r*r,s=l*l;return e(r,l,s)},i}(Math.SQRT2,2,4);var bn=0,Vn=0,In=0,ac=1e3,Qo,An,Jo=0,Qt=0,Ei=0,Zn=typeof performance=="object"&&performance.now?performance:Date,rc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function tr(){return Qt||(rc(Fm),Qt=Zn.now()+Ei)}function Fm(){Qt=0}function ei(){this._call=this._time=this._next=null}ei.prototype=lc.prototype={constructor:ei,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?tr():+n)+(t==null?0:+t),!this._next&&An!==this&&(An?An._next=this:Qo=this,An=this),this._call=e,this._time=n,ma()},stop:function(){this._call&&(this._call=null,this._time=1/0,ma())}};function lc(e,t,n){var o=new ei;return o.restart(e,t,n),o}function Lm(){tr(),++bn;for(var e=Qo,t;e;)(t=Qt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--bn}function tl(){Qt=(Jo=Zn.now())+Ei,bn=Vn=0;try{Lm()}finally{bn=0,Gm(),Qt=0}}function Hm(){var e=Zn.now(),t=e-Jo;t>ac&&(Ei-=t,Jo=e)}function Gm(){for(var e,t=Qo,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Qo=n);An=e,ma(o)}function ma(e){if(!bn){Vn&&(Vn=clearTimeout(Vn));var t=e-Qt;t>24?(e<1/0&&(Vn=setTimeout(tl,e-Zn.now()-Ei)),In&&(In=clearInterval(In))):(In||(Jo=Zn.now(),In=setInterval(Hm,ac)),bn=1,rc(tl))}}function nl(e,t,n){var o=new ei;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var Ym=xi("start","end","cancel","interrupt"),Xm=[],sc=0,ol=1,pa=2,Ro=3,il=4,ya=5,zo=6;function ki(e,t,n,o,i,a){var r=e.__transition;if(!r)e.__transition={};else if(n in r)return;Um(e,n,{name:t,index:o,group:i,on:Ym,tween:Xm,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:sc})}function nr(e,t){var n=lt(e,t);if(n.state>sc)throw new Error("too late; already scheduled");return n}function mt(e,t){var n=lt(e,t);if(n.state>Ro)throw new Error("too late; already running");return n}function lt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Um(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=lc(a,0,n.time);function a(u){n.state=ol,n.timer.restart(r,n.delay,n.time),n.delay<=u&&r(u-n.delay)}function r(u){var c,d,f,h;if(n.state!==ol)return s();for(c in o)if(h=o[c],h.name===n.name){if(h.state===Ro)return nl(r);h.state===il?(h.state=zo,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=zo,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(nl(function(){n.state===Ro&&(n.state=il,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=pa,n.on.call("start",e,e.__data__,n.index,n.group),n.state===pa){for(n.state=Ro,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function l(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=ya,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===ya&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=zo,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Fo(e,t){var n=e.__transition,o,i,a=!0,r;if(n){t=t==null?null:t+"";for(r in n){if((o=n[r]).name!==t){a=!1;continue}i=o.state>pa&&o.state<ya,o.state=zo,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[r]}a&&delete e.__transition}}function Wm(e){return this.each(function(){Fo(this,e)})}function Km(e,t){var n,o;return function(){var i=mt(this,e),a=i.tween;if(a!==n){o=n=a;for(var r=0,l=o.length;r<l;++r)if(o[r].name===t){o=o.slice(),o.splice(r,1);break}}i.tween=o}}function qm(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var a=mt(this,e),r=a.tween;if(r!==o){i=(o=r).slice();for(var l={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=l;break}s===u&&i.push(l)}a.tween=i}}function Zm(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=lt(this.node(),n).tween,i=0,a=o.length,r;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((t==null?Km:qm)(n,e,t))}function or(e,t,n){var o=e._id;return e.each(function(){var i=mt(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return lt(i,o).value[t]}}function uc(e,t){var n;return(typeof t=="number"?Tt:t instanceof qn?Qr:(n=qn(t))?(t=n,Qr):Mm)(e,t)}function jm(e){return function(){this.removeAttribute(e)}}function Qm(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Jm(e,t,n){var o,i=n+"",a;return function(){var r=this.getAttribute(e);return r===i?null:r===o?a:a=t(o=r,n)}}function ep(e,t,n){var o,i=n+"",a;return function(){var r=this.getAttributeNS(e.space,e.local);return r===i?null:r===o?a:a=t(o=r,n)}}function tp(e,t,n){var o,i,a;return function(){var r,l=n(this),s;return l==null?void this.removeAttribute(e):(r=this.getAttribute(e),s=l+"",r===s?null:r===o&&s===i?a:(i=s,a=t(o=r,l)))}}function np(e,t,n){var o,i,a;return function(){var r,l=n(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(r=this.getAttributeNS(e.space,e.local),s=l+"",r===s?null:r===o&&s===i?a:(i=s,a=t(o=r,l)))}}function op(e,t){var n=Si(e),o=n==="transform"?Dm:uc;return this.attrTween(e,typeof t=="function"?(n.local?np:tp)(n,o,or(this,"attr."+e,t)):t==null?(n.local?Qm:jm)(n):(n.local?ep:Jm)(n,o,t))}function ip(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ap(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function rp(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&ap(e,a)),n}return i._value=t,i}function lp(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&ip(e,a)),n}return i._value=t,i}function sp(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Si(e);return this.tween(n,(o.local?rp:lp)(o,t))}function up(e,t){return function(){nr(this,e).delay=+t.apply(this,arguments)}}function cp(e,t){return t=+t,function(){nr(this,e).delay=t}}function dp(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?up:cp)(t,e)):lt(this.node(),t).delay}function fp(e,t){return function(){mt(this,e).duration=+t.apply(this,arguments)}}function hp(e,t){return t=+t,function(){mt(this,e).duration=t}}function vp(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fp:hp)(t,e)):lt(this.node(),t).duration}function gp(e,t){if(typeof t!="function")throw new Error;return function(){mt(this,e).ease=t}}function mp(e){var t=this._id;return arguments.length?this.each(gp(t,e)):lt(this.node(),t).ease}function pp(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;mt(this,e).ease=n}}function yp(e){if(typeof e!="function")throw new Error;return this.each(pp(this._id,e))}function wp(e){typeof e!="function"&&(e=Lu(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],r=a.length,l=o[i]=[],s,u=0;u<r;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&l.push(s);return new kt(o,this._parents,this._name,this._id)}function bp(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),r=new Array(o),l=0;l<a;++l)for(var s=t[l],u=n[l],c=s.length,d=r[l]=new Array(c),f,h=0;h<c;++h)(f=s[h]||u[h])&&(d[h]=f);for(;l<o;++l)r[l]=t[l];return new kt(r,this._parents,this._name,this._id)}function _p(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function xp(e,t,n){var o,i,a=_p(t)?nr:mt;return function(){var r=a(this,e),l=r.on;l!==o&&(i=(o=l).copy()).on(t,n),r.on=i}}function Sp(e,t){var n=this._id;return arguments.length<2?lt(this.node(),n).on.on(e):this.each(xp(n,e,t))}function Ep(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function kp(){return this.on("end.remove",Ep(this._id))}function $p(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Qa(e));for(var o=this._groups,i=o.length,a=new Array(i),r=0;r<i;++r)for(var l=o[r],s=l.length,u=a[r]=new Array(s),c,d,f=0;f<s;++f)(c=l[f])&&(d=e.call(c,c.__data__,f,l))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,ki(u[f],t,n,f,u,lt(c,n)));return new kt(a,this._parents,t,n)}function Cp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Fu(e));for(var o=this._groups,i=o.length,a=[],r=[],l=0;l<i;++l)for(var s=o[l],u=s.length,c,d=0;d<u;++d)if(c=s[d]){for(var f=e.call(c,c.__data__,d,s),h,g=lt(c,n),v=0,p=f.length;v<p;++v)(h=f[v])&&ki(h,t,n,v,f,g);a.push(f),r.push(c)}return new kt(a,r,t,n)}var Ip=ho.prototype.constructor;function Np(){return new Ip(this._groups,this._parents)}function Pp(e,t){var n,o,i;return function(){var a=wn(this,e),r=(this.style.removeProperty(e),wn(this,e));return a===r?null:a===n&&r===o?i:i=t(n=a,o=r)}}function cc(e){return function(){this.style.removeProperty(e)}}function Mp(e,t,n){var o,i=n+"",a;return function(){var r=wn(this,e);return r===i?null:r===o?a:a=t(o=r,n)}}function Tp(e,t,n){var o,i,a;return function(){var r=wn(this,e),l=n(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),wn(this,e))),r===s?null:r===o&&s===i?a:(i=s,a=t(o=r,l))}}function Vp(e,t){var n,o,i,a="style."+t,r="end."+a,l;return function(){var s=mt(this,e),u=s.on,c=s.value[a]==null?l||(l=cc(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(r,i=c),s.on=o}}function Ap(e,t,n){var o=(e+="")=="transform"?Am:uc;return t==null?this.styleTween(e,Pp(e,o)).on("end.style."+e,cc(e)):typeof t=="function"?this.styleTween(e,Tp(e,o,or(this,"style."+e,t))).each(Vp(this._id,e)):this.styleTween(e,Mp(e,o,t),n).on("end.style."+e,null)}function Dp(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Op(e,t,n){var o,i;function a(){var r=t.apply(this,arguments);return r!==i&&(o=(i=r)&&Dp(e,r,n)),o}return a._value=t,a}function Bp(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Op(e,t,n??""))}function Rp(e){return function(){this.textContent=e}}function zp(e){return function(){var t=e(this);this.textContent=t??""}}function Fp(e){return this.tween("text",typeof e=="function"?zp(or(this,"text",e)):Rp(e==null?"":e+""))}function Lp(e){return function(t){this.textContent=e.call(this,t)}}function Hp(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Lp(i)),t}return o._value=e,o}function Gp(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Hp(e))}function Yp(){for(var e=this._name,t=this._id,n=dc(),o=this._groups,i=o.length,a=0;a<i;++a)for(var r=o[a],l=r.length,s,u=0;u<l;++u)if(s=r[u]){var c=lt(s,t);ki(s,e,n,u,r,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new kt(o,this._parents,e,n)}function Xp(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(a,r){var l={value:r},s={value:function(){--i===0&&a()}};n.each(function(){var u=mt(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),u.on=t}),i===0&&a()})}var Up=0;function kt(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function dc(){return++Up}var yt=ho.prototype;kt.prototype={constructor:kt,select:$p,selectAll:Cp,selectChild:yt.selectChild,selectChildren:yt.selectChildren,filter:wp,merge:bp,selection:Np,transition:Yp,call:yt.call,nodes:yt.nodes,node:yt.node,size:yt.size,empty:yt.empty,each:yt.each,on:Sp,attr:op,attrTween:sp,style:Ap,styleTween:Bp,text:Fp,textTween:Gp,remove:kp,tween:Zm,delay:dp,duration:vp,ease:mp,easeVarying:yp,end:Xp,[Symbol.iterator]:yt[Symbol.iterator]};function Wp(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Kp={time:null,delay:0,duration:250,ease:Wp};function qp(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Zp(e){var t,n;e instanceof kt?(t=e._id,e=e._name):(t=dc(),(n=Kp).time=tr(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var r=o[a],l=r.length,s,u=0;u<l;++u)(s=r[u])&&ki(s,e,t,u,r,n||qp(s,t));return new kt(o,this._parents,e,t)}ho.prototype.interrupt=Wm;ho.prototype.transition=Zp;const ko=e=>()=>e;function jp(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function St(e,t,n){this.k=e,this.x=t,this.y=n}St.prototype={constructor:St,scale:function(e){return e===1?this:new St(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new St(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var _n=new St(1,0,0);St.prototype;function Hi(e){e.stopImmediatePropagation()}function Nn(e){e.preventDefault(),e.stopImmediatePropagation()}function Qp(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Jp(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function al(){return this.__zoom||_n}function ey(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ty(){return navigator.maxTouchPoints||"ontouchstart"in this}function ny(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],r=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),r>a?(a+r)/2:Math.min(0,a)||Math.max(0,r))}function oy(){var e=Qp,t=Jp,n=ny,o=ey,i=ty,a=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],l=250,s=zm,u=xi("start","zoom","end"),c,d,f,h=500,g=150,v=0,p=10;function w(m){m.property("__zoom",al).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",V).filter(i).on("touchstart.zoom",$).on("touchmove.zoom",K).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(m,N,S,A){var C=m.selection?m.selection():m;C.property("__zoom",al),m!==C?P(m,N,S,A):C.interrupt().each(function(){L(this,arguments).event(A).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},w.scaleBy=function(m,N,S,A){w.scaleTo(m,function(){var C=this.__zoom.k,I=typeof N=="function"?N.apply(this,arguments):N;return C*I},S,A)},w.scaleTo=function(m,N,S,A){w.transform(m,function(){var C=t.apply(this,arguments),I=this.__zoom,k=S==null?E(C):typeof S=="function"?S.apply(this,arguments):S,T=I.invert(k),Y=typeof N=="function"?N.apply(this,arguments):N;return n(M(y(I,Y),k,T),C,r)},S,A)},w.translateBy=function(m,N,S,A){w.transform(m,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),r)},null,A)},w.translateTo=function(m,N,S,A,C){w.transform(m,function(){var I=t.apply(this,arguments),k=this.__zoom,T=A==null?E(I):typeof A=="function"?A.apply(this,arguments):A;return n(_n.translate(T[0],T[1]).scale(k.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof S=="function"?-S.apply(this,arguments):-S),I,r)},A,C)};function y(m,N){return N=Math.max(a[0],Math.min(a[1],N)),N===m.k?m:new St(N,m.x,m.y)}function M(m,N,S){var A=N[0]-S[0]*m.k,C=N[1]-S[1]*m.k;return A===m.x&&C===m.y?m:new St(m.k,A,C)}function E(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function P(m,N,S,A){m.on("start.zoom",function(){L(this,arguments).event(A).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(A).end()}).tween("zoom",function(){var C=this,I=arguments,k=L(C,I).event(A),T=t.apply(C,I),Y=S==null?E(T):typeof S=="function"?S.apply(C,I):S,X=Math.max(T[1][0]-T[0][0],T[1][1]-T[0][1]),G=C.__zoom,U=typeof N=="function"?N.apply(C,I):N,te=s(G.invert(Y).concat(X/G.k),U.invert(Y).concat(X/U.k));return function(ee){if(ee===1)ee=U;else{var ce=te(ee),ne=X/ce[2];ee=new St(ne,Y[0]-ce[0]*ne,Y[1]-ce[1]*ne)}k.zoom(null,ee)}})}function L(m,N,S){return!S&&m.__zooming||new D(m,N)}function D(m,N){this.that=m,this.args=N,this.active=0,this.sourceEvent=null,this.extent=t.apply(m,N),this.taps=0}D.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,N){return this.mouse&&m!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var N=nt(this.that).datum();u.call(m,this.that,new jp(m,{sourceEvent:this.sourceEvent,target:w,type:m,transform:this.that.__zoom,dispatch:u}),N)}};function z(m,...N){if(!e.apply(this,arguments))return;var S=L(this,N).event(m),A=this.__zoom,C=Math.max(a[0],Math.min(a[1],A.k*Math.pow(2,o.apply(this,arguments)))),I=ct(m);if(S.wheel)(S.mouse[0][0]!==I[0]||S.mouse[0][1]!==I[1])&&(S.mouse[1]=A.invert(S.mouse[0]=I)),clearTimeout(S.wheel);else{if(A.k===C)return;S.mouse=[I,A.invert(I)],Fo(this),S.start()}Nn(m),S.wheel=setTimeout(k,g),S.zoom("mouse",n(M(y(A,C),S.mouse[0],S.mouse[1]),S.extent,r));function k(){S.wheel=null,S.end()}}function O(m,...N){if(f||!e.apply(this,arguments))return;var S=m.currentTarget,A=L(this,N,!0).event(m),C=nt(m.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",X,!0),I=ct(m,S),k=m.clientX,T=m.clientY;ju(m.view),Hi(m),A.mouse=[I,this.__zoom.invert(I)],Fo(this),A.start();function Y(G){if(Nn(G),!A.moved){var U=G.clientX-k,te=G.clientY-T;A.moved=U*U+te*te>v}A.event(G).zoom("mouse",n(M(A.that.__zoom,A.mouse[0]=ct(G,S),A.mouse[1]),A.extent,r))}function X(G){C.on("mousemove.zoom mouseup.zoom",null),Qu(G.view,A.moved),Nn(G),A.event(G).end()}}function V(m,...N){if(e.apply(this,arguments)){var S=this.__zoom,A=ct(m.changedTouches?m.changedTouches[0]:m,this),C=S.invert(A),I=S.k*(m.shiftKey?.5:2),k=n(M(y(S,I),A,C),t.apply(this,N),r);Nn(m),l>0?nt(this).transition().duration(l).call(P,k,A,m):nt(this).call(w.transform,k,A,m)}}function $(m,...N){if(e.apply(this,arguments)){var S=m.touches,A=S.length,C=L(this,N,m.changedTouches.length===A).event(m),I,k,T,Y;for(Hi(m),k=0;k<A;++k)T=S[k],Y=ct(T,this),Y=[Y,this.__zoom.invert(Y),T.identifier],C.touch0?!C.touch1&&C.touch0[2]!==Y[2]&&(C.touch1=Y,C.taps=0):(C.touch0=Y,I=!0,C.taps=1+!!c);c&&(c=clearTimeout(c)),I&&(C.taps<2&&(d=Y[0],c=setTimeout(function(){c=null},h)),Fo(this),C.start())}}function K(m,...N){if(this.__zooming){var S=L(this,N).event(m),A=m.changedTouches,C=A.length,I,k,T,Y;for(Nn(m),I=0;I<C;++I)k=A[I],T=ct(k,this),S.touch0&&S.touch0[2]===k.identifier?S.touch0[0]=T:S.touch1&&S.touch1[2]===k.identifier&&(S.touch1[0]=T);if(k=S.that.__zoom,S.touch1){var X=S.touch0[0],G=S.touch0[1],U=S.touch1[0],te=S.touch1[1],ee=(ee=U[0]-X[0])*ee+(ee=U[1]-X[1])*ee,ce=(ce=te[0]-G[0])*ce+(ce=te[1]-G[1])*ce;k=y(k,Math.sqrt(ee/ce)),T=[(X[0]+U[0])/2,(X[1]+U[1])/2],Y=[(G[0]+te[0])/2,(G[1]+te[1])/2]}else if(S.touch0)T=S.touch0[0],Y=S.touch0[1];else return;S.zoom("touch",n(M(k,T,Y),S.extent,r))}}function Z(m,...N){if(this.__zooming){var S=L(this,N).event(m),A=m.changedTouches,C=A.length,I,k;for(Hi(m),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),I=0;I<C;++I)k=A[I],S.touch0&&S.touch0[2]===k.identifier?delete S.touch0:S.touch1&&S.touch1[2]===k.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(k=ct(k,this),Math.hypot(d[0]-k[0],d[1]-k[1])<p)){var T=nt(this).on("dblclick.zoom");T&&T.apply(this,arguments)}}}return w.wheelDelta=function(m){return arguments.length?(o=typeof m=="function"?m:ko(+m),w):o},w.filter=function(m){return arguments.length?(e=typeof m=="function"?m:ko(!!m),w):e},w.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:ko(!!m),w):i},w.extent=function(m){return arguments.length?(t=typeof m=="function"?m:ko([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),w):t},w.scaleExtent=function(m){return arguments.length?(a[0]=+m[0],a[1]=+m[1],w):[a[0],a[1]]},w.translateExtent=function(m){return arguments.length?(r[0][0]=+m[0][0],r[1][0]=+m[1][0],r[0][1]=+m[0][1],r[1][1]=+m[1][1],w):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},w.constrain=function(m){return arguments.length?(n=m,w):n},w.duration=function(m){return arguments.length?(l=+m,w):l},w.interpolate=function(m){return arguments.length?(s=m,w):s},w.on=function(){var m=u.on.apply(u,arguments);return m===u?w:m},w.clickDistance=function(m){return arguments.length?(v=(m=+m)*m,w):Math.sqrt(v)},w.tapDistance=function(m){return arguments.length?(p=+m,w):p},w}var le=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(le||{}),ir=(e=>(e.Partial="partial",e.Full="full",e))(ir||{}),Ht=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Ht||{}),Jt=(e=>(e.Strict="strict",e.Loose="loose",e))(Jt||{}),wa=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(wa||{}),zn=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(zn||{}),fc=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(fc||{});function ba(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,i=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,a=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(o==null?void 0:o.nodeName)||i||!!a}function iy(e){return e.ctrlKey||e.metaKey||e.shiftKey}function rl(e,t,n,o){const i=t.split("+").map(a=>a.trim().toLowerCase());return i.length===1?e.toLowerCase()===t.toLowerCase():(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),i.every((a,r)=>n.has(a)&&Array.from(n.values())[r]===i[r]))}function ay(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=ry(n.code,e);return Array.isArray(e)?e.some(i=>rl(n[o],i,t,n.type==="keyup")):rl(n[o],e,t,n.type==="keyup")}}function ry(e,t){return typeof t=="string"?e===t?"code":"key":t.includes(e)?"code":"key"}function Fn(e,t){const n=oe(()=>xe(t==null?void 0:t.actInsideInputWithModifier)??!1),o=oe(()=>xe(t==null?void 0:t.target)??window),i=se(xe(e)===!0);let a=!1;const r=new Set;let l=u(xe(e));de(()=>xe(e),(c,d)=>{typeof d=="boolean"&&typeof c!="boolean"&&s(),l=u(c)},{immediate:!0}),rt(()=>{Ru(window,["blur","contextmenu"],s)}),Lr((...c)=>l(...c),c=>{a=iy(c),!((!a||a&&!n.value)&&ba(c))&&(c.preventDefault(),i.value=!0)},{eventName:"keydown",target:o}),Lr((...c)=>l(...c),c=>{if(i.value){if((!a||a&&!n.value)&&ba(c))return;s()}},{eventName:"keyup",target:o});function s(){a=!1,r.clear(),i.value=!1}function u(c){return c===null?(s(),()=>!1):typeof c=="boolean"?(s(),i.value=c,()=>!1):Array.isArray(c)||typeof c=="string"?ay(c,r):c}return i}const hc="vue-flow__node-desc",vc="vue-flow__edge-desc",ly="vue-flow__aria-live",gc=["Enter"," ","Escape"],vn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function _a(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function xa(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function $i(e){return{width:e.offsetWidth,height:e.offsetHeight}}function en(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function mc(e,t){return{x:en(e.x,t[0][0],t[1][0]),y:en(e.y,t[0][1],t[1][1])}}function ll(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function zt(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function Zt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!zt(e)}function Dn(e){return Zt(e)&&"computedPosition"in e}function $o(e){return!Number.isNaN(e)&&Number.isFinite(e)}function sy(e){return $o(e.width)&&$o(e.height)&&$o(e.x)&&$o(e.y)}function uy(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:dn({width:0,height:0}),computedPosition:dn({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:De(e.data)?e.data:{},events:dn(De(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function pc(e,t,n){var o,i;const a={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(i=e.targetHandle)==null?void 0:i.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:De(e.data)?e.data:{},events:dn(De(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??a,e,{id:e.id.toString()})}function yc(e,t,n,o){const i=typeof e=="string"?e:e.id,a=new Set,r=o==="source"?"target":"source";for(const l of n)l[r]===i&&a.add(l[o]);return t.filter(l=>a.has(l.id))}function cy(...e){if(e.length===3){const[a,r,l]=e;return yc(a,r,l,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(a=>zt(a)&&a.source===o).map(a=>n.find(r=>Zt(r)&&r.id===a.target))}function dy(...e){if(e.length===3){const[a,r,l]=e;return yc(a,r,l,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(a=>zt(a)&&a.target===o).map(a=>n.find(r=>Zt(r)&&r.id===a.source))}function wc({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function fy(e,t){return t.some(n=>zt(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function bc({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function ti({x:e,y:t},{x:n,y:o,zoom:i},a=!1,[r,l]=[1,1]){const s={x:(e-n)/i,y:(t-o)/i};return a?{x:r*Math.round(s.x/r),y:l*Math.round(s.y/l)}:s}function _c(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function ni({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function xc({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function hy(e,t){return xc(_c(ni(e),ni(t)))}function ar(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=_c(t,ni({...o.computedPosition,...o.dimensions}))}return xc(t)}function Sc(e,t,n={x:0,y:0,zoom:1},o=!1,i=!1){const a={...ti(t,n),width:t.width/n.zoom,height:t.height/n.zoom},r=[];for(const l of e){const{dimensions:s,selectable:u=!0,hidden:c=!1}=l,d=s.width??l.width??null,f=s.height??l.height??null;if(i&&!u||c)continue;const h=xa(a,_a(l)),g=d===null||f===null,v=o&&h>0,p=(d??0)*(f??0);(g||v||h>=p||l.dragging)&&r.push(l)}return r}function Gt(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function sl(e,t,n,o,i,a=.1,r={x:0,y:0}){const l=t/(e.width*(1+a)),s=n/(e.height*(1+a)),u=Math.min(l,s),c=en(u,o,i),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c+(r.x??0),g=n/2-f*c+(r.y??0);return{x:h,y:g,zoom:c}}function vy(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Ec(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:Ec(n,t):!1}function jn(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function ul(e,t,n){return e<t?en(Math.abs(e-t),1,t)/t:e>n?-en(Math.abs(e-n),1,t)/t:0}function kc(e,t,n=15,o=40){const i=ul(e.x,o,t.width-o)*n,a=ul(e.y,o,t.height-o)*n;return[i,a]}function Gi(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(typeof t.style=="function"?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(typeof i.width=="string"){const a=Number(i.width.replace("px",""));i.width=`${a+n}px`}else i.width+=n;if(o>0)if(typeof i.height=="string"){const a=Number(i.height.replace("px",""));i.height=`${a+o}px`}else i.height+=o;if(e.position.x<0){const a=Math.abs(e.position.x);if(t.position.x=t.position.x-a,typeof i.width=="string"){const r=Number(i.width.replace("px",""));i.width=`${r+a}px`}else i.width+=a;e.position.x=0}if(e.position.y<0){const a=Math.abs(e.position.y);if(t.position.y=t.position.y-a,typeof i.height=="string"){const r=Number(i.height.replace("px",""));i.height=`${r+a}px`}else i.height+=a;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),typeof t.style=="function"?t.style=a=>{const r=t.style;return{...r(a),...i}}:t.style={...t.style,...i}}}}function cl(e,t){var n,o;const i=e.filter(r=>r.type==="add"||r.type==="remove");for(const r of i)if(r.type==="add")t.findIndex(s=>s.id===r.item.id)===-1&&t.push(r.item);else if(r.type==="remove"){const l=t.findIndex(s=>s.id===r.id);l!==-1&&t.splice(l,1)}const a=t.map(r=>r.id);for(const r of t)for(const l of e)if(l.id===r.id)switch(l.type){case"select":r.selected=l.selected;break;case"position":if(Dn(r)&&(typeof l.position<"u"&&(r.position=l.position),typeof l.dragging<"u"&&(r.dragging=l.dragging),r.expandParent&&r.parentNode)){const s=t[a.indexOf(r.parentNode)];s&&Dn(s)&&Gi(r,s)}break;case"dimensions":if(Dn(r)&&(typeof l.dimensions<"u"&&(r.dimensions=l.dimensions),typeof l.updateStyle<"u"&&(r.style={...r.style||{},width:`${(n=l.dimensions)==null?void 0:n.width}px`,height:`${(o=l.dimensions)==null?void 0:o.height}px`}),typeof l.resizing<"u"&&(r.resizing=l.resizing),r.expandParent&&r.parentNode)){const s=t[a.indexOf(r.parentNode)];s&&Dn(s)&&(!!s.dimensions.width&&!!s.dimensions.height?Gi(r,s):Ve(()=>{Gi(r,s)}))}break}return t}function Pt(e,t){return{id:e,type:"select",selected:t}}function dl(e){return{item:e,type:"add"}}function fl(e){return{id:e,type:"remove"}}function hl(e,t,n,o,i){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:i||null,type:"remove"}}function Vt(e,t=new Set,n=!1){const o=[];for(const[i,a]of e){const r=t.has(i);!(a.selected===void 0&&!r)&&a.selected!==r&&(n&&(a.selected=r),o.push(Pt(a.id,r)))}return o}function re(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const i=l=>{t.delete(l)};return{on:l=>{e&&n&&t.delete(e),t.add(l);const s=()=>{i(l),e&&n&&t.add(e)};return _i(s),{off:s}},off:i,trigger:l=>Promise.all(Array.from(t).map(s=>s(l))),hasListeners:o,fns:t}}function vl(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function gy(e,t,n,o,i){var a,r;const l=[];for(const s of e)(s.selected||s.id===i)&&(!s.parentNode||!Ec(s,o))&&(s.draggable||t&&typeof s.draggable>"u")&&l.push(dn({id:s.id,position:s.position||{x:0,y:0},distance:{x:n.x-((a=s.computedPosition)==null?void 0:a.x)||0,y:n.y-((r=s.computedPosition)==null?void 0:r.y)||0},from:s.computedPosition,extent:s.extent,parentNode:s.parentNode,dimensions:s.dimensions,expandParent:s.expandParent}));return l}function Yi({id:e,dragItems:t,findNode:n}){const o=[];for(const i of t){const a=n(i.id);a&&o.push(a)}return[e?o.find(i=>i.id===e):o[0],o]}function $c(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function my(e,t,n){const[o,i,a,r]=typeof e!="string"?$c(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+r,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-a]]:!1}function py(e,t,n,o){let i=e.extent||n;if((i==="parent"||!Array.isArray(i)&&(i==null?void 0:i.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const a=my(i,e,o);a&&(i=a)}else t(new Re(Be.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const a=(o==null?void 0:o.computedPosition.x)||0,r=(o==null?void 0:o.computedPosition.y)||0;i=[[i[0][0]+a,i[0][1]+r],[i[1][0]+a,i[1][1]+r]]}else if(i!=="parent"&&(i!=null&&i.range)&&Array.isArray(i.range)){const[a,r,l,s]=$c(i.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+u+s,i.range[0][1]+c+a],[i.range[1][0]+u-r,i.range[1][1]+c-l]]}return i==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function yy({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function rr(e,t,n,o,i){const a=yy(e.dimensions,py(e,n,o,i)),r=mc(t,a);return{position:{x:r.x-((i==null?void 0:i.computedPosition.x)||0),y:r.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:r}}function oi(e,t,n=le.Left){const o=((t==null?void 0:t.x)??0)+e.computedPosition.x,i=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:a,height:r}=t??_y(e);switch((t==null?void 0:t.position)??n){case le.Top:return{x:o+a/2,y:i};case le.Right:return{x:o+a,y:i+r/2};case le.Bottom:return{x:o+a/2,y:i+r};case le.Left:return{x:o,y:i+r/2}}}function gl(e=[],t){return e.length&&(t?e.find(n=>n.id===t):e[0])||null}function wy({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:a,width:r,height:l,viewport:s}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=ni({x:(0-s.x)/s.zoom,y:(0-s.y)/s.zoom,width:r/s.zoom,height:l/s.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}function by(e,t,n=!1){const o=typeof e.zIndex=="number";let i=o?e.zIndex:0;const a=t(e.source),r=t(e.target);return!a||!r?0:(n&&(i=o?e.zIndex:Math.max(a.computedPosition.z||0,r.computedPosition.z||0)),i)}var Be=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Be||{});const ml={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Re extends Error{constructor(t,...n){var o;super((o=ml[t])==null?void 0:o.call(ml,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function lr(e){return"clientX"in e}function Bt(e,t){var n,o;const i=lr(e),a=i?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,r=i?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:a-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}}const ii=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function _y(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function Cc(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function Xi(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function pl(e,t,n,o){const i=[];for(const a of t[n]||[])if(`${e.id}-${a.id}-${n}`!==o){const{x:r,y:l}=oi(e,a);i.push({id:a.id||null,type:n,nodeId:e.id,x:r,y:l})}return i}function xy(e,t,n,o,i,a){const{x:r,y:l}=Bt(e),u=t.elementsFromPoint(r,l).find(g=>g.classList.contains("vue-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const v=sr(void 0,u),p=u.getAttribute("data-handleid"),w=a({nodeId:g,id:p,type:v});if(w){const y=i.find(M=>M.nodeId===g&&M.type===v&&M.id===p);return{handle:{id:p,type:v,nodeId:g,x:(y==null?void 0:y.x)||n.x,y:(y==null?void 0:y.y)||n.y},validHandleResult:w}}}}let c=[],d=Number.POSITIVE_INFINITY;for(const g of i){const v=Math.sqrt((g.x-n.x)**2+(g.y-n.y)**2);if(v<=o){const p=a(g);v<=d&&(v<d?c=[{handle:g,validHandleResult:p}]:v===d&&c.push({handle:g,validHandleResult:p}),d=v)}}if(!c.length)return{handle:null,validHandleResult:Cc()};if(c.length===1)return c[0];const f=c.some(({validHandleResult:g})=>g.isValid),h=c.some(({handle:g})=>g.type==="target");return c.find(({handle:g,validHandleResult:v})=>h?g.type==="target":f?v.isValid:!0)||c[0]}function yl(e,t,n,o,i,a,r,l,s,u,c){const d=a==="target",f=l.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:h,y:g}=Bt(e),v=l.elementFromPoint(h,g),p=v!=null&&v.classList.contains("vue-flow__handle")?v:f,w=Cc();if(p){w.handleDomNode=p;const y=sr(void 0,p),M=p.getAttribute("data-nodeid"),E=p.getAttribute("data-handleid"),P=p.classList.contains("connectable"),L=p.classList.contains("connectableend"),D={source:d?M:o,sourceHandle:d?E:i,target:d?o:M,targetHandle:d?i:E};w.connection=D,P&&L&&(n===Jt.Strict?d&&y==="source"||!d&&y==="target":M!==o||E!==i)&&(w.isValid=r(D,{edges:s,nodes:u,sourceNode:c(D.source),targetNode:c(D.target)}),w.endHandle={nodeId:M,handleId:E,type:y,position:w.isValid?p.getAttribute("data-handlepos"):null})}return w}function Sy({nodes:e,nodeId:t,handleId:n,handleType:o}){const i=[];for(let a=0;a<e.length;a++){const r=e[a],{handleBounds:l}=r;let s=[],u=[];l&&(s=pl(r,l,"source",`${t}-${n}-${o}`),u=pl(r,l,"target",`${t}-${n}-${o}`)),i.push(...s,...u)}return i}function sr(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Ey(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const ky=["production","prod"];function Ci(e,...t){Ic()&&console.warn(`[Vue Flow]: ${e}`,...t)}function Ic(){return!ky.includes("production")}function wl(e,t,n,o){const i=t.querySelectorAll(`.vue-flow__handle${e}`);return Array.from(i).map(r=>{const l=r.getBoundingClientRect();return{id:r.getAttribute("data-handleid"),position:r.getAttribute("data-handlepos"),x:(l.left-n.left)/o,y:(l.top-n.top)/o,...$i(r)}})}function Sa(e,t,n,o,i,a=!1,r){i.value=!1,e.selected?(a||e.selected&&t)&&(o([e]),Ve(()=>{r.blur()})):n([e])}function De(e){return typeof ie(e)<"u"}function $y(e,t,n,o){if(!e||!e.source||!e.target)return n(new Re(Be.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let i;return zt(e)?i=e:i={...e,id:wc(e)},i=pc(i,void 0,o),fy(i,t)?!1:i}function Cy(e,t,n,o,i,a){if(!t.source||!t.target)return a(new Re(Be.EDGE_INVALID,e.id)),!1;const r=o(e.id);if(!r)return a(new Re(Be.EDGE_NOT_FOUND,e.id)),!1;const{id:l,...s}=e,u={...s,id:i?wc(t):l,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(r),1,u),u}function bl(e,t,n){const o={},i=[];for(let a=0;a<e.length;++a){const r=e[a];if(!Zt(r)){n(new Re(Be.NODE_INVALID,r==null?void 0:r.id)||`[ID UNKNOWN|INDEX ${a}]`);continue}const l=uy(r,t(r.id),r.parentNode);r.parentNode&&(o[r.parentNode]=!0),i[a]=l}for(const a of i){const r=t(a.parentNode)||i.find(l=>l.id===a.parentNode);a.parentNode&&!r&&n(new Re(Be.NODE_MISSING_PARENT,a.id,a.parentNode)),(a.parentNode||o[a.id])&&(o[a.id]&&(a.isParent=!0),r&&(r.isParent=!0))}return i}function _l(e,t){e.clear();for(const n of t){const{id:o,source:i,target:a,sourceHandle:r=null,targetHandle:l=null}=n,s=`${i}-source-${r}`,u=`${a}-target-${l}`,c=e.get(s)||new Map,d=e.get(u)||new Map,f=dn({edgeId:o,source:i,target:a,sourceHandle:r,targetHandle:l});e.set(s,c.set(`${a}-${l}`,f)),e.set(u,d.set(`${i}-${r}`,f))}}function xl(e,t,n,o,i,a,r,l){const s=[];for(const u of e){const c=zt(u)?u:$y(u,l,i,a);if(!c)continue;const d=n(c.source),f=n(c.target);if(!d||!f){i(new Re(Be.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){i(new Re(Be.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!f){i(new Re(Be.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:l,nodes:r,sourceNode:d,targetNode:f})){i(new Re(Be.EDGE_INVALID,c.id));continue}const h=o(c.id);s.push({...pc(c,h,a),sourceNode:d,targetNode:f})}return s}const Sl=Symbol("vueFlow"),Nc=Symbol("nodeId"),Pc=Symbol("nodeRef"),Iy=Symbol("edgeId"),Ny=Symbol("edgeRef"),Ii=Symbol("slots");function Mc(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodes:a,nodeExtent:r,nodeDragThreshold:l,viewport:s,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:f,findNode:h,multiSelectionActive:g,nodesSelectionActive:v,selectNodesOnDrag:p,removeSelectedElements:w,addSelectedNodes:y,updateNodePositions:M,emits:E}=ke(),{onStart:P,onDrag:L,onStop:D,onClick:z,el:O,disabled:V,id:$,selectable:K,dragHandle:Z}=e,m=se(!1);let N=[],S,A=null,C={x:void 0,y:void 0},I={x:0,y:0},k=null,T=!1,Y=0,X=!1;const G=Ty(),U=({x:q,y:j})=>{C={x:q,y:j};let x=!1;if(N=N.map(_=>{const H={x:q-_.distance.x,y:j-_.distance.y};n.value&&(H.x=o.value[0]*Math.round(H.x/o.value[0]),H.y=o.value[1]*Math.round(H.y/o.value[1]));const{computedPosition:R}=rr(_,H,E.error,r.value,_.parentNode?h(_.parentNode):void 0);return x=x||_.position.x!==R.x||_.position.y!==R.y,_.position=R,_}),!!x&&(M(N,!0,!0),m.value=!0,k)){const[_,H]=Yi({id:$,dragItems:N,findNode:h});L({event:k,node:_,nodes:H})}},te=()=>{if(!A)return;const[q,j]=kc(I,A,c.value);if(q!==0||j!==0){const x={x:(C.x??0)-q/s.value.zoom,y:(C.y??0)-j/s.value.zoom};f({x:q,y:j})&&U(x)}Y=requestAnimationFrame(te)},ee=(q,j)=>{T=!0;const x=h($);!p.value&&!g.value&&x&&(x.selected||w()),x&&xe(K)&&p.value&&Sa(x,g.value,y,w,v,!1,j);const _=G(q);if(C=_,N=gy(a.value,d.value,_,h,$),N.length){const[H,R]=Yi({id:$,dragItems:N,findNode:h});P({event:q.sourceEvent,node:H,nodes:R})}},ce=(q,j)=>{var x;q.sourceEvent.type==="touchmove"&&q.sourceEvent.touches.length>1||(l.value===0&&ee(q,j),C=G(q),A=((x=t.value)==null?void 0:x.getBoundingClientRect())||null,I=Bt(q.sourceEvent,A))},ne=(q,j)=>{const x=G(q);if(!X&&T&&u.value&&(X=!0,te()),!T){const _=x.xSnapped-(C.x??0),H=x.ySnapped-(C.y??0);Math.sqrt(_*_+H*H)>l.value&&ee(q,j)}(C.x!==x.xSnapped||C.y!==x.ySnapped)&&N.length&&T&&(k=q.sourceEvent,I=Bt(q.sourceEvent,A),U(x))},W=q=>{if(!T){const j=G(q),x=j.xSnapped-(C.x??0),_=j.ySnapped-(C.y??0),H=Math.sqrt(x*x+_*_);H!==0&&H<=l.value&&(z==null||z(q.sourceEvent));return}if(m.value=!1,X=!1,T=!1,cancelAnimationFrame(Y),N.length){M(N,!1,!1);const[j,x]=Yi({id:$,dragItems:N,findNode:h});D({event:q.sourceEvent,node:j,nodes:x})}};return de([()=>xe(V),O],([q,j],x,_)=>{if(j){const H=nt(j);q||(S=hm().on("start",R=>ce(R,j)).on("drag",R=>ne(R,j)).on("end",R=>W(R)).filter(R=>{const F=R.target,Q=xe(Z);return!R.button&&(!i.value||!vl(F,`.${i.value}`,j)&&(!Q||vl(F,Q,j)))}),H.call(S)),_(()=>{H.on(".drag",null),S&&(S.on("start",null),S.on("drag",null),S.on("end",null))})}}),m}function Py(){return{doubleClick:re(),click:re(),mouseEnter:re(),mouseMove:re(),mouseLeave:re(),contextMenu:re(),updateStart:re(),update:re(),updateEnd:re()}}function My(e,t){const n=Py();return n.doubleClick.on(o=>{var i,a;t.edgeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.edgeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.edgeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.edgeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.edgeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.edgeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.updateStart.on(o=>{var i,a;t.edgeUpdateStart(o),(a=(i=e.events)==null?void 0:i.updateStart)==null||a.call(i,o)}),n.update.on(o=>{var i,a;t.edgeUpdate(o),(a=(i=e.events)==null?void 0:i.update)==null||a.call(i,o)}),n.updateEnd.on(o=>{var i,a;t.edgeUpdateEnd(o),(a=(i=e.events)==null?void 0:i.updateEnd)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function Ty(){const{viewport:e,snapGrid:t,snapToGrid:n}=ke();return({sourceEvent:o})=>{const i=o.touches?o.touches[0].clientX:o.clientX,a=o.touches?o.touches[0].clientY:o.clientY,r={x:(i-e.value.x)/e.value.zoom,y:(a-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(r.x/t.value[0]):r.x,ySnapped:n.value?t.value[1]*Math.round(r.y/t.value[1]):r.y,...r}}}function Co(){return!0}function Tc({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:a,onEdgeUpdateEnd:r}){const{vueFlowRef:l,connectionMode:s,connectionRadius:u,connectOnClick:c,connectionClickStartHandle:d,nodesConnectable:f,autoPanOnConnect:h,autoPanSpeed:g,findNode:v,panBy:p,startConnection:w,updateConnection:y,endConnection:M,emits:E,viewport:P,edges:L,nodes:D,isValidConnection:z}=ke();let O=null,V=!1,$=null,K=null;function Z(N){var S;const A=xe(n)==="target",C=lr(N),I=ll(N.target);if(C&&N.button===0||!C){let k=function(R){j=Bt(R,W);const{handle:F,validHandleResult:Q}=xy(R,I,ti(j,P.value,!1,[1,1]),u.value,_,J=>yl(R,J,s.value,xe(t),xe(e),A?"target":"source",X,I,L.value,D.value,v));if(G=F,x||(H(),x=!0),O=Q.connection,V=Q.isValid,$=Q.handleDomNode,!(V&&G&&(K!=null&&K.endHandle)&&Q.endHandle&&K.endHandle.type===Q.endHandle.type&&K.endHandle.nodeId===Q.endHandle.nodeId&&K.endHandle.handleId===Q.endHandle.handleId)){if(y(G&&V?bc({x:G.x,y:G.y},P.value):j,Q.endHandle,Ey(!!G,V)),K=Q,!G&&!V&&!$)return Xi(q);O&&O.source!==O.target&&$&&(Xi(q),q=$,$.classList.add("connecting","vue-flow__handle-connecting"),$.classList.toggle("valid",V),$.classList.toggle("vue-flow__handle-valid",V))}},T=function(R){(G||$)&&O&&V&&(a?a(R,O):E.connect(O)),E.connectEnd(R),i&&(r==null||r(R)),Xi(q),cancelAnimationFrame(U),M(R),x=!1,V=!1,O=null,$=null,I.removeEventListener("mousemove",k),I.removeEventListener("mouseup",T),I.removeEventListener("touchmove",k),I.removeEventListener("touchend",T)};const Y=v(xe(t));let X=xe(o)||z.value||Co;!X&&Y&&(X=(A?Y.isValidSourcePos:Y.isValidTargetPos)||Co);let G,U=0;const{x:te,y:ee}=Bt(N),ce=I==null?void 0:I.elementFromPoint(te,ee),ne=sr(xe(i),ce),W=(S=l.value)==null?void 0:S.getBoundingClientRect();if(!W||!ne)return;let q,j=Bt(N,W),x=!1;const _=Sy({nodes:D.value,nodeId:xe(t),handleId:xe(e),handleType:ne}),H=()=>{if(!h.value)return;const[R,F]=kc(j,W,g.value);p({x:R,y:F}),U=requestAnimationFrame(H)};w({nodeId:xe(t),handleId:xe(e),type:ne,position:(ce==null?void 0:ce.getAttribute("data-handlepos"))||le.Top},{x:te-W.left,y:ee-W.top}),E.connectStart({event:N,nodeId:xe(t),handleId:xe(e),handleType:ne}),I.addEventListener("mousemove",k),I.addEventListener("mouseup",T),I.addEventListener("touchmove",k),I.addEventListener("touchend",T)}}function m(N){if(!c.value)return;const S=xe(n)==="target";if(!d.value)E.clickConnectStart({event:N,nodeId:xe(t),handleId:xe(e)}),w({nodeId:xe(t),type:xe(n),handleId:xe(e)},void 0,!0);else{let A=xe(o)||z.value||Co;const C=v(xe(t));if(!A&&C&&(A=(S?C.isValidSourcePos:C.isValidTargetPos)||Co),C&&(typeof C.connectable>"u"?f.value:C.connectable)===!1)return;const I=ll(N.target),{connection:k,isValid:T}=yl(N,{nodeId:xe(t),id:xe(e),type:xe(n)},s.value,d.value.nodeId,d.value.handleId||null,d.value.type,A,I,L.value,D.value,v),Y=k.source===k.target;T&&!Y&&E.connect(k),E.clickConnectEnd(N),M(N,!0)}}return{handlePointerDown:Z,handleClick:m}}function Vy(){return Le(Nc,"")}function Vc(e){const t=e??Vy()??"",n=Le(Pc,se(null)),{findNode:o,edges:i,emits:a}=ke(),r=o(t);return r||a.error(new Re(Be.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:r,parentNode:B(()=>o(r.parentNode)),connectedEdges:B(()=>Gt([r],i.value))}}function Ay(){return{doubleClick:re(),click:re(),mouseEnter:re(),mouseMove:re(),mouseLeave:re(),contextMenu:re(),dragStart:re(),drag:re(),dragStop:re()}}function Dy(e,t){const n=Ay();return n.doubleClick.on(o=>{var i,a;t.nodeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.nodeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.nodeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.nodeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.nodeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.nodeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.dragStart.on(o=>{var i,a;t.nodeDragStart(o),(a=(i=e.events)==null?void 0:i.dragStart)==null||a.call(i,o)}),n.drag.on(o=>{var i,a;t.nodeDrag(o),(a=(i=e.events)==null?void 0:i.drag)==null||a.call(i,o)}),n.dragStop.on(o=>{var i,a;t.nodeDragStop(o),(a=(i=e.events)==null?void 0:i.dragStop)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function Ac(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:a,nodesDraggable:r,emits:l}=ke();return(s,u=!1)=>{const c=a.value?i.value[0]:5,d=a.value?i.value[1]:5,f=u?4:1,h=s.x*c*f,g=s.y*d*f,v=[];for(const p of e.value)if(p.draggable||r&&typeof p.draggable>"u"){const w={x:p.computedPosition.x+h,y:p.computedPosition.y+g},{computedPosition:y}=rr(p,w,l.error,t.value,p.parentNode?o(p.parentNode):void 0);v.push({id:p.id,position:y,from:p.position,distance:{x:s.x,y:s.y},dimensions:p.dimensions})}n(v,!0,!1)}}const Ui=.1;function Nt(){return Ci("Viewport not initialized yet."),Promise.resolve(!1)}const Oy={zoomIn:Nt,zoomOut:Nt,zoomTo:Nt,fitView:Nt,setCenter:Nt,fitBounds:Nt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:Nt,setTransform:Nt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function By(e){function t(o,i){return new Promise(a=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(Wi(e.d3Selection,i,()=>{a(!0)}),o):a(!1)})}function n(o,i,a,r){return new Promise(l=>{const{x:s,y:u}=mc({x:-o,y:-i},e.translateExtent),c=_n.translate(-s,-u).scale(a);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(Wi(e.d3Selection,r,()=>{l(!0)}),c):l(!1)})}return B(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:i=>t(1.2,i==null?void 0:i.duration),zoomOut:i=>t(1/1.2,i==null?void 0:i.duration),zoomTo:(i,a)=>new Promise(r=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(Wi(e.d3Selection,a==null?void 0:a.duration,()=>{r(!0)}),i):r(!1)}),setViewport:(i,a)=>n(i.x,i.y,i.zoom,a==null?void 0:a.duration),setTransform:(i,a)=>n(i.x,i.y,i.zoom,a==null?void 0:a.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(i={padding:Ui,includeHiddenNodes:!1,duration:0})=>{var a,r;const l=[];for(const f of e.nodes)f.dimensions.width&&f.dimensions.height&&((i==null?void 0:i.includeHiddenNodes)||!f.hidden)&&(!((a=i.nodes)!=null&&a.length)||(r=i.nodes)!=null&&r.length&&i.nodes.includes(f.id))&&l.push(f);if(!l.length)return Promise.resolve(!1);const s=ar(l),{x:u,y:c,zoom:d}=sl(s,e.dimensions.width,e.dimensions.height,i.minZoom??e.minZoom,i.maxZoom??e.maxZoom,i.padding??Ui,i.offset);return n(u,c,d,i==null?void 0:i.duration)},setCenter:(i,a,r)=>{const l=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:e.maxZoom,s=e.dimensions.width/2-i*l,u=e.dimensions.height/2-a*l;return n(s,u,l,r==null?void 0:r.duration)},fitBounds:(i,a={padding:Ui})=>{const{x:r,y:l,zoom:s}=sl(i,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,a.padding);return n(r,l,s,a==null?void 0:a.duration)},project:i=>ti(i,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:i=>{if(e.vueFlowRef){const{x:a,y:r}=e.vueFlowRef.getBoundingClientRect(),l={x:i.x-a,y:i.y-r};return ti(l,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:i=>{if(e.vueFlowRef){const{x:a,y:r}=e.vueFlowRef.getBoundingClientRect(),l={x:i.x+a,y:i.y+r};return bc(l,e.viewport)}return{x:0,y:0}}}:Oy)}function Wi(e,t=0,n){return e.transition().duration(t).on("end",n)}function Ry(e,t,n){const o=ks(!0);return o.run(()=>{const i=()=>{o.run(()=>{let v,p,w=!!(n.nodes.value.length||n.edges.value.length);v=ln([e.modelValue,()=>{var y,M;return(M=(y=e.modelValue)==null?void 0:y.value)==null?void 0:M.length}],([y])=>{y&&Array.isArray(y)&&(p==null||p.pause(),n.setElements(y),!p&&!w&&y.length?w=!0:p==null||p.resume())}),p=ln([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([y,M])=>{var E;(E=e.modelValue)!=null&&E.value&&Array.isArray(e.modelValue.value)&&(v==null||v.pause(),e.modelValue.value=[...y,...M],Ve(()=>{v==null||v.resume()}))},{immediate:w}),Kt(()=>{v==null||v.stop(),p==null||p.stop()})})},a=()=>{o.run(()=>{let v,p,w=!!n.nodes.value.length;v=ln([e.nodes,()=>{var y,M;return(M=(y=e.nodes)==null?void 0:y.value)==null?void 0:M.length}],([y])=>{y&&Array.isArray(y)&&(p==null||p.pause(),n.setNodes(y),!p&&!w&&y.length?w=!0:p==null||p.resume())}),p=ln([n.nodes,()=>n.nodes.value.length],([y])=>{var M;(M=e.nodes)!=null&&M.value&&Array.isArray(e.nodes.value)&&(v==null||v.pause(),e.nodes.value=[...y],Ve(()=>{v==null||v.resume()}))},{immediate:w}),Kt(()=>{v==null||v.stop(),p==null||p.stop()})})},r=()=>{o.run(()=>{let v,p,w=!!n.edges.value.length;v=ln([e.edges,()=>{var y,M;return(M=(y=e.edges)==null?void 0:y.value)==null?void 0:M.length}],([y])=>{y&&Array.isArray(y)&&(p==null||p.pause(),n.setEdges(y),!p&&!w&&y.length?w=!0:p==null||p.resume())}),p=ln([n.edges,()=>n.edges.value.length],([y])=>{var M;(M=e.edges)!=null&&M.value&&Array.isArray(e.edges.value)&&(v==null||v.pause(),e.edges.value=[...y],Ve(()=>{v==null||v.resume()}))},{immediate:w}),Kt(()=>{v==null||v.stop(),p==null||p.stop()})})},l=()=>{o.run(()=>{de(()=>t.maxZoom,()=>{t.maxZoom&&De(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},s=()=>{o.run(()=>{de(()=>t.minZoom,()=>{t.minZoom&&De(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{de(()=>t.translateExtent,()=>{t.translateExtent&&De(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{de(()=>t.nodeExtent,()=>{t.nodeExtent&&De(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{de(()=>t.applyDefault,()=>{De(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},f=()=>{o.run(()=>{const v=async p=>{let w=p;typeof t.autoConnect=="function"&&(w=await t.autoConnect(p)),w!==!1&&n.addEdges([w])};de(()=>t.autoConnect,()=>{De(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),de(n.autoConnect,(p,w,y)=>{p?n.onConnect(v):n.hooks.value.connect.off(v),y(()=>{n.hooks.value.connect.off(v)})},{immediate:!0})})},h=()=>{const v=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const p of Object.keys(t)){const w=p;if(!v.includes(w)){const y=oe(()=>t[w]),M=n[w];La(M)&&o.run(()=>{de(y,E=>{De(E)&&(M.value=E)},{immediate:!0})})}}};(()=>{i(),a(),r(),s(),l(),u(),c(),d(),f(),h()})()}),()=>o.stop()}function zy(){return{edgesChange:re(),nodesChange:re(),nodeDoubleClick:re(),nodeClick:re(),nodeMouseEnter:re(),nodeMouseMove:re(),nodeMouseLeave:re(),nodeContextMenu:re(),nodeDragStart:re(),nodeDrag:re(),nodeDragStop:re(),nodesInitialized:re(),miniMapNodeClick:re(),miniMapNodeDoubleClick:re(),miniMapNodeMouseEnter:re(),miniMapNodeMouseMove:re(),miniMapNodeMouseLeave:re(),connect:re(),connectStart:re(),connectEnd:re(),clickConnectStart:re(),clickConnectEnd:re(),paneReady:re(),init:re(),move:re(),moveStart:re(),moveEnd:re(),selectionDragStart:re(),selectionDrag:re(),selectionDragStop:re(),selectionContextMenu:re(),selectionStart:re(),selectionEnd:re(),viewportChangeStart:re(),viewportChange:re(),viewportChangeEnd:re(),paneScroll:re(),paneClick:re(),paneContextMenu:re(),paneMouseEnter:re(),paneMouseMove:re(),paneMouseLeave:re(),edgeContextMenu:re(),edgeMouseEnter:re(),edgeMouseMove:re(),edgeMouseLeave:re(),edgeDoubleClick:re(),edgeClick:re(),edgeUpdateStart:re(),edgeUpdate:re(),edgeUpdateEnd:re(),updateNodeInternals:re(),error:re(e=>Ci(e.message))}}function Fy(e,t){ys(()=>{for(const[n,o]of Object.entries(t.value)){const i=a=>{e(n,a)};o.fns.add(i),_i(()=>{o.off(i)})}})}function Dc(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:ir.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:zn.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Ht.Bezier,style:{}},connectionMode:Jt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:ii()?"Meta":"Control",zoomActivationKeyCode:ii()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:zy(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Ly=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Hy(e,t,n){const o=By(e),i=x=>{const _=x??[];e.hooks.updateNodeInternals.trigger(_)},a=x=>dy(x,e.nodes,e.edges),r=x=>cy(x,e.nodes,e.edges),l=x=>Gt(x,e.edges),s=x=>{if(x)return t.value.get(x)},u=x=>{if(x)return n.value.get(x)},c=(x,_,H)=>{var R,F;const Q=[];for(const J of x){const fe={id:J.id,type:"position",dragging:H,from:J.from};if(_&&(fe.position=J.position,J.parentNode)){const me=s(J.parentNode);fe.position={x:fe.position.x-(((R=me==null?void 0:me.computedPosition)==null?void 0:R.x)??0),y:fe.position.y-(((F=me==null?void 0:me.computedPosition)==null?void 0:F.y)??0)}}Q.push(fe)}Q!=null&&Q.length&&e.hooks.nodesChange.trigger(Q)},d=x=>{if(!e.vueFlowRef)return;const _=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!_)return;const H=window.getComputedStyle(_),{m22:R}=new window.DOMMatrixReadOnly(H.transform),F=[];for(let Q=0;Q<x.length;++Q){const J=x[Q],fe=s(J.id);if(fe){const me=$i(J.nodeElement);if(!!(me.width&&me.height&&(fe.dimensions.width!==me.width||fe.dimensions.height!==me.height||J.forceUpdate))){const pe=J.nodeElement.getBoundingClientRect();fe.dimensions=me,fe.handleBounds.source=wl(".source",J.nodeElement,pe,R),fe.handleBounds.target=wl(".target",J.nodeElement,pe,R),F[Q]={id:fe.id,type:"dimensions",dimensions:me}}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),F.length&&e.hooks.nodesChange.trigger(F)},f=(x,_)=>{const H=new Set,R=new Set;for(const J of x)Zt(J)?H.add(J.id):zt(J)&&R.add(J.id);const F=Vt(t.value,H,!0),Q=Vt(n.value,R);if(e.multiSelectionActive){for(const J of H)F.push(Pt(J,_));for(const J of R)Q.push(Pt(J,_))}F.length&&e.hooks.nodesChange.trigger(F),Q.length&&e.hooks.edgesChange.trigger(Q)},h=x=>{if(e.multiSelectionActive){const _=x.map(H=>Pt(H.id,!0));e.hooks.nodesChange.trigger(_);return}e.hooks.nodesChange.trigger(Vt(t.value,new Set(x.map(_=>_.id)),!0)),e.hooks.edgesChange.trigger(Vt(n.value))},g=x=>{if(e.multiSelectionActive){const _=x.map(H=>Pt(H.id,!0));e.hooks.edgesChange.trigger(_);return}e.hooks.edgesChange.trigger(Vt(n.value,new Set(x.map(_=>_.id)))),e.hooks.nodesChange.trigger(Vt(t.value,new Set,!0))},v=x=>{f(x,!0)},p=x=>{const H=(x||e.nodes).map(R=>(R.selected=!1,Pt(R.id,!1)));e.hooks.nodesChange.trigger(H)},w=x=>{const H=(x||e.edges).map(R=>(R.selected=!1,Pt(R.id,!1)));e.hooks.edgesChange.trigger(H)},y=x=>{if(!x||!x.length)return f([],!1);const _=x.reduce((H,R)=>{const F=Pt(R.id,!1);return Zt(R)?H.nodes.push(F):H.edges.push(F),H},{nodes:[],edges:[]});_.nodes.length&&e.hooks.nodesChange.trigger(_.nodes),_.edges.length&&e.hooks.edgesChange.trigger(_.edges)},M=x=>{var _;(_=e.d3Zoom)==null||_.scaleExtent([x,e.maxZoom]),e.minZoom=x},E=x=>{var _;(_=e.d3Zoom)==null||_.scaleExtent([e.minZoom,x]),e.maxZoom=x},P=x=>{var _;(_=e.d3Zoom)==null||_.translateExtent(x),e.translateExtent=x},L=x=>{e.nodeExtent=x,i()},D=x=>{var _;(_=e.d3Zoom)==null||_.clickDistance(x)},z=x=>{e.nodesDraggable=x,e.nodesConnectable=x,e.elementsSelectable=x},O=x=>{const _=x instanceof Function?x(e.nodes):x;!e.initialized&&!_.length||(e.nodes=bl(_,s,e.hooks.error.trigger))},V=x=>{const _=x instanceof Function?x(e.edges):x;if(!e.initialized&&!_.length)return;const H=xl(_,e.isValidConnection,s,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);_l(e.connectionLookup,H),e.edges=H},$=x=>{const _=x instanceof Function?x([...e.nodes,...e.edges]):x;!e.initialized&&!_.length||(O(_.filter(Zt)),V(_.filter(zt)))},K=x=>{let _=x instanceof Function?x(e.nodes):x;_=Array.isArray(_)?_:[_];const H=bl(_,s,e.hooks.error.trigger),R=[];for(const F of H)R.push(dl(F));R.length&&e.hooks.nodesChange.trigger(R)},Z=x=>{let _=x instanceof Function?x(e.edges):x;_=Array.isArray(_)?_:[_];const H=xl(_,e.isValidConnection,s,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),R=[];for(const F of H)R.push(dl(F));R.length&&e.hooks.edgesChange.trigger(R)},m=(x,_=!0,H=!1)=>{const R=x instanceof Function?x(e.nodes):x,F=Array.isArray(R)?R:[R],Q=[],J=[];function fe(_e){const pe=l(_e);for(const Ie of pe)(!De(Ie.deletable)||Ie.deletable)&&J.push(hl(Ie.id,Ie.source,Ie.target,Ie.sourceHandle,Ie.targetHandle))}function me(_e){const pe=[];for(const Ie of e.nodes)Ie.parentNode===_e&&pe.push(Ie);if(pe.length){for(const Ie of pe)Q.push(fl(Ie.id));_&&fe(pe);for(const Ie of pe)me(Ie.id)}}for(const _e of F){const pe=typeof _e=="string"?s(_e):_e;pe&&(De(pe.deletable)&&!pe.deletable||(Q.push(fl(pe.id)),_&&fe([pe]),H&&me(pe.id)))}J.length&&e.hooks.edgesChange.trigger(J),Q.length&&e.hooks.nodesChange.trigger(Q)},N=x=>{const _=x instanceof Function?x(e.edges):x,H=Array.isArray(_)?_:[_],R=[];for(const F of H){const Q=typeof F=="string"?u(F):F;Q&&(De(Q.deletable)&&!Q.deletable||R.push(hl(typeof F=="string"?F:F.id,Q.source,Q.target,Q.sourceHandle,Q.targetHandle)))}e.hooks.edgesChange.trigger(R)},S=(x,_,H=!0)=>Cy(x,_,e.edges,u,H,e.hooks.error.trigger),A=(x,_,H={replace:!1})=>{const R=u(x);if(!R)return;const F=typeof _=="function"?_(R):_;R.data=H.replace?F:{...R.data,...F}},C=x=>cl(x,e.nodes),I=x=>{const _=cl(x,e.edges);return _l(e.connectionLookup,_),_},k=(x,_,H={replace:!1})=>{const R=s(x);if(!R)return;const F=typeof _=="function"?_(R):_;H.replace?e.nodes.splice(e.nodes.indexOf(R),1,F):Object.assign(R,F)},T=(x,_,H={replace:!1})=>{const R=s(x);if(!R)return;const F=typeof _=="function"?_(R):_;R.data=H.replace?F:{...R.data,...F}},Y=(x,_,H=!1)=>{H?e.connectionClickStartHandle=x:e.connectionStartHandle=x,e.connectionEndHandle=null,e.connectionStatus=null,_&&(e.connectionPosition=_)},X=(x,_=null,H=null)=>{e.connectionStartHandle&&(e.connectionPosition=x,e.connectionEndHandle=_,e.connectionStatus=H)},G=(x,_)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,_?e.connectionClickStartHandle=null:e.connectionStartHandle=null},U=x=>{const _=sy(x),H=_?null:Dn(x)?x:s(x.id);return!_&&!H?[null,null,_]:[_?x:_a(H),H,_]},te=(x,_=!0,H=e.nodes)=>{const[R,F,Q]=U(x);if(!R)return[];const J=[];for(const fe of H||e.nodes){if(!Q&&(fe.id===F.id||!fe.computedPosition))continue;const me=_a(fe),_e=xa(me,R);(_&&_e>0||_e>=Number(R.width)*Number(R.height))&&J.push(fe)}return J},ee=(x,_,H=!0)=>{const[R]=U(x);if(!R)return!1;const F=xa(R,_);return H&&F>0||F>=Number(R.width)*Number(R.height)},ce=x=>{const{viewport:_,dimensions:H,d3Zoom:R,d3Selection:F,translateExtent:Q}=e;if(!R||!F||!x.x&&!x.y)return!1;const J=_n.translate(_.x+x.x,_.y+x.y).scale(_.zoom),fe=[[0,0],[H.width,H.height]],me=R.constrain()(J,fe,Q),_e=e.viewport.x!==me.x||e.viewport.y!==me.y||e.viewport.zoom!==me.k;return R.transform(F,me),_e},ne=x=>{const _=x instanceof Function?x(e):x,H=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];De(_.defaultEdgeOptions)&&(e.defaultEdgeOptions=_.defaultEdgeOptions);const R=_.modelValue||_.nodes||_.edges?[]:void 0;R&&(_.modelValue&&R.push(..._.modelValue),_.nodes&&R.push(..._.nodes),_.edges&&R.push(..._.edges),$(R));const F=()=>{De(_.maxZoom)&&E(_.maxZoom),De(_.minZoom)&&M(_.minZoom),De(_.translateExtent)&&P(_.translateExtent)};for(const Q of Object.keys(_)){const J=Q,fe=_[J];![...Ly,...H].includes(J)&&De(fe)&&(e[J]=fe)}ca(()=>e.d3Zoom).not.toBeNull().then(F),e.initialized||(e.initialized=!0)};return{updateNodePositions:c,updateNodeDimensions:d,setElements:$,setNodes:O,setEdges:V,addNodes:K,addEdges:Z,removeNodes:m,removeEdges:N,findNode:s,findEdge:u,updateEdge:S,updateEdgeData:A,updateNode:k,updateNodeData:T,applyEdgeChanges:I,applyNodeChanges:C,addSelectedElements:v,addSelectedNodes:h,addSelectedEdges:g,setMinZoom:M,setMaxZoom:E,setTranslateExtent:P,setNodeExtent:L,setPaneClickDistance:D,removeSelectedElements:y,removeSelectedNodes:p,removeSelectedEdges:w,startConnection:Y,updateConnection:X,endConnection:G,setInteractive:z,setState:ne,getIntersectingNodes:te,getIncomers:a,getOutgoers:r,getConnectedEdges:l,isNodeIntersecting:ee,panBy:ce,fitView:x=>o.value.fitView(x),zoomIn:x=>o.value.zoomIn(x),zoomOut:x=>o.value.zoomOut(x),zoomTo:(x,_)=>o.value.zoomTo(x,_),setViewport:(x,_)=>o.value.setViewport(x,_),setTransform:(x,_)=>o.value.setTransform(x,_),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(x,_,H)=>o.value.setCenter(x,_,H),fitBounds:(x,_)=>o.value.fitBounds(x,_),project:x=>o.value.project(x),screenToFlowCoordinate:x=>o.value.screenToFlowCoordinate(x),flowToScreenCoordinate:x=>o.value.flowToScreenCoordinate(x),toObject:()=>{const x=[],_=[];for(const H of e.nodes){const{computedPosition:R,handleBounds:F,selected:Q,dimensions:J,isParent:fe,resizing:me,dragging:_e,events:pe,...Ie}=H;x.push(Ie)}for(const H of e.edges){const{selected:R,sourceNode:F,targetNode:Q,events:J,...fe}=H;_.push(fe)}return JSON.parse(JSON.stringify({nodes:x,edges:_,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:x=>new Promise(_=>{const{nodes:H,edges:R,position:F,zoom:Q,viewport:J}=x;if(H&&O(H),R&&V(R),J!=null&&J.x&&(J!=null&&J.y)||F){const fe=(J==null?void 0:J.x)||F[0],me=(J==null?void 0:J.y)||F[1],_e=(J==null?void 0:J.zoom)||Q||e.viewport.zoom;return ca(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:fe,y:me,zoom:_e}).then(()=>{_(!0)})})}else _(!0)}),updateNodeInternals:i,viewportHelper:o,$reset:()=>{const x=Dc();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const _=_n.translate(x.defaultViewport.x??0,x.defaultViewport.y??0).scale(en(x.defaultViewport.zoom??1,x.minZoom,x.maxZoom)),H=e.viewportRef.getBoundingClientRect(),R=[[0,0],[H.width,H.height]],F=e.d3Zoom.constrain()(_,R,x.translateExtent);e.d3Zoom.transform(e.d3Selection,F)}ne(x)},$destroy:()=>{}}}const Gy=["data-id","data-handleid","data-nodeid","data-handlepos"],Yy={name:"Handle",compatConfig:{MODE:3}},Qn=we({...Yy,props:{id:{default:null},type:{},position:{default:()=>le.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=Es(e,["position","connectable","connectableStart","connectableEnd","id"]),o=oe(()=>n.type??"source"),i=oe(()=>n.isValidConnection??null),{connectionStartHandle:a,connectionClickStartHandle:r,connectionEndHandle:l,vueFlowRef:s,nodesConnectable:u,noDragClassName:c,noPanClassName:d}=ke(),{id:f,node:h,nodeEl:g,connectedEdges:v}=Vc(),p=se(),w=oe(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),y=oe(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),M=oe(()=>{var V,$,K,Z,m,N;return((V=a.value)==null?void 0:V.nodeId)===f&&(($=a.value)==null?void 0:$.handleId)===e.id&&((K=a.value)==null?void 0:K.type)===o.value||((Z=l.value)==null?void 0:Z.nodeId)===f&&((m=l.value)==null?void 0:m.handleId)===e.id&&((N=l.value)==null?void 0:N.type)===o.value}),E=oe(()=>{var V,$,K;return((V=r.value)==null?void 0:V.nodeId)===f&&(($=r.value)==null?void 0:$.handleId)===e.id&&((K=r.value)==null?void 0:K.type)===o.value}),{handlePointerDown:P,handleClick:L}=Tc({nodeId:f,handleId:e.id,isValidConnection:i,type:o}),D=B(()=>typeof e.connectable=="string"&&e.connectable==="single"?!v.value.some(V=>{const $=V[`${o.value}Handle`];return V[o.value]!==f?!1:$?$===e.id:!0}):typeof e.connectable=="number"?v.value.filter(V=>{const $=V[`${o.value}Handle`];return V[o.value]!==f?!1:$?$===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(h,v.value):De(e.connectable)?e.connectable:u.value);rt(()=>{var V;if(!h.dimensions.width||!h.dimensions.height)return;const $=(V=h.handleBounds[o.value])==null?void 0:V.find(C=>C.id===e.id);if(!s.value||$)return;const K=s.value.querySelector(".vue-flow__transformationpane");if(!g.value||!p.value||!K||!e.id)return;const Z=g.value.getBoundingClientRect(),m=p.value.getBoundingClientRect(),N=window.getComputedStyle(K),{m22:S}=new window.DOMMatrixReadOnly(N.transform),A={id:e.id,position:e.position,x:(m.left-Z.left)/S,y:(m.top-Z.top)/S,...$i(p.value)};h.handleBounds[o.value]=[...h.handleBounds[o.value]??[],A]}),Ss(()=>{const V=h.handleBounds[o.value];V&&(h.handleBounds[o.value]=V.filter($=>$.id!==e.id))});function z(V){const $=lr(V);D.value&&w.value&&($&&V.button===0||!$)&&P(V)}function O(V){!f||!r.value&&!w.value||D.value&&L(V)}return t({handleClick:L,handlePointerDown:P,onClick:O,onPointerDown:z}),(V,$)=>(ae(),ge("div",{ref_key:"handle",ref:p,"data-id":`${ie(f)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":ie(f),"data-handlepos":V.position,class:vt(["vue-flow__handle",[`vue-flow__handle-${V.position}`,`vue-flow__handle-${e.id}`,ie(c),ie(d),o.value,{connectable:D.value,connecting:E.value,connectablestart:w.value,connectableend:y.value,connectionindicator:D.value&&(w.value&&!M.value||y.value&&M.value)}]]),onMousedown:z,onTouchstartPassive:z,onClick:O},[Ne(V.$slots,"default",{id:V.id})],42,Gy))}}),Ni=function({sourcePosition:e=le.Bottom,targetPosition:t=le.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:a,data:r}){const l=r.label||n;return[Se(Qn,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof l!="string"&&l?Se(l):Se("div",{innerHTML:l}),Se(Qn,{type:"source",position:e,connectable:o,isValidConnection:a})]};Ni.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];Ni.inheritAttrs=!1;Ni.compatConfig={MODE:3};const Xy=Ni,Pi=function({targetPosition:e=le.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:i}){const a=i.label||t;return[Se(Qn,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof a!="string"&&a?Se(a):Se("div",{innerHTML:a})]};Pi.props=["targetPosition","label","isValidTargetPos","connectable","data"];Pi.inheritAttrs=!1;Pi.compatConfig={MODE:3};const Uy=Pi,Mi=function({sourcePosition:e=le.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:i}){const a=i.label||t;return[typeof a!="string"&&a?Se(a):Se("div",{innerHTML:a}),Se(Qn,{type:"source",position:e,connectable:n,isValidConnection:o})]};Mi.props=["sourcePosition","label","isValidSourcePos","connectable","data"];Mi.inheritAttrs=!1;Mi.compatConfig={MODE:3};const Wy=Mi,Ky=["transform"],qy=["width","height","x","y","rx","ry"],Zy=["y"],jy={name:"EdgeText",compatConfig:{MODE:3}},Qy=we({...jy,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=se({x:0,y:0,width:0,height:0}),n=se(null),o=B(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);rt(i),de([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const a=n.value.getBBox();(a.width!==t.value.width||a.height!==t.value.height)&&(t.value=a)}return(a,r)=>(ae(),ge("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[a.labelShowBg?(ae(),ge("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*a.labelBgPadding[0]}px`,height:`${t.value.height+2*a.labelBgPadding[1]}px`,x:-a.labelBgPadding[0],y:-a.labelBgPadding[1],style:Ue(a.labelBgStyle),rx:a.labelBgBorderRadius,ry:a.labelBgBorderRadius},null,12,qy)):Me("",!0),ze("text",he(a.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:a.labelStyle}),[Ne(a.$slots,"default",{},()=>[typeof a.label!="string"?(ae(),$e(Lt(a.label),{key:0})):(ae(),ge(ye,{key:1},[Oe(at(a.label),1)],64))])],16,Zy)],8,Ky))}}),Jy=["id","d","marker-end","marker-start"],e0=["d","stroke-width"],t0={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},go=we({...t0,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=Es(e,["interactionWidth","labelShowBg"]),o=se(null),i=se(null),a=se(null),r=Fa();return t({pathEl:o,interactionEl:i,labelEl:a}),(l,s)=>(ae(),ge(ye,null,[ze("path",{id:l.id,ref_key:"pathEl",ref:o,d:l.path,style:Ue(n.style),class:vt(["vue-flow__edge-path",ie(r).class]),"marker-end":l.markerEnd,"marker-start":l.markerStart},null,14,Jy),l.interactionWidth?(ae(),ge("path",{key:0,ref_key:"interactionEl",ref:i,fill:"none",d:l.path,"stroke-width":l.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,e0)):Me("",!0),l.label&&l.labelX&&l.labelY?(ae(),$e(Qy,{key:1,ref_key:"labelEl",ref:a,x:l.labelX,y:l.labelY,label:l.label,"label-show-bg":l.labelShowBg,"label-bg-style":l.labelBgStyle,"label-bg-padding":l.labelBgPadding,"label-bg-border-radius":l.labelBgBorderRadius,"label-style":l.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):Me("",!0)],64))}});function Oc({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,a=n<e?n+i:n-i,r=Math.abs(o-t)/2,l=o<t?o+r:o-r;return[a,l,i,r]}function Bc({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:r,targetControlY:l}){const s=e*.125+i*.375+r*.375+n*.125,u=t*.125+a*.375+l*.375+o*.125,c=Math.abs(s-e),d=Math.abs(u-t);return[s,u,c,d]}function Io(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function El({pos:e,x1:t,y1:n,x2:o,y2:i,c:a}){let r,l;switch(e){case le.Left:r=t-Io(t-o,a),l=n;break;case le.Right:r=t+Io(o-t,a),l=n;break;case le.Top:r=t,l=n-Io(n-i,a);break;case le.Bottom:r=t,l=n+Io(i-n,a);break}return[r,l]}function ur(e){const{sourceX:t,sourceY:n,sourcePosition:o=le.Bottom,targetX:i,targetY:a,targetPosition:r=le.Top,curvature:l=.25}=e,[s,u]=El({pos:o,x1:t,y1:n,x2:i,y2:a,c:l}),[c,d]=El({pos:r,x1:i,y1:a,x2:t,y2:n,c:l}),[f,h,g,v]=Bc({sourceX:t,sourceY:n,targetX:i,targetY:a,sourceControlX:s,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${s},${u} ${c},${d} ${i},${a}`,f,h,g,v]}function kl({pos:e,x1:t,y1:n,x2:o,y2:i}){let a,r;switch(e){case le.Left:case le.Right:a=.5*(t+o),r=n;break;case le.Top:case le.Bottom:a=t,r=.5*(n+i);break}return[a,r]}function Rc(e){const{sourceX:t,sourceY:n,sourcePosition:o=le.Bottom,targetX:i,targetY:a,targetPosition:r=le.Top}=e,[l,s]=kl({pos:o,x1:t,y1:n,x2:i,y2:a}),[u,c]=kl({pos:r,x1:i,y1:a,x2:t,y2:n}),[d,f,h,g]=Bc({sourceX:t,sourceY:n,targetX:i,targetY:a,sourceControlX:l,sourceControlY:s,targetControlX:u,targetControlY:c});return[`M${t},${n} C${l},${s} ${u},${c} ${i},${a}`,d,f,h,g]}const $l={[le.Left]:{x:-1,y:0},[le.Right]:{x:1,y:0},[le.Top]:{x:0,y:-1},[le.Bottom]:{x:0,y:1}};function n0({source:e,sourcePosition:t=le.Bottom,target:n}){return t===le.Left||t===le.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Cl(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function o0({source:e,sourcePosition:t=le.Bottom,target:n,targetPosition:o=le.Top,center:i,offset:a}){const r=$l[t],l=$l[o],s={x:e.x+r.x*a,y:e.y+r.y*a},u={x:n.x+l.x*a,y:n.y+l.y*a},c=n0({source:s,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let h,g,v;const p={x:0,y:0},w={x:0,y:0},[y,M,E,P]=Oc({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(r[d]*l[d]===-1){g=i.x??y,v=i.y??M;const D=[{x:g,y:s.y},{x:g,y:u.y}],z=[{x:s.x,y:v},{x:u.x,y:v}];r[d]===f?h=d==="x"?D:z:h=d==="x"?z:D}else{const D=[{x:s.x,y:u.y}],z=[{x:u.x,y:s.y}];if(d==="x"?h=r.x===f?z:D:h=r.y===f?D:z,t===o){const Z=Math.abs(e[d]-n[d]);if(Z<=a){const m=Math.min(a-1,a-Z);r[d]===f?p[d]=(s[d]>e[d]?-1:1)*m:w[d]=(u[d]>n[d]?-1:1)*m}}if(t!==o){const Z=d==="x"?"y":"x",m=r[d]===l[Z],N=s[Z]>u[Z],S=s[Z]<u[Z];(r[d]===1&&(!m&&N||m&&S)||r[d]!==1&&(!m&&S||m&&N))&&(h=d==="x"?D:z)}const O={x:s.x+p.x,y:s.y+p.y},V={x:u.x+w.x,y:u.y+w.y},$=Math.max(Math.abs(O.x-h[0].x),Math.abs(V.x-h[0].x)),K=Math.max(Math.abs(O.y-h[0].y),Math.abs(V.y-h[0].y));$>=K?(g=(O.x+V.x)/2,v=h[0].y):(g=h[0].x,v=(O.y+V.y)/2)}return[[e,{x:s.x+p.x,y:s.y+p.y},...h,{x:u.x+w.x,y:u.y+w.y},n],g,v,E,P]}function i0(e,t,n,o){const i=Math.min(Cl(e,t)/2,Cl(t,n)/2,o),{x:a,y:r}=t;if(e.x===a&&a===n.x||e.y===r&&r===n.y)return`L${a} ${r}`;if(e.y===r){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${a+i*u},${r}Q ${a},${r} ${a},${r+i*c}`}const l=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return`L ${a},${r+i*s}Q ${a},${r} ${a+i*l},${r}`}function Ea(e){const{sourceX:t,sourceY:n,sourcePosition:o=le.Bottom,targetX:i,targetY:a,targetPosition:r=le.Top,borderRadius:l=5,centerX:s,centerY:u,offset:c=20}=e,[d,f,h,g,v]=o0({source:{x:t,y:n},sourcePosition:o,target:{x:i,y:a},targetPosition:r,center:{x:s,y:u},offset:c});return[d.reduce((w,y,M)=>{let E;return M>0&&M<d.length-1?E=i0(d[M-1],y,d[M+1],l):E=`${M===0?"M":"L"}${y.x} ${y.y}`,w+=E,w},""),f,h,g,v]}function a0(e){const{sourceX:t,sourceY:n,targetX:o,targetY:i}=e,[a,r,l,s]=Oc({sourceX:t,sourceY:n,targetX:o,targetY:i});return[`M ${t},${n}L ${o},${i}`,a,r,l,s]}const r0=we({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=a0(e);return Se(go,{path:n,labelX:o,labelY:i,...t,...e})}}}),l0=r0,s0=we({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Ea({...e,sourcePosition:e.sourcePosition??le.Bottom,targetPosition:e.targetPosition??le.Top});return Se(go,{path:n,labelX:o,labelY:i,...t,...e})}}}),zc=s0,u0=we({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>Se(zc,{...e,...t,borderRadius:0})}}),c0=u0,d0=we({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=ur({...e,sourcePosition:e.sourcePosition??le.Bottom,targetPosition:e.targetPosition??le.Top});return Se(go,{path:n,labelX:o,labelY:i,...t,...e})}}}),f0=d0,h0=we({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Rc({...e,sourcePosition:e.sourcePosition??le.Bottom,targetPosition:e.targetPosition??le.Top});return Se(go,{path:n,labelX:o,labelY:i,...t,...e})}}}),v0=h0,g0={input:Wy,default:Xy,output:Uy},m0={default:f0,straight:l0,step:c0,smoothstep:zc,simplebezier:v0};function p0(e,t,n){const o=B(()=>v=>t.value.get(v)),i=B(()=>v=>n.value.get(v)),a=B(()=>{const v={...m0,...e.edgeTypes},p=Object.keys(v);for(const w of e.edges)w.type&&!p.includes(w.type)&&(v[w.type]=w.type);return v}),r=B(()=>{const v={...g0,...e.nodeTypes},p=Object.keys(v);for(const w of e.nodes)w.type&&!p.includes(w.type)&&(v[w.type]=w.type);return v}),l=B(()=>e.onlyRenderVisibleElements?Sc(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),s=B(()=>{if(e.onlyRenderVisibleElements){const v=[];for(const p of e.edges){const w=t.value.get(p.source),y=t.value.get(p.target);wy({sourcePos:w.computedPosition||{x:0,y:0},targetPos:y.computedPosition||{x:0,y:0},sourceWidth:w.dimensions.width,sourceHeight:w.dimensions.height,targetWidth:y.dimensions.width,targetHeight:y.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&v.push(p)}return v}return e.edges}),u=B(()=>[...l.value,...s.value]),c=B(()=>{const v=[];for(const p of e.nodes)p.selected&&v.push(p);return v}),d=B(()=>{const v=[];for(const p of e.edges)p.selected&&v.push(p);return v}),f=B(()=>[...c.value,...d.value]),h=B(()=>{const v=[];for(const p of e.nodes)p.dimensions.width&&p.dimensions.height&&p.handleBounds!==void 0&&v.push(p);return v}),g=B(()=>l.value.length>0&&h.value.length===l.value.length);return{getNode:o,getEdge:i,getElements:u,getEdgeTypes:a,getNodeTypes:r,getEdges:s,getNodes:l,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:h,areNodesInitialized:g}}class Yt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=ao())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??Yt.instance;return Yt.instance=o??new Yt,n&&(n.config.globalProperties.$vueFlowStorage=Yt.instance),Yt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=Dc(),i=_f(o),a={};for(const[f,h]of Object.entries(i.hooks)){const g=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;a[g]=h.on}const r={};for(const[f,h]of Object.entries(i.hooks))r[f]=h.trigger;const l=B(()=>{const f=new Map;for(const h of i.nodes)f.set(h.id,h);return f}),s=B(()=>{const f=new Map;for(const h of i.edges)f.set(h.id,h);return f}),u=p0(i,l,s),c=Hy(i,l,s);c.setState({...i,...n});const d={...a,...u,...c,...xv(i),nodeLookup:l,edgeLookup:s,emits:r,id:t,vueFlowVersion:"1.39.1",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function ke(e){const t=Yt.getInstance(),n=Cs(),o=typeof e=="object",i=o?e:{id:e},a=i.id,r=a??(n==null?void 0:n.vueFlowId);let l;if(n){const s=Le(Sl,null);typeof s<"u"&&s!==null&&(!r||s.id===r)&&(l=s)}if(l||r&&(l=t.get(r)),!l||r&&l.id!==r){const s=a??t.getId(),u=t.create(s,i);l=u,(n??ks(!0)).run(()=>{de(u.applyDefault,(d,f,h)=>{const g=p=>{u.applyNodeChanges(p)},v=p=>{u.applyEdgeChanges(p)};d?(u.onNodesChange(g),u.onEdgesChange(v)):(u.hooks.value.nodesChange.off(g),u.hooks.value.edgesChange.off(v)),h(()=>{u.hooks.value.nodesChange.off(g),u.hooks.value.edgesChange.off(v)})},{immediate:!0}),_i(()=>{if(l){const d=t.get(l.id);d?d.$destroy():Ci(`No store instance found for id ${l.id} in storage.`)}})})}else o&&l.setState(i);if(n&&(Xe(Sl,l),n.vueFlowId=l.id),o){const s=ao();(s==null?void 0:s.type.name)!=="VueFlow"&&l.emits.error(new Re(Be.USEVUEFLOW_OPTIONS))}return l}function y0(e){const{emits:t,dimensions:n}=ke();let o;rt(()=>{const i=e.value,a=()=>{if(!i)return;const r=$i(i);(r.width===0||r.height===0)&&t.error(new Re(Be.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:r.width||500,height:r.height||500}};a(),window.addEventListener("resize",a),i&&(o=new ResizeObserver(()=>a()),o.observe(i)),za(()=>{window.removeEventListener("resize",a),o&&i&&o.unobserve(i)})})}const w0={name:"UserSelection",compatConfig:{MODE:3}},b0=we({...w0,props:{userSelectionRect:{}},setup(e){return(t,n)=>(ae(),ge("div",{class:"vue-flow__selection vue-flow__container",style:Ue({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),_0=["tabIndex"],x0={name:"NodesSelection",compatConfig:{MODE:3}},S0=we({...x0,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:i,disableKeyboardA11y:a,userSelectionActive:r}=ke(),l=Ac(),s=se(null),u=Mc({el:s,onStart(g){t.selectionDragStart(g)},onDrag(g){t.selectionDrag(g)},onStop(g){t.selectionDragStop(g)}});rt(()=>{var g;a.value||(g=s.value)==null||g.focus({preventScroll:!0})});const c=B(()=>ar(o.value)),d=B(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function f(g){t.selectionContextMenu({event:g,nodes:o.value})}function h(g){a||vn[g.key]&&l({x:vn[g.key].x,y:vn[g.key].y},g.shiftKey)}return(g,v)=>!ie(r)&&c.value.width&&c.value.height?(ae(),ge("div",{key:0,class:vt(["vue-flow__nodesselection vue-flow__container",ie(i)]),style:Ue({transform:`translate(${ie(n).x}px,${ie(n).y}px) scale(${ie(n).zoom})`})},[ze("div",{ref_key:"el",ref:s,class:vt([{dragging:ie(u)},"vue-flow__nodesselection-rect"]),style:Ue(d.value),tabIndex:ie(a)?void 0:-1,onContextmenu:f,onKeydown:h},null,46,_0)],6)):Me("",!0)}});function E0(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const k0={name:"Pane",compatConfig:{MODE:3}},$0=we({...k0,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:i,userSelectionActive:a,removeSelectedElements:r,panOnDrag:l,userSelectionRect:s,elementsSelectable:u,nodesSelectionActive:c,getSelectedEdges:d,getSelectedNodes:f,removeNodes:h,removeEdges:g,selectionMode:v,deleteKeyCode:p,multiSelectionKeyCode:w,multiSelectionActive:y,edgeLookup:M,nodeLookup:E}=ke(),P=se(null),L=se(0),D=se(0),z=se(),O=se(new Map),V=oe(()=>u.value&&(e.isSelecting||a.value));let $=!1,K=!1;const Z=Fn(p,{actInsideInputWithModifier:!1}),m=Fn(w);de(Z,X=>{X&&(h(f.value),g(d.value),c.value=!1)}),de(m,X=>{y.value=X});function N(X,G){return U=>{U.target===G&&(X==null||X(U))}}function S(){a.value=!1,s.value=null,L.value=0,D.value=0}function A(X){if($){$=!1;return}i.paneClick(X),r(),c.value=!1}function C(X){var G;if(Array.isArray(l.value)&&((G=l.value)!=null&&G.includes(2))){X.preventDefault();return}i.paneContextMenu(X)}function I(X){i.paneScroll(X)}function k(X){var G,U,te,ee,ce;if(z.value=(G=t.value)==null?void 0:G.getBoundingClientRect(),(te=(U=X.target)==null?void 0:U.setPointerCapture)==null||te.call(U,X.pointerId),!u.value||!e.isSelecting||X.button!==0||X.target!==P.value||!z.value)return;const{x:ne,y:W}=E0(X,z.value);K=!0,$=!1,O.value=new Map;for(const[q,j]of M.value)O.value.set(j.source,((ee=O.value.get(j.source))==null?void 0:ee.add(q))||new Set([q])),O.value.set(j.target,((ce=O.value.get(j.target))==null?void 0:ce.add(q))||new Set([q]));r(),s.value={width:0,height:0,startX:ne,startY:W,x:ne,y:W},a.value=!0,c.value=!1,i.selectionStart(X)}function T(X){if(!z.value||!s.value)return;$=!0;const{x:G,y:U}=Bt(X,z.value),{startX:te=0,startY:ee=0}=s.value,ce={startX:te,startY:ee,x:G<te?G:te,y:U<ee?U:ee,width:Math.abs(G-te),height:Math.abs(U-ee)},ne=Sc(n.value,ce,o.value,v.value===ir.Partial,!0),W=new Set,q=new Set;for(const j of ne){q.add(j.id);const x=O.value.get(j.id);if(x)for(const _ of x)W.add(_)}if(L.value!==q.size){L.value=q.size;const j=Vt(E.value,q,!0);i.nodesChange(j)}if(D.value!==W.size){D.value=W.size;const j=Vt(M.value,W);i.edgesChange(j)}s.value=ce,a.value=!0,c.value=!1}function Y(X){var G;X.button!==0||!K||((G=X.target)==null||G.releasePointerCapture(X.pointerId),!a.value&&s.value&&X.target===P.value&&A(X),L.value>0&&(c.value=!0),S(),i.selectionEnd(X),e.selectionKeyPressed&&($=!1),K=!1)}return(X,G)=>(ae(),ge("div",{ref_key:"container",ref:P,class:vt(["vue-flow__pane vue-flow__container",{selection:X.isSelecting}]),onClick:G[0]||(G[0]=U=>V.value?void 0:N(A,P.value)(U)),onContextmenu:G[1]||(G[1]=U=>N(C,P.value)(U)),onWheelPassive:G[2]||(G[2]=U=>N(I,P.value)(U)),onPointerenter:G[3]||(G[3]=U=>V.value?void 0:ie(i).paneMouseEnter(U)),onPointerdown:G[4]||(G[4]=U=>V.value?k(U):ie(i).paneMouseMove(U)),onPointermove:G[5]||(G[5]=U=>V.value?T(U):ie(i).paneMouseMove(U)),onPointerup:G[6]||(G[6]=U=>V.value?Y(U):void 0),onPointerleave:G[7]||(G[7]=U=>ie(i).paneMouseLeave(U))},[Ne(X.$slots,"default"),ie(a)&&ie(s)?(ae(),$e(b0,{key:0,"user-selection-rect":ie(s)},null,8,["user-selection-rect"])):Me("",!0),ie(c)&&ie(f).length?(ae(),$e(S0,{key:1})):Me("",!0)],34))}}),C0={name:"Transform",compatConfig:{MODE:3}},I0=we({...C0,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=ke(),i=B(()=>n.value?!o.value:!1),a=B(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(r,l)=>(ae(),ge("div",{class:"vue-flow__transformationpane vue-flow__container",style:Ue({transform:a.value,opacity:i.value?0:void 0})},[Ne(r.$slots,"default")],4))}}),N0={name:"Viewport",compatConfig:{MODE:3}},P0=we({...N0,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:i,zoomActivationKeyCode:a,selectionKeyCode:r,panActivationKeyCode:l,panOnScroll:s,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:f,zoomOnPinch:h,zoomOnScroll:g,preventScrolling:v,noWheelClassName:p,noPanClassName:w,emits:y,connectionStartHandle:M,userSelectionActive:E,paneDragging:P,d3Zoom:L,d3Selection:D,d3ZoomHandler:z,viewport:O,viewportRef:V,paneClickDistance:$}=ke();y0(V);const K=se(!1),Z=se(!1);let m=null,N=!1,S=0,A={x:0,y:0,zoom:0};const C=Fn(l),I=Fn(r),k=Fn(a),T=oe(()=>C.value||d.value),Y=oe(()=>C.value||s.value),X=oe(()=>I.value||r.value===!0&&T.value!==!0);rt(()=>{if(!V.value){Ci("Viewport element is missing");return}const ne=V.value,W=ne.getBoundingClientRect(),q=oy().clickDistance($.value).scaleExtent([t.value,n.value]).translateExtent(i.value),j=nt(ne).call(q),x=j.on("wheel.zoom"),_=_n.translate(o.value.x??0,o.value.y??0).scale(en(o.value.zoom??1,t.value,n.value)),H=[[0,0],[W.width,W.height]],R=q.constrain()(_,H,i.value);q.transform(j,R),q.wheelDelta(U),L.value=q,D.value=j,z.value=x,O.value={x:R.x,y:R.y,zoom:R.k},q.on("start",F=>{var Q;if(!F.sourceEvent)return null;S=F.sourceEvent.button,K.value=!0;const J=ee(F.transform);((Q=F.sourceEvent)==null?void 0:Q.type)==="mousedown"&&(P.value=!0),A=J,y.viewportChangeStart(J),y.moveStart({event:F,flowTransform:J})}),q.on("end",F=>{if(!F.sourceEvent)return null;if(K.value=!1,P.value=!1,G(T.value,S??0)&&!N&&y.paneContextMenu(F.sourceEvent),N=!1,te(A,F.transform)){const Q=ee(F.transform);A=Q,y.viewportChangeEnd(Q),y.moveEnd({event:F,flowTransform:Q})}}),q.filter(F=>{var Q,J,fe;const me=k.value||g.value,_e=h.value&&F.ctrlKey,pe=F.button;if((T.value===!0||Array.isArray(T.value)&&T.value.includes(1))&&pe===1&&F.type==="mousedown"&&((Q=F.target)!=null&&Q.closest(".vue-flow__node")||(J=F.target)!=null&&J.closest(".vue-flow__edge")))return!0;if(!T.value&&!me&&!Y.value&&!f.value&&!h.value||E.value||!f.value&&F.type==="dblclick"||ce(F,p.value)&&F.type==="wheel"||ce(F,w.value)&&(F.type!=="wheel"||Y.value&&F.type==="wheel"&&!k.value)||!h.value&&F.ctrlKey&&F.type==="wheel"||!me&&!Y.value&&!_e&&F.type==="wheel")return!1;if(!h&&F.type==="touchstart"&&((fe=F.touches)==null?void 0:fe.length)>1)return F.preventDefault(),!1;if(!T.value&&(F.type==="mousedown"||F.type==="touchstart")||Array.isArray(T.value)&&!T.value.includes(pe)&&(F.type==="mousedown"||F.type==="touchstart"))return!1;const Ie=Array.isArray(T.value)&&T.value.includes(pe)||!pe||pe<=1;return(!F.ctrlKey||F.type==="wheel")&&Ie}),de([E,T],()=>{E.value&&!K.value?q.on("zoom",null):E.value||q.on("zoom",F=>{O.value={x:F.transform.x,y:F.transform.y,zoom:F.transform.k};const Q=ee(F.transform);N=G(T.value,S??0),y.viewportChange(Q),y.move({event:F,flowTransform:Q})})},{immediate:!0}),de([E,Y,u,k,h,v,p],()=>{Y.value&&!k.value&&!E.value?j.on("wheel.zoom",F=>{if(ce(F,p.value))return!1;const Q=k.value||g.value,J=h.value&&F.ctrlKey;if(!(!v.value||Y.value||Q||J))return!1;F.preventDefault(),F.stopImmediatePropagation();const me=j.property("__zoom").k||1,_e=ii();if(F.ctrlKey&&h.value&&_e){const nf=ct(F),of=U(F),af=me*2**of;q.scaleTo(j,af,nf,F);return}const pe=F.deltaMode===1?20:1;let Ie=u.value===zn.Vertical?0:F.deltaX*pe,It=u.value===zn.Horizontal?0:F.deltaY*pe;!_e&&F.shiftKey&&u.value!==zn.Vertical&&!Ie&&It&&(Ie=It,It=0),q.translateBy(j,-(Ie/me)*c.value,-(It/me)*c.value);const rn=ee(j.property("__zoom"));m&&clearTimeout(m),Z.value?(y.move({event:F,flowTransform:rn}),y.viewportChange(rn),m=setTimeout(()=>{y.moveEnd({event:F,flowTransform:rn}),y.viewportChangeEnd(rn),Z.value=!1},150)):(Z.value=!0,y.moveStart({event:F,flowTransform:rn}),y.viewportChangeStart(rn))},{passive:!1}):typeof x<"u"&&j.on("wheel.zoom",function(F,Q){const J=!v.value&&F.type==="wheel"&&!F.ctrlKey,fe=k.value||g.value,me=h.value&&F.ctrlKey;if(!fe&&!s.value&&!me&&F.type==="wheel"||J||ce(F,p.value))return null;F.preventDefault(),x.call(this,F,Q)},{passive:!1})},{immediate:!0})});function G(ne,W){return W===2&&Array.isArray(ne)&&ne.includes(2)}function U(ne){const W=ne.ctrlKey&&ii()?10:1;return-ne.deltaY*(ne.deltaMode===1?.05:ne.deltaMode?1:.002)*W}function te(ne,W){return ne.x!==W.x&&!Number.isNaN(W.x)||ne.y!==W.y&&!Number.isNaN(W.y)||ne.zoom!==W.k&&!Number.isNaN(W.k)}function ee(ne){return{x:ne.x,y:ne.y,zoom:ne.k}}function ce(ne,W){return ne.target.closest(`.${W}`)}return(ne,W)=>(ae(),ge("div",{ref_key:"viewportRef",ref:V,class:"vue-flow__viewport vue-flow__container"},[b($0,{"is-selecting":X.value,"selection-key-pressed":ie(I),class:vt({connecting:!!ie(M),dragging:ie(P),draggable:T.value})},{default:ue(()=>[b(I0,null,{default:ue(()=>[Ne(ne.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),M0=["id"],T0=["id"],V0=["id"],A0={name:"A11yDescriptions",compatConfig:{MODE:3}},D0=we({...A0,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=ke();return(i,a)=>(ae(),ge(ye,null,[ze("div",{id:`${ie(hc)}-${ie(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+at(ie(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,M0),ze("div",{id:`${ie(vc)}-${ie(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,T0),ie(n)?Me("",!0):(ae(),ge("div",{key:0,id:`${ie(ly)}-${ie(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},at(ie(o)),9,V0))],64))}});function O0(){const e=ke();de(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function B0(e,t,n){return n===le.Left?e-t:n===le.Right?e+t:e}function R0(e,t,n){return n===le.Top?e-t:n===le.Bottom?e+t:e}const cr=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=le.Top,type:i}){return Se("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:B0(t,e,o),cy:R0(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};cr.props=["radius","centerX","centerY","position","type"];cr.compatConfig={MODE:3};const Il=cr,z0=we({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:a,nodesSelectionActive:r,noPanClassName:l,getEdgeTypes:s,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:f,multiSelectionActive:h,disableKeyboardA11y:g,elementsSelectable:v,edgesUpdatable:p,edgesFocusable:w}=ke(),y=B(()=>c(e.id)),M=My(y.value,a),E=Le(Ii),P=ao(),L=se(!1),D=se(!1),z=se(""),O=se(null),V=se("source"),$=se(null),K=oe(()=>typeof y.value.selectable>"u"?v.value:y.value.selectable),Z=oe(()=>typeof y.value.updatable>"u"?p.value:y.value.updatable),m=oe(()=>typeof y.value.focusable>"u"?w.value:y.value.focusable);Xe(Iy,e.id),Xe(Ny,$);const N=B(()=>y.value.class instanceof Function?y.value.class(y.value):y.value.class),S=B(()=>y.value.style instanceof Function?y.value.style(y.value):y.value.style),A=B(()=>{const x=y.value.type||"default",_=E==null?void 0:E[`edge-${x}`];if(_)return _;let H=y.value.template??s.value[x];if(typeof H=="string"&&P){const R=Object.keys(P.appContext.components);R&&R.includes(x)&&(H=xt(x,!1))}return H&&typeof H!="string"?H:(a.error(new Re(Be.EDGE_TYPE_MISSING,H)),!1)}),{handlePointerDown:C}=Tc({nodeId:z,handleId:O,type:V,isValidConnection:f,edgeUpdaterType:V,onEdgeUpdate:T,onEdgeUpdateEnd:Y});return()=>{const x=d(y.value.source),_=d(y.value.target),H="pathOptions"in y.value?y.value.pathOptions:{};if(!x&&!_)return a.error(new Re(Be.EDGE_SOURCE_TARGET_MISSING,y.value.id,y.value.source,y.value.target)),null;if(!x)return a.error(new Re(Be.EDGE_SOURCE_MISSING,y.value.id,y.value.source)),null;if(!_)return a.error(new Re(Be.EDGE_TARGET_MISSING,y.value.id,y.value.target)),null;if(!y.value||y.value.hidden||x.hidden||_.hidden)return null;let R;o.value===Jt.Strict?R=x.handleBounds.source:R=[...x.handleBounds.source||[],...x.handleBounds.target||[]];const F=gl(R,y.value.sourceHandle);let Q;o.value===Jt.Strict?Q=_.handleBounds.target:Q=[..._.handleBounds.target||[],..._.handleBounds.source||[]];const J=gl(Q,y.value.targetHandle),fe=(F==null?void 0:F.position)||le.Bottom,me=(J==null?void 0:J.position)||le.Top,{x:_e,y:pe}=oi(x,F,fe),{x:Ie,y:It}=oi(_,J,me);return y.value.sourceX=_e,y.value.sourceY=pe,y.value.targetX=Ie,y.value.targetY=It,Se("g",{ref:$,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${A.value===!1?"default":y.value.type||"default"}`,l.value,N.value,{updating:L.value,selected:y.value.selected,animated:y.value.animated,inactive:!K.value}],onClick:G,onContextmenu:U,onDblclick:te,onMouseenter:ee,onMousemove:ce,onMouseleave:ne,onKeyDown:m.value?j:void 0,tabIndex:m.value?0:void 0,"aria-label":y.value.ariaLabel===null?void 0:y.value.ariaLabel||`Edge from ${y.value.source} to ${y.value.target}`,"aria-describedby":m.value?`${vc}-${t}`:void 0,role:m.value?"button":"img"},[D.value?null:Se(A.value===!1?s.value.default:A.value,{id:e.id,sourceNode:x,targetNode:_,source:y.value.source,target:y.value.target,type:y.value.type,updatable:Z.value,selected:y.value.selected,animated:y.value.animated,label:y.value.label,labelStyle:y.value.labelStyle,labelShowBg:y.value.labelShowBg,labelBgStyle:y.value.labelBgStyle,labelBgPadding:y.value.labelBgPadding,labelBgBorderRadius:y.value.labelBgBorderRadius,data:y.value.data,events:{...y.value.events,...M.on},style:S.value,markerStart:`url('#${jn(y.value.markerStart,t)}')`,markerEnd:`url('#${jn(y.value.markerEnd,t)}')`,sourcePosition:fe,targetPosition:me,sourceX:_e,sourceY:pe,targetX:Ie,targetY:It,sourceHandleId:y.value.sourceHandle,targetHandleId:y.value.targetHandle,interactionWidth:y.value.interactionWidth,...H}),[Z.value==="source"||Z.value===!0?[Se("g",{onMousedown:W,onMouseenter:I,onMouseout:k},Se(Il,{position:fe,centerX:_e,centerY:pe,radius:i.value,type:"source","data-type":"source"}))]:null,Z.value==="target"||Z.value===!0?[Se("g",{onMousedown:q,onMouseenter:I,onMouseout:k},Se(Il,{position:me,centerX:Ie,centerY:It,radius:i.value,type:"target","data-type":"target"}))]:null]])};function I(){L.value=!0}function k(){L.value=!1}function T(x,_){M.emit.update({event:x,edge:y.value,connection:_})}function Y(x){M.emit.updateEnd({event:x,edge:y.value}),D.value=!1}function X(x,_){x.button===0&&(D.value=!0,z.value=_?y.value.target:y.value.source,O.value=(_?y.value.targetHandle:y.value.sourceHandle)??"",V.value=_?"target":"source",M.emit.updateStart({event:x,edge:y.value}),C(x))}function G(x){var _;const H={event:x,edge:y.value};K.value&&(r.value=!1,y.value.selected&&h.value?(u([y.value]),(_=$.value)==null||_.blur()):n([y.value])),M.emit.click(H)}function U(x){M.emit.contextMenu({event:x,edge:y.value})}function te(x){M.emit.doubleClick({event:x,edge:y.value})}function ee(x){M.emit.mouseEnter({event:x,edge:y.value})}function ce(x){M.emit.mouseMove({event:x,edge:y.value})}function ne(x){M.emit.mouseLeave({event:x,edge:y.value})}function W(x){X(x,!0)}function q(x){X(x,!1)}function j(x){var _;!g.value&&gc.includes(x.key)&&K.value&&(x.key==="Escape"?((_=$.value)==null||_.blur(),u([c(e.id)])):n([c(e.id)]))}}}),F0=z0,L0={[le.Left]:le.Right,[le.Right]:le.Left,[le.Top]:le.Bottom,[le.Bottom]:le.Top},H0=we({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:i,connectionPosition:a,connectionLineType:r,connectionLineStyle:l,connectionLineOptions:s,connectionStatus:u,viewport:c,findNode:d}=ke(),f=(e=Le(Ii))==null?void 0:e["connection-line"],h=B(()=>{var y;return d((y=o.value)==null?void 0:y.nodeId)}),g=B(()=>{var y;return d((y=i.value)==null?void 0:y.nodeId)??null}),v=B(()=>({x:(a.value.x-c.value.x)/c.value.zoom,y:(a.value.y-c.value.y)/c.value.zoom})),p=B(()=>s.value.markerStart?`url(#${jn(s.value.markerStart,t)})`:""),w=B(()=>s.value.markerEnd?`url(#${jn(s.value.markerEnd,t)})`:"");return()=>{var y,M,E,P;if(!h.value||!o.value)return null;const L=o.value.handleId,D=o.value.type,z=h.value.handleBounds;let O=z==null?void 0:z[D];if(n.value===Jt.Loose&&(O=O||(z==null?void 0:z[D==="source"?"target":"source"])),!O)return null;const V=(L?O.find(I=>I.id===L):O[0])??null,$=(V==null?void 0:V.position)||le.Top,{x:K,y:Z}=oi(h.value,V,$);let m=null;g.value&&((y=i.value)!=null&&y.handleId)&&(n.value===Jt.Strict?m=((M=g.value.handleBounds[D==="source"?"target":"source"])==null?void 0:M.find(I=>{var k;return I.id===((k=i.value)==null?void 0:k.handleId)}))||null:m=((E=[...g.value.handleBounds.source||[],...g.value.handleBounds.target||[]])==null?void 0:E.find(I=>{var k;return I.id===((k=i.value)==null?void 0:k.handleId)}))||null);const N=((P=i.value)==null?void 0:P.position)??($?L0[$]:null);if(!$||!N)return null;const S=r.value??s.value.type??Ht.Bezier;let A="";const C={sourceX:K,sourceY:Z,sourcePosition:$,targetX:v.value.x,targetY:v.value.y,targetPosition:N};return S===Ht.Bezier?[A]=ur(C):S===Ht.Step?[A]=Ea({...C,borderRadius:0}):S===Ht.SmoothStep?[A]=Ea(C):S===Ht.SimpleBezier?[A]=Rc(C):A=`M${K},${Z} ${v.value.x},${v.value.y}`,Se("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Se("g",{class:"vue-flow__connection"},f?Se(f,{sourceX:K,sourceY:Z,sourcePosition:$,targetX:v.value.x,targetY:v.value.y,targetPosition:N,sourceNode:h.value,sourceHandle:V,targetNode:g.value,targetHandle:m,markerEnd:w.value,markerStart:p.value,connectionStatus:u.value}):Se("path",{d:A,class:[s.value.class,u,"vue-flow__connection-path"],style:{...l.value,...s.value.style},"marker-end":w.value,"marker-start":p.value})))}}}),G0=H0,Y0=["id","markerWidth","markerHeight","markerUnits","orient"],X0={name:"MarkerType",compatConfig:{MODE:3}},U0=we({...X0,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(ae(),ge("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===ie(wa).ArrowClosed?(ae(),ge("polyline",{key:0,style:Ue({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):Me("",!0),t.type===ie(wa).Arrow?(ae(),ge("polyline",{key:1,style:Ue({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):Me("",!0)],8,Y0))}}),W0={class:"vue-flow__marker vue-flow__container"},K0={name:"MarkerDefinitions",compatConfig:{MODE:3}},q0=we({...K0,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:i}=ke(),a=B(()=>{const r=new Set,l=[],s=u=>{if(u){const c=jn(u,t);r.has(c)||(typeof u=="object"?l.push({...u,id:c,color:u.color||i.value}):l.push({id:c,color:i.value,type:u}),r.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])s(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])s(c);return l.sort((u,c)=>u.id.localeCompare(c.id))});return(r,l)=>(ae(),ge("svg",W0,[ze("defs",null,[(ae(!0),ge(ye,null,ro(a.value,s=>(ae(),$e(U0,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,"stroke-width":s.strokeWidth,orient:s.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),Z0={name:"Edges",compatConfig:{MODE:3}},j0=we({...Z0,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=ke();return(i,a)=>(ae(),ge(ye,null,[b(q0),(ae(!0),ge(ye,null,ro(ie(n),r=>(ae(),ge("svg",{key:r.id,class:"vue-flow__edges vue-flow__container",style:Ue({zIndex:ie(by)(r,ie(t),ie(o))})},[b(ie(F0),{id:r.id},null,8,["id"])],4))),128)),b(ie(G0))],64))}}),Q0=we({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:i,multiSelectionActive:a,emits:r,removeSelectedNodes:l,addSelectedNodes:s,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:f,elevateNodesOnSelect:h,disableKeyboardA11y:g,ariaLiveMessage:v,snapToGrid:p,snapGrid:w,nodeDragThreshold:y,nodesDraggable:M,elementsSelectable:E,nodesConnectable:P,nodesFocusable:L}=ke(),D=se(null);Xe(Pc,D),Xe(Nc,e.id);const z=Le(Ii),O=ao(),V=Ac(),{node:$,parentNode:K}=Vc(e.id),Z=oe(()=>typeof $.draggable>"u"?M.value:$.draggable),m=oe(()=>typeof $.selectable>"u"?E.value:$.selectable),N=oe(()=>typeof $.connectable>"u"?P.value:$.connectable),S=oe(()=>typeof $.focusable>"u"?L.value:$.focusable),A=oe(()=>!!$.dimensions.width&&!!$.dimensions.height),C=B(()=>{const _=$.type||"default",H=z==null?void 0:z[`node-${_}`];if(H)return H;let R=$.template||d.value[_];if(typeof R=="string"&&O){const F=Object.keys(O.appContext.components);F&&F.includes(_)&&(R=xt(_,!1))}return R&&typeof R!="string"?R:(r.error(new Re(Be.NODE_TYPE_MISSING,R)),!1)}),{emit:I,on:k}=Dy($,r),T=Mc({id:e.id,el:D,disabled:()=>!Z.value,selectable:m,dragHandle:()=>$.dragHandle,onStart(_){I.dragStart(_)},onDrag(_){I.drag(_)},onStop(_){I.dragStop(_)},onClick(_){j(_)}}),Y=B(()=>$.class instanceof Function?$.class($):$.class),X=B(()=>{const _=($.style instanceof Function?$.style($):$.style)||{},H=$.width instanceof Function?$.width($):$.width,R=$.height instanceof Function?$.height($):$.height;return H&&(_.width=typeof H=="string"?H:`${H}px`),R&&(_.height=typeof R=="string"?R:`${R}px`),_}),G=oe(()=>Number($.zIndex??X.value.zIndex??0));return c(_=>{(_.includes(e.id)||!_.length)&&te()}),rt(()=>{de(()=>$.hidden,(_=!1,H,R)=>{!_&&D.value&&(e.resizeObserver.observe(D.value),R(()=>{D.value&&e.resizeObserver.unobserve(D.value)}))},{immediate:!0,flush:"post"})}),de([()=>$.type,()=>$.sourcePosition,()=>$.targetPosition],()=>{Ve(()=>{u([{id:e.id,nodeElement:D.value,forceUpdate:!0}])})}),de([()=>$.position.x,()=>$.position.y,()=>{var _;return(_=K.value)==null?void 0:_.computedPosition.x},()=>{var _;return(_=K.value)==null?void 0:_.computedPosition.y},()=>{var _;return(_=K.value)==null?void 0:_.computedPosition.z},G,()=>$.selected,()=>$.dimensions.height,()=>$.dimensions.width,()=>{var _;return(_=K.value)==null?void 0:_.dimensions.height},()=>{var _;return(_=K.value)==null?void 0:_.dimensions.width}],([_,H,R,F,Q,J])=>{const fe={x:_,y:H,z:J+(h.value&&$.selected?1e3:0)};typeof R<"u"&&typeof F<"u"?$.computedPosition=vy({x:R,y:F,z:Q},fe):$.computedPosition=fe},{flush:"post",immediate:!0}),de([()=>$.extent,f],([_,H],[R,F])=>{(_!==R||H!==F)&&U()}),$.extent==="parent"||typeof $.extent=="object"&&"range"in $.extent&&$.extent.range==="parent"?ca(()=>A).toBe(!0).then(U):U(),()=>$.hidden?null:Se("div",{ref:D,"data-id":$.id,class:["vue-flow__node",`vue-flow__node-${C.value===!1?"default":$.type||"default"}`,{[n.value]:Z.value,dragging:T==null?void 0:T.value,draggable:Z.value,selected:$.selected,selectable:m.value,parent:$.isParent},Y.value],style:{visibility:A.value?"visible":"hidden",zIndex:$.computedPosition.z??G.value,transform:`translate(${$.computedPosition.x}px,${$.computedPosition.y}px)`,pointerEvents:m.value||Z.value?"all":"none",...X.value},tabIndex:S.value?0:void 0,role:S.value?"button":void 0,"aria-describedby":g.value?void 0:`${hc}-${t}`,"aria-label":$.ariaLabel,onMouseenter:ee,onMousemove:ce,onMouseleave:ne,onContextmenu:W,onClick:j,onDblclick:q,onKeydown:x},[Se(C.value===!1?d.value.default:C.value,{id:$.id,type:$.type,data:$.data,events:{...$.events,...k},selected:$.selected,resizing:$.resizing,dragging:T.value,connectable:N.value,position:$.computedPosition,dimensions:$.dimensions,isValidTargetPos:$.isValidTargetPos,isValidSourcePos:$.isValidSourcePos,parent:$.parentNode,parentNodeId:$.parentNode,zIndex:$.computedPosition.z??G.value,targetPosition:$.targetPosition,sourcePosition:$.sourcePosition,label:$.label,dragHandle:$.dragHandle,onUpdateNodeInternals:te})]);function U(){const _=$.computedPosition;p.value&&(_.x=w.value[0]*Math.round(_.x/w.value[0]),_.y=w.value[1]*Math.round(_.y/w.value[1]));const{computedPosition:H,position:R}=rr($,_,r.error,f.value,K.value);($.computedPosition.x!==H.x||$.computedPosition.y!==H.y)&&($.computedPosition={...$.computedPosition,...H}),($.position.x!==R.x||$.position.y!==R.y)&&($.position=R)}function te(){D.value&&u([{id:e.id,nodeElement:D.value,forceUpdate:!0}])}function ee(_){T!=null&&T.value||I.mouseEnter({event:_,node:$})}function ce(_){T!=null&&T.value||I.mouseMove({event:_,node:$})}function ne(_){T!=null&&T.value||I.mouseLeave({event:_,node:$})}function W(_){return I.contextMenu({event:_,node:$})}function q(_){return I.doubleClick({event:_,node:$})}function j(_){m.value&&(!o.value||!Z.value||y.value>0)&&Sa($,a.value,s,l,i,!1,D.value),I.click({event:_,node:$})}function x(_){if(!(ba(_)||g.value))if(gc.includes(_.key)&&m.value){const H=_.key==="Escape";Sa($,a.value,s,l,i,H,D.value)}else Z.value&&$.selected&&vn[_.key]&&(v.value=`Moved selected node ${_.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~$.position.x}, y: ${~~$.position.y}`,V({x:vn[_.key].x,y:vn[_.key].y},_.shiftKey))}}}),J0=Q0,ew={height:"0",width:"0"},tw={name:"EdgeLabelRenderer",compatConfig:{MODE:3}},nw=we({...tw,setup(e){const{viewportRef:t}=ke(),n=oe(()=>{var o;return(o=t.value)==null?void 0:o.getElementsByClassName("vue-flow__edge-labels")[0]});return(o,i)=>(ae(),ge("svg",null,[(ae(),ge("foreignObject",ew,[(ae(),$e(bf,{to:n.value,disabled:!n.value},[Ne(o.$slots,"default")],8,["to","disabled"]))]))]))}});function ow(e={includeHiddenNodes:!1}){const{nodes:t}=ke();return B(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const iw={class:"vue-flow__nodes vue-flow__container"},aw={name:"Nodes",compatConfig:{MODE:3}},rw=we({...aw,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=ke(),i=ow(),a=se();return de(i,r=>{r&&Ve(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),rt(()=>{a.value=new ResizeObserver(r=>{const l=r.map(s=>({id:s.target.getAttribute("data-id"),nodeElement:s.target,forceUpdate:!0}));Ve(()=>n(l))})}),za(()=>{var r;return(r=a.value)==null?void 0:r.disconnect()}),(r,l)=>(ae(),ge("div",iw,[a.value?(ae(!0),ge(ye,{key:0},ro(ie(t),(s,u,c,d)=>{const f=[s.id];if(d&&d.key===s.id&&xf(d,f))return d;const h=(ae(),$e(ie(J0),{id:s.id,key:s.id,"resize-observer":a.value},null,8,["id","resize-observer"]));return h.memo=f,h},l,0),128)):Me("",!0)]))}});function lw(){const{emits:e}=ke();rt(()=>{if(Ic()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new Re(Be.MISSING_STYLES))}})}const sw=ze("div",{class:"vue-flow__edge-labels"},null,-1),uw={name:"VueFlow",compatConfig:{MODE:3}},cw=we({...uw,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","init","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","updateNodeInternals","error","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=$s(),a=Ri(o,"modelValue",n),r=Ri(o,"nodes",n),l=Ri(o,"edges",n),s=ke(o),u=Ry({modelValue:a,nodes:r,edges:l},o,s);return Fy(n,s.hooks),O0(),lw(),Xe(Ii,i),Ss(()=>{u()}),t(s),(c,d)=>(ae(),ge("div",{ref:ie(s).vueFlowRef,class:"vue-flow"},[b(P0,null,{default:ue(()=>[b(j0),sw,b(rw),Ne(c.$slots,"zoom-pane")]),_:3}),Ne(c.$slots,"default"),b(D0)],512))}}),dw={name:"Panel",compatConfig:{MODE:3}},Fc=we({...dw,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=ke(),o=B(()=>`${t.position}`.split("-"));return(i,a)=>(ae(),ge("div",{class:vt(["vue-flow__panel",o.value]),style:Ue({pointerEvents:ie(n)?"none":"all"})},[Ne(i.$slots,"default")],6))}}),fw=we({components:{BaseEdge:go,EdgeLabelRenderer:nw},props:{id:{type:String,required:!0},sourceX:{type:Number,required:!0},sourceY:{type:Number,required:!0},targetX:{type:Number,required:!0},targetY:{type:Number,required:!0},sourcePosition:{type:String,required:!0},targetPosition:{type:String,required:!0},data:{type:Object,required:!1},markerEnd:{type:String,required:!1},style:{type:Object,required:!1}},computed:{path(){const e=this.sourcePosition,t=this.targetPosition;return ur({sourceX:this.sourceX,sourceY:this.sourceY,targetX:this.targetX,targetY:this.targetY,sourcePosition:e,targetPosition:t})},itemAmount(){var e;return((e=this.data)==null?void 0:e.item)??null}}}),hw=ze("br",null,null,-1);function vw(e,t,n,o,i,a){const r=xt("BaseEdge"),l=xt("EdgeLabelRenderer");return ae(),ge(ye,null,[b(r,{id:e.id,"marker-end":e.markerEnd,path:e.path[0],style:Ue(e.style)},null,8,["id","marker-end","path","style"]),b(l,null,{default:ue(()=>{var s,u;return[ze("div",{style:Ue({pointerEvents:"all",position:"absolute",transform:`translate(-50%, -50%) translate(${e.path[1]}px,${e.path[2]}px)`})},[Oe(at((s=e.itemAmount)==null?void 0:s.item.name)+" ",1),hw,Oe(" "+at(parseFloat((((u=e.itemAmount)==null?void 0:u.amountPerMinute)??0).toFixed(3)))+" / min ",1)],4)]}),_:1})],64)}const Lc=uo(fw,[["render",vw]]),gw=we({components:{Handle:Qn},props:{factoryStep:{type:Object,required:!0}},data(){return{positionLeft:le.Left,positionRight:le.Right}},computed:{primaryOutputName(){return this.isFinalProductNode?this.factoryStep.inputs[0].item.name??"none":this.factoryStep.outputs[0].item.name??"none"},numberOfMachines(){return this.displayNumber(this.factoryStep.numberOfBuildings)},machineName(){return this.factoryStep.building?this.factoryStep.numberOfBuildings>1?this.factoryStep.building.name+"s":this.factoryStep.building.name:""},isResourceNode(){return this.factoryStep.isResourceStep},isFinalProductNode(){return this.factoryStep.isFinalProductStep},totalResourceAmount(){if(this.isResourceNode){let e=0;return this.factoryStep.outputs.forEach(t=>e+=t.amountPerMinute),this.displayNumber(e)}else if(this.isFinalProductNode){let e=0;return this.factoryStep.inputs.forEach(t=>e+=t.amountPerMinute),this.displayNumber(e)}else return""},nodeColor(){return this.isResourceNode||this.isFinalProductNode?"primary":""},nodeVariant(){return"outlined"}},methods:{displayNumber(e){return parseFloat(e.toFixed(3)).toString()}}}),mw={key:0},pw={key:1};function yw(e,t,n,o,i,a){const r=xt("Handle");return ae(),ge(ye,null,[b(Xt,{color:e.nodeColor,elevation:"3",variant:"elevated"},{default:ue(()=>[b(sn,{class:"justify-center"},{default:ue(()=>[Oe(at(e.primaryOutputName),1)]),_:1}),b(zf,{class:"justify-center"},{default:ue(()=>[!e.isResourceNode&&!e.isFinalProductNode?(ae(),ge("div",mw,at(e.numberOfMachines+" "+e.machineName),1)):(ae(),ge("div",pw,at(e.totalResourceAmount)+" / min ",1))]),_:1})]),_:1},8,["color"]),e.isResourceNode?Me("",!0):(ae(),$e(r,{key:0,class:"left-handle",position:e.positionLeft,type:"target"},null,8,["position"])),e.isFinalProductNode?Me("",!0):(ae(),$e(r,{key:1,class:"right-handle",position:e.positionRight,type:"source"},null,8,["position"]))],64)}const Hc=uo(gw,[["render",yw],["__scopeId","data-v-099a871e"]]);function ww(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bw="\0",Ft="\0",Nl="";let _w=class{constructor(t){Ae(this,"_isDirected",!0);Ae(this,"_isMultigraph",!1);Ae(this,"_isCompound",!1);Ae(this,"_label");Ae(this,"_defaultNodeLabelFn",()=>{});Ae(this,"_defaultEdgeLabelFn",()=>{});Ae(this,"_nodes",{});Ae(this,"_in",{});Ae(this,"_preds",{});Ae(this,"_out",{});Ae(this,"_sucs",{});Ae(this,"_edgeObjs",{});Ae(this,"_edgeLabels",{});Ae(this,"_nodeCount",0);Ae(this,"_edgeCount",0);Ae(this,"_parent");Ae(this,"_children");t&&(this._isDirected=t.hasOwnProperty("directed")?t.directed:!0,this._isMultigraph=t.hasOwnProperty("multigraph")?t.multigraph:!1,this._isCompound=t.hasOwnProperty("compound")?t.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[Ft]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return this._defaultNodeLabelFn=t,typeof t!="function"&&(this._defaultNodeLabelFn=()=>t),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var t=this;return this.nodes().filter(n=>Object.keys(t._in[n]).length===0)}sinks(){var t=this;return this.nodes().filter(n=>Object.keys(t._out[n]).length===0)}setNodes(t,n){var o=arguments,i=this;return t.forEach(function(a){o.length>1?i.setNode(a,n):i.setNode(a)}),this}setNode(t,n){return this._nodes.hasOwnProperty(t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=Ft,this._children[t]={},this._children[Ft][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return this._nodes.hasOwnProperty(t)}removeNode(t){var n=this;if(this._nodes.hasOwnProperty(t)){var o=i=>n.removeEdge(n._edgeObjs[i]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],this.children(t).forEach(function(i){n.setParent(i)}),delete this._children[t]),Object.keys(this._in[t]).forEach(o),delete this._in[t],delete this._preds[t],Object.keys(this._out[t]).forEach(o),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=Ft;else{n+="";for(var o=n;o!==void 0;o=this.parent(o))if(o===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var n=this._parent[t];if(n!==Ft)return n}}children(t=Ft){if(this._isCompound){var n=this._children[t];if(n)return Object.keys(n)}else{if(t===Ft)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var n=this._preds[t];if(n)return Object.keys(n)}successors(t){var n=this._sucs[t];if(n)return Object.keys(n)}neighbors(t){var n=this.predecessors(t);if(n){const i=new Set(n);for(var o of this.successors(t))i.add(o);return Array.from(i.values())}}isLeaf(t){var n;return this.isDirected()?n=this.successors(t):n=this.neighbors(t),n.length===0}filterNodes(t){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var o=this;Object.entries(this._nodes).forEach(function([r,l]){t(r)&&n.setNode(r,l)}),Object.values(this._edgeObjs).forEach(function(r){n.hasNode(r.v)&&n.hasNode(r.w)&&n.setEdge(r,o.edge(r))});var i={};function a(r){var l=o.parent(r);return l===void 0||n.hasNode(l)?(i[r]=l,l):l in i?i[l]:a(l)}return this._isCompound&&n.nodes().forEach(r=>n.setParent(r,a(r))),n}setDefaultEdgeLabel(t){return this._defaultEdgeLabelFn=t,typeof t!="function"&&(this._defaultEdgeLabelFn=()=>t),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(t,n){var o=this,i=arguments;return t.reduce(function(a,r){return i.length>1?o.setEdge(a,r,n):o.setEdge(a,r),r}),this}setEdge(){var t,n,o,i,a=!1,r=arguments[0];typeof r=="object"&&r!==null&&"v"in r?(t=r.v,n=r.w,o=r.name,arguments.length===2&&(i=arguments[1],a=!0)):(t=r,n=arguments[1],o=arguments[3],arguments.length>2&&(i=arguments[2],a=!0)),t=""+t,n=""+n,o!==void 0&&(o=""+o);var l=On(this._isDirected,t,n,o);if(this._edgeLabels.hasOwnProperty(l))return a&&(this._edgeLabels[l]=i),this;if(o!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(n),this._edgeLabels[l]=a?i:this._defaultEdgeLabelFn(t,n,o);var s=xw(this._isDirected,t,n,o);return t=s.v,n=s.w,Object.freeze(s),this._edgeObjs[l]=s,Pl(this._preds[n],t),Pl(this._sucs[t],n),this._in[n][l]=s,this._out[t][l]=s,this._edgeCount++,this}edge(t,n,o){var i=arguments.length===1?Ki(this._isDirected,arguments[0]):On(this._isDirected,t,n,o);return this._edgeLabels[i]}edgeAsObj(){const t=this.edge(...arguments);return typeof t!="object"?{label:t}:t}hasEdge(t,n,o){var i=arguments.length===1?Ki(this._isDirected,arguments[0]):On(this._isDirected,t,n,o);return this._edgeLabels.hasOwnProperty(i)}removeEdge(t,n,o){var i=arguments.length===1?Ki(this._isDirected,arguments[0]):On(this._isDirected,t,n,o),a=this._edgeObjs[i];return a&&(t=a.v,n=a.w,delete this._edgeLabels[i],delete this._edgeObjs[i],Ml(this._preds[n],t),Ml(this._sucs[t],n),delete this._in[n][i],delete this._out[t][i],this._edgeCount--),this}inEdges(t,n){var o=this._in[t];if(o){var i=Object.values(o);return n?i.filter(a=>a.v===n):i}}outEdges(t,n){var o=this._out[t];if(o){var i=Object.values(o);return n?i.filter(a=>a.w===n):i}}nodeEdges(t,n){var o=this.inEdges(t,n);if(o)return o.concat(this.outEdges(t,n))}};function Pl(e,t){e[t]?e[t]++:e[t]=1}function Ml(e,t){--e[t]||delete e[t]}function On(e,t,n,o){var i=""+t,a=""+n;if(!e&&i>a){var r=i;i=a,a=r}return i+Nl+a+Nl+(o===void 0?bw:o)}function xw(e,t,n,o){var i=""+t,a=""+n;if(!e&&i>a){var r=i;i=a,a=r}var l={v:i,w:a};return o&&(l.name=o),l}function Ki(e,t){return On(e,t.v,t.w,t.name)}var dr=_w,Sw="2.2.2",Ew={Graph:dr,version:Sw},kw=dr,$w={write:Cw,read:Pw};function Cw(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Iw(e),edges:Nw(e)};return e.graph()!==void 0&&(t.value=structuredClone(e.graph())),t}function Iw(e){return e.nodes().map(function(t){var n=e.node(t),o=e.parent(t),i={v:t};return n!==void 0&&(i.value=n),o!==void 0&&(i.parent=o),i})}function Nw(e){return e.edges().map(function(t){var n=e.edge(t),o={v:t.v,w:t.w};return t.name!==void 0&&(o.name=t.name),n!==void 0&&(o.value=n),o})}function Pw(e){var t=new kw(e.options).setGraph(e.value);return e.nodes.forEach(function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),e.edges.forEach(function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}var Mw=Tw;function Tw(e){var t={},n=[],o;function i(a){t.hasOwnProperty(a)||(t[a]=!0,o.push(a),e.successors(a).forEach(i),e.predecessors(a).forEach(i))}return e.nodes().forEach(function(a){o=[],i(a),o.length&&n.push(o)}),n}let Vw=class{constructor(){Ae(this,"_arr",[]);Ae(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(t){return t.key})}has(t){return this._keyIndices.hasOwnProperty(t)}priority(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(t,n){var o=this._keyIndices;if(t=String(t),!o.hasOwnProperty(t)){var i=this._arr,a=i.length;return o[t]=a,i.push({key:t,priority:n}),this._decrease(a),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key}decrease(t,n){var o=this._keyIndices[t];if(n>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[o].priority+" New: "+n);this._arr[o].priority=n,this._decrease(o)}_heapify(t){var n=this._arr,o=2*t,i=o+1,a=t;o<n.length&&(a=n[o].priority<n[a].priority?o:a,i<n.length&&(a=n[i].priority<n[a].priority?i:a),a!==t&&(this._swap(t,a),this._heapify(a)))}_decrease(t){for(var n=this._arr,o=n[t].priority,i;t!==0&&(i=t>>1,!(n[i].priority<o));)this._swap(t,i),t=i}_swap(t,n){var o=this._arr,i=this._keyIndices,a=o[t],r=o[n];o[t]=r,o[n]=a,i[r.key]=t,i[a.key]=n}};var Gc=Vw,Aw=Gc,Yc=Ow,Dw=()=>1;function Ow(e,t,n,o){return Bw(e,String(t),n||Dw,o||function(i){return e.outEdges(i)})}function Bw(e,t,n,o){var i={},a=new Aw,r,l,s=function(u){var c=u.v!==r?u.v:u.w,d=i[c],f=n(u),h=l.distance+f;if(f<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+u+" Weight: "+f);h<d.distance&&(d.distance=h,d.predecessor=r,a.decrease(c,h))};for(e.nodes().forEach(function(u){var c=u===t?0:Number.POSITIVE_INFINITY;i[u]={distance:c},a.add(u,c)});a.size()>0&&(r=a.removeMin(),l=i[r],l.distance!==Number.POSITIVE_INFINITY);)o(r).forEach(s);return i}var Rw=Yc,zw=Fw;function Fw(e,t,n){return e.nodes().reduce(function(o,i){return o[i]=Rw(e,i,t,n),o},{})}var Xc=Lw;function Lw(e){var t=0,n=[],o={},i=[];function a(r){var l=o[r]={onStack:!0,lowlink:t,index:t++};if(n.push(r),e.successors(r).forEach(function(c){o.hasOwnProperty(c)?o[c].onStack&&(l.lowlink=Math.min(l.lowlink,o[c].index)):(a(c),l.lowlink=Math.min(l.lowlink,o[c].lowlink))}),l.lowlink===l.index){var s=[],u;do u=n.pop(),o[u].onStack=!1,s.push(u);while(r!==u);i.push(s)}}return e.nodes().forEach(function(r){o.hasOwnProperty(r)||a(r)}),i}var Hw=Xc,Gw=Yw;function Yw(e){return Hw(e).filter(function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}var Xw=Ww,Uw=()=>1;function Ww(e,t,n){return Kw(e,t||Uw,n||function(o){return e.outEdges(o)})}function Kw(e,t,n){var o={},i=e.nodes();return i.forEach(function(a){o[a]={},o[a][a]={distance:0},i.forEach(function(r){a!==r&&(o[a][r]={distance:Number.POSITIVE_INFINITY})}),n(a).forEach(function(r){var l=r.v===a?r.w:r.v,s=t(r);o[a][l]={distance:s,predecessor:a}})}),i.forEach(function(a){var r=o[a];i.forEach(function(l){var s=o[l];i.forEach(function(u){var c=s[a],d=r[u],f=s[u],h=c.distance+d.distance;h<f.distance&&(f.distance=h,f.predecessor=d.predecessor)})})}),o}function Uc(e){var t={},n={},o=[];function i(a){if(n.hasOwnProperty(a))throw new ka;t.hasOwnProperty(a)||(n[a]=!0,t[a]=!0,e.predecessors(a).forEach(i),delete n[a],o.push(a))}if(e.sinks().forEach(i),Object.keys(t).length!==e.nodeCount())throw new ka;return o}class ka extends Error{constructor(){super(...arguments)}}var Wc=Uc;Uc.CycleException=ka;var Tl=Wc,qw=Zw;function Zw(e){try{Tl(e)}catch(t){if(t instanceof Tl.CycleException)return!1;throw t}return!0}var Kc=jw;function jw(e,t,n){Array.isArray(t)||(t=[t]);var o=e.isDirected()?l=>e.successors(l):l=>e.neighbors(l),i=n==="post"?Qw:Jw,a=[],r={};return t.forEach(l=>{if(!e.hasNode(l))throw new Error("Graph does not have node: "+l);i(l,o,r,a)}),a}function Qw(e,t,n,o){for(var i=[[e,!1]];i.length>0;){var a=i.pop();a[1]?o.push(a[0]):n.hasOwnProperty(a[0])||(n[a[0]]=!0,i.push([a[0],!0]),qc(t(a[0]),r=>i.push([r,!1])))}}function Jw(e,t,n,o){for(var i=[e];i.length>0;){var a=i.pop();n.hasOwnProperty(a)||(n[a]=!0,o.push(a),qc(t(a),r=>i.push(r)))}}function qc(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}var e1=Kc,t1=n1;function n1(e,t){return e1(e,t,"post")}var o1=Kc,i1=a1;function a1(e,t){return o1(e,t,"pre")}var r1=dr,l1=Gc,s1=u1;function u1(e,t){var n=new r1,o={},i=new l1,a;function r(s){var u=s.v===a?s.w:s.v,c=i.priority(u);if(c!==void 0){var d=t(s);d<c&&(o[u]=a,i.decrease(u,d))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(s){i.add(s,Number.POSITIVE_INFINITY),n.setNode(s)}),i.decrease(e.nodes()[0],0);for(var l=!1;i.size()>0;){if(a=i.removeMin(),o.hasOwnProperty(a))n.setEdge(a,o[a]);else{if(l)throw new Error("Input graph is not connected: "+e);l=!0}e.nodeEdges(a).forEach(r)}return n}var c1={components:Mw,dijkstra:Yc,dijkstraAll:zw,findCycles:Gw,floydWarshall:Xw,isAcyclic:qw,postorder:t1,preorder:i1,prim:s1,tarjan:Xc,topsort:Wc},Vl=Ew,st={Graph:Vl.Graph,json:$w,alg:c1,version:Vl.version};let d1=class{constructor(){let t={};t._next=t._prev=t,this._sentinel=t}dequeue(){let t=this._sentinel,n=t._prev;if(n!==t)return Al(n),n}enqueue(t){let n=this._sentinel;t._prev&&t._next&&Al(t),t._next=n._next,n._next._prev=t,n._next=t,t._prev=n}toString(){let t=[],n=this._sentinel,o=n._prev;for(;o!==n;)t.push(JSON.stringify(o,f1)),o=o._prev;return"["+t.join(", ")+"]"}};function Al(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function f1(e,t){if(e!=="_next"&&e!=="_prev")return t}var h1=d1;let v1=st.Graph,g1=h1;var m1=y1;let p1=()=>1;function y1(e,t){if(e.nodeCount()<=1)return[];let n=b1(e,t||p1);return w1(n.graph,n.buckets,n.zeroIdx).flatMap(i=>e.outEdges(i.v,i.w))}function w1(e,t,n){let o=[],i=t[t.length-1],a=t[0],r;for(;e.nodeCount();){for(;r=a.dequeue();)qi(e,t,n,r);for(;r=i.dequeue();)qi(e,t,n,r);if(e.nodeCount()){for(let l=t.length-2;l>0;--l)if(r=t[l].dequeue(),r){o=o.concat(qi(e,t,n,r,!0));break}}}return o}function qi(e,t,n,o,i){let a=i?[]:void 0;return e.inEdges(o.v).forEach(r=>{let l=e.edge(r),s=e.node(r.v);i&&a.push({v:r.v,w:r.w}),s.out-=l,$a(t,n,s)}),e.outEdges(o.v).forEach(r=>{let l=e.edge(r),s=r.w,u=e.node(s);u.in-=l,$a(t,n,u)}),e.removeNode(o.v),a}function b1(e,t){let n=new v1,o=0,i=0;e.nodes().forEach(l=>{n.setNode(l,{v:l,in:0,out:0})}),e.edges().forEach(l=>{let s=n.edge(l.v,l.w)||0,u=t(l),c=s+u;n.setEdge(l.v,l.w,c),i=Math.max(i,n.node(l.v).out+=u),o=Math.max(o,n.node(l.w).in+=u)});let a=_1(i+o+3).map(()=>new g1),r=o+1;return n.nodes().forEach(l=>{$a(a,r,n.node(l))}),{graph:n,buckets:a,zeroIdx:r}}function $a(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function _1(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}let Zc=st.Graph;var Fe={addBorderNode:P1,addDummyNode:jc,asNonCompoundGraph:S1,buildLayerMatrix:C1,intersectRect:$1,mapValues:O1,maxRank:Qc,normalizeRanks:I1,notime:V1,partition:M1,pick:D1,predecessorWeights:k1,range:ed,removeEmptyRanks:N1,simplify:x1,successorWeights:E1,time:T1,uniqueId:Jc,zipObject:fr};function jc(e,t,n,o){let i;do i=Jc(o);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function x1(e){let t=new Zc().setGraph(e.graph());return e.nodes().forEach(n=>t.setNode(n,e.node(n))),e.edges().forEach(n=>{let o=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+i.weight,minlen:Math.max(o.minlen,i.minlen)})}),t}function S1(e){let t=new Zc({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{e.children(n).length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdge(n,e.edge(n))}),t}function E1(e){let t=e.nodes().map(n=>{let o={};return e.outEdges(n).forEach(i=>{o[i.w]=(o[i.w]||0)+e.edge(i).weight}),o});return fr(e.nodes(),t)}function k1(e){let t=e.nodes().map(n=>{let o={};return e.inEdges(n).forEach(i=>{o[i.v]=(o[i.v]||0)+e.edge(i).weight}),o});return fr(e.nodes(),t)}function $1(e,t){let n=e.x,o=e.y,i=t.x-n,a=t.y-o,r=e.width/2,l=e.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");let s,u;return Math.abs(a)*r>Math.abs(i)*l?(a<0&&(l=-l),s=l*i/a,u=l):(i<0&&(r=-r),s=r,u=r*a/i),{x:n+s,y:o+u}}function C1(e){let t=ed(Qc(e)+1).map(()=>[]);return e.nodes().forEach(n=>{let o=e.node(n),i=o.rank;i!==void 0&&(t[i][o.order]=n)}),t}function I1(e){let t=Math.min(...e.nodes().map(n=>{let o=e.node(n).rank;return o===void 0?Number.MAX_VALUE:o}));e.nodes().forEach(n=>{let o=e.node(n);o.hasOwnProperty("rank")&&(o.rank-=t)})}function N1(e){let t=Math.min(...e.nodes().map(a=>e.node(a).rank)),n=[];e.nodes().forEach(a=>{let r=e.node(a).rank-t;n[r]||(n[r]=[]),n[r].push(a)});let o=0,i=e.graph().nodeRankFactor;Array.from(n).forEach((a,r)=>{a===void 0&&r%i!==0?--o:a!==void 0&&o&&a.forEach(l=>e.node(l).rank+=o)})}function P1(e,t,n,o){let i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=o),jc(e,"border",i,t)}function Qc(e){return Math.max(...e.nodes().map(t=>{let n=e.node(t).rank;return n===void 0?Number.MIN_VALUE:n}))}function M1(e,t){let n={lhs:[],rhs:[]};return e.forEach(o=>{t(o)?n.lhs.push(o):n.rhs.push(o)}),n}function T1(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}}function V1(e,t){return t()}let A1=0;function Jc(e){var t=++A1;return toString(e)+t}function ed(e,t,n=1){t==null&&(t=e,e=0);let o=a=>a<t;n<0&&(o=a=>t<a);const i=[];for(let a=e;o(a);a+=n)i.push(a);return i}function D1(e,t){const n={};for(const o of t)e[o]!==void 0&&(n[o]=e[o]);return n}function O1(e,t){let n=t;return typeof t=="string"&&(n=o=>o[t]),Object.entries(e).reduce((o,[i,a])=>(o[i]=n(a,i),o),{})}function fr(e,t){return e.reduce((n,o,i)=>(n[o]=t[i],n),{})}let B1=m1,R1=Fe.uniqueId;var z1={run:F1,undo:H1};function F1(e){(e.graph().acyclicer==="greedy"?B1(e,n(e)):L1(e)).forEach(o=>{let i=e.edge(o);e.removeEdge(o),i.forwardName=o.name,i.reversed=!0,e.setEdge(o.w,o.v,i,R1("rev"))});function n(o){return i=>o.edge(i).weight}}function L1(e){let t=[],n={},o={};function i(a){o.hasOwnProperty(a)||(o[a]=!0,n[a]=!0,e.outEdges(a).forEach(r=>{n.hasOwnProperty(r.w)?t.push(r):i(r.w)}),delete n[a])}return e.nodes().forEach(i),t}function H1(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})}let G1=Fe;var Y1={run:X1,undo:W1};function X1(e){e.graph().dummyChains=[],e.edges().forEach(t=>U1(e,t))}function U1(e,t){let n=t.v,o=e.node(n).rank,i=t.w,a=e.node(i).rank,r=t.name,l=e.edge(t),s=l.labelRank;if(a===o+1)return;e.removeEdge(t);let u,c,d;for(d=0,++o;o<a;++d,++o)l.points=[],c={width:0,height:0,edgeLabel:l,edgeObj:t,rank:o},u=G1.addDummyNode(e,"edge",c,"_d"),o===s&&(c.width=l.width,c.height=l.height,c.dummy="edge-label",c.labelpos=l.labelpos),e.setEdge(n,u,{weight:l.weight},r),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,i,{weight:l.weight},r)}function W1(e){e.graph().dummyChains.forEach(t=>{let n=e.node(t),o=n.edgeLabel,i;for(e.setEdge(n.edgeObj,o);n.dummy;)i=e.successors(t)[0],e.removeNode(t),o.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),t=i,n=e.node(t)})}var Ti={longestPath:K1,slack:q1};function K1(e){var t={};function n(o){var i=e.node(o);if(t.hasOwnProperty(o))return i.rank;t[o]=!0;var a=Math.min(...e.outEdges(o).map(r=>r==null?Number.POSITIVE_INFINITY:n(r.w)-e.edge(r).minlen));return a===Number.POSITIVE_INFINITY&&(a=0),i.rank=a}e.sources().forEach(n)}function q1(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var Z1=st.Graph,ai=Ti.slack,td=j1;function j1(e){var t=new Z1({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});for(var i,a;Q1(t,e)<o;)i=J1(t,e),a=t.hasNode(i.v)?ai(e,i):-ai(e,i),eb(t,e,a);return t}function Q1(e,t){function n(o){t.nodeEdges(o).forEach(i=>{var a=i.v,r=o===a?i.w:a;!e.hasNode(r)&&!ai(t,i)&&(e.setNode(r,{}),e.setEdge(o,r,{}),n(r))})}return e.nodes().forEach(n),e.nodeCount()}function J1(e,t){return t.edges().reduce((o,i)=>{let a=Number.POSITIVE_INFINITY;return e.hasNode(i.v)!==e.hasNode(i.w)&&(a=ai(t,i)),a<o[0]?[a,i]:o},[Number.POSITIVE_INFINITY,null])[1]}function eb(e,t,n){e.nodes().forEach(o=>t.node(o).rank+=n)}var tb=td,Dl=Ti.slack,nb=Ti.longestPath,ob=st.alg.preorder,ib=st.alg.postorder,ab=Fe.simplify,rb=an;an.initLowLimValues=vr;an.initCutValues=hr;an.calcCutValue=nd;an.leaveEdge=id;an.enterEdge=ad;an.exchangeEdges=rd;function an(e){e=ab(e),nb(e);var t=tb(e);vr(t),hr(t,e);for(var n,o;n=id(t);)o=ad(t,e,n),rd(t,e,n,o)}function hr(e,t){var n=ib(e,e.nodes());n=n.slice(0,n.length-1),n.forEach(o=>lb(e,t,o))}function lb(e,t,n){var o=e.node(n),i=o.parent;e.edge(n,i).cutvalue=nd(e,t,n)}function nd(e,t,n){var o=e.node(n),i=o.parent,a=!0,r=t.edge(n,i),l=0;return r||(a=!1,r=t.edge(i,n)),l=r.weight,t.nodeEdges(n).forEach(s=>{var u=s.v===n,c=u?s.w:s.v;if(c!==i){var d=u===a,f=t.edge(s).weight;if(l+=d?f:-f,ub(e,n,c)){var h=e.edge(n,c).cutvalue;l+=d?-h:h}}}),l}function vr(e,t){arguments.length<2&&(t=e.nodes()[0]),od(e,{},1,t)}function od(e,t,n,o,i){var a=n,r=e.node(o);return t[o]=!0,e.neighbors(o).forEach(l=>{t.hasOwnProperty(l)||(n=od(e,t,n,l,o))}),r.low=a,r.lim=n++,i?r.parent=i:delete r.parent,n}function id(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function ad(e,t,n){var o=n.v,i=n.w;t.hasEdge(o,i)||(o=n.w,i=n.v);var a=e.node(o),r=e.node(i),l=a,s=!1;a.lim>r.lim&&(l=r,s=!0);var u=t.edges().filter(c=>s===Ol(e,e.node(c.v),l)&&s!==Ol(e,e.node(c.w),l));return u.reduce((c,d)=>Dl(t,d)<Dl(t,c)?d:c)}function rd(e,t,n,o){var i=n.v,a=n.w;e.removeEdge(i,a),e.setEdge(o.v,o.w,{}),vr(e),hr(e,t),sb(e,t)}function sb(e,t){var n=e.nodes().find(i=>!t.node(i).parent),o=ob(e,n);o=o.slice(1),o.forEach(i=>{var a=e.node(i).parent,r=t.edge(i,a),l=!1;r||(r=t.edge(a,i),l=!0),t.node(i).rank=t.node(a).rank+(l?r.minlen:-r.minlen)})}function ub(e,t,n){return e.hasEdge(t,n)}function Ol(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var cb=Ti,ld=cb.longestPath,db=td,fb=rb,hb=vb;function vb(e){switch(e.graph().ranker){case"network-simplex":Bl(e);break;case"tight-tree":mb(e);break;case"longest-path":gb(e);break;default:Bl(e)}}var gb=ld;function mb(e){ld(e),db(e)}function Bl(e){fb(e)}var pb=yb;function yb(e){let t=bb(e);e.graph().dummyChains.forEach(n=>{let o=e.node(n),i=o.edgeObj,a=wb(e,t,i.v,i.w),r=a.path,l=a.lca,s=0,u=r[s],c=!0;for(;n!==i.w;){if(o=e.node(n),c){for(;(u=r[s])!==l&&e.node(u).maxRank<o.rank;)s++;u===l&&(c=!1)}if(!c){for(;s<r.length-1&&e.node(u=r[s+1]).minRank<=o.rank;)s++;u=r[s]}e.setParent(n,u),n=e.successors(n)[0]}})}function wb(e,t,n,o){let i=[],a=[],r=Math.min(t[n].low,t[o].low),l=Math.max(t[n].lim,t[o].lim),s,u;s=n;do s=e.parent(s),i.push(s);while(s&&(t[s].low>r||l>t[s].lim));for(u=s,s=o;(s=e.parent(s))!==u;)a.push(s);return{path:i.concat(a.reverse()),lca:u}}function bb(e){let t={},n=0;function o(i){let a=n;e.children(i).forEach(o),t[i]={low:a,lim:n++}}return e.children().forEach(o),t}let Ca=Fe;var _b={run:xb,cleanup:kb};function xb(e){let t=Ca.addDummyNode(e,"root",{},"_root"),n=Sb(e),o=Math.max(...Object.values(n))-1,i=2*o+1;e.graph().nestingRoot=t,e.edges().forEach(r=>e.edge(r).minlen*=i);let a=Eb(e)+1;e.children().forEach(r=>sd(e,t,i,a,o,n,r)),e.graph().nodeRankFactor=i}function sd(e,t,n,o,i,a,r){let l=e.children(r);if(!l.length){r!==t&&e.setEdge(t,r,{weight:0,minlen:n});return}let s=Ca.addBorderNode(e,"_bt"),u=Ca.addBorderNode(e,"_bb"),c=e.node(r);e.setParent(s,r),c.borderTop=s,e.setParent(u,r),c.borderBottom=u,l.forEach(d=>{sd(e,t,n,o,i,a,d);let f=e.node(d),h=f.borderTop?f.borderTop:d,g=f.borderBottom?f.borderBottom:d,v=f.borderTop?o:2*o,p=h!==g?1:i-a[r]+1;e.setEdge(s,h,{weight:v,minlen:p,nestingEdge:!0}),e.setEdge(g,u,{weight:v,minlen:p,nestingEdge:!0})}),e.parent(r)||e.setEdge(t,s,{weight:0,minlen:i+a[r]})}function Sb(e){var t={};function n(o,i){var a=e.children(o);a&&a.length&&a.forEach(r=>n(r,i+1)),t[o]=i}return e.children().forEach(o=>n(o,1)),t}function Eb(e){return e.edges().reduce((t,n)=>t+e.edge(n).weight,0)}function kb(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{var o=e.edge(n);o.nestingEdge&&e.removeEdge(n)})}let $b=Fe;var Cb=Ib;function Ib(e){function t(n){let o=e.children(n),i=e.node(n);if(o.length&&o.forEach(t),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(let a=i.minRank,r=i.maxRank+1;a<r;++a)Rl(e,"borderLeft","_bl",n,i,a),Rl(e,"borderRight","_br",n,i,a)}}e.children().forEach(t)}function Rl(e,t,n,o,i,a){let r={width:0,height:0,rank:a,borderType:t},l=i[t][a-1],s=$b.addDummyNode(e,"border",r,n);i[t][a]=s,e.setParent(s,o),l&&e.setEdge(l,s,{weight:1})}var Nb={adjust:Pb,undo:Mb};function Pb(e){let t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&ud(e)}function Mb(e){let t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&Tb(e),(t==="lr"||t==="rl")&&(Vb(e),ud(e))}function ud(e){e.nodes().forEach(t=>zl(e.node(t))),e.edges().forEach(t=>zl(e.edge(t)))}function zl(e){let t=e.width;e.width=e.height,e.height=t}function Tb(e){e.nodes().forEach(t=>Zi(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(Zi),n.hasOwnProperty("y")&&Zi(n)})}function Zi(e){e.y=-e.y}function Vb(e){e.nodes().forEach(t=>ji(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(ji),n.hasOwnProperty("x")&&ji(n)})}function ji(e){let t=e.x;e.x=e.y,e.y=t}let Ab=Fe;var Db=Ob;function Ob(e){let t={},n=e.nodes().filter(l=>!e.children(l).length),o=Math.max(...n.map(l=>e.node(l).rank)),i=Ab.range(o+1).map(()=>[]);function a(l){if(t[l])return;t[l]=!0;let s=e.node(l);i[s.rank].push(l),e.successors(l).forEach(a)}return n.sort((l,s)=>e.node(l).rank-e.node(s).rank).forEach(a),i}let Bb=Fe.zipObject;var Rb=zb;function zb(e,t){let n=0;for(let o=1;o<t.length;++o)n+=Fb(e,t[o-1],t[o]);return n}function Fb(e,t,n){let o=Bb(n,n.map((u,c)=>c)),i=t.flatMap(u=>e.outEdges(u).map(c=>({pos:o[c.w],weight:e.edge(c).weight})).sort((c,d)=>c.pos-d.pos)),a=1;for(;a<n.length;)a<<=1;let r=2*a-1;a-=1;let l=new Array(r).fill(0),s=0;return i.forEach(u=>{let c=u.pos+a;l[c]+=u.weight;let d=0;for(;c>0;)c%2&&(d+=l[c+1]),c=c-1>>1,l[c]+=u.weight;s+=u.weight*d}),s}var Lb=Hb;function Hb(e,t=[]){return t.map(n=>{let o=e.inEdges(n);if(o.length){let i=o.reduce((a,r)=>{let l=e.edge(r),s=e.node(r.v);return{sum:a.sum+l.weight*s.order,weight:a.weight+l.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}let Gb=Fe;var Yb=Xb;function Xb(e,t){let n={};e.forEach((i,a)=>{let r=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};i.barycenter!==void 0&&(r.barycenter=i.barycenter,r.weight=i.weight)}),t.edges().forEach(i=>{let a=n[i.v],r=n[i.w];a!==void 0&&r!==void 0&&(r.indegree++,a.out.push(n[i.w]))});let o=Object.values(n).filter(i=>!i.indegree);return Ub(o)}function Ub(e){let t=[];function n(i){return a=>{a.merged||(a.barycenter===void 0||i.barycenter===void 0||a.barycenter>=i.barycenter)&&Wb(i,a)}}function o(i){return a=>{a.in.push(i),--a.indegree===0&&e.push(a)}}for(;e.length;){let i=e.pop();t.push(i),i.in.reverse().forEach(n(i)),i.out.forEach(o(i))}return t.filter(i=>!i.merged).map(i=>Gb.pick(i,["vs","i","barycenter","weight"]))}function Wb(e,t){let n=0,o=0;e.weight&&(n+=e.barycenter*e.weight,o+=e.weight),t.weight&&(n+=t.barycenter*t.weight,o+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0}let Kb=Fe;var qb=Zb;function Zb(e,t){let n=Kb.partition(e,c=>c.hasOwnProperty("barycenter")),o=n.lhs,i=n.rhs.sort((c,d)=>d.i-c.i),a=[],r=0,l=0,s=0;o.sort(jb(!!t)),s=Fl(a,i,s),o.forEach(c=>{s+=c.vs.length,a.push(c.vs),r+=c.barycenter*c.weight,l+=c.weight,s=Fl(a,i,s)});let u={vs:a.flat(!0)};return l&&(u.barycenter=r/l,u.weight=l),u}function Fl(e,t,n){let o;for(;t.length&&(o=t[t.length-1]).i<=n;)t.pop(),e.push(o.vs),n++;return n}function jb(e){return(t,n)=>t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}let Qb=Lb,Jb=Yb,e_=qb;var t_=cd;function cd(e,t,n,o){let i=e.children(t),a=e.node(t),r=a?a.borderLeft:void 0,l=a?a.borderRight:void 0,s={};r&&(i=i.filter(f=>f!==r&&f!==l));let u=Qb(e,i);u.forEach(f=>{if(e.children(f.v).length){let h=cd(e,f.v,n,o);s[f.v]=h,h.hasOwnProperty("barycenter")&&o_(f,h)}});let c=Jb(u,n);n_(c,s);let d=e_(c,o);if(r&&(d.vs=[r,d.vs,l].flat(!0),e.predecessors(r).length)){let f=e.node(e.predecessors(r)[0]),h=e.node(e.predecessors(l)[0]);d.hasOwnProperty("barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+h.order)/(d.weight+2),d.weight+=2}return d}function n_(e,t){e.forEach(n=>{n.vs=n.vs.flatMap(o=>t[o]?t[o].vs:o)})}function o_(e,t){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)}let i_=st.Graph,a_=Fe;var r_=l_;function l_(e,t,n){let o=s_(e),i=new i_({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(a=>e.node(a));return e.nodes().forEach(a=>{let r=e.node(a),l=e.parent(a);(r.rank===t||r.minRank<=t&&t<=r.maxRank)&&(i.setNode(a),i.setParent(a,l||o),e[n](a).forEach(s=>{let u=s.v===a?s.w:s.v,c=i.edge(u,a),d=c!==void 0?c.weight:0;i.setEdge(u,a,{weight:e.edge(s).weight+d})}),r.hasOwnProperty("minRank")&&i.setNode(a,{borderLeft:r.borderLeft[t],borderRight:r.borderRight[t]}))}),i}function s_(e){for(var t;e.hasNode(t=a_.uniqueId("_root")););return t}var u_=c_;function c_(e,t,n){let o={},i;n.forEach(a=>{let r=e.parent(a),l,s;for(;r;){if(l=e.parent(r),l?(s=o[l],o[l]=r):(s=i,i=r),s&&s!==r){t.setEdge(s,r);return}r=l}})}let d_=Db,f_=Rb,h_=t_,v_=r_,g_=u_,m_=st.Graph,No=Fe;var p_=dd;function dd(e,t){if(t&&typeof t.customOrder=="function"){t.customOrder(e,dd);return}let n=No.maxRank(e),o=Ll(e,No.range(1,n+1),"inEdges"),i=Ll(e,No.range(n-1,-1,-1),"outEdges"),a=d_(e);if(Hl(e,a),t&&t.disableOptimalOrderHeuristic)return;let r=Number.POSITIVE_INFINITY,l;for(let s=0,u=0;u<4;++s,++u){y_(s%2?o:i,s%4>=2),a=No.buildLayerMatrix(e);let c=f_(e,a);c<r&&(u=0,l=Object.assign({},a),r=c)}Hl(e,l)}function Ll(e,t,n){return t.map(function(o){return v_(e,o,n)})}function y_(e,t){let n=new m_;e.forEach(function(o){let i=o.graph().root,a=h_(o,i,n,t);a.vs.forEach((r,l)=>o.node(r).order=l),g_(o,n,a.vs)})}function Hl(e,t){Object.values(t).forEach(n=>n.forEach((o,i)=>e.node(o).order=i))}let w_=st.Graph,Jn=Fe;var b_={positionX:S_,findType1Conflicts:fd,findType2Conflicts:hd,addConflict:gr,hasConflict:vd,verticalAlignment:gd,horizontalCompaction:md,alignCoordinates:yd,findSmallestWidthAlignment:pd,balance:wd};function fd(e,t){let n={};function o(i,a){let r=0,l=0,s=i.length,u=a[a.length-1];return a.forEach((c,d)=>{let f=__(e,c),h=f?e.node(f).order:s;(f||c===u)&&(a.slice(l,d+1).forEach(g=>{e.predecessors(g).forEach(v=>{let p=e.node(v),w=p.order;(w<r||h<w)&&!(p.dummy&&e.node(g).dummy)&&gr(n,v,g)})}),l=d+1,r=h)}),a}return t.length&&t.reduce(o),n}function hd(e,t){let n={};function o(a,r,l,s,u){let c;Jn.range(r,l).forEach(d=>{c=a[d],e.node(c).dummy&&e.predecessors(c).forEach(f=>{let h=e.node(f);h.dummy&&(h.order<s||h.order>u)&&gr(n,f,c)})})}function i(a,r){let l=-1,s,u=0;return r.forEach((c,d)=>{if(e.node(c).dummy==="border"){let f=e.predecessors(c);f.length&&(s=e.node(f[0]).order,o(r,u,d,l,s),u=d,l=s)}o(r,u,r.length,s,a.length)}),r}return t.length&&t.reduce(i),n}function __(e,t){if(e.node(t).dummy)return e.predecessors(t).find(n=>e.node(n).dummy)}function gr(e,t,n){if(t>n){let i=t;t=n,n=i}let o=e[t];o||(e[t]=o={}),o[n]=!0}function vd(e,t,n){if(t>n){let o=t;t=n,n=o}return!!e[t]&&e[t].hasOwnProperty(n)}function gd(e,t,n,o){let i={},a={},r={};return t.forEach(l=>{l.forEach((s,u)=>{i[s]=s,a[s]=s,r[s]=u})}),t.forEach(l=>{let s=-1;l.forEach(u=>{let c=o(u);if(c.length){c=c.sort((f,h)=>r[f]-r[h]);let d=(c.length-1)/2;for(let f=Math.floor(d),h=Math.ceil(d);f<=h;++f){let g=c[f];a[u]===u&&s<r[g]&&!vd(n,u,g)&&(a[g]=u,a[u]=i[u]=i[g],s=r[g])}}})}),{root:i,align:a}}function md(e,t,n,o,i){let a={},r=x_(e,t,n,i),l=i?"borderLeft":"borderRight";function s(d,f){let h=r.nodes(),g=h.pop(),v={};for(;g;)v[g]?d(g):(v[g]=!0,h.push(g),h=h.concat(f(g))),g=h.pop()}function u(d){a[d]=r.inEdges(d).reduce((f,h)=>Math.max(f,a[h.v]+r.edge(h)),0)}function c(d){let f=r.outEdges(d).reduce((g,v)=>Math.min(g,a[v.w]-r.edge(v)),Number.POSITIVE_INFINITY),h=e.node(d);f!==Number.POSITIVE_INFINITY&&h.borderType!==l&&(a[d]=Math.max(a[d],f))}return s(u,r.predecessors.bind(r)),s(c,r.successors.bind(r)),Object.keys(o).forEach(d=>a[d]=a[n[d]]),a}function x_(e,t,n,o){let i=new w_,a=e.graph(),r=E_(a.nodesep,a.edgesep,o);return t.forEach(l=>{let s;l.forEach(u=>{let c=n[u];if(i.setNode(c),s){var d=n[s],f=i.edge(d,c);i.setEdge(d,c,Math.max(r(e,u,s),f||0))}s=u})}),i}function pd(e,t){return Object.values(t).reduce((n,o)=>{let i=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;Object.entries(o).forEach(([l,s])=>{let u=k_(e,l)/2;i=Math.max(s+u,i),a=Math.min(s-u,a)});const r=i-a;return r<n[0]&&(n=[r,o]),n},[Number.POSITIVE_INFINITY,null])[1]}function yd(e,t){let n=Object.values(t),o=Math.min(...n),i=Math.max(...n);["u","d"].forEach(a=>{["l","r"].forEach(r=>{let l=a+r,s=e[l];if(s===t)return;let u=Object.values(s),c=o-Math.min(...u);r!=="l"&&(c=i-Math.max(...u)),c&&(e[l]=Jn.mapValues(s,d=>d+c))})})}function wd(e,t){return Jn.mapValues(e.ul,(n,o)=>{if(t)return e[t.toLowerCase()][o];{let i=Object.values(e).map(a=>a[o]).sort((a,r)=>a-r);return(i[1]+i[2])/2}})}function S_(e){let t=Jn.buildLayerMatrix(e),n=Object.assign(fd(e,t),hd(e,t)),o={},i;["u","d"].forEach(r=>{i=r==="u"?t:Object.values(t).reverse(),["l","r"].forEach(l=>{l==="r"&&(i=i.map(d=>Object.values(d).reverse()));let s=(r==="u"?e.predecessors:e.successors).bind(e),u=gd(e,i,n,s),c=md(e,i,u.root,u.align,l==="r");l==="r"&&(c=Jn.mapValues(c,d=>-d)),o[r+l]=c})});let a=pd(e,o);return yd(o,a),wd(o,e.graph().align)}function E_(e,t,n){return(o,i,a)=>{let r=o.node(i),l=o.node(a),s=0,u;if(s+=r.width/2,r.hasOwnProperty("labelpos"))switch(r.labelpos.toLowerCase()){case"l":u=-r.width/2;break;case"r":u=r.width/2;break}if(u&&(s+=n?u:-u),u=0,s+=(r.dummy?t:e)/2,s+=(l.dummy?t:e)/2,s+=l.width/2,l.hasOwnProperty("labelpos"))switch(l.labelpos.toLowerCase()){case"l":u=l.width/2;break;case"r":u=-l.width/2;break}return u&&(s+=n?u:-u),u=0,s}}function k_(e,t){return e.node(t).width}let bd=Fe,$_=b_.positionX;var C_=I_;function I_(e){e=bd.asNonCompoundGraph(e),N_(e),Object.entries($_(e)).forEach(([t,n])=>e.node(t).x=n)}function N_(e){let t=bd.buildLayerMatrix(e),n=e.graph().ranksep,o=0;t.forEach(i=>{const a=i.reduce((r,l)=>{const s=e.node(l).height;return r>s?r:s},0);i.forEach(r=>e.node(r).y=o+a/2),o+=a+n})}let Gl=z1,Yl=Y1,P_=hb,M_=Fe.normalizeRanks,T_=pb,V_=Fe.removeEmptyRanks,Xl=_b,A_=Cb,Ul=Nb,D_=p_,O_=C_,tt=Fe,B_=st.Graph;var R_=z_;function z_(e,t){let n=t&&t.debugTiming?tt.time:tt.notime;n("layout",()=>{let o=n("  buildLayoutGraph",()=>q_(e));n("  runLayout",()=>F_(o,n,t)),n("  updateInputGraph",()=>L_(e,o))})}function F_(e,t,n){t("    makeSpaceForEdgeLabels",()=>Z_(e)),t("    removeSelfEdges",()=>ax(e)),t("    acyclic",()=>Gl.run(e)),t("    nestingGraph.run",()=>Xl.run(e)),t("    rank",()=>P_(tt.asNonCompoundGraph(e))),t("    injectEdgeLabelProxies",()=>j_(e)),t("    removeEmptyRanks",()=>V_(e)),t("    nestingGraph.cleanup",()=>Xl.cleanup(e)),t("    normalizeRanks",()=>M_(e)),t("    assignRankMinMax",()=>Q_(e)),t("    removeEdgeLabelProxies",()=>J_(e)),t("    normalize.run",()=>Yl.run(e)),t("    parentDummyChains",()=>T_(e)),t("    addBorderSegments",()=>A_(e)),t("    order",()=>D_(e,n)),t("    insertSelfEdges",()=>rx(e)),t("    adjustCoordinateSystem",()=>Ul.adjust(e)),t("    position",()=>O_(e)),t("    positionSelfEdges",()=>lx(e)),t("    removeBorderNodes",()=>ix(e)),t("    normalize.undo",()=>Yl.undo(e)),t("    fixupEdgeLabelCoords",()=>nx(e)),t("    undoCoordinateSystem",()=>Ul.undo(e)),t("    translateGraph",()=>ex(e)),t("    assignNodeIntersects",()=>tx(e)),t("    reversePoints",()=>ox(e)),t("    acyclic.undo",()=>Gl.undo(e))}function L_(e,t){e.nodes().forEach(n=>{let o=e.node(n),i=t.node(n);o&&(o.x=i.x,o.y=i.y,o.rank=i.rank,t.children(n).length&&(o.width=i.width,o.height=i.height))}),e.edges().forEach(n=>{let o=e.edge(n),i=t.edge(n);o.points=i.points,i.hasOwnProperty("x")&&(o.x=i.x,o.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}let H_=["nodesep","edgesep","ranksep","marginx","marginy"],G_={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Y_=["acyclicer","ranker","rankdir","align"],X_=["width","height"],Wl={width:0,height:0},U_=["minlen","weight","width","height","labeloffset"],W_={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},K_=["labelpos"];function q_(e){let t=new B_({multigraph:!0,compound:!0}),n=Ji(e.graph());return t.setGraph(Object.assign({},G_,Qi(n,H_),tt.pick(n,Y_))),e.nodes().forEach(o=>{let i=Ji(e.node(o));const a=Qi(i,X_);Object.keys(Wl).forEach(r=>{a[r]===void 0&&(a[r]=Wl[r])}),t.setNode(o,a),t.setParent(o,e.parent(o))}),e.edges().forEach(o=>{let i=Ji(e.edge(o));t.setEdge(o,Object.assign({},W_,Qi(i,U_),tt.pick(i,K_)))}),t}function Z_(e){let t=e.graph();t.ranksep/=2,e.edges().forEach(n=>{let o=e.edge(n);o.minlen*=2,o.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?o.width+=o.labeloffset:o.height+=o.labeloffset)})}function j_(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.width&&n.height){let o=e.node(t.v),a={rank:(e.node(t.w).rank-o.rank)/2+o.rank,e:t};tt.addDummyNode(e,"edge-proxy",a,"_ep")}})}function Q_(e){let t=0;e.nodes().forEach(n=>{let o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=Math.max(t,o.maxRank))}),e.graph().maxRank=t}function J_(e){e.nodes().forEach(t=>{let n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function ex(e){let t=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,i=0,a=e.graph(),r=a.marginx||0,l=a.marginy||0;function s(u){let c=u.x,d=u.y,f=u.width,h=u.height;t=Math.min(t,c-f/2),n=Math.max(n,c+f/2),o=Math.min(o,d-h/2),i=Math.max(i,d+h/2)}e.nodes().forEach(u=>s(e.node(u))),e.edges().forEach(u=>{let c=e.edge(u);c.hasOwnProperty("x")&&s(c)}),t-=r,o-=l,e.nodes().forEach(u=>{let c=e.node(u);c.x-=t,c.y-=o}),e.edges().forEach(u=>{let c=e.edge(u);c.points.forEach(d=>{d.x-=t,d.y-=o}),c.hasOwnProperty("x")&&(c.x-=t),c.hasOwnProperty("y")&&(c.y-=o)}),a.width=n-t+r,a.height=i-o+l}function tx(e){e.edges().forEach(t=>{let n=e.edge(t),o=e.node(t.v),i=e.node(t.w),a,r;n.points?(a=n.points[0],r=n.points[n.points.length-1]):(n.points=[],a=i,r=o),n.points.unshift(tt.intersectRect(o,a)),n.points.push(tt.intersectRect(i,r))})}function nx(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function ox(e){e.edges().forEach(t=>{let n=e.edge(t);n.reversed&&n.points.reverse()})}function ix(e){e.nodes().forEach(t=>{if(e.children(t).length){let n=e.node(t),o=e.node(n.borderTop),i=e.node(n.borderBottom),a=e.node(n.borderLeft[n.borderLeft.length-1]),r=e.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(r.x-a.x),n.height=Math.abs(i.y-o.y),n.x=a.x+n.width/2,n.y=o.y+n.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy==="border"&&e.removeNode(t)})}function ax(e){e.edges().forEach(t=>{if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function rx(e){var t=tt.buildLayerMatrix(e);t.forEach(n=>{var o=0;n.forEach((i,a)=>{var r=e.node(i);r.order=a+o,(r.selfEdges||[]).forEach(l=>{tt.addDummyNode(e,"selfedge",{width:l.label.width,height:l.label.height,rank:r.rank,order:a+ ++o,e:l.e,label:l.label},"_se")}),delete r.selfEdges})})}function lx(e){e.nodes().forEach(t=>{var n=e.node(t);if(n.dummy==="selfedge"){var o=e.node(n.e.v),i=o.x+o.width/2,a=o.y,r=n.x-i,l=o.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*r/3,y:a-l},{x:i+5*r/6,y:a-l},{x:i+r,y:a},{x:i+5*r/6,y:a+l},{x:i+2*r/3,y:a+l}],n.label.x=n.x,n.label.y=n.y}})}function Qi(e,t){return tt.mapValues(tt.pick(e,t),Number)}function Ji(e){var t={};return e&&Object.entries(e).forEach(([n,o])=>{typeof n=="string"&&(n=n.toLowerCase()),t[n]=o}),t}let sx=Fe,ux=st.Graph;var cx={debugOrdering:dx};function dx(e){let t=sx.buildLayerMatrix(e),n=new ux({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(o=>{n.setNode(o,{label:o}),n.setParent(o,"layer"+e.node(o).rank)}),e.edges().forEach(o=>n.setEdge(o.v,o.w,{},o.name)),t.forEach((o,i)=>{let a="layer"+i;n.setNode(a,{rank:"same"}),o.reduce((r,l)=>(n.setEdge(r,l,{style:"invis"}),l))}),n}var fx="1.1.3",hx={graphlib:st,layout:R_,debug:cx,util:{time:Fe.time,notime:Fe.notime},version:fx};const ea=ww(hx);function vx(){const{findNode:e}=ke(),t=se(new ea.graphlib.Graph);function n(o,i){const a=new ea.graphlib.Graph;t.value=a,a.setGraph({rankdir:"LR",nodesep:200,edgesep:50,ranksep:150}),a.setDefaultNodeLabel(()=>({})),a.setDefaultEdgeLabel(()=>({}));for(const r of o){const l=e(r.id);l&&a.setNode(r.id,{width:l.dimensions.width||150,height:l.dimensions.height||50})}for(const r of i)a.setEdge(r.source,r.target);return ea.layout(a),o.map((r,l)=>{const s=a.node(r.id);return{...r,targetPosition:le.Left,sourcePosition:le.Right,position:{x:s.x+l*10,y:s.y}}})}return{graph:t,layout:n}}const gx={name:"ControlButton",compatConfig:{MODE:3}},mx=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n},px={class:"vue-flow__controls-button"};function yx(e,t,n,o,i,a){return ae(),ge("button",px,[Ne(e.$slots,"default")])}const Po=mx(gx,[["render",yx]]),wx={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},bx=ze("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),_x=[bx];function xx(e,t){return ae(),ge("svg",wx,_x)}const Sx={render:xx},Ex={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},kx=ze("path",{d:"M0 0h32v4.2H0z"},null,-1),$x=[kx];function Cx(e,t){return ae(),ge("svg",Ex,$x)}const Ix={render:Cx},Nx={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Px=ze("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),Mx=[Px];function Tx(e,t){return ae(),ge("svg",Nx,Mx)}const Vx={render:Tx},Ax={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Dx=ze("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),Ox=[Dx];function Bx(e,t){return ae(),ge("svg",Ax,Ox)}const Rx={render:Bx},zx={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Fx=ze("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),Lx=[Fx];function Hx(e,t){return ae(),ge("svg",zx,Lx)}const Gx={render:Hx},Yx={name:"Controls",compatConfig:{MODE:3}},Xx=we({...Yx,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>fc.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:o,elementsSelectable:i,setInteractive:a,zoomIn:r,zoomOut:l,fitView:s,viewport:u,minZoom:c,maxZoom:d}=ke(),f=oe(()=>n.value||o.value||i.value),h=oe(()=>u.value.zoom<=c.value),g=oe(()=>u.value.zoom>=d.value);function v(){r(),t("zoomIn")}function p(){l(),t("zoomOut")}function w(){s(e.fitViewParams),t("fitView")}function y(){a(!f.value),t("interactionChange",!f.value)}return(M,E)=>(ae(),$e(ie(Fc),{class:"vue-flow__controls",position:M.position},{default:ue(()=>[Ne(M.$slots,"top"),M.showZoom?(ae(),ge(ye,{key:0},[Ne(M.$slots,"control-zoom-in",{},()=>[b(Po,{class:"vue-flow__controls-zoomin",disabled:g.value,onClick:v},{default:ue(()=>[Ne(M.$slots,"icon-zoom-in",{},()=>[(ae(),$e(Lt(ie(Sx))))])]),_:3},8,["disabled"])]),Ne(M.$slots,"control-zoom-out",{},()=>[b(Po,{class:"vue-flow__controls-zoomout",disabled:h.value,onClick:p},{default:ue(()=>[Ne(M.$slots,"icon-zoom-out",{},()=>[(ae(),$e(Lt(ie(Ix))))])]),_:3},8,["disabled"])])],64)):Me("",!0),M.showFitView?Ne(M.$slots,"control-fit-view",{key:1},()=>[b(Po,{class:"vue-flow__controls-fitview",onClick:w},{default:ue(()=>[Ne(M.$slots,"icon-fit-view",{},()=>[(ae(),$e(Lt(ie(Vx))))])]),_:3})]):Me("",!0),M.showInteractive?Ne(M.$slots,"control-interactive",{key:2},()=>[M.showInteractive?(ae(),$e(Po,{key:0,class:"vue-flow__controls-interactive",onClick:y},{default:ue(()=>[f.value?Ne(M.$slots,"icon-unlock",{key:0},()=>[(ae(),$e(Lt(ie(Gx))))]):Me("",!0),f.value?Me("",!0):Ne(M.$slots,"icon-lock",{key:1},()=>[(ae(),$e(Lt(ie(Rx))))])]),_:3})):Me("",!0)]):Me("",!0),Ne(M.$slots,"default")]),_:3},8,["position"]))}});var Ux={value:()=>{}};function mr(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Lo(n)}function Lo(e){this._=e}function Wx(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Lo.prototype=mr.prototype={constructor:Lo,on:function(e,t){var n=this._,o=Wx(e+"",n),i,a=-1,r=o.length;if(arguments.length<2){for(;++a<r;)if((i=(e=o[a]).type)&&(i=Kx(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<r;)if(i=(e=o[a]).type)n[i]=Kl(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Kl(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Lo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,a;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,i=a.length;o<i;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,n)}};function Kx(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Kl(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Ux,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ia="http://www.w3.org/1999/xhtml";const ql={svg:"http://www.w3.org/2000/svg",xhtml:Ia,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vi(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ql.hasOwnProperty(t)?{space:ql[t],local:e}:e}function qx(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ia&&t.documentElement.namespaceURI===Ia?t.createElement(e):t.createElementNS(n,e)}}function Zx(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function _d(e){var t=Vi(e);return(t.local?Zx:qx)(t)}function jx(){}function pr(e){return e==null?jx:function(){return this.querySelector(e)}}function Qx(e){typeof e!="function"&&(e=pr(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],r=a.length,l=o[i]=new Array(r),s,u,c=0;c<r;++c)(s=a[c])&&(u=e.call(s,s.__data__,c,a))&&("__data__"in s&&(u.__data__=s.__data__),l[c]=u);return new Je(o,this._parents)}function Jx(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function eS(){return[]}function xd(e){return e==null?eS:function(){return this.querySelectorAll(e)}}function tS(e){return function(){return Jx(e.apply(this,arguments))}}function nS(e){typeof e=="function"?e=tS(e):e=xd(e);for(var t=this._groups,n=t.length,o=[],i=[],a=0;a<n;++a)for(var r=t[a],l=r.length,s,u=0;u<l;++u)(s=r[u])&&(o.push(e.call(s,s.__data__,u,r)),i.push(s));return new Je(o,i)}function Sd(e){return function(){return this.matches(e)}}function Ed(e){return function(t){return t.matches(e)}}var oS=Array.prototype.find;function iS(e){return function(){return oS.call(this.children,e)}}function aS(){return this.firstElementChild}function rS(e){return this.select(e==null?aS:iS(typeof e=="function"?e:Ed(e)))}var lS=Array.prototype.filter;function sS(){return Array.from(this.children)}function uS(e){return function(){return lS.call(this.children,e)}}function cS(e){return this.selectAll(e==null?sS:uS(typeof e=="function"?e:Ed(e)))}function dS(e){typeof e!="function"&&(e=Sd(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],r=a.length,l=o[i]=[],s,u=0;u<r;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&l.push(s);return new Je(o,this._parents)}function kd(e){return new Array(e.length)}function fS(){return new Je(this._enter||this._groups.map(kd),this._parents)}function ri(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ri.prototype={constructor:ri,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function hS(e){return function(){return e}}function vS(e,t,n,o,i,a){for(var r=0,l,s=t.length,u=a.length;r<u;++r)(l=t[r])?(l.__data__=a[r],o[r]=l):n[r]=new ri(e,a[r]);for(;r<s;++r)(l=t[r])&&(i[r]=l)}function gS(e,t,n,o,i,a,r){var l,s,u=new Map,c=t.length,d=a.length,f=new Array(c),h;for(l=0;l<c;++l)(s=t[l])&&(f[l]=h=r.call(s,s.__data__,l,t)+"",u.has(h)?i[l]=s:u.set(h,s));for(l=0;l<d;++l)h=r.call(e,a[l],l,a)+"",(s=u.get(h))?(o[l]=s,s.__data__=a[l],u.delete(h)):n[l]=new ri(e,a[l]);for(l=0;l<c;++l)(s=t[l])&&u.get(f[l])===s&&(i[l]=s)}function mS(e){return e.__data__}function pS(e,t){if(!arguments.length)return Array.from(this,mS);var n=t?gS:vS,o=this._parents,i=this._groups;typeof e!="function"&&(e=hS(e));for(var a=i.length,r=new Array(a),l=new Array(a),s=new Array(a),u=0;u<a;++u){var c=o[u],d=i[u],f=d.length,h=yS(e.call(c,c&&c.__data__,u,o)),g=h.length,v=l[u]=new Array(g),p=r[u]=new Array(g),w=s[u]=new Array(f);n(c,d,v,p,w,h,t);for(var y=0,M=0,E,P;y<g;++y)if(E=v[y]){for(y>=M&&(M=y+1);!(P=p[M])&&++M<g;);E._next=P||null}}return r=new Je(r,o),r._enter=l,r._exit=s,r}function yS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wS(){return new Je(this._exit||this._groups.map(kd),this._parents)}function bS(e,t,n){var o=this.enter(),i=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),o&&i?o.merge(i).order():i}function _S(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,a=o.length,r=Math.min(i,a),l=new Array(i),s=0;s<r;++s)for(var u=n[s],c=o[s],d=u.length,f=l[s]=new Array(d),h,g=0;g<d;++g)(h=u[g]||c[g])&&(f[g]=h);for(;s<i;++s)l[s]=n[s];return new Je(l,this._parents)}function xS(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,a=o[i],r;--i>=0;)(r=o[i])&&(a&&r.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(r,a),a=r);return this}function SS(e){e||(e=ES);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a){for(var r=n[a],l=r.length,s=i[a]=new Array(l),u,c=0;c<l;++c)(u=r[c])&&(s[c]=u);s.sort(t)}return new Je(i,this._parents).order()}function ES(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function kS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $S(){return Array.from(this)}function CS(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length;i<a;++i){var r=o[i];if(r)return r}return null}function IS(){let e=0;for(const t of this)++e;return e}function NS(){return!this.node()}function PS(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],a=0,r=i.length,l;a<r;++a)(l=i[a])&&e.call(l,l.__data__,a,i);return this}function MS(e){return function(){this.removeAttribute(e)}}function TS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function VS(e,t){return function(){this.setAttribute(e,t)}}function AS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function DS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function OS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function BS(e,t){var n=Vi(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?TS:MS:typeof t=="function"?n.local?OS:DS:n.local?AS:VS)(n,t))}function $d(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function RS(e){return function(){this.style.removeProperty(e)}}function zS(e,t,n){return function(){this.style.setProperty(e,t,n)}}function FS(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function LS(e,t,n){return arguments.length>1?this.each((t==null?RS:typeof t=="function"?FS:zS)(e,t,n??"")):xn(this.node(),e)}function xn(e,t){return e.style.getPropertyValue(t)||$d(e).getComputedStyle(e,null).getPropertyValue(t)}function HS(e){return function(){delete this[e]}}function GS(e,t){return function(){this[e]=t}}function YS(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function XS(e,t){return arguments.length>1?this.each((t==null?HS:typeof t=="function"?YS:GS)(e,t)):this.node()[e]}function Cd(e){return e.trim().split(/^|\s+/)}function yr(e){return e.classList||new Id(e)}function Id(e){this._node=e,this._names=Cd(e.getAttribute("class")||"")}Id.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Nd(e,t){for(var n=yr(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Pd(e,t){for(var n=yr(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function US(e){return function(){Nd(this,e)}}function WS(e){return function(){Pd(this,e)}}function KS(e,t){return function(){(t.apply(this,arguments)?Nd:Pd)(this,e)}}function qS(e,t){var n=Cd(e+"");if(arguments.length<2){for(var o=yr(this.node()),i=-1,a=n.length;++i<a;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?KS:t?US:WS)(n,t))}function ZS(){this.textContent=""}function jS(e){return function(){this.textContent=e}}function QS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function JS(e){return arguments.length?this.each(e==null?ZS:(typeof e=="function"?QS:jS)(e)):this.node().textContent}function eE(){this.innerHTML=""}function tE(e){return function(){this.innerHTML=e}}function nE(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function oE(e){return arguments.length?this.each(e==null?eE:(typeof e=="function"?nE:tE)(e)):this.node().innerHTML}function iE(){this.nextSibling&&this.parentNode.appendChild(this)}function aE(){return this.each(iE)}function rE(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lE(){return this.each(rE)}function sE(e){var t=typeof e=="function"?e:_d(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function uE(){return null}function cE(e,t){var n=typeof e=="function"?e:_d(e),o=t==null?uE:typeof t=="function"?t:pr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function dE(){var e=this.parentNode;e&&e.removeChild(this)}function fE(){return this.each(dE)}function hE(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vE(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gE(e){return this.select(e?vE:hE)}function mE(e){return arguments.length?this.property("__data__",e):this.node().__data__}function pE(e){return function(t){e.call(this,t,this.__data__)}}function yE(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function wE(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function bE(e,t,n){return function(){var o=this.__on,i,a=pE(t);if(o){for(var r=0,l=o.length;r<l;++r)if((i=o[r]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(i):this.__on=[i]}}function _E(e,t,n){var o=yE(e+""),i,a=o.length,r;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,c;s<u;++s)for(i=0,c=l[s];i<a;++i)if((r=o[i]).type===c.type&&r.name===c.name)return c.value}return}for(l=t?bE:wE,i=0;i<a;++i)this.each(l(o[i],t,n));return this}function Md(e,t,n){var o=$d(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function xE(e,t){return function(){return Md(this,e,t)}}function SE(e,t){return function(){return Md(this,e,t.apply(this,arguments))}}function EE(e,t){return this.each((typeof t=="function"?SE:xE)(e,t))}function*kE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length,r;i<a;++i)(r=o[i])&&(yield r)}var Td=[null];function Je(e,t){this._groups=e,this._parents=t}function mo(){return new Je([[document.documentElement]],Td)}function $E(){return this}Je.prototype=mo.prototype={constructor:Je,select:Qx,selectAll:nS,selectChild:rS,selectChildren:cS,filter:dS,data:pS,enter:fS,exit:wS,join:bS,merge:_S,selection:$E,order:xS,sort:SS,call:kS,nodes:$S,node:CS,size:IS,empty:NS,each:PS,attr:BS,style:LS,property:XS,classed:qS,text:JS,html:oE,raise:aE,lower:lE,append:sE,insert:cE,remove:fE,clone:gE,datum:mE,on:_E,dispatch:EE,[Symbol.iterator]:kE};function Dt(e){return typeof e=="string"?new Je([[document.querySelector(e)]],[document.documentElement]):new Je([[e]],Td)}function CE(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Mt(e,t){if(e=CE(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Na={capture:!0,passive:!1};function Pa(e){e.preventDefault(),e.stopImmediatePropagation()}function IE(e){var t=e.document.documentElement,n=Dt(e).on("dragstart.drag",Pa,Na);"onselectstart"in t?n.on("selectstart.drag",Pa,Na):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function NE(e,t){var n=e.document.documentElement,o=Dt(e).on("dragstart.drag",null);t&&(o.on("click.drag",Pa,Na),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function wr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Vd(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function po(){}var eo=.7,li=1/eo,gn="\\s*([+-]?\\d+)\\s*",to="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",PE=/^#([0-9a-f]{3,8})$/,ME=new RegExp(`^rgb\\(${gn},${gn},${gn}\\)$`),TE=new RegExp(`^rgb\\(${ht},${ht},${ht}\\)$`),VE=new RegExp(`^rgba\\(${gn},${gn},${gn},${to}\\)$`),AE=new RegExp(`^rgba\\(${ht},${ht},${ht},${to}\\)$`),DE=new RegExp(`^hsl\\(${to},${ht},${ht}\\)$`),OE=new RegExp(`^hsla\\(${to},${ht},${ht},${to}\\)$`),Zl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wr(po,no,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:jl,formatHex:jl,formatHex8:BE,formatHsl:RE,formatRgb:Ql,toString:Ql});function jl(){return this.rgb().formatHex()}function BE(){return this.rgb().formatHex8()}function RE(){return Ad(this).formatHsl()}function Ql(){return this.rgb().formatRgb()}function no(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=PE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Jl(t):n===3?new Ze(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Mo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Mo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ME.exec(e))?new Ze(t[1],t[2],t[3],1):(t=TE.exec(e))?new Ze(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=VE.exec(e))?Mo(t[1],t[2],t[3],t[4]):(t=AE.exec(e))?Mo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=DE.exec(e))?ns(t[1],t[2]/100,t[3]/100,1):(t=OE.exec(e))?ns(t[1],t[2]/100,t[3]/100,t[4]):Zl.hasOwnProperty(e)?Jl(Zl[e]):e==="transparent"?new Ze(NaN,NaN,NaN,0):null}function Jl(e){return new Ze(e>>16&255,e>>8&255,e&255,1)}function Mo(e,t,n,o){return o<=0&&(e=t=n=NaN),new Ze(e,t,n,o)}function zE(e){return e instanceof po||(e=no(e)),e?(e=e.rgb(),new Ze(e.r,e.g,e.b,e.opacity)):new Ze}function Ma(e,t,n,o){return arguments.length===1?zE(e):new Ze(e,t,n,o??1)}function Ze(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}wr(Ze,Ma,Vd(po,{brighter(e){return e=e==null?li:Math.pow(li,e),new Ze(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?eo:Math.pow(eo,e),new Ze(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ze(jt(this.r),jt(this.g),jt(this.b),si(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:es,formatHex:es,formatHex8:FE,formatRgb:ts,toString:ts}));function es(){return`#${Wt(this.r)}${Wt(this.g)}${Wt(this.b)}`}function FE(){return`#${Wt(this.r)}${Wt(this.g)}${Wt(this.b)}${Wt((isNaN(this.opacity)?1:this.opacity)*255)}`}function ts(){const e=si(this.opacity);return`${e===1?"rgb(":"rgba("}${jt(this.r)}, ${jt(this.g)}, ${jt(this.b)}${e===1?")":`, ${e})`}`}function si(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function jt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wt(e){return e=jt(e),(e<16?"0":"")+e.toString(16)}function ns(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new it(e,t,n,o)}function Ad(e){if(e instanceof it)return new it(e.h,e.s,e.l,e.opacity);if(e instanceof po||(e=no(e)),!e)return new it;if(e instanceof it)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),a=Math.max(t,n,o),r=NaN,l=a-i,s=(a+i)/2;return l?(t===a?r=(n-o)/l+(n<o)*6:n===a?r=(o-t)/l+2:r=(t-n)/l+4,l/=s<.5?a+i:2-a-i,r*=60):l=s>0&&s<1?0:r,new it(r,l,s,e.opacity)}function LE(e,t,n,o){return arguments.length===1?Ad(e):new it(e,t,n,o??1)}function it(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}wr(it,LE,Vd(po,{brighter(e){return e=e==null?li:Math.pow(li,e),new it(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?eo:Math.pow(eo,e),new it(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new Ze(ta(e>=240?e-240:e+120,i,o),ta(e,i,o),ta(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new it(os(this.h),To(this.s),To(this.l),si(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=si(this.opacity);return`${e===1?"hsl(":"hsla("}${os(this.h)}, ${To(this.s)*100}%, ${To(this.l)*100}%${e===1?")":`, ${e})`}`}}));function os(e){return e=(e||0)%360,e<0?e+360:e}function To(e){return Math.max(0,Math.min(1,e||0))}function ta(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Dd=e=>()=>e;function HE(e,t){return function(n){return e+n*t}}function GE(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function YE(e){return(e=+e)==1?Od:function(t,n){return n-t?GE(t,n,e):Dd(isNaN(t)?n:t)}}function Od(e,t){var n=t-e;return n?HE(e,n):Dd(isNaN(e)?t:e)}const is=function e(t){var n=YE(t);function o(i,a){var r=n((i=Ma(i)).r,(a=Ma(a)).r),l=n(i.g,a.g),s=n(i.b,a.b),u=Od(i.opacity,a.opacity);return function(c){return i.r=r(c),i.g=l(c),i.b=s(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function At(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ta=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,na=new RegExp(Ta.source,"g");function XE(e){return function(){return e}}function UE(e){return function(t){return e(t)+""}}function WE(e,t){var n=Ta.lastIndex=na.lastIndex=0,o,i,a,r=-1,l=[],s=[];for(e=e+"",t=t+"";(o=Ta.exec(e))&&(i=na.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[r]?l[r]+=a:l[++r]=a),(o=o[0])===(i=i[0])?l[r]?l[r]+=i:l[++r]=i:(l[++r]=null,s.push({i:r,x:At(o,i)})),n=na.lastIndex;return n<t.length&&(a=t.slice(n),l[r]?l[r]+=a:l[++r]=a),l.length<2?s[0]?UE(s[0].x):XE(t):(t=s.length,function(u){for(var c=0,d;c<t;++c)l[(d=s[c]).i]=d.x(u);return l.join("")})}var as=180/Math.PI,Va={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bd(e,t,n,o,i,a){var r,l,s;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,s/=l),e*o<t*n&&(e=-e,t=-t,s=-s,r=-r),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*as,skewX:Math.atan(s)*as,scaleX:r,scaleY:l}}var Vo;function KE(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Va:Bd(t.a,t.b,t.c,t.d,t.e,t.f)}function qE(e){return e==null||(Vo||(Vo=document.createElementNS("http://www.w3.org/2000/svg","g")),Vo.setAttribute("transform",e),!(e=Vo.transform.baseVal.consolidate()))?Va:(e=e.matrix,Bd(e.a,e.b,e.c,e.d,e.e,e.f))}function Rd(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function a(u,c,d,f,h,g){if(u!==d||c!==f){var v=h.push("translate(",null,t,null,n);g.push({i:v-4,x:At(u,d)},{i:v-2,x:At(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function r(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,o)-2,x:At(u,c)})):c&&d.push(i(d)+"rotate("+c+o)}function l(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,o)-2,x:At(u,c)}):c&&d.push(i(d)+"skewX("+c+o)}function s(u,c,d,f,h,g){if(u!==d||c!==f){var v=h.push(i(h)+"scale(",null,",",null,")");g.push({i:v-4,x:At(u,d)},{i:v-2,x:At(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),a(u.translateX,u.translateY,c.translateX,c.translateY,d,f),r(u.rotate,c.rotate,d,f),l(u.skewX,c.skewX,d,f),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var g=-1,v=f.length,p;++g<v;)d[(p=f[g]).i]=p.x(h);return d.join("")}}}var ZE=Rd(KE,"px, ","px)","deg)"),jE=Rd(qE,", ",")",")"),QE=1e-12;function rs(e){return((e=Math.exp(e))+1/e)/2}function JE(e){return((e=Math.exp(e))-1/e)/2}function ek(e){return((e=Math.exp(2*e))-1)/(e+1)}const tk=function e(t,n,o){function i(a,r){var l=a[0],s=a[1],u=a[2],c=r[0],d=r[1],f=r[2],h=c-l,g=d-s,v=h*h+g*g,p,w;if(v<QE)w=Math.log(f/u)/t,p=function(D){return[l+D*h,s+D*g,u*Math.exp(t*D*w)]};else{var y=Math.sqrt(v),M=(f*f-u*u+o*v)/(2*u*n*y),E=(f*f-u*u-o*v)/(2*f*n*y),P=Math.log(Math.sqrt(M*M+1)-M),L=Math.log(Math.sqrt(E*E+1)-E);w=(L-P)/t,p=function(D){var z=D*w,O=rs(P),V=u/(n*y)*(O*ek(t*z+P)-JE(P));return[l+V*h,s+V*g,u*O/rs(t*z+P)]}}return p.duration=w*1e3*t/Math.SQRT2,p}return i.rho=function(a){var r=Math.max(.001,+a),l=r*r,s=l*l;return e(r,l,s)},i}(Math.SQRT2,2,4);var Sn=0,Bn=0,Pn=0,zd=1e3,ui,Rn,ci=0,tn=0,Ai=0,oo=typeof performance=="object"&&performance.now?performance:Date,Fd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function br(){return tn||(Fd(nk),tn=oo.now()+Ai)}function nk(){tn=0}function di(){this._call=this._time=this._next=null}di.prototype=Ld.prototype={constructor:di,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?br():+n)+(t==null?0:+t),!this._next&&Rn!==this&&(Rn?Rn._next=this:ui=this,Rn=this),this._call=e,this._time=n,Aa()},stop:function(){this._call&&(this._call=null,this._time=1/0,Aa())}};function Ld(e,t,n){var o=new di;return o.restart(e,t,n),o}function ok(){br(),++Sn;for(var e=ui,t;e;)(t=tn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Sn}function ls(){tn=(ci=oo.now())+Ai,Sn=Bn=0;try{ok()}finally{Sn=0,ak(),tn=0}}function ik(){var e=oo.now(),t=e-ci;t>zd&&(Ai-=t,ci=e)}function ak(){for(var e,t=ui,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ui=n);Rn=e,Aa(o)}function Aa(e){if(!Sn){Bn&&(Bn=clearTimeout(Bn));var t=e-tn;t>24?(e<1/0&&(Bn=setTimeout(ls,e-oo.now()-Ai)),Pn&&(Pn=clearInterval(Pn))):(Pn||(ci=oo.now(),Pn=setInterval(ik,zd)),Sn=1,Fd(ls))}}function ss(e,t,n){var o=new di;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var rk=mr("start","end","cancel","interrupt"),lk=[],Hd=0,us=1,Da=2,Ho=3,cs=4,Oa=5,Go=6;function Di(e,t,n,o,i,a){var r=e.__transition;if(!r)e.__transition={};else if(n in r)return;sk(e,n,{name:t,index:o,group:i,on:rk,tween:lk,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Hd})}function _r(e,t){var n=ut(e,t);if(n.state>Hd)throw new Error("too late; already scheduled");return n}function pt(e,t){var n=ut(e,t);if(n.state>Ho)throw new Error("too late; already running");return n}function ut(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function sk(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=Ld(a,0,n.time);function a(u){n.state=us,n.timer.restart(r,n.delay,n.time),n.delay<=u&&r(u-n.delay)}function r(u){var c,d,f,h;if(n.state!==us)return s();for(c in o)if(h=o[c],h.name===n.name){if(h.state===Ho)return ss(r);h.state===cs?(h.state=Go,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=Go,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(ss(function(){n.state===Ho&&(n.state=cs,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=Da,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Da){for(n.state=Ho,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function l(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=Oa,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===Oa&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Go,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Yo(e,t){var n=e.__transition,o,i,a=!0,r;if(n){t=t==null?null:t+"";for(r in n){if((o=n[r]).name!==t){a=!1;continue}i=o.state>Da&&o.state<Oa,o.state=Go,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[r]}a&&delete e.__transition}}function uk(e){return this.each(function(){Yo(this,e)})}function ck(e,t){var n,o;return function(){var i=pt(this,e),a=i.tween;if(a!==n){o=n=a;for(var r=0,l=o.length;r<l;++r)if(o[r].name===t){o=o.slice(),o.splice(r,1);break}}i.tween=o}}function dk(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var a=pt(this,e),r=a.tween;if(r!==o){i=(o=r).slice();for(var l={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=l;break}s===u&&i.push(l)}a.tween=i}}function fk(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=ut(this.node(),n).tween,i=0,a=o.length,r;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((t==null?ck:dk)(n,e,t))}function xr(e,t,n){var o=e._id;return e.each(function(){var i=pt(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ut(i,o).value[t]}}function Gd(e,t){var n;return(typeof t=="number"?At:t instanceof no?is:(n=no(t))?(t=n,is):WE)(e,t)}function hk(e){return function(){this.removeAttribute(e)}}function vk(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gk(e,t,n){var o,i=n+"",a;return function(){var r=this.getAttribute(e);return r===i?null:r===o?a:a=t(o=r,n)}}function mk(e,t,n){var o,i=n+"",a;return function(){var r=this.getAttributeNS(e.space,e.local);return r===i?null:r===o?a:a=t(o=r,n)}}function pk(e,t,n){var o,i,a;return function(){var r,l=n(this),s;return l==null?void this.removeAttribute(e):(r=this.getAttribute(e),s=l+"",r===s?null:r===o&&s===i?a:(i=s,a=t(o=r,l)))}}function yk(e,t,n){var o,i,a;return function(){var r,l=n(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(r=this.getAttributeNS(e.space,e.local),s=l+"",r===s?null:r===o&&s===i?a:(i=s,a=t(o=r,l)))}}function wk(e,t){var n=Vi(e),o=n==="transform"?jE:Gd;return this.attrTween(e,typeof t=="function"?(n.local?yk:pk)(n,o,xr(this,"attr."+e,t)):t==null?(n.local?vk:hk)(n):(n.local?mk:gk)(n,o,t))}function bk(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function _k(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function xk(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&_k(e,a)),n}return i._value=t,i}function Sk(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&bk(e,a)),n}return i._value=t,i}function Ek(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Vi(e);return this.tween(n,(o.local?xk:Sk)(o,t))}function kk(e,t){return function(){_r(this,e).delay=+t.apply(this,arguments)}}function $k(e,t){return t=+t,function(){_r(this,e).delay=t}}function Ck(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?kk:$k)(t,e)):ut(this.node(),t).delay}function Ik(e,t){return function(){pt(this,e).duration=+t.apply(this,arguments)}}function Nk(e,t){return t=+t,function(){pt(this,e).duration=t}}function Pk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ik:Nk)(t,e)):ut(this.node(),t).duration}function Mk(e,t){if(typeof t!="function")throw new Error;return function(){pt(this,e).ease=t}}function Tk(e){var t=this._id;return arguments.length?this.each(Mk(t,e)):ut(this.node(),t).ease}function Vk(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;pt(this,e).ease=n}}function Ak(e){if(typeof e!="function")throw new Error;return this.each(Vk(this._id,e))}function Dk(e){typeof e!="function"&&(e=Sd(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],r=a.length,l=o[i]=[],s,u=0;u<r;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&l.push(s);return new $t(o,this._parents,this._name,this._id)}function Ok(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),r=new Array(o),l=0;l<a;++l)for(var s=t[l],u=n[l],c=s.length,d=r[l]=new Array(c),f,h=0;h<c;++h)(f=s[h]||u[h])&&(d[h]=f);for(;l<o;++l)r[l]=t[l];return new $t(r,this._parents,this._name,this._id)}function Bk(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Rk(e,t,n){var o,i,a=Bk(t)?_r:pt;return function(){var r=a(this,e),l=r.on;l!==o&&(i=(o=l).copy()).on(t,n),r.on=i}}function zk(e,t){var n=this._id;return arguments.length<2?ut(this.node(),n).on.on(e):this.each(Rk(n,e,t))}function Fk(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Lk(){return this.on("end.remove",Fk(this._id))}function Hk(e){var t=this._name,n=this._id;typeof e!="function"&&(e=pr(e));for(var o=this._groups,i=o.length,a=new Array(i),r=0;r<i;++r)for(var l=o[r],s=l.length,u=a[r]=new Array(s),c,d,f=0;f<s;++f)(c=l[f])&&(d=e.call(c,c.__data__,f,l))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,Di(u[f],t,n,f,u,ut(c,n)));return new $t(a,this._parents,t,n)}function Gk(e){var t=this._name,n=this._id;typeof e!="function"&&(e=xd(e));for(var o=this._groups,i=o.length,a=[],r=[],l=0;l<i;++l)for(var s=o[l],u=s.length,c,d=0;d<u;++d)if(c=s[d]){for(var f=e.call(c,c.__data__,d,s),h,g=ut(c,n),v=0,p=f.length;v<p;++v)(h=f[v])&&Di(h,t,n,v,f,g);a.push(f),r.push(c)}return new $t(a,r,t,n)}var Yk=mo.prototype.constructor;function Xk(){return new Yk(this._groups,this._parents)}function Uk(e,t){var n,o,i;return function(){var a=xn(this,e),r=(this.style.removeProperty(e),xn(this,e));return a===r?null:a===n&&r===o?i:i=t(n=a,o=r)}}function Yd(e){return function(){this.style.removeProperty(e)}}function Wk(e,t,n){var o,i=n+"",a;return function(){var r=xn(this,e);return r===i?null:r===o?a:a=t(o=r,n)}}function Kk(e,t,n){var o,i,a;return function(){var r=xn(this,e),l=n(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),xn(this,e))),r===s?null:r===o&&s===i?a:(i=s,a=t(o=r,l))}}function qk(e,t){var n,o,i,a="style."+t,r="end."+a,l;return function(){var s=pt(this,e),u=s.on,c=s.value[a]==null?l||(l=Yd(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(r,i=c),s.on=o}}function Zk(e,t,n){var o=(e+="")=="transform"?ZE:Gd;return t==null?this.styleTween(e,Uk(e,o)).on("end.style."+e,Yd(e)):typeof t=="function"?this.styleTween(e,Kk(e,o,xr(this,"style."+e,t))).each(qk(this._id,e)):this.styleTween(e,Wk(e,o,t),n).on("end.style."+e,null)}function jk(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Qk(e,t,n){var o,i;function a(){var r=t.apply(this,arguments);return r!==i&&(o=(i=r)&&jk(e,r,n)),o}return a._value=t,a}function Jk(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Qk(e,t,n??""))}function e$(e){return function(){this.textContent=e}}function t$(e){return function(){var t=e(this);this.textContent=t??""}}function n$(e){return this.tween("text",typeof e=="function"?t$(xr(this,"text",e)):e$(e==null?"":e+""))}function o$(e){return function(t){this.textContent=e.call(this,t)}}function i$(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&o$(i)),t}return o._value=e,o}function a$(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,i$(e))}function r$(){for(var e=this._name,t=this._id,n=Xd(),o=this._groups,i=o.length,a=0;a<i;++a)for(var r=o[a],l=r.length,s,u=0;u<l;++u)if(s=r[u]){var c=ut(s,t);Di(s,e,n,u,r,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new $t(o,this._parents,e,n)}function l$(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(a,r){var l={value:r},s={value:function(){--i===0&&a()}};n.each(function(){var u=pt(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),u.on=t}),i===0&&a()})}var s$=0;function $t(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Xd(){return++s$}var wt=mo.prototype;$t.prototype={constructor:$t,select:Hk,selectAll:Gk,selectChild:wt.selectChild,selectChildren:wt.selectChildren,filter:Dk,merge:Ok,selection:Xk,transition:r$,call:wt.call,nodes:wt.nodes,node:wt.node,size:wt.size,empty:wt.empty,each:wt.each,on:zk,attr:wk,attrTween:Ek,style:Zk,styleTween:Jk,text:n$,textTween:a$,remove:Lk,tween:fk,delay:Ck,duration:Pk,ease:Tk,easeVarying:Ak,end:l$,[Symbol.iterator]:wt[Symbol.iterator]};function u$(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var c$={time:null,delay:0,duration:250,ease:u$};function d$(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function f$(e){var t,n;e instanceof $t?(t=e._id,e=e._name):(t=Xd(),(n=c$).time=br(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var r=o[a],l=r.length,s,u=0;u<l;++u)(s=r[u])&&Di(s,e,t,u,r,n||d$(s,t));return new $t(o,this._parents,e,t)}mo.prototype.interrupt=uk;mo.prototype.transition=f$;const Ao=e=>()=>e;function h$(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Et(e,t,n){this.k=e,this.x=t,this.y=n}Et.prototype={constructor:Et,scale:function(e){return e===1?this:new Et(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Et(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Sr=new Et(1,0,0);Et.prototype;function oa(e){e.stopImmediatePropagation()}function Mn(e){e.preventDefault(),e.stopImmediatePropagation()}function v$(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function g$(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ds(){return this.__zoom||Sr}function m$(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function p$(){return navigator.maxTouchPoints||"ontouchstart"in this}function y$(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],r=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),r>a?(a+r)/2:Math.min(0,a)||Math.max(0,r))}function w$(){var e=v$,t=g$,n=y$,o=m$,i=p$,a=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],l=250,s=tk,u=mr("start","zoom","end"),c,d,f,h=500,g=150,v=0,p=10;function w(m){m.property("__zoom",ds).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",V).filter(i).on("touchstart.zoom",$).on("touchmove.zoom",K).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(m,N,S,A){var C=m.selection?m.selection():m;C.property("__zoom",ds),m!==C?P(m,N,S,A):C.interrupt().each(function(){L(this,arguments).event(A).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},w.scaleBy=function(m,N,S,A){w.scaleTo(m,function(){var C=this.__zoom.k,I=typeof N=="function"?N.apply(this,arguments):N;return C*I},S,A)},w.scaleTo=function(m,N,S,A){w.transform(m,function(){var C=t.apply(this,arguments),I=this.__zoom,k=S==null?E(C):typeof S=="function"?S.apply(this,arguments):S,T=I.invert(k),Y=typeof N=="function"?N.apply(this,arguments):N;return n(M(y(I,Y),k,T),C,r)},S,A)},w.translateBy=function(m,N,S,A){w.transform(m,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),r)},null,A)},w.translateTo=function(m,N,S,A,C){w.transform(m,function(){var I=t.apply(this,arguments),k=this.__zoom,T=A==null?E(I):typeof A=="function"?A.apply(this,arguments):A;return n(Sr.translate(T[0],T[1]).scale(k.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof S=="function"?-S.apply(this,arguments):-S),I,r)},A,C)};function y(m,N){return N=Math.max(a[0],Math.min(a[1],N)),N===m.k?m:new Et(N,m.x,m.y)}function M(m,N,S){var A=N[0]-S[0]*m.k,C=N[1]-S[1]*m.k;return A===m.x&&C===m.y?m:new Et(m.k,A,C)}function E(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function P(m,N,S,A){m.on("start.zoom",function(){L(this,arguments).event(A).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(A).end()}).tween("zoom",function(){var C=this,I=arguments,k=L(C,I).event(A),T=t.apply(C,I),Y=S==null?E(T):typeof S=="function"?S.apply(C,I):S,X=Math.max(T[1][0]-T[0][0],T[1][1]-T[0][1]),G=C.__zoom,U=typeof N=="function"?N.apply(C,I):N,te=s(G.invert(Y).concat(X/G.k),U.invert(Y).concat(X/U.k));return function(ee){if(ee===1)ee=U;else{var ce=te(ee),ne=X/ce[2];ee=new Et(ne,Y[0]-ce[0]*ne,Y[1]-ce[1]*ne)}k.zoom(null,ee)}})}function L(m,N,S){return!S&&m.__zooming||new D(m,N)}function D(m,N){this.that=m,this.args=N,this.active=0,this.sourceEvent=null,this.extent=t.apply(m,N),this.taps=0}D.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,N){return this.mouse&&m!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var N=Dt(this.that).datum();u.call(m,this.that,new h$(m,{sourceEvent:this.sourceEvent,target:w,type:m,transform:this.that.__zoom,dispatch:u}),N)}};function z(m,...N){if(!e.apply(this,arguments))return;var S=L(this,N).event(m),A=this.__zoom,C=Math.max(a[0],Math.min(a[1],A.k*Math.pow(2,o.apply(this,arguments)))),I=Mt(m);if(S.wheel)(S.mouse[0][0]!==I[0]||S.mouse[0][1]!==I[1])&&(S.mouse[1]=A.invert(S.mouse[0]=I)),clearTimeout(S.wheel);else{if(A.k===C)return;S.mouse=[I,A.invert(I)],Yo(this),S.start()}Mn(m),S.wheel=setTimeout(k,g),S.zoom("mouse",n(M(y(A,C),S.mouse[0],S.mouse[1]),S.extent,r));function k(){S.wheel=null,S.end()}}function O(m,...N){if(f||!e.apply(this,arguments))return;var S=m.currentTarget,A=L(this,N,!0).event(m),C=Dt(m.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",X,!0),I=Mt(m,S),k=m.clientX,T=m.clientY;IE(m.view),oa(m),A.mouse=[I,this.__zoom.invert(I)],Yo(this),A.start();function Y(G){if(Mn(G),!A.moved){var U=G.clientX-k,te=G.clientY-T;A.moved=U*U+te*te>v}A.event(G).zoom("mouse",n(M(A.that.__zoom,A.mouse[0]=Mt(G,S),A.mouse[1]),A.extent,r))}function X(G){C.on("mousemove.zoom mouseup.zoom",null),NE(G.view,A.moved),Mn(G),A.event(G).end()}}function V(m,...N){if(e.apply(this,arguments)){var S=this.__zoom,A=Mt(m.changedTouches?m.changedTouches[0]:m,this),C=S.invert(A),I=S.k*(m.shiftKey?.5:2),k=n(M(y(S,I),A,C),t.apply(this,N),r);Mn(m),l>0?Dt(this).transition().duration(l).call(P,k,A,m):Dt(this).call(w.transform,k,A,m)}}function $(m,...N){if(e.apply(this,arguments)){var S=m.touches,A=S.length,C=L(this,N,m.changedTouches.length===A).event(m),I,k,T,Y;for(oa(m),k=0;k<A;++k)T=S[k],Y=Mt(T,this),Y=[Y,this.__zoom.invert(Y),T.identifier],C.touch0?!C.touch1&&C.touch0[2]!==Y[2]&&(C.touch1=Y,C.taps=0):(C.touch0=Y,I=!0,C.taps=1+!!c);c&&(c=clearTimeout(c)),I&&(C.taps<2&&(d=Y[0],c=setTimeout(function(){c=null},h)),Yo(this),C.start())}}function K(m,...N){if(this.__zooming){var S=L(this,N).event(m),A=m.changedTouches,C=A.length,I,k,T,Y;for(Mn(m),I=0;I<C;++I)k=A[I],T=Mt(k,this),S.touch0&&S.touch0[2]===k.identifier?S.touch0[0]=T:S.touch1&&S.touch1[2]===k.identifier&&(S.touch1[0]=T);if(k=S.that.__zoom,S.touch1){var X=S.touch0[0],G=S.touch0[1],U=S.touch1[0],te=S.touch1[1],ee=(ee=U[0]-X[0])*ee+(ee=U[1]-X[1])*ee,ce=(ce=te[0]-G[0])*ce+(ce=te[1]-G[1])*ce;k=y(k,Math.sqrt(ee/ce)),T=[(X[0]+U[0])/2,(X[1]+U[1])/2],Y=[(G[0]+te[0])/2,(G[1]+te[1])/2]}else if(S.touch0)T=S.touch0[0],Y=S.touch0[1];else return;S.zoom("touch",n(M(k,T,Y),S.extent,r))}}function Z(m,...N){if(this.__zooming){var S=L(this,N).event(m),A=m.changedTouches,C=A.length,I,k;for(oa(m),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),I=0;I<C;++I)k=A[I],S.touch0&&S.touch0[2]===k.identifier?delete S.touch0:S.touch1&&S.touch1[2]===k.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(k=Mt(k,this),Math.hypot(d[0]-k[0],d[1]-k[1])<p)){var T=Dt(this).on("dblclick.zoom");T&&T.apply(this,arguments)}}}return w.wheelDelta=function(m){return arguments.length?(o=typeof m=="function"?m:Ao(+m),w):o},w.filter=function(m){return arguments.length?(e=typeof m=="function"?m:Ao(!!m),w):e},w.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:Ao(!!m),w):i},w.extent=function(m){return arguments.length?(t=typeof m=="function"?m:Ao([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),w):t},w.scaleExtent=function(m){return arguments.length?(a[0]=+m[0],a[1]=+m[1],w):[a[0],a[1]]},w.translateExtent=function(m){return arguments.length?(r[0][0]=+m[0][0],r[1][0]=+m[1][0],r[0][1]=+m[0][1],r[1][1]=+m[1][1],w):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},w.constrain=function(m){return arguments.length?(n=m,w):n},w.duration=function(m){return arguments.length?(l=+m,w):l},w.interpolate=function(m){return arguments.length?(s=m,w):s},w.on=function(){var m=u.on.apply(u,arguments);return m===u?w:m},w.clickDistance=function(m){return arguments.length?(v=(m=+m)*m,w):Math.sqrt(v)},w.tapDistance=function(m){return arguments.length?(p=+m,w):p},w}const Ud=Symbol("MiniMapSlots"),b$=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],_$={name:"MiniMapNode",compatConfig:{MODE:3}},x$=we({..._$,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(e,{emit:t}){const n=e,o=Le(Ud),i=Fa(),a=oe(()=>i.style??{});function r(d){t("click",d)}function l(d){t("dblclick",d)}function s(d){t("mouseenter",d)}function u(d){t("mousemove",d)}function c(d){t("mouseleave",d)}return(d,f)=>ie(o)[`node-${n.type}`]?(ae(),$e(Lt(ie(o)[`node-${n.type}`]),kf(he({key:0},n)),null,16)):(ae(),ge("rect",{key:1,id:d.id,class:vt(["vue-flow__minimap-node",{selected:d.selected,dragging:d.dragging}]),x:d.position.x,y:d.position.y,rx:d.borderRadius,ry:d.borderRadius,width:d.dimensions.width,height:d.dimensions.height,fill:d.color||a.value.background||a.value.backgroundColor,stroke:d.strokeColor,"stroke-width":d.strokeWidth,"shape-rendering":d.shapeRendering,onClick:r,onDblclick:l,onMouseenter:s,onMousemove:u,onMouseleave:c},null,42,b$))}}),S$=["width","height","viewBox","aria-labelledby"],E$=["id"],k$=["d","fill","stroke","stroke-width"],$$={name:"MiniMap",compatConfig:{MODE:3}},C$=we({...$$,props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:10},offsetScale:{default:5},maskBorderRadius:{default:0}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=$s(),o=Fa(),i=200,a=150,{id:r,edges:l,viewport:s,translateExtent:u,dimensions:c,emits:d,d3Selection:f,d3Zoom:h,getNodesInitialized:g}=ke(),v=se();Xe(Ud,n);const p=oe(()=>{var C;return e.width??((C=o.style)==null?void 0:C.width)??i}),w=oe(()=>{var C;return e.height??((C=o.style)==null?void 0:C.height)??a}),y=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",M=B(()=>typeof e.nodeColor=="string"?()=>e.nodeColor:e.nodeColor),E=B(()=>typeof e.nodeStrokeColor=="string"?()=>e.nodeStrokeColor:e.nodeStrokeColor),P=B(()=>typeof e.nodeClassName=="string"?()=>e.nodeClassName:typeof e.nodeClassName=="function"?e.nodeClassName:()=>""),L=B(()=>ar(g.value)),D=B(()=>({x:-s.value.x/s.value.zoom,y:-s.value.y/s.value.zoom,width:c.value.width/s.value.zoom,height:c.value.height/s.value.zoom})),z=B(()=>g.value&&g.value.length?hy(L.value,D.value):D.value),O=B(()=>{const C=z.value.width/p.value,I=z.value.height/w.value;return Math.max(C,I)}),V=B(()=>{const C=O.value*p.value,I=O.value*w.value,k=e.offsetScale*O.value;return{offset:k,x:z.value.x-(C-z.value.width)/2-k,y:z.value.y-(I-z.value.height)/2-k,width:C+k*2,height:I+k*2}}),$=B(()=>!V.value.x||!V.value.y?"":`
    M${V.value.x-V.value.offset},${V.value.y-V.value.offset}
    h${V.value.width+V.value.offset*2}
    v${V.value.height+V.value.offset*2}
    h${-V.value.width-V.value.offset*2}z
    M${D.value.x+e.maskBorderRadius},${D.value.y}
    h${D.value.width-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},${e.maskBorderRadius}
    v${D.value.height-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},${e.maskBorderRadius}
    h${-(D.value.width-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},-${e.maskBorderRadius}
    v${-(D.value.height-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},-${e.maskBorderRadius}z`);yn(C=>{if(v.value){const I=Dt(v.value),k=X=>{if(X.sourceEvent.type!=="wheel"||!f.value||!h.value)return;const G=-X.sourceEvent.deltaY*(X.sourceEvent.deltaMode===1?.05:X.sourceEvent.deltaMode?1:.002)*e.zoomStep,U=s.value.zoom*2**G;h.value.scaleTo(f.value,U)},T=X=>{if(X.sourceEvent.type!=="mousemove"||!f.value||!h.value)return;const G=O.value*Math.max(1,s.value.zoom)*(e.inversePan?-1:1),U={x:s.value.x-X.sourceEvent.movementX*G,y:s.value.y-X.sourceEvent.movementY*G},te=[[0,0],[c.value.width,c.value.height]],ee=Sr.translate(U.x,U.y).scale(s.value.zoom),ce=h.value.constrain()(ee,te,u.value);h.value.transform(f.value,ce)},Y=w$().on("zoom",e.pannable?T:()=>{}).on("zoom.wheel",e.zoomable?k:()=>{});I.call(Y),C(()=>{I.on("zoom",null)})}},{flush:"post"});function K(C){const[I,k]=Mt(C);t("click",{event:C,position:{x:I,y:k}})}function Z(C,I){const k={event:C,node:I,connectedEdges:Gt([I],l.value)};d.miniMapNodeClick(k),t("nodeClick",k)}function m(C,I){const k={event:C,node:I,connectedEdges:Gt([I],l.value)};d.miniMapNodeDoubleClick(k),t("nodeDblclick",k)}function N(C,I){const k={event:C,node:I,connectedEdges:Gt([I],l.value)};d.miniMapNodeMouseEnter(k),t("nodeMouseenter",k)}function S(C,I){const k={event:C,node:I,connectedEdges:Gt([I],l.value)};d.miniMapNodeMouseMove(k),t("nodeMousemove",k)}function A(C,I){const k={event:C,node:I,connectedEdges:Gt([I],l.value)};d.miniMapNodeMouseLeave(k),t("nodeMouseleave",k)}return(C,I)=>(ae(),$e(ie(Fc),{position:C.position,class:vt(["vue-flow__minimap",{pannable:C.pannable,zoomable:C.zoomable}])},{default:ue(()=>[(ae(),ge("svg",{ref_key:"el",ref:v,width:p.value,height:w.value,viewBox:[V.value.x,V.value.y,V.value.width,V.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${ie(r)}`,onClick:K},[C.ariaLabel?(ae(),ge("title",{key:0,id:`vue-flow__minimap-${ie(r)}`},at(C.ariaLabel),9,E$)):Me("",!0),(ae(!0),ge(ye,null,ro(ie(g),k=>(ae(),$e(x$,{id:k.id,key:k.id,position:k.computedPosition,dimensions:k.dimensions,selected:k.selected,dragging:k.dragging,style:Ue(k.style),class:vt(P.value(k)),color:M.value(k),"border-radius":C.nodeBorderRadius,"stroke-color":E.value(k),"stroke-width":C.nodeStrokeWidth,"shape-rendering":ie(y),type:k.type,onClick:T=>Z(T,k),onDblclick:T=>m(T,k),onMouseenter:T=>N(T,k),onMousemove:T=>S(T,k),onMouseleave:T=>A(T,k)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),ze("path",{class:"vue-flow__minimap-mask",d:$.value,fill:C.maskColor,stroke:C.maskStrokeColor,"stroke-width":C.maskStrokeWidth,"fill-rule":"evenodd"},null,8,k$)],8,S$))]),_:1},8,["position","class"]))}});var dt=(e=>(e.Lines="lines",e.Dots="dots",e))(dt||{});const Wd=function({dimensions:e,size:t,color:n}){return Se("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},Kd=function({radius:e,color:t}){return Se("circle",{cx:e,cy:e,r:e,fill:t})};dt.Lines+"",dt.Dots+"";const I$={[dt.Dots]:"#81818a",[dt.Lines]:"#eee"},N$=["id","x","y","width","height","patternTransform"],P$={key:2,height:"100",width:"100"},M$=["fill"],T$=["x","y","fill"],V$={name:"Background",compatConfig:{MODE:3}},A$=we({...V$,props:{id:{},variant:{default:()=>dt.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:2}},setup(e){const{id:t,viewport:n}=ke(),o=B(()=>{const[r,l]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],s=[r*n.value.zoom||1,l*n.value.zoom||1],u=e.size*n.value.zoom,c=e.variant===dt.Dots?[u/e.offset,u/e.offset]:[s[0]/e.offset,s[1]/e.offset];return{scaledGap:s,offset:c,size:u}}),i=oe(()=>`pattern-${t}${e.id?`-${e.id}`:""}`),a=oe(()=>e.color||e.patternColor||I$[e.variant||dt.Dots]);return(r,l)=>(ae(),ge("svg",{class:"vue-flow__background vue-flow__container",style:Ue({height:`${r.height>100?100:r.height}%`,width:`${r.width>100?100:r.width}%`})},[Ne(r.$slots,"pattern-container",{id:i.value},()=>[ze("pattern",{id:i.value,x:ie(n).x%o.value.scaledGap[0],y:ie(n).y%o.value.scaledGap[1],width:o.value.scaledGap[0],height:o.value.scaledGap[1],patternTransform:`translate(-${o.value.offset[0]},-${o.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[Ne(r.$slots,"pattern",{},()=>[r.variant===ie(dt).Lines?(ae(),$e(ie(Wd),{key:0,size:r.lineWidth,color:a.value,dimensions:o.value.scaledGap},null,8,["size","color","dimensions"])):r.variant===ie(dt).Dots?(ae(),$e(ie(Kd),{key:1,color:a.value,radius:o.value.size/r.offset},null,8,["color","radius"])):Me("",!0),r.bgColor?(ae(),ge("svg",P$,[ze("rect",{width:"100%",height:"100%",fill:r.bgColor},null,8,M$)])):Me("",!0)])],8,N$)]),ze("rect",{x:r.x,y:r.y,width:"100%",height:"100%",fill:`url(#${i.value})`},null,8,T$),Ne(r.$slots,"default",{id:i.value})],4))}}),D$=we({components:{GraphEdge:Lc,GraphNode:Hc,Background:A$,Controls:Xx,MiniMap:C$,VueFlow:cw},props:{factory:{type:Object,required:!0}},setup(){const{fitView:e,onConnect:t,addEdges:n}=ke();t(a=>n([a]));const{graph:o,layout:i}=vx();return{fitView:e,graph:o,layout:i}},data(){return{nodes:[],edges:[]}},watch:{factory:{handler(){this.constructGraph()},immediate:!0}},methods:{computeLayoutNodes(){this.constructEdges(),this.nodes=this.layout(this.nodes,this.edges),Ve(()=>this.fitView())},constructGraph(){this.nodes=[],this.edges=[],this.factory.steps.forEach((e,t)=>{this.nodes.push({id:e.id,type:"factory-step",position:{x:100+150*t,y:10},data:e})})},constructEdges(){this.edges=[],this.factory.steps.forEach(e=>{e.nextSteps.forEach(t=>{let n=null;const o=this.factory.steps.find(i=>i.id===t);o&&(n=e.inputs.find(i=>o.outputs.some(a=>i.item.slug===a.item.slug))??null),this.edges.push({id:"e"+t+"-"+e.id,source:t,target:e.id,type:"factory",data:{item:n}})})})}}});function O$(e,t,n,o,i,a){const r=Hc,l=Lc,s=xt("Background"),u=xt("Controls"),c=xt("MiniMap"),d=xt("VueFlow");return ae(),$e(d,{edges:e.edges,nodes:e.nodes,onNodesInitialized:e.computeLayoutNodes},{"node-factory-step":ue(({data:f})=>[b(r,{"factory-step":f},null,8,["factory-step"])]),"edge-factory":ue(f=>[b(l,{id:f.id,data:f.data,"marker-end":f.markerEnd,"source-position":f.sourcePosition,"source-x":f.sourceX,"source-y":f.sourceY,style:Ue(f.style),"target-position":f.targetPosition,"target-x":f.targetX,"target-y":f.targetY},null,8,["id","data","marker-end","source-position","source-x","source-y","style","target-position","target-x","target-y"])]),default:ue(()=>[b(s),b(u,{position:"top-left"}),b(c)]),_:1},8,["edges","nodes","onNodesInitialized"])}const qd=uo(D$,[["render",O$]]);var He=[];for(var ia=0;ia<256;++ia)He.push((ia+256).toString(16).slice(1));function B$(e,t=0){return(He[e[t+0]]+He[e[t+1]]+He[e[t+2]]+He[e[t+3]]+"-"+He[e[t+4]]+He[e[t+5]]+"-"+He[e[t+6]]+He[e[t+7]]+"-"+He[e[t+8]]+He[e[t+9]]+"-"+He[e[t+10]]+He[e[t+11]]+He[e[t+12]]+He[e[t+13]]+He[e[t+14]]+He[e[t+15]]).toLowerCase()}var Do,R$=new Uint8Array(16);function z$(){if(!Do&&(Do=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Do))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Do(R$)}var F$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const fs={randomUUID:F$};function aa(e,t,n){if(fs.randomUUID&&!t&&!e)return fs.randomUUID();e=e||{};var o=e.random||(e.rng||z$)();return o[6]=o[6]&15|64,o[8]=o[8]&63|128,B$(o)}const L$=e=>{const t=Ls(),n=e.flatMap(l=>l.recipe.producedItems.map(s=>s.item)),o=[],i=e.map(l=>({recipe:l.recipe,amountPerMinute:l.amountPerMinute}));for(;i.length>0;){const{recipe:l,amountPerMinute:s,parentStepId:u}=i.shift(),c=60/l.time,d=c*l.producedItems[0].amount,f=s/d,h=H$(o,l.producedInBuildings[0],l);if(h){if(l.producedItems.forEach(g=>{const v=h.outputs.find(p=>p.item.slug===g.item.slug);v&&(v.amountPerMinute+=s)}),l.ingredientItems.forEach(g=>{const v=g.amount*c*f,p=h.inputs.find(y=>y.item.slug===g.item.slug);p&&(p.amountPerMinute+=v);const w=t.getRecipeBySlug(g.item.slug);w&&i.push({recipe:w,amountPerMinute:v,parentStepId:h.id})}),h.numberOfBuildings+=f,u){const g=o.find(v=>v.id===u);g&&!g.nextSteps.includes(h.id)&&g.nextSteps.push(h.id)}}else{const g={id:aa(),inputs:[],outputs:[],building:l.producedInBuildings[0],nextSteps:[],isStartingStep:!1,isFinalStep:!1,isResourceStep:!1,isFinalProductStep:!1,numberOfBuildings:f};if(l.ingredientItems.forEach(v=>{const p=v.amount*c*f;g.inputs.push({...v,amountPerMinute:p});const w=t.getRecipeBySlug(v.item.slug);w?(i.push({recipe:w,amountPerMinute:p,parentStepId:g.id}),g.isStartingStep=!1):g.isStartingStep=!0}),l.producedItems.forEach(v=>{const p=v.amount*c*f;g.outputs.push({...v,amountPerMinute:p}),n.some(w=>w.slug===v.item.slug)&&(g.isFinalStep=!0)}),u){const v=o.find(p=>p.id===u);v&&v.nextSteps.push(g.id)}o.push(g)}}const a=[];o.filter(l=>l.isStartingStep).forEach(l=>{l.inputs.filter(s=>s.item.isResource).forEach(s=>{const u=a.find(c=>c.outputs.some(d=>d.item.slug===s.item.slug));if(u)u.outputs[0].amountPerMinute+=s.amountPerMinute,l.nextSteps.push(u.id);else{const c={id:aa(),inputs:[],outputs:[s],building:null,nextSteps:[],isStartingStep:!1,isFinalStep:!1,isResourceStep:!0,isFinalProductStep:!1,numberOfBuildings:0};l.nextSteps.push(c.id),a.push(c)}})});const r=[];return o.filter(l=>l.isFinalStep).forEach(l=>{l.outputs.forEach(s=>{const c=o.filter(f=>f.nextSteps.some(h=>h===l.id)).reduce((f,h)=>{var g;return f+(((g=h.inputs.find(v=>v.item.slug===s.item.slug))==null?void 0:g.amountPerMinute)??0)},0),d=r.find(f=>f.inputs.some(h=>h.item.slug===s.item.slug));if(d)d.inputs[0].amountPerMinute+=s.amountPerMinute-c,d.nextSteps.push(l.id);else{const f={id:aa(),inputs:[],outputs:[],building:null,nextSteps:[l.id],isStartingStep:!1,isFinalStep:!1,isResourceStep:!1,isFinalProductStep:!0,numberOfBuildings:0};f.inputs.push({item:s.item,amountPerMinute:s.amountPerMinute-c}),r.push(f)}})}),o.concat(a).concat(r)},H$=(e,t,n)=>e.find(o=>{var i;return((i=o.building)==null?void 0:i.slug)===t.slug&&n.ingredientItems.every(a=>o.inputs.some(r=>r.item.slug===a.item.slug))&&n.producedItems.every(a=>o.outputs.some(r=>r.item.slug===a.item.slug))})??null,G$=we({components:{FactoryGraph:qd,FactorySummary:Du},setup(){return{dataStore:Ls()}},data(){return{recipeOptions:[],recipes:[],recipeIdCounter:0,factoryPlan:null,productionTab:1}},computed:{},async mounted(){await this.dataStore.getData(),this.recipeOptions=this.dataStore.getBaseItemRecipes()},methods:{createRecipeWithAmount(e,t,n){return{recipe:e,amount:t,id:n}},addEmptyRecipe(){this.recipes.push(this.createRecipeWithAmount(null,10,this.recipeIdCounter)),this.recipeIdCounter+=1},removeSelectedRecipe(e){this.recipes=this.recipes.filter(t=>t.id!==e)},generateFactoryPlan(){const e=[];this.recipes.forEach(n=>{n.amount&&n.recipe&&e.push({recipe:n.recipe,amountPerMinute:n.amount})});const t=L$(e);this.factoryPlan={steps:t}}}});function Y$(e,t,n){if(t==null)return e;if(Array.isArray(t))throw new Error("Multiple matches is not implemented");return typeof t=="number"&&~t?b(ye,null,[b("span",{class:"v-autocomplete__unmask"},[e.substr(0,t)]),b("span",{class:"v-autocomplete__mask"},[e.substr(t,n)]),b("span",{class:"v-autocomplete__unmask"},[e.substr(t+n)])]):e}const X$=ve({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...Vu({filterKeys:["title"]}),...du(),...$n(Za({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...yi({transition:!1})},"VAutocomplete"),U$=be()({name:"VAutocomplete",props:X$(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:o}=gt(),i=se(),a=Ce(!1),r=Ce(!0),l=Ce(!1),s=se(),u=se(),c=Te(e,"menu"),d=B({get:()=>c.value,set:W=>{var q;c.value&&!W&&((q=s.value)!=null&&q.ΨopenChildren)||(c.value=W)}}),f=Ce(-1),h=B(()=>{var W;return(W=i.value)==null?void 0:W.color}),g=B(()=>d.value?e.closeText:e.openText),{items:v,transformIn:p,transformOut:w}=zs(e),{textColorClasses:y,textColorStyles:M}=so(h),E=Te(e,"search",""),P=Te(e,"modelValue",[],W=>p(W===null?[null]:je(W)),W=>{const q=w(W);return e.multiple?q:q[0]??null}),L=B(()=>typeof e.counterValue=="function"?e.counterValue(P.value):typeof e.counterValue=="number"?e.counterValue:P.value.length),D=Wa(),{filteredItems:z,getMatches:O}=Au(e,v,()=>r.value?"":E.value),V=B(()=>e.hideSelected?z.value.filter(W=>!P.value.some(q=>q.value===W.value)):z.value),$=B(()=>!!(e.chips||n.chip)),K=B(()=>$.value||!!n.selection),Z=B(()=>P.value.map(W=>W.props.value)),m=B(()=>{var q;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&E.value===((q=V.value[0])==null?void 0:q.title))&&V.value.length>0&&!r.value&&!l.value}),N=B(()=>e.hideNoData&&!V.value.length||e.readonly||(D==null?void 0:D.isReadonly.value)),S=se(),{onListScroll:A,onListKeydown:C}=cu(S,i);function I(W){e.openOnClear&&(d.value=!0),E.value=""}function k(){N.value||(d.value=!0)}function T(W){N.value||(a.value&&(W.preventDefault(),W.stopPropagation()),d.value=!d.value)}function Y(W){var x,_,H;if(e.readonly||D!=null&&D.isReadonly.value)return;const q=i.value.selectionStart,j=P.value.length;if((f.value>-1||["Enter","ArrowDown","ArrowUp"].includes(W.key))&&W.preventDefault(),["Enter","ArrowDown"].includes(W.key)&&(d.value=!0),["Escape"].includes(W.key)&&(d.value=!1),m.value&&["Enter","Tab"].includes(W.key)&&!P.value.some(R=>{let{value:F}=R;return F===V.value[0].value})&&ne(V.value[0]),W.key==="ArrowDown"&&m.value&&((x=S.value)==null||x.focus("next")),["Backspace","Delete"].includes(W.key)){if(!e.multiple&&K.value&&P.value.length>0&&!E.value)return ne(P.value[0],!1);if(~f.value){const R=f.value;ne(P.value[f.value],!1),f.value=R>=j-1?j-2:R}else W.key==="Backspace"&&!E.value&&(f.value=j-1)}if(e.multiple){if(W.key==="ArrowLeft"){if(f.value<0&&q>0)return;const R=f.value>-1?f.value-1:j-1;P.value[R]?f.value=R:(f.value=-1,i.value.setSelectionRange((_=E.value)==null?void 0:_.length,(H=E.value)==null?void 0:H.length))}if(W.key==="ArrowRight"){if(f.value<0)return;const R=f.value+1;P.value[R]?f.value=R:(f.value=-1,i.value.setSelectionRange(0,0))}}}function X(W){if(Hn(i.value,":autofill")||Hn(i.value,":-webkit-autofill")){const q=v.value.find(j=>j.title===W.target.value);q&&ne(q)}}function G(){var W;a.value&&(r.value=!0,(W=i.value)==null||W.focus())}function U(W){a.value=!0,setTimeout(()=>{l.value=!0})}function te(W){l.value=!1}function ee(W){(W==null||W===""&&!e.multiple&&!K.value)&&(P.value=[])}const ce=Ce(!1);function ne(W){let q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!W||W.props.disabled))if(e.multiple){const j=P.value.findIndex(_=>e.valueComparator(_.value,W.value)),x=q??!~j;if(~j){const _=x?[...P.value,W]:[...P.value];_.splice(j,1),P.value=_}else x&&(P.value=[...P.value,W]);e.clearOnSelect&&(E.value="")}else{const j=q!==!1;P.value=j?[W]:[],E.value=j&&!K.value?W.title:"",Ve(()=>{d.value=!1,r.value=!0})}}return de(a,(W,q)=>{var j;W!==q&&(W?(ce.value=!0,E.value=e.multiple||K.value?"":String(((j=P.value.at(-1))==null?void 0:j.props.title)??""),r.value=!0,Ve(()=>ce.value=!1)):(!e.multiple&&E.value==null&&(P.value=[]),d.value=!1,P.value.some(x=>{let{title:_}=x;return _===E.value})||(E.value=""),f.value=-1))}),de(E,W=>{!a.value||ce.value||(W&&(d.value=!0),r.value=!W)}),de(d,()=>{if(!e.hideSelected&&d.value&&P.value.length){const W=V.value.findIndex(q=>P.value.some(j=>q.value===j.value));pn&&window.requestAnimationFrame(()=>{var q;W>=0&&((q=u.value)==null||q.scrollToIndex(W))})}}),de(()=>e.items,(W,q)=>{d.value||a.value&&!q.length&&W.length&&(d.value=!0)}),Ee(()=>{const W=!!(!e.hideNoData||V.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),q=P.value.length>0,j=Xn.filterProps(e);return b(Xn,he({ref:i},j,{modelValue:E.value,"onUpdate:modelValue":[x=>E.value=x,ee],focused:a.value,"onUpdate:focused":x=>a.value=x,validationValue:P.externalValue,counterValue:L.value,dirty:q,onChange:X,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":d.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!K.value,"v-autocomplete--selecting-index":f.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:q?void 0:e.placeholder,"onClick:clear":I,"onMousedown:control":k,onKeydown:Y}),{...n,default:()=>b(ye,null,[b(ru,he({ref:s,modelValue:d.value,"onUpdate:modelValue":x=>d.value=x,activator:"parent",contentClass:"v-autocomplete__content",disabled:N.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:G},e.menuProps),{default:()=>[W&&b(Xa,he({ref:S,selected:Z.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:x=>x.preventDefault(),onKeydown:C,onFocusin:U,onFocusout:te,onScrollPassive:A,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var x,_,H;return[(x=n["prepend-item"])==null?void 0:x.call(n),!V.value.length&&!e.hideNoData&&(((_=n["no-data"])==null?void 0:_.call(n))??b(Gn,{title:o(e.noDataText)},null)),b(uu,{ref:u,renderless:!0,items:V.value},{default:R=>{var me;let{item:F,index:Q,itemRef:J}=R;const fe=he(F.props,{ref:J,key:Q,active:m.value&&Q===0?!0:void 0,onClick:()=>ne(F,null)});return((me=n.item)==null?void 0:me.call(n,{item:F,index:Q,props:fe}))??b(Gn,he(fe,{role:"option"}),{prepend:_e=>{let{isSelected:pe}=_e;return b(ye,null,[e.multiple&&!e.hideSelected?b(fo,{key:F.value,modelValue:pe,ripple:!1,tabindex:"-1"},null):void 0,F.props.prependAvatar&&b(Uo,{image:F.props.prependAvatar},null),F.props.prependIcon&&b(Ke,{icon:F.props.prependIcon},null)])},title:()=>{var _e,pe;return r.value?F.title:Y$(F.title,(_e=O(F))==null?void 0:_e.title,((pe=E.value)==null?void 0:pe.length)??0)}})}}),(H=n["append-item"])==null?void 0:H.call(n)]}})]}),P.value.map((x,_)=>{function H(J){J.stopPropagation(),J.preventDefault(),ne(x,!1)}const R={"onClick:close":H,onKeydown(J){J.key!=="Enter"&&J.key!==" "||(J.preventDefault(),J.stopPropagation(),H(J))},onMousedown(J){J.preventDefault(),J.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},F=$.value?!!n.chip:!!n.selection,Q=F?_s($.value?n.chip({item:x,index:_,props:R}):n.selection({item:x,index:_})):void 0;if(!(F&&!Q))return b("div",{key:x.value,class:["v-autocomplete__selection",_===f.value&&["v-autocomplete__selection--selected",y.value]],style:_===f.value?M.value:{}},[$.value?n.chip?b(Ot,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:x.title}}},{default:()=>[Q]}):b(qa,he({key:"chip",closable:e.closableChips,size:"small",text:x.title,disabled:x.props.disabled},R),null):Q??b("span",{class:"v-autocomplete__selection-text"},[x.title,e.multiple&&_<P.value.length-1&&b("span",{class:"v-autocomplete__selection-comma"},[Oe(",")])])])})]),"append-inner":function(){var R;for(var x=arguments.length,_=new Array(x),H=0;H<x;H++)_[H]=arguments[H];return b(ye,null,[(R=n["append-inner"])==null?void 0:R.call(n,..._),e.menuIcon?b(Ke,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:T,onClick:$f,"aria-label":o(g.value),title:o(g.value),tabindex:"-1"},null):void 0])}})}),co({isFocused:a,isPristine:r,menu:d,search:E,filteredItems:z,select:ne},i)}}),Er=Symbol.for("vuetify:v-tabs"),W$=ve({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...$n(Yf({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Ba=be()({name:"VTab",props:W$(),setup(e,t){let{slots:n,attrs:o}=t;const{textColorClasses:i,textColorStyles:a}=so(e,"sliderColor"),r=se(),l=se(),s=B(()=>e.direction==="horizontal"),u=B(()=>{var d,f;return((f=(d=r.value)==null?void 0:d.group)==null?void 0:f.isSelected.value)??!1});function c(d){var h,g;let{value:f}=d;if(f){const v=(g=(h=r.value)==null?void 0:h.$el.parentElement)==null?void 0:g.querySelector(".v-tab--selected .v-tab__slider"),p=l.value;if(!v||!p)return;const w=getComputedStyle(v).color,y=v.getBoundingClientRect(),M=p.getBoundingClientRect(),E=s.value?"x":"y",P=s.value?"X":"Y",L=s.value?"right":"bottom",D=s.value?"width":"height",z=y[E],O=M[E],V=z>O?y[L]-M[L]:y[E]-M[E],$=Math.sign(V)>0?s.value?"right":"bottom":Math.sign(V)<0?s.value?"left":"top":"center",Z=(Math.abs(V)+(Math.sign(V)<0?y[D]:M[D]))/Math.max(y[D],M[D])||0,m=y[D]/M[D]||0,N=1.5;Ws(p,{backgroundColor:[w,"currentcolor"],transform:[`translate${P}(${V}px) scale${P}(${m})`,`translate${P}(${V/N}px) scale${P}(${(Z-1)/N+1})`,"none"],transformOrigin:Array(3).fill($)},{duration:225,easing:Ks})}}return Ee(()=>{const d=We.filterProps(e);return b(We,he({symbol:Er,ref:r,class:["v-tab",e.class],style:e.style,tabindex:u.value?0:-1,role:"tab","aria-selected":String(u.value),active:!1},d,o,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":c}),{...n,default:()=>{var f;return b(ye,null,[((f=n.default)==null?void 0:f.call(n))??e.text,!e.hideSlider&&b("div",{ref:l,class:["v-tab__slider",i.value],style:a.value},null)])}})}),co({},r)}}),K$=e=>{const{touchstartX:t,touchendX:n,touchstartY:o,touchendY:i}=e,a=.5,r=16;e.offsetX=n-t,e.offsetY=i-o,Math.abs(e.offsetY)<a*Math.abs(e.offsetX)&&(e.left&&n<t-r&&e.left(e),e.right&&n>t+r&&e.right(e)),Math.abs(e.offsetX)<a*Math.abs(e.offsetY)&&(e.up&&i<o-r&&e.up(e),e.down&&i>o+r&&e.down(e))};function q$(e,t){var o;const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,(o=t.start)==null||o.call(t,{originalEvent:e,...t})}function Z$(e,t){var o;const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,(o=t.end)==null||o.call(t,{originalEvent:e,...t}),K$(t)}function j$(e,t){var o;const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,(o=t.move)==null||o.call(t,{originalEvent:e,...t})}function Q$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:n=>q$(n,t),touchend:n=>Z$(n,t),touchmove:n=>j$(n,t)}}function J$(e,t){var l;const n=t.value,o=n!=null&&n.parent?e.parentElement:e,i=(n==null?void 0:n.options)??{passive:!0},a=(l=t.instance)==null?void 0:l.$.uid;if(!o||!a)return;const r=Q$(t.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[a]=r,Is(r).forEach(s=>{o.addEventListener(s,r[s],i)})}function eC(e,t){var a,r;const n=(a=t.value)!=null&&a.parent?e.parentElement:e,o=(r=t.instance)==null?void 0:r.$.uid;if(!(n!=null&&n._touchHandlers)||!o)return;const i=n._touchHandlers[o];Is(i).forEach(l=>{n.removeEventListener(l,i[l])}),delete n._touchHandlers[o]}const Zd={mounted:J$,unmounted:eC},tC=Zd,jd=Symbol.for("vuetify:v-window"),Qd=Symbol.for("vuetify:v-window-group"),Jd=ve({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Ye(),...nn(),...Ct()},"VWindow"),hs=be()({name:"VWindow",directives:{Touch:Zd},props:Jd(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:o}=on(e),{isRtl:i}=io(),{t:a}=gt(),r=Ua(e,Qd),l=se(),s=B(()=>i.value?!e.reverse:e.reverse),u=Ce(!1),c=B(()=>{const E=e.direction==="vertical"?"y":"x",L=(s.value?!u.value:u.value)?"-reverse":"";return`v-window-${E}${L}-transition`}),d=Ce(0),f=se(void 0),h=B(()=>r.items.value.findIndex(E=>r.selected.value.includes(E.id)));de(h,(E,P)=>{const L=r.items.value.length,D=L-1;L<=2?u.value=E<P:E===D&&P===0?u.value=!0:E===0&&P===D?u.value=!1:u.value=E<P}),Xe(jd,{transition:c,isReversed:u,transitionCount:d,transitionHeight:f,rootRef:l});const g=B(()=>e.continuous||h.value!==0),v=B(()=>e.continuous||h.value!==r.items.value.length-1);function p(){g.value&&r.prev()}function w(){v.value&&r.next()}const y=B(()=>{const E=[],P={icon:i.value?e.nextIcon:e.prevIcon,class:`v-window__${s.value?"right":"left"}`,onClick:r.prev,"aria-label":a("$vuetify.carousel.prev")};E.push(g.value?n.prev?n.prev({props:P}):b(We,P,null):b("div",null,null));const L={icon:i.value?e.prevIcon:e.nextIcon,class:`v-window__${s.value?"left":"right"}`,onClick:r.next,"aria-label":a("$vuetify.carousel.next")};return E.push(v.value?n.next?n.next({props:L}):b(We,L,null):b("div",null,null)),E}),M=B(()=>e.touch===!1?e.touch:{...{left:()=>{s.value?p():w()},right:()=>{s.value?w():p()},start:P=>{let{originalEvent:L}=P;L.stopPropagation()}},...e.touch===!0?{}:e.touch});return Ee(()=>Rt(b(e.tag,{ref:l,class:["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover"},o.value,e.class],style:e.style},{default:()=>{var E,P;return[b("div",{class:"v-window__container",style:{height:f.value}},[(E=n.default)==null?void 0:E.call(n,{group:r}),e.showArrows!==!1&&b("div",{class:"v-window__controls"},[y.value])]),(P=n.additional)==null?void 0:P.call(n,{group:r})]}}),[[hi("touch"),M.value]])),{group:r}}}),nC=ve({...$n(Jd(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),ef=be()({name:"VTabsWindow",props:nC(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const o=Le(Er,null),i=Te(e,"modelValue"),a=B({get(){var r;return i.value!=null||!o?i.value:(r=o.items.value.find(l=>o.selected.value.includes(l.id)))==null?void 0:r.value},set(r){i.value=r}});return Ee(()=>{const r=hs.filterProps(e);return b(hs,he({_as:"VTabsWindow"},r,{modelValue:a.value,"onUpdate:modelValue":l=>a.value=l,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),n)}),{}}}),tf=ve({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Ye(),...Gs(),...Xf()},"VWindowItem"),vs=be()({name:"VWindowItem",directives:{Touch:tC},props:tf(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:n}=t;const o=Le(jd),i=Ys(e,Qd),{isBooted:a}=Cf();if(!o||!i)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const r=Ce(!1),l=B(()=>a.value&&(o.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function s(){!r.value||!o||(r.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function u(){var g;r.value||!o||(r.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=Ge((g=o.rootRef.value)==null?void 0:g.clientHeight)),o.transitionCount.value+=1)}function c(){s()}function d(g){r.value&&Ve(()=>{!l.value||!r.value||!o||(o.transitionHeight.value=Ge(g.clientHeight))})}const f=B(()=>{const g=o.isReversed.value?e.reverseTransition:e.transition;return l.value?{name:typeof g!="string"?o.transition.value:g,onBeforeEnter:u,onAfterEnter:s,onEnterCancelled:c,onBeforeLeave:u,onAfterLeave:s,onLeaveCancelled:c,onEnter:d}:!1}),{hasContent:h}=Uf(e,i.isSelected);return Ee(()=>b(Ya,{transition:f.value,disabled:!a.value},{default:()=>{var g;return[Rt(b("div",{class:["v-window-item",i.selectedClass.value,e.class],style:e.style},[h.value&&((g=n.default)==null?void 0:g.call(n))]),[[mi,i.isSelected.value]])]}})),{groupItem:i}}}),oC=ve({...tf()},"VTabsWindowItem"),Ra=be()({name:"VTabsWindowItem",props:oC(),setup(e,t){let{slots:n}=t;return Ee(()=>{const o=vs.filterProps(e);return b(vs,he({_as:"VTabsWindowItem"},o,{class:["v-tabs-window-item",e.class],style:e.style}),n)}),{}}});function iC(e){return e?e.map(t=>If(t)?t:{text:t,value:t}):[]}const aC=ve({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ka({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Cn(),...nn()},"VTabs"),rC=be()({name:"VTabs",props:aC(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:o}=t;const i=Te(e,"modelValue"),a=B(()=>iC(e.items)),{densityClasses:r}=lo(e),{backgroundColorClasses:l,backgroundColorStyles:s}=pi(oe(e,"bgColor")),{scopeId:u}=Us();return mn({VTab:{color:oe(e,"color"),direction:oe(e,"direction"),stacked:oe(e,"stacked"),fixed:oe(e,"fixedTabs"),sliderColor:oe(e,"sliderColor"),hideSlider:oe(e,"hideSlider")}}),Ee(()=>{const c=Wo.filterProps(e),d=!!(o.window||e.items.length>0);return b(ye,null,[b(Wo,he(c,{modelValue:i.value,"onUpdate:modelValue":f=>i.value=f,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},r.value,l.value,e.class],style:[{"--v-tabs-height":Ge(e.height)},s.value,e.style],role:"tablist",symbol:Er},u,n),{default:()=>{var f;return[((f=o.default)==null?void 0:f.call(o))??a.value.map(h=>{var g;return((g=o.tab)==null?void 0:g.call(o,{item:h}))??b(Ba,he(h,{key:h.text,value:h.value}),{default:o[`tab.${h.value}`]?()=>{var v;return(v=o[`tab.${h.value}`])==null?void 0:v.call(o,{item:h})}:void 0})})]}}),d&&b(ef,he({modelValue:i.value,"onUpdate:modelValue":f=>i.value=f,key:"tabs-window"},u),{default:()=>{var f;return[a.value.map(h=>{var g;return((g=o.item)==null?void 0:g.call(o,{item:h}))??b(Ra,{value:h.value},{default:()=>{var v;return(v=o[`item.${h.value}`])==null?void 0:v.call(o,{item:h})}})}),(f=o.window)==null?void 0:f.call(o)]}})])}),{}}}),lC={class:"vue-flow-container fill-space",style:{"min-height":"90vh"}};function sC(e,t,n,o,i,a){const r=qd,l=Du;return ae(),$e(Fs,{class:"row-container",fluid:""},{default:ue(()=>[b(Oo,{class:"mb-2"},{default:ue(()=>[b(bt,null,{default:ue(()=>[b(Xt,{class:"ma-1",elevation:3},{default:ue(()=>[b(sn,null,{default:ue(()=>[Oe(" Select factory outputs ")]),_:1}),b(un,null,{default:ue(()=>[Oe(" Select the items you want to produce and specify the target production rate per minute. "),b(Xa,null,{default:ue(()=>[(ae(!0),ge(ye,null,ro(e.recipes,s=>(ae(),$e(Gn,{key:s.id},{default:ue(()=>[b(Oo,{class:"d-flex justify-center align-center"},{default:ue(()=>[b(bt,{cols:"3"},{default:ue(()=>[b(U$,{modelValue:s.recipe,"onUpdate:modelValue":u=>s.recipe=u,"auto-select-first":"",clearable:"","item-title":"name",items:e.recipeOptions,label:"Output","return-object":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),b(bt,{cols:"3"},{default:ue(()=>[b(Xn,{modelValue:s.amount,"onUpdate:modelValue":u=>s.amount=u,type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),b(bt,{cols:"3"},{default:ue(()=>[b(We,{onClick:u=>e.removeSelectedRecipe(s.id)},{default:ue(()=>[Oe(" Remove ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),b(We,{onClick:e.addEmptyRecipe},{default:ue(()=>[Oe(" Add output ")]),_:1},8,["onClick"])]),_:1}),b(Ff,null,{default:ue(()=>[b(We,{onClick:t[0]||(t[0]=s=>e.generateFactoryPlan())},{default:ue(()=>[Oe(" Generate Plan ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),b(Oo,{"no-gutters":""},{default:ue(()=>[b(bt,null,{default:ue(()=>[b(Xt,{class:"ma-1 fill-space",elevation:3,style:{"min-height":"90vh"}},{default:ue(()=>[b(un,{class:"row-container"},{default:ue(()=>[b(rC,{modelValue:e.productionTab,"onUpdate:modelValue":t[1]||(t[1]=s=>e.productionTab=s),"align-tabs":"start"},{default:ue(()=>[b(Ba,{value:1},{default:ue(()=>[Oe("Production Graph")]),_:1}),b(Ba,{value:2},{default:ue(()=>[Oe("Factory Summary")]),_:1})]),_:1},8,["modelValue"]),b(ef,{modelValue:e.productionTab,"onUpdate:modelValue":t[2]||(t[2]=s=>e.productionTab=s),class:"row-container"},{default:ue(()=>[b(Ra,{value:1},{default:ue(()=>[ze("div",lC,[e.factoryPlan?(ae(),$e(r,{key:0,class:"fill-space",factory:e.factoryPlan},null,8,["factory"])):Me("",!0)])]),_:1}),b(Ra,{value:2},{default:ue(()=>[e.factoryPlan?(ae(),$e(l,{key:0,class:"fill-space",factory:e.factoryPlan},null,8,["factory"])):Me("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const pC=uo(G$,[["render",sC]]);export{pC as default};
