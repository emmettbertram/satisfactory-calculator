var Os=Object.defineProperty;var Ts=(e,t,n)=>t in e?Os(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ce=(e,t,n)=>Ts(e,typeof t!="symbol"?t+"":t,n);import{k as we,t as fe,C as ae,e as z,G as je,$ as Zr,o as ue,n as me,a0 as mt,Z as re,a1 as Dt,a2 as Qr,a3 as $s,q as et,a4 as He,a5 as Fe,l as Be,F as _e,a6 as lt,a7 as Jr,E as se,a8 as pt,a9 as As,aa as Ds,i as x,w as pe,ab as ea,R as St,O as Me,ac as ta,ad as Rs,v as Ue,x as vt,L as Ee,ae as vn,af as Bs,r as Un,H as ri,ag as Fs,ah as ai,ai as zs,aj as Ls,ak as ge,X as Rt,al as ye,am as Ot,an as Gs,p as xe,ao as rt,m as Le,c as Ht,g as Oe,h as $e,ap as De,aq as na,I as Re,ar as Yt,B as oa,s as ke,as as ia,at as Bt,au as li,av as We,aw as tn,ax as Xn,ay as Kn,az as ra,aA as aa,J as Ao,aB as Hs,aC as la,aD as sa,d as Wn,A as si,S as Ys,b as ui,T as ua,u as Tn,aE as Us,N as Ft,P as Do,aF as ci,aG as Xs,aH as Ks,aI as Ti,j as Wt,aJ as Ws,aK as js,aL as qs,aM as Zs,M as Ro,D as fo,aN as Qs,aO as ca,aP as Js,aQ as eu}from"./index-azYG4csZ.js";import{_ as jn,d as da,e as $i,f as fa,m as tu,u as ha,b as di,c as nn}from"./VList-c9pFGx-4.js";import{k as Bo,p as nu,j as Fo,q as fi,R as va,V as Ge,r as hi,s as qn,u as ga,v as Zn,M as ma,w as pa,m as ou,a as iu,b as ya,x as ru,y as au,c as lu,z as su,d as uu,e as wa,A as cu,B as du,C as fu,g as ht,D as $n,E as hu,F as vu,L as gu,I as mu,l as Ai,n as pu}from"./VGrid-C2vTNb4L.js";import{u as ba}from"./data-Cs7CYHna.js";import{a as Ut,V as ho,b as yu}from"./VRow-DHoLz4Wt.js";import{b as _a,u as Ea,c as wu,d as bu,a as Sa,f as Qn,V as vo}from"./forwardRefs-DvGYUz10.js";import{m as _u,u as Eu,c as Di,V as Ri,n as Su,d as xu,s as ku,g as Cu}from"./VOverlay-CGW2V5u0.js";function Jn(e){return ea()?(St(e),!0):!1}function ot(e){return typeof e=="function"?e():re(e)}const Nu=typeof window<"u"&&typeof document<"u",Iu=e=>typeof e<"u",Pu=Object.prototype.toString,Mu=e=>Pu.call(e)==="[object Object]",Vu=()=>{};function Ou(e,t){function n(...o){return new Promise((i,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(r)})}return n}const xa=e=>e();function Tu(e=xa){const t=ae(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...r)=>{t.value&&e(...r)};return{isActive:Gs(t),pause:n,resume:o,eventFilter:i}}function Bi(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function $u(e,t,n={}){const{eventFilter:o=xa,...i}=n;return se(e,Ou(o,t),i)}function Vt(e,t,n={}){const{eventFilter:o,...i}=n,{eventFilter:r,pause:a,resume:l,isActive:s}=Tu(o);return{stop:$u(e,t,{...i,eventFilter:r}),pause:a,resume:l,isActive:s}}function Au(e,t={}){if(!ai(e))return zs(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=Ls(()=>({get(){return e.value[o]},set(i){var r;if((r=ot(t.replaceRef))!=null?r:!0)if(Array.isArray(e.value)){const l=[...e.value];l[o]=i,e.value=l}else{const l={...e.value,[o]:i};Object.setPrototypeOf(l,Object.getPrototypeOf(e.value)),e.value=l}else e.value[o]=i}}));return n}function zo(e,t=!1){function n(d,{flush:f="sync",deep:h=!1,timeout:y,throwOnTimeout:g}={}){let p=null;const w=[new Promise(O=>{p=se(e,S=>{d(S)!==t&&(p==null||p(),O(S))},{flush:f,deep:h,immediate:!0})})];return y!=null&&w.push(Bi(y,g).then(()=>ot(e)).finally(()=>p==null?void 0:p())),Promise.race(w)}function o(d,f){if(!ai(d))return n(S=>S===d,f);const{flush:h="sync",deep:y=!1,timeout:g,throwOnTimeout:p}=f??{};let b=null;const O=[new Promise(S=>{b=se([e,d],([T,F])=>{t!==(T===F)&&(b==null||b(),S(T))},{flush:h,deep:y,immediate:!0})})];return g!=null&&O.push(Bi(g,p).then(()=>ot(e)).finally(()=>(b==null||b(),ot(e)))),Promise.race(O)}function i(d){return n(f=>!!f,d)}function r(d){return o(null,d)}function a(d){return o(void 0,d)}function l(d){return n(Number.isNaN,d)}function s(d,f){return n(h=>{const y=Array.from(h);return y.includes(d)||y.includes(ot(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let h=-1;return n(()=>(h+=1,h>=d),f)}return Array.isArray(ot(e))?{toMatch:n,toContains:s,changed:u,changedTimes:c,get not(){return zo(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:r,toBeNaN:l,toBeUndefined:a,changed:u,changedTimes:c,get not(){return zo(e,!t)}}}function Lo(e){return zo(e)}function Du(e){var t;const n=ot(e);return(t=n==null?void 0:n.$el)!=null?t:n}const ka=Nu?window:void 0;function Ca(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=ka):[t,n,o,i]=e,!t)return Vu;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],a=()=>{r.forEach(c=>c()),r.length=0},l=(c,d,f,h)=>(c.addEventListener(d,f,h),()=>c.removeEventListener(d,f,h)),s=se(()=>[Du(t),ot(i)],([c,d])=>{if(a(),!c)return;const f=Mu(d)?{...d}:d;r.push(...n.flatMap(h=>o.map(y=>l(c,h,y,f))))},{immediate:!0,flush:"post"}),u=()=>{s(),a()};return Jn(u),u}function Ru(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Fi(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=ka,eventName:r="keydown",passive:a=!1,dedupe:l=!1}=o,s=Ru(t);return Ca(i,r,c=>{c.repeat&&ot(l)||s(c)&&n(c)},a)}function Bu(e){return JSON.parse(JSON.stringify(e))}function go(e,t,n,o={}){var i,r,a;const{clone:l=!1,passive:s=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=o,h=vn(),y=n||(h==null?void 0:h.emit)||((i=h==null?void 0:h.$emit)==null?void 0:i.bind(h))||((a=(r=h==null?void 0:h.proxy)==null?void 0:r.$emit)==null?void 0:a.bind(h==null?void 0:h.proxy));let g=u;t||(t="modelValue"),g=g||`update:${t.toString()}`;const p=O=>l?typeof l=="function"?l(O):Bu(O):O,b=()=>Iu(e[t])?p(e[t]):d,w=O=>{f?f(O)&&y(g,O):y(g,O)};if(s){const O=b(),S=ae(O);let T=!1;return se(()=>e[t],F=>{T||(T=!0,S.value=p(F),Me(()=>T=!1))}),se(S,F=>{!T&&(F!==e[t]||c)&&w(F)},{deep:c}),S}else return z({get(){return b()},set(O){w(O)}})}var Fu={value:()=>{}};function eo(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Pn(n)}function Pn(e){this._=e}function zu(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Pn.prototype=eo.prototype={constructor:Pn,on:function(e,t){var n=this._,o=zu(e+"",n),i,r=-1,a=o.length;if(arguments.length<2){for(;++r<a;)if((i=(e=o[r]).type)&&(i=Lu(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<a;)if(i=(e=o[r]).type)n[i]=zi(n[i],e.name,t);else if(t==null)for(i in n)n[i]=zi(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Pn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,r;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};function Lu(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function zi(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Fu,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Go="http://www.w3.org/1999/xhtml";const Li={svg:"http://www.w3.org/2000/svg",xhtml:Go,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function to(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Li.hasOwnProperty(t)?{space:Li[t],local:e}:e}function Gu(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Go&&t.documentElement.namespaceURI===Go?t.createElement(e):t.createElementNS(n,e)}}function Hu(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Na(e){var t=to(e);return(t.local?Hu:Gu)(t)}function Yu(){}function vi(e){return e==null?Yu:function(){return this.querySelector(e)}}function Uu(e){typeof e!="function"&&(e=vi(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,l=o[i]=new Array(a),s,u,c=0;c<a;++c)(s=r[c])&&(u=e.call(s,s.__data__,c,r))&&("__data__"in s&&(u.__data__=s.__data__),l[c]=u);return new ze(o,this._parents)}function Xu(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ku(){return[]}function Ia(e){return e==null?Ku:function(){return this.querySelectorAll(e)}}function Wu(e){return function(){return Xu(e.apply(this,arguments))}}function ju(e){typeof e=="function"?e=Wu(e):e=Ia(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var a=t[r],l=a.length,s,u=0;u<l;++u)(s=a[u])&&(o.push(e.call(s,s.__data__,u,a)),i.push(s));return new ze(o,i)}function Pa(e){return function(){return this.matches(e)}}function Ma(e){return function(t){return t.matches(e)}}var qu=Array.prototype.find;function Zu(e){return function(){return qu.call(this.children,e)}}function Qu(){return this.firstElementChild}function Ju(e){return this.select(e==null?Qu:Zu(typeof e=="function"?e:Ma(e)))}var ec=Array.prototype.filter;function tc(){return Array.from(this.children)}function nc(e){return function(){return ec.call(this.children,e)}}function oc(e){return this.selectAll(e==null?tc:nc(typeof e=="function"?e:Ma(e)))}function ic(e){typeof e!="function"&&(e=Pa(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,l=o[i]=[],s,u=0;u<a;++u)(s=r[u])&&e.call(s,s.__data__,u,r)&&l.push(s);return new ze(o,this._parents)}function Va(e){return new Array(e.length)}function rc(){return new ze(this._enter||this._groups.map(Va),this._parents)}function An(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}An.prototype={constructor:An,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ac(e){return function(){return e}}function lc(e,t,n,o,i,r){for(var a=0,l,s=t.length,u=r.length;a<u;++a)(l=t[a])?(l.__data__=r[a],o[a]=l):n[a]=new An(e,r[a]);for(;a<s;++a)(l=t[a])&&(i[a]=l)}function sc(e,t,n,o,i,r,a){var l,s,u=new Map,c=t.length,d=r.length,f=new Array(c),h;for(l=0;l<c;++l)(s=t[l])&&(f[l]=h=a.call(s,s.__data__,l,t)+"",u.has(h)?i[l]=s:u.set(h,s));for(l=0;l<d;++l)h=a.call(e,r[l],l,r)+"",(s=u.get(h))?(o[l]=s,s.__data__=r[l],u.delete(h)):n[l]=new An(e,r[l]);for(l=0;l<c;++l)(s=t[l])&&u.get(f[l])===s&&(i[l]=s)}function uc(e){return e.__data__}function cc(e,t){if(!arguments.length)return Array.from(this,uc);var n=t?sc:lc,o=this._parents,i=this._groups;typeof e!="function"&&(e=ac(e));for(var r=i.length,a=new Array(r),l=new Array(r),s=new Array(r),u=0;u<r;++u){var c=o[u],d=i[u],f=d.length,h=dc(e.call(c,c&&c.__data__,u,o)),y=h.length,g=l[u]=new Array(y),p=a[u]=new Array(y),b=s[u]=new Array(f);n(c,d,g,p,b,h,t);for(var w=0,O=0,S,T;w<y;++w)if(S=g[w]){for(w>=O&&(O=w+1);!(T=p[O])&&++O<y;);S._next=T||null}}return a=new ze(a,o),a._enter=l,a._exit=s,a}function dc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fc(){return new ze(this._exit||this._groups.map(Va),this._parents)}function hc(e,t,n){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?r.remove():n(r),o&&i?o.merge(i).order():i}function vc(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,a=Math.min(i,r),l=new Array(i),s=0;s<a;++s)for(var u=n[s],c=o[s],d=u.length,f=l[s]=new Array(d),h,y=0;y<d;++y)(h=u[y]||c[y])&&(f[y]=h);for(;s<i;++s)l[s]=n[s];return new ze(l,this._parents)}function gc(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,r=o[i],a;--i>=0;)(a=o[i])&&(r&&a.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(a,r),r=a);return this}function mc(e){e||(e=pc);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var a=n[r],l=a.length,s=i[r]=new Array(l),u,c=0;c<l;++c)(u=a[c])&&(s[c]=u);s.sort(t)}return new ze(i,this._parents).order()}function pc(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function yc(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function wc(){return Array.from(this)}function bc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var a=o[i];if(a)return a}return null}function _c(){let e=0;for(const t of this)++e;return e}function Ec(){return!this.node()}function Sc(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],r=0,a=i.length,l;r<a;++r)(l=i[r])&&e.call(l,l.__data__,r,i);return this}function xc(e){return function(){this.removeAttribute(e)}}function kc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cc(e,t){return function(){this.setAttribute(e,t)}}function Nc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ic(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Pc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Mc(e,t){var n=to(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?kc:xc:typeof t=="function"?n.local?Pc:Ic:n.local?Nc:Cc)(n,t))}function Oa(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Vc(e){return function(){this.style.removeProperty(e)}}function Oc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Tc(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function $c(e,t,n){return arguments.length>1?this.each((t==null?Vc:typeof t=="function"?Tc:Oc)(e,t,n??"")):zt(this.node(),e)}function zt(e,t){return e.style.getPropertyValue(t)||Oa(e).getComputedStyle(e,null).getPropertyValue(t)}function Ac(e){return function(){delete this[e]}}function Dc(e,t){return function(){this[e]=t}}function Rc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Bc(e,t){return arguments.length>1?this.each((t==null?Ac:typeof t=="function"?Rc:Dc)(e,t)):this.node()[e]}function Ta(e){return e.trim().split(/^|\s+/)}function gi(e){return e.classList||new $a(e)}function $a(e){this._node=e,this._names=Ta(e.getAttribute("class")||"")}$a.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Aa(e,t){for(var n=gi(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Da(e,t){for(var n=gi(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function Fc(e){return function(){Aa(this,e)}}function zc(e){return function(){Da(this,e)}}function Lc(e,t){return function(){(t.apply(this,arguments)?Aa:Da)(this,e)}}function Gc(e,t){var n=Ta(e+"");if(arguments.length<2){for(var o=gi(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Lc:t?Fc:zc)(n,t))}function Hc(){this.textContent=""}function Yc(e){return function(){this.textContent=e}}function Uc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Xc(e){return arguments.length?this.each(e==null?Hc:(typeof e=="function"?Uc:Yc)(e)):this.node().textContent}function Kc(){this.innerHTML=""}function Wc(e){return function(){this.innerHTML=e}}function jc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function qc(e){return arguments.length?this.each(e==null?Kc:(typeof e=="function"?jc:Wc)(e)):this.node().innerHTML}function Zc(){this.nextSibling&&this.parentNode.appendChild(this)}function Qc(){return this.each(Zc)}function Jc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ed(){return this.each(Jc)}function td(e){var t=typeof e=="function"?e:Na(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function nd(){return null}function od(e,t){var n=typeof e=="function"?e:Na(e),o=t==null?nd:typeof t=="function"?t:vi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function id(){var e=this.parentNode;e&&e.removeChild(this)}function rd(){return this.each(id)}function ad(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ld(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function sd(e){return this.select(e?ld:ad)}function ud(e){return arguments.length?this.property("__data__",e):this.node().__data__}function cd(e){return function(t){e.call(this,t,this.__data__)}}function dd(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function fd(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,r;n<i;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++o]=r;++o?t.length=o:delete this.__on}}}function hd(e,t,n){return function(){var o=this.__on,i,r=cd(t);if(o){for(var a=0,l=o.length;a<l;++a)if((i=o[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),i.value=t;return}}this.addEventListener(e.type,r,n),i={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(i):this.__on=[i]}}function vd(e,t,n){var o=dd(e+""),i,r=o.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,c;s<u;++s)for(i=0,c=l[s];i<r;++i)if((a=o[i]).type===c.type&&a.name===c.name)return c.value}return}for(l=t?hd:fd,i=0;i<r;++i)this.each(l(o[i],t,n));return this}function Ra(e,t,n){var o=Oa(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function gd(e,t){return function(){return Ra(this,e,t)}}function md(e,t){return function(){return Ra(this,e,t.apply(this,arguments))}}function pd(e,t){return this.each((typeof t=="function"?md:gd)(e,t))}function*yd(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length,a;i<r;++i)(a=o[i])&&(yield a)}var Ba=[null];function ze(e,t){this._groups=e,this._parents=t}function gn(){return new ze([[document.documentElement]],Ba)}function wd(){return this}ze.prototype=gn.prototype={constructor:ze,select:Uu,selectAll:ju,selectChild:Ju,selectChildren:oc,filter:ic,data:cc,enter:rc,exit:fc,join:hc,merge:vc,selection:wd,order:gc,sort:mc,call:yc,nodes:wc,node:bc,size:_c,empty:Ec,each:Sc,attr:Mc,style:$c,property:Bc,classed:Gc,text:Xc,html:qc,raise:Qc,lower:ed,append:td,insert:od,remove:rd,clone:sd,datum:ud,on:vd,dispatch:pd,[Symbol.iterator]:yd};function Xe(e){return typeof e=="string"?new ze([[document.querySelector(e)]],[document.documentElement]):new ze([[e]],Ba)}function bd(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Qe(e,t){if(e=bd(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const _d={passive:!1},on={capture:!0,passive:!1};function mo(e){e.stopImmediatePropagation()}function Tt(e){e.preventDefault(),e.stopImmediatePropagation()}function Fa(e){var t=e.document.documentElement,n=Xe(e).on("dragstart.drag",Tt,on);"onselectstart"in t?n.on("selectstart.drag",Tt,on):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function za(e,t){var n=e.document.documentElement,o=Xe(e).on("dragstart.drag",null);t&&(o.on("click.drag",Tt,on),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const yn=e=>()=>e;function Ho(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:r,x:a,y:l,dx:s,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Ho.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ed(e){return!e.ctrlKey&&!e.button}function Sd(){return this.parentNode}function xd(e,t){return t??{x:e.x,y:e.y}}function kd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Cd(){var e=Ed,t=Sd,n=xd,o=kd,i={},r=eo("start","drag","end"),a=0,l,s,u,c,d=0;function f(S){S.on("mousedown.drag",h).filter(o).on("touchstart.drag",p).on("touchmove.drag",b,_d).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(S,T){if(!(c||!e.call(this,S,T))){var F=O(this,t.call(this,S,T),S,T,"mouse");F&&(Xe(S.view).on("mousemove.drag",y,on).on("mouseup.drag",g,on),Fa(S.view),mo(S),u=!1,l=S.clientX,s=S.clientY,F("start",S))}}function y(S){if(Tt(S),!u){var T=S.clientX-l,F=S.clientY-s;u=T*T+F*F>d}i.mouse("drag",S)}function g(S){Xe(S.view).on("mousemove.drag mouseup.drag",null),za(S.view,u),Tt(S),i.mouse("end",S)}function p(S,T){if(e.call(this,S,T)){var F=S.changedTouches,$=t.call(this,S,T),K=F.length,U,R;for(U=0;U<K;++U)(R=O(this,$,S,T,F[U].identifier,F[U]))&&(mo(S),R("start",S,F[U]))}}function b(S){var T=S.changedTouches,F=T.length,$,K;for($=0;$<F;++$)(K=i[T[$].identifier])&&(Tt(S),K("drag",S,T[$]))}function w(S){var T=S.changedTouches,F=T.length,$,K;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),$=0;$<F;++$)(K=i[T[$].identifier])&&(mo(S),K("end",S,T[$]))}function O(S,T,F,$,K,U){var R=r.copy(),E=Qe(U||F,T),Q,J,_;if((_=n.call(S,new Ho("beforestart",{sourceEvent:F,target:f,identifier:K,active:a,x:E[0],y:E[1],dx:0,dy:0,dispatch:R}),$))!=null)return Q=_.x-E[0]||0,J=_.y-E[1]||0,function V(P,B,M){var C=E,k;switch(P){case"start":i[K]=V,k=a++;break;case"end":delete i[K],--a;case"drag":E=Qe(M||B,T),k=a;break}R.call(P,S,new Ho(P,{sourceEvent:B,subject:_,target:f,identifier:K,active:k,x:E[0]+Q,y:E[1]+J,dx:E[0]-C[0],dy:E[1]-C[1],dispatch:R}),$)}}return f.filter=function(S){return arguments.length?(e=typeof S=="function"?S:yn(!!S),f):e},f.container=function(S){return arguments.length?(t=typeof S=="function"?S:yn(S),f):t},f.subject=function(S){return arguments.length?(n=typeof S=="function"?S:yn(S),f):n},f.touchable=function(S){return arguments.length?(o=typeof S=="function"?S:yn(!!S),f):o},f.on=function(){var S=r.on.apply(r,arguments);return S===r?f:S},f.clickDistance=function(S){return arguments.length?(d=(S=+S)*S,f):Math.sqrt(d)},f}function mi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function La(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function mn(){}var rn=.7,Dn=1/rn,$t="\\s*([+-]?\\d+)\\s*",an="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Je="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Nd=/^#([0-9a-f]{3,8})$/,Id=new RegExp(`^rgb\\(${$t},${$t},${$t}\\)$`),Pd=new RegExp(`^rgb\\(${Je},${Je},${Je}\\)$`),Md=new RegExp(`^rgba\\(${$t},${$t},${$t},${an}\\)$`),Vd=new RegExp(`^rgba\\(${Je},${Je},${Je},${an}\\)$`),Od=new RegExp(`^hsl\\(${an},${Je},${Je}\\)$`),Td=new RegExp(`^hsla\\(${an},${Je},${Je},${an}\\)$`),Gi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mi(mn,ln,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Hi,formatHex:Hi,formatHex8:$d,formatHsl:Ad,formatRgb:Yi,toString:Yi});function Hi(){return this.rgb().formatHex()}function $d(){return this.rgb().formatHex8()}function Ad(){return Ga(this).formatHsl()}function Yi(){return this.rgb().formatRgb()}function ln(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Nd.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ui(t):n===3?new Ae(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?wn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?wn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Id.exec(e))?new Ae(t[1],t[2],t[3],1):(t=Pd.exec(e))?new Ae(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Md.exec(e))?wn(t[1],t[2],t[3],t[4]):(t=Vd.exec(e))?wn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Od.exec(e))?Wi(t[1],t[2]/100,t[3]/100,1):(t=Td.exec(e))?Wi(t[1],t[2]/100,t[3]/100,t[4]):Gi.hasOwnProperty(e)?Ui(Gi[e]):e==="transparent"?new Ae(NaN,NaN,NaN,0):null}function Ui(e){return new Ae(e>>16&255,e>>8&255,e&255,1)}function wn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Ae(e,t,n,o)}function Dd(e){return e instanceof mn||(e=ln(e)),e?(e=e.rgb(),new Ae(e.r,e.g,e.b,e.opacity)):new Ae}function Yo(e,t,n,o){return arguments.length===1?Dd(e):new Ae(e,t,n,o??1)}function Ae(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}mi(Ae,Yo,La(mn,{brighter(e){return e=e==null?Dn:Math.pow(Dn,e),new Ae(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?rn:Math.pow(rn,e),new Ae(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ae(xt(this.r),xt(this.g),xt(this.b),Rn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xi,formatHex:Xi,formatHex8:Rd,formatRgb:Ki,toString:Ki}));function Xi(){return`#${Et(this.r)}${Et(this.g)}${Et(this.b)}`}function Rd(){return`#${Et(this.r)}${Et(this.g)}${Et(this.b)}${Et((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ki(){const e=Rn(this.opacity);return`${e===1?"rgb(":"rgba("}${xt(this.r)}, ${xt(this.g)}, ${xt(this.b)}${e===1?")":`, ${e})`}`}function Rn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Et(e){return e=xt(e),(e<16?"0":"")+e.toString(16)}function Wi(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ke(e,t,n,o)}function Ga(e){if(e instanceof Ke)return new Ke(e.h,e.s,e.l,e.opacity);if(e instanceof mn||(e=ln(e)),!e)return new Ke;if(e instanceof Ke)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),a=NaN,l=r-i,s=(r+i)/2;return l?(t===r?a=(n-o)/l+(n<o)*6:n===r?a=(o-t)/l+2:a=(t-n)/l+4,l/=s<.5?r+i:2-r-i,a*=60):l=s>0&&s<1?0:a,new Ke(a,l,s,e.opacity)}function Bd(e,t,n,o){return arguments.length===1?Ga(e):new Ke(e,t,n,o??1)}function Ke(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}mi(Ke,Bd,La(mn,{brighter(e){return e=e==null?Dn:Math.pow(Dn,e),new Ke(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rn:Math.pow(rn,e),new Ke(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new Ae(po(e>=240?e-240:e+120,i,o),po(e,i,o),po(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Ke(ji(this.h),bn(this.s),bn(this.l),Rn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rn(this.opacity);return`${e===1?"hsl(":"hsla("}${ji(this.h)}, ${bn(this.s)*100}%, ${bn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ji(e){return e=(e||0)%360,e<0?e+360:e}function bn(e){return Math.max(0,Math.min(1,e||0))}function po(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ha=e=>()=>e;function Fd(e,t){return function(n){return e+n*t}}function zd(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Ld(e){return(e=+e)==1?Ya:function(t,n){return n-t?zd(t,n,e):Ha(isNaN(t)?n:t)}}function Ya(e,t){var n=t-e;return n?Fd(e,n):Ha(isNaN(e)?t:e)}const qi=function e(t){var n=Ld(t);function o(i,r){var a=n((i=Yo(i)).r,(r=Yo(r)).r),l=n(i.g,r.g),s=n(i.b,r.b),u=Ya(i.opacity,r.opacity);return function(c){return i.r=a(c),i.g=l(c),i.b=s(c),i.opacity=u(c),i+""}}return o.gamma=e,o}(1);function dt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Uo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yo=new RegExp(Uo.source,"g");function Gd(e){return function(){return e}}function Hd(e){return function(t){return e(t)+""}}function Yd(e,t){var n=Uo.lastIndex=yo.lastIndex=0,o,i,r,a=-1,l=[],s=[];for(e=e+"",t=t+"";(o=Uo.exec(e))&&(i=yo.exec(t));)(r=i.index)>n&&(r=t.slice(n,r),l[a]?l[a]+=r:l[++a]=r),(o=o[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,s.push({i:a,x:dt(o,i)})),n=yo.lastIndex;return n<t.length&&(r=t.slice(n),l[a]?l[a]+=r:l[++a]=r),l.length<2?s[0]?Hd(s[0].x):Gd(t):(t=s.length,function(u){for(var c=0,d;c<t;++c)l[(d=s[c]).i]=d.x(u);return l.join("")})}var Zi=180/Math.PI,Xo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ua(e,t,n,o,i,r){var a,l,s;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(s=e*n+t*o)&&(n-=e*s,o-=t*s),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,s/=l),e*o<t*n&&(e=-e,t=-t,s=-s,a=-a),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*Zi,skewX:Math.atan(s)*Zi,scaleX:a,scaleY:l}}var _n;function Ud(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Xo:Ua(t.a,t.b,t.c,t.d,t.e,t.f)}function Xd(e){return e==null||(_n||(_n=document.createElementNS("http://www.w3.org/2000/svg","g")),_n.setAttribute("transform",e),!(e=_n.transform.baseVal.consolidate()))?Xo:(e=e.matrix,Ua(e.a,e.b,e.c,e.d,e.e,e.f))}function Xa(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function r(u,c,d,f,h,y){if(u!==d||c!==f){var g=h.push("translate(",null,t,null,n);y.push({i:g-4,x:dt(u,d)},{i:g-2,x:dt(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function a(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,o)-2,x:dt(u,c)})):c&&d.push(i(d)+"rotate("+c+o)}function l(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,o)-2,x:dt(u,c)}):c&&d.push(i(d)+"skewX("+c+o)}function s(u,c,d,f,h,y){if(u!==d||c!==f){var g=h.push(i(h)+"scale(",null,",",null,")");y.push({i:g-4,x:dt(u,d)},{i:g-2,x:dt(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),r(u.translateX,u.translateY,c.translateX,c.translateY,d,f),a(u.rotate,c.rotate,d,f),l(u.skewX,c.skewX,d,f),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var y=-1,g=f.length,p;++y<g;)d[(p=f[y]).i]=p.x(h);return d.join("")}}}var Kd=Xa(Ud,"px, ","px)","deg)"),Wd=Xa(Xd,", ",")",")"),jd=1e-12;function Qi(e){return((e=Math.exp(e))+1/e)/2}function qd(e){return((e=Math.exp(e))-1/e)/2}function Zd(e){return((e=Math.exp(2*e))-1)/(e+1)}const Qd=function e(t,n,o){function i(r,a){var l=r[0],s=r[1],u=r[2],c=a[0],d=a[1],f=a[2],h=c-l,y=d-s,g=h*h+y*y,p,b;if(g<jd)b=Math.log(f/u)/t,p=function($){return[l+$*h,s+$*y,u*Math.exp(t*$*b)]};else{var w=Math.sqrt(g),O=(f*f-u*u+o*g)/(2*u*n*w),S=(f*f-u*u-o*g)/(2*f*n*w),T=Math.log(Math.sqrt(O*O+1)-O),F=Math.log(Math.sqrt(S*S+1)-S);b=(F-T)/t,p=function($){var K=$*b,U=Qi(T),R=u/(n*w)*(U*Zd(t*K+T)-qd(T));return[l+R*h,s+R*y,u*U/Qi(t*K+T)]}}return p.duration=b*1e3*t/Math.SQRT2,p}return i.rho=function(r){var a=Math.max(.001,+r),l=a*a,s=l*l;return e(a,l,s)},i}(Math.SQRT2,2,4);var Lt=0,jt=0,Xt=0,Ka=1e3,Bn,qt,Fn=0,Ct=0,no=0,sn=typeof performance=="object"&&performance.now?performance:Date,Wa=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function pi(){return Ct||(Wa(Jd),Ct=sn.now()+no)}function Jd(){Ct=0}function zn(){this._call=this._time=this._next=null}zn.prototype=ja.prototype={constructor:zn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?pi():+n)+(t==null?0:+t),!this._next&&qt!==this&&(qt?qt._next=this:Bn=this,qt=this),this._call=e,this._time=n,Ko()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ko())}};function ja(e,t,n){var o=new zn;return o.restart(e,t,n),o}function ef(){pi(),++Lt;for(var e=Bn,t;e;)(t=Ct-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Lt}function Ji(){Ct=(Fn=sn.now())+no,Lt=jt=0;try{ef()}finally{Lt=0,nf(),Ct=0}}function tf(){var e=sn.now(),t=e-Fn;t>Ka&&(no-=t,Fn=e)}function nf(){for(var e,t=Bn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Bn=n);qt=e,Ko(o)}function Ko(e){if(!Lt){jt&&(jt=clearTimeout(jt));var t=e-Ct;t>24?(e<1/0&&(jt=setTimeout(Ji,e-sn.now()-no)),Xt&&(Xt=clearInterval(Xt))):(Xt||(Fn=sn.now(),Xt=setInterval(tf,Ka)),Lt=1,Wa(Ji))}}function er(e,t,n){var o=new zn;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var of=eo("start","end","cancel","interrupt"),rf=[],qa=0,tr=1,Wo=2,Mn=3,nr=4,jo=5,Vn=6;function oo(e,t,n,o,i,r){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;af(e,n,{name:t,index:o,group:i,on:of,tween:rf,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:qa})}function yi(e,t){var n=qe(e,t);if(n.state>qa)throw new Error("too late; already scheduled");return n}function tt(e,t){var n=qe(e,t);if(n.state>Mn)throw new Error("too late; already running");return n}function qe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function af(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=ja(r,0,n.time);function r(u){n.state=tr,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,d,f,h;if(n.state!==tr)return s();for(c in o)if(h=o[c],h.name===n.name){if(h.state===Mn)return er(a);h.state===nr?(h.state=Vn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=Vn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(er(function(){n.state===Mn&&(n.state=nr,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=Wo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Wo){for(n.state=Mn,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function l(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=jo,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===jo&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Vn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function On(e,t){var n=e.__transition,o,i,r=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){r=!1;continue}i=o.state>Wo&&o.state<jo,o.state=Vn,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}r&&delete e.__transition}}function lf(e){return this.each(function(){On(this,e)})}function sf(e,t){var n,o;return function(){var i=tt(this,e),r=i.tween;if(r!==n){o=n=r;for(var a=0,l=o.length;a<l;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}i.tween=o}}function uf(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var r=tt(this,e),a=r.tween;if(a!==o){i=(o=a).slice();for(var l={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=l;break}s===u&&i.push(l)}r.tween=i}}function cf(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=qe(this.node(),n).tween,i=0,r=o.length,a;i<r;++i)if((a=o[i]).name===e)return a.value;return null}return this.each((t==null?sf:uf)(n,e,t))}function wi(e,t,n){var o=e._id;return e.each(function(){var i=tt(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return qe(i,o).value[t]}}function Za(e,t){var n;return(typeof t=="number"?dt:t instanceof ln?qi:(n=ln(t))?(t=n,qi):Yd)(e,t)}function df(e){return function(){this.removeAttribute(e)}}function ff(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hf(e,t,n){var o,i=n+"",r;return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function vf(e,t,n){var o,i=n+"",r;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function gf(e,t,n){var o,i,r;return function(){var a,l=n(this),s;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),s=l+"",a===s?null:a===o&&s===i?r:(i=s,r=t(o=a,l)))}}function mf(e,t,n){var o,i,r;return function(){var a,l=n(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),s=l+"",a===s?null:a===o&&s===i?r:(i=s,r=t(o=a,l)))}}function pf(e,t){var n=to(e),o=n==="transform"?Wd:Za;return this.attrTween(e,typeof t=="function"?(n.local?mf:gf)(n,o,wi(this,"attr."+e,t)):t==null?(n.local?ff:df)(n):(n.local?vf:hf)(n,o,t))}function yf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function wf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function bf(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&wf(e,r)),n}return i._value=t,i}function _f(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&yf(e,r)),n}return i._value=t,i}function Ef(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=to(e);return this.tween(n,(o.local?bf:_f)(o,t))}function Sf(e,t){return function(){yi(this,e).delay=+t.apply(this,arguments)}}function xf(e,t){return t=+t,function(){yi(this,e).delay=t}}function kf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Sf:xf)(t,e)):qe(this.node(),t).delay}function Cf(e,t){return function(){tt(this,e).duration=+t.apply(this,arguments)}}function Nf(e,t){return t=+t,function(){tt(this,e).duration=t}}function If(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cf:Nf)(t,e)):qe(this.node(),t).duration}function Pf(e,t){if(typeof t!="function")throw new Error;return function(){tt(this,e).ease=t}}function Mf(e){var t=this._id;return arguments.length?this.each(Pf(t,e)):qe(this.node(),t).ease}function Vf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;tt(this,e).ease=n}}function Of(e){if(typeof e!="function")throw new Error;return this.each(Vf(this._id,e))}function Tf(e){typeof e!="function"&&(e=Pa(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,l=o[i]=[],s,u=0;u<a;++u)(s=r[u])&&e.call(s,s.__data__,u,r)&&l.push(s);return new at(o,this._parents,this._name,this._id)}function $f(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),a=new Array(o),l=0;l<r;++l)for(var s=t[l],u=n[l],c=s.length,d=a[l]=new Array(c),f,h=0;h<c;++h)(f=s[h]||u[h])&&(d[h]=f);for(;l<o;++l)a[l]=t[l];return new at(a,this._parents,this._name,this._id)}function Af(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Df(e,t,n){var o,i,r=Af(t)?yi:tt;return function(){var a=r(this,e),l=a.on;l!==o&&(i=(o=l).copy()).on(t,n),a.on=i}}function Rf(e,t){var n=this._id;return arguments.length<2?qe(this.node(),n).on.on(e):this.each(Df(n,e,t))}function Bf(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ff(){return this.on("end.remove",Bf(this._id))}function zf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=vi(e));for(var o=this._groups,i=o.length,r=new Array(i),a=0;a<i;++a)for(var l=o[a],s=l.length,u=r[a]=new Array(s),c,d,f=0;f<s;++f)(c=l[f])&&(d=e.call(c,c.__data__,f,l))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,oo(u[f],t,n,f,u,qe(c,n)));return new at(r,this._parents,t,n)}function Lf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ia(e));for(var o=this._groups,i=o.length,r=[],a=[],l=0;l<i;++l)for(var s=o[l],u=s.length,c,d=0;d<u;++d)if(c=s[d]){for(var f=e.call(c,c.__data__,d,s),h,y=qe(c,n),g=0,p=f.length;g<p;++g)(h=f[g])&&oo(h,t,n,g,f,y);r.push(f),a.push(c)}return new at(r,a,t,n)}var Gf=gn.prototype.constructor;function Hf(){return new Gf(this._groups,this._parents)}function Yf(e,t){var n,o,i;return function(){var r=zt(this,e),a=(this.style.removeProperty(e),zt(this,e));return r===a?null:r===n&&a===o?i:i=t(n=r,o=a)}}function Qa(e){return function(){this.style.removeProperty(e)}}function Uf(e,t,n){var o,i=n+"",r;return function(){var a=zt(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}function Xf(e,t,n){var o,i,r;return function(){var a=zt(this,e),l=n(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),zt(this,e))),a===s?null:a===o&&s===i?r:(i=s,r=t(o=a,l))}}function Kf(e,t){var n,o,i,r="style."+t,a="end."+r,l;return function(){var s=tt(this,e),u=s.on,c=s.value[r]==null?l||(l=Qa(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(a,i=c),s.on=o}}function Wf(e,t,n){var o=(e+="")=="transform"?Kd:Za;return t==null?this.styleTween(e,Yf(e,o)).on("end.style."+e,Qa(e)):typeof t=="function"?this.styleTween(e,Xf(e,o,wi(this,"style."+e,t))).each(Kf(this._id,e)):this.styleTween(e,Uf(e,o,t),n).on("end.style."+e,null)}function jf(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function qf(e,t,n){var o,i;function r(){var a=t.apply(this,arguments);return a!==i&&(o=(i=a)&&jf(e,a,n)),o}return r._value=t,r}function Zf(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,qf(e,t,n??""))}function Qf(e){return function(){this.textContent=e}}function Jf(e){return function(){var t=e(this);this.textContent=t??""}}function eh(e){return this.tween("text",typeof e=="function"?Jf(wi(this,"text",e)):Qf(e==null?"":e+""))}function th(e){return function(t){this.textContent=e.call(this,t)}}function nh(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&th(i)),t}return o._value=e,o}function oh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,nh(e))}function ih(){for(var e=this._name,t=this._id,n=Ja(),o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],l=a.length,s,u=0;u<l;++u)if(s=a[u]){var c=qe(s,t);oo(s,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new at(o,this._parents,e,n)}function rh(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(r,a){var l={value:a},s={value:function(){--i===0&&r()}};n.each(function(){var u=tt(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),u.on=t}),i===0&&r()})}var ah=0;function at(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Ja(){return++ah}var nt=gn.prototype;at.prototype={constructor:at,select:zf,selectAll:Lf,selectChild:nt.selectChild,selectChildren:nt.selectChildren,filter:Tf,merge:$f,selection:Hf,transition:ih,call:nt.call,nodes:nt.nodes,node:nt.node,size:nt.size,empty:nt.empty,each:nt.each,on:Rf,attr:pf,attrTween:Ef,style:Wf,styleTween:Zf,text:eh,textTween:oh,remove:Ff,tween:cf,delay:kf,duration:If,ease:Mf,easeVarying:Of,end:rh,[Symbol.iterator]:nt[Symbol.iterator]};function lh(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var sh={time:null,delay:0,duration:250,ease:lh};function uh(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ch(e){var t,n;e instanceof at?(t=e._id,e=e._name):(t=Ja(),(n=sh).time=pi(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],l=a.length,s,u=0;u<l;++u)(s=a[u])&&oo(s,e,t,u,a,n||uh(s,t));return new at(o,this._parents,e,t)}gn.prototype.interrupt=lf;gn.prototype.transition=ch;const En=e=>()=>e;function dh(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function it(e,t,n){this.k=e,this.x=t,this.y=n}it.prototype={constructor:it,scale:function(e){return e===1?this:new it(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new it(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Gt=new it(1,0,0);it.prototype;function wo(e){e.stopImmediatePropagation()}function Kt(e){e.preventDefault(),e.stopImmediatePropagation()}function fh(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function hh(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function or(){return this.__zoom||Gt}function vh(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function gh(){return navigator.maxTouchPoints||"ontouchstart"in this}function mh(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a))}function ph(){var e=fh,t=hh,n=mh,o=vh,i=gh,r=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,s=Qd,u=eo("start","zoom","end"),c,d,f,h=500,y=150,g=0,p=10;function b(_){_.property("__zoom",or).on("wheel.zoom",K,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",R).filter(i).on("touchstart.zoom",E).on("touchmove.zoom",Q).on("touchend.zoom touchcancel.zoom",J).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(_,V,P,B){var M=_.selection?_.selection():_;M.property("__zoom",or),_!==M?T(_,V,P,B):M.interrupt().each(function(){F(this,arguments).event(B).start().zoom(null,typeof V=="function"?V.apply(this,arguments):V).end()})},b.scaleBy=function(_,V,P,B){b.scaleTo(_,function(){var M=this.__zoom.k,C=typeof V=="function"?V.apply(this,arguments):V;return M*C},P,B)},b.scaleTo=function(_,V,P,B){b.transform(_,function(){var M=t.apply(this,arguments),C=this.__zoom,k=P==null?S(M):typeof P=="function"?P.apply(this,arguments):P,A=C.invert(k),Y=typeof V=="function"?V.apply(this,arguments):V;return n(O(w(C,Y),k,A),M,a)},P,B)},b.translateBy=function(_,V,P,B){b.transform(_,function(){return n(this.__zoom.translate(typeof V=="function"?V.apply(this,arguments):V,typeof P=="function"?P.apply(this,arguments):P),t.apply(this,arguments),a)},null,B)},b.translateTo=function(_,V,P,B,M){b.transform(_,function(){var C=t.apply(this,arguments),k=this.__zoom,A=B==null?S(C):typeof B=="function"?B.apply(this,arguments):B;return n(Gt.translate(A[0],A[1]).scale(k.k).translate(typeof V=="function"?-V.apply(this,arguments):-V,typeof P=="function"?-P.apply(this,arguments):-P),C,a)},B,M)};function w(_,V){return V=Math.max(r[0],Math.min(r[1],V)),V===_.k?_:new it(V,_.x,_.y)}function O(_,V,P){var B=V[0]-P[0]*_.k,M=V[1]-P[1]*_.k;return B===_.x&&M===_.y?_:new it(_.k,B,M)}function S(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function T(_,V,P,B){_.on("start.zoom",function(){F(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(B).end()}).tween("zoom",function(){var M=this,C=arguments,k=F(M,C).event(B),A=t.apply(M,C),Y=P==null?S(A):typeof P=="function"?P.apply(M,C):P,H=Math.max(A[1][0]-A[0][0],A[1][1]-A[0][1]),L=M.__zoom,W=typeof V=="function"?V.apply(M,C):V,ie=s(L.invert(Y).concat(H/L.k),W.invert(Y).concat(H/W.k));return function(oe){if(oe===1)oe=W;else{var ce=ie(oe),te=H/ce[2];oe=new it(te,Y[0]-ce[0]*te,Y[1]-ce[1]*te)}k.zoom(null,oe)}})}function F(_,V,P){return!P&&_.__zooming||new $(_,V)}function $(_,V){this.that=_,this.args=V,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,V),this.taps=0}$.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,V){return this.mouse&&_!=="mouse"&&(this.mouse[1]=V.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=V.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=V.invert(this.touch1[0])),this.that.__zoom=V,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var V=Xe(this.that).datum();u.call(_,this.that,new dh(_,{sourceEvent:this.sourceEvent,target:b,type:_,transform:this.that.__zoom,dispatch:u}),V)}};function K(_,...V){if(!e.apply(this,arguments))return;var P=F(this,V).event(_),B=this.__zoom,M=Math.max(r[0],Math.min(r[1],B.k*Math.pow(2,o.apply(this,arguments)))),C=Qe(_);if(P.wheel)(P.mouse[0][0]!==C[0]||P.mouse[0][1]!==C[1])&&(P.mouse[1]=B.invert(P.mouse[0]=C)),clearTimeout(P.wheel);else{if(B.k===M)return;P.mouse=[C,B.invert(C)],On(this),P.start()}Kt(_),P.wheel=setTimeout(k,y),P.zoom("mouse",n(O(w(B,M),P.mouse[0],P.mouse[1]),P.extent,a));function k(){P.wheel=null,P.end()}}function U(_,...V){if(f||!e.apply(this,arguments))return;var P=_.currentTarget,B=F(this,V,!0).event(_),M=Xe(_.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",H,!0),C=Qe(_,P),k=_.clientX,A=_.clientY;Fa(_.view),wo(_),B.mouse=[C,this.__zoom.invert(C)],On(this),B.start();function Y(L){if(Kt(L),!B.moved){var W=L.clientX-k,ie=L.clientY-A;B.moved=W*W+ie*ie>g}B.event(L).zoom("mouse",n(O(B.that.__zoom,B.mouse[0]=Qe(L,P),B.mouse[1]),B.extent,a))}function H(L){M.on("mousemove.zoom mouseup.zoom",null),za(L.view,B.moved),Kt(L),B.event(L).end()}}function R(_,...V){if(e.apply(this,arguments)){var P=this.__zoom,B=Qe(_.changedTouches?_.changedTouches[0]:_,this),M=P.invert(B),C=P.k*(_.shiftKey?.5:2),k=n(O(w(P,C),B,M),t.apply(this,V),a);Kt(_),l>0?Xe(this).transition().duration(l).call(T,k,B,_):Xe(this).call(b.transform,k,B,_)}}function E(_,...V){if(e.apply(this,arguments)){var P=_.touches,B=P.length,M=F(this,V,_.changedTouches.length===B).event(_),C,k,A,Y;for(wo(_),k=0;k<B;++k)A=P[k],Y=Qe(A,this),Y=[Y,this.__zoom.invert(Y),A.identifier],M.touch0?!M.touch1&&M.touch0[2]!==Y[2]&&(M.touch1=Y,M.taps=0):(M.touch0=Y,C=!0,M.taps=1+!!c);c&&(c=clearTimeout(c)),C&&(M.taps<2&&(d=Y[0],c=setTimeout(function(){c=null},h)),On(this),M.start())}}function Q(_,...V){if(this.__zooming){var P=F(this,V).event(_),B=_.changedTouches,M=B.length,C,k,A,Y;for(Kt(_),C=0;C<M;++C)k=B[C],A=Qe(k,this),P.touch0&&P.touch0[2]===k.identifier?P.touch0[0]=A:P.touch1&&P.touch1[2]===k.identifier&&(P.touch1[0]=A);if(k=P.that.__zoom,P.touch1){var H=P.touch0[0],L=P.touch0[1],W=P.touch1[0],ie=P.touch1[1],oe=(oe=W[0]-H[0])*oe+(oe=W[1]-H[1])*oe,ce=(ce=ie[0]-L[0])*ce+(ce=ie[1]-L[1])*ce;k=w(k,Math.sqrt(oe/ce)),A=[(H[0]+W[0])/2,(H[1]+W[1])/2],Y=[(L[0]+ie[0])/2,(L[1]+ie[1])/2]}else if(P.touch0)A=P.touch0[0],Y=P.touch0[1];else return;P.zoom("touch",n(O(k,A,Y),P.extent,a))}}function J(_,...V){if(this.__zooming){var P=F(this,V).event(_),B=_.changedTouches,M=B.length,C,k;for(wo(_),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),C=0;C<M;++C)k=B[C],P.touch0&&P.touch0[2]===k.identifier?delete P.touch0:P.touch1&&P.touch1[2]===k.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(k=Qe(k,this),Math.hypot(d[0]-k[0],d[1]-k[1])<p)){var A=Xe(this).on("dblclick.zoom");A&&A.apply(this,arguments)}}}return b.wheelDelta=function(_){return arguments.length?(o=typeof _=="function"?_:En(+_),b):o},b.filter=function(_){return arguments.length?(e=typeof _=="function"?_:En(!!_),b):e},b.touchable=function(_){return arguments.length?(i=typeof _=="function"?_:En(!!_),b):i},b.extent=function(_){return arguments.length?(t=typeof _=="function"?_:En([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),b):t},b.scaleExtent=function(_){return arguments.length?(r[0]=+_[0],r[1]=+_[1],b):[r[0],r[1]]},b.translateExtent=function(_){return arguments.length?(a[0][0]=+_[0][0],a[1][0]=+_[1][0],a[0][1]=+_[0][1],a[1][1]=+_[1][1],b):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},b.constrain=function(_){return arguments.length?(n=_,b):n},b.duration=function(_){return arguments.length?(l=+_,b):l},b.interpolate=function(_){return arguments.length?(s=_,b):s},b.on=function(){var _=u.on.apply(u,arguments);return _===u?b:_},b.clickDistance=function(_){return arguments.length?(g=(_=+_)*_,b):Math.sqrt(g)},b.tapDistance=function(_){return arguments.length?(p=+_,b):p},b}var ne=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(ne||{}),bi=(e=>(e.Partial="partial",e.Full="full",e))(bi||{}),bt=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(bt||{}),Nt=(e=>(e.Strict="strict",e.Loose="loose",e))(Nt||{}),qo=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(qo||{}),Jt=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Jt||{});function Zo(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,i=typeof(o==null?void 0:o.hasAttribute)=="function"?o.hasAttribute("contenteditable"):!1,r=typeof(o==null?void 0:o.closest)=="function"?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(o==null?void 0:o.nodeName)||i||!!r}function yh(e){return e.ctrlKey||e.metaKey||e.shiftKey}function ir(e,t,n,o){const i=t.split("+").map(r=>r.trim().toLowerCase());return i.length===1?e.toLowerCase()===t.toLowerCase():(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),i.every((r,a)=>n.has(r)&&Array.from(n.values())[a]===i[a]))}function wh(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=bh(n.code,e);return Array.isArray(e)?e.some(i=>ir(n[o],i,t,n.type==="keyup")):ir(n[o],e,t,n.type==="keyup")}}function bh(e,t){return typeof t=="string"?e===t?"code":"key":t.includes(e)?"code":"key"}function en(e,t){const n=fe(()=>ge(t==null?void 0:t.actInsideInputWithModifier)??!1),o=fe(()=>ge(t==null?void 0:t.target)??window),i=ae(ge(e)===!0);let r=!1;const a=new Set;let l=u(ge(e));se(()=>ge(e),(c,d)=>{typeof d=="boolean"&&typeof c!="boolean"&&s(),l=u(c)},{immediate:!0}),je(()=>{Ca(window,["blur","contextmenu"],s)}),Fi((...c)=>l(...c),c=>{r=yh(c),!((!r||r&&!n.value)&&Zo(c))&&(c.preventDefault(),i.value=!0)},{eventName:"keydown",target:o}),Fi((...c)=>l(...c),c=>{if(i.value){if((!r||r&&!n.value)&&Zo(c))return;s()}},{eventName:"keyup",target:o});function s(){r=!1,a.clear(),i.value=!1}function u(c){return c===null?(s(),()=>!1):typeof c=="boolean"?(s(),i.value=c,()=>!1):Array.isArray(c)||typeof c=="string"?wh(c,a):c}return i}const el="vue-flow__node-desc",tl="vue-flow__edge-desc",_h="vue-flow__aria-live",nl=["Enter"," ","Escape"],At={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function Qo(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function Jo(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function io(e){return{width:e.offsetWidth,height:e.offsetHeight}}function It(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function ol(e,t){return{x:It(e.x,t[0][0],t[1][0]),y:It(e.y,t[0][1],t[1][1])}}function rr(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function yt(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function kt(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!yt(e)}function Zt(e){return kt(e)&&"computedPosition"in e}function Sn(e){return!Number.isNaN(e)&&Number.isFinite(e)}function Eh(e){return Sn(e.width)&&Sn(e.height)&&Sn(e.x)&&Sn(e.y)}function Sh(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:Ot({width:0,height:0}),computedPosition:Ot({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Ne(e.data)?e.data:{},events:Ot(Ne(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function il(e,t,n){var o,i;const r={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(i=e.targetHandle)==null?void 0:i.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:Ne(e.data)?e.data:{},events:Ot(Ne(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??r,e,{id:e.id.toString()})}function rl(e,t,n,o){const i=typeof e=="string"?e:e.id,r=new Set,a=o==="source"?"target":"source";for(const l of n)l[a]===i&&r.add(l[o]);return t.filter(l=>r.has(l.id))}function xh(...e){if(e.length===3){const[r,a,l]=e;return rl(r,a,l,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(r=>yt(r)&&r.source===o).map(r=>n.find(a=>kt(a)&&a.id===r.target))}function kh(...e){if(e.length===3){const[r,a,l]=e;return rl(r,a,l,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(r=>yt(r)&&r.target===o).map(r=>n.find(a=>kt(a)&&a.id===r.source))}function al({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function Ch(e,t){return t.some(n=>yt(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function ll({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function Ln({x:e,y:t},{x:n,y:o,zoom:i},r=!1,[a,l]=[1,1]){const s={x:(e-n)/i,y:(t-o)/i};return r?{x:a*Math.round(s.x/a),y:l*Math.round(s.y/l)}:s}function Nh(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function sl({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function Ih({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function ul(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=Nh(t,sl({...o.computedPosition,...o.dimensions}))}return Ih(t)}function cl(e,t,n={x:0,y:0,zoom:1},o=!1,i=!1){const r={...Ln(t,n),width:t.width/n.zoom,height:t.height/n.zoom},a=[];for(const l of e){const{dimensions:s,selectable:u=!0,hidden:c=!1}=l,d=s.width??l.width??null,f=s.height??l.height??null;if(i&&!u||c)continue;const h=Jo(r,Qo(l)),y=d===null||f===null,g=o&&h>0,p=(d??0)*(f??0);(y||g||h>=p||l.dragging)&&a.push(l)}return a}function dl(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function ar(e,t,n,o,i,r=.1,a={x:0,y:0}){const l=t/(e.width*(1+r)),s=n/(e.height*(1+r)),u=Math.min(l,s),c=It(u,o,i),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c+(a.x??0),y=n/2-f*c+(a.y??0);return{x:h,y,zoom:c}}function Ph(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function fl(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:fl(n,t):!1}function un(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function lr(e,t,n){return e<t?It(Math.abs(e-t),1,t)/t:e>n?-It(Math.abs(e-n),1,t)/t:0}function hl(e,t,n=15,o=40){const i=lr(e.x,o,t.width-o)*n,r=lr(e.y,o,t.height-o)*n;return[i,r]}function bo(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(typeof t.style=="function"?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(typeof i.width=="string"){const r=Number(i.width.replace("px",""));i.width=`${r+n}px`}else i.width+=n;if(o>0)if(typeof i.height=="string"){const r=Number(i.height.replace("px",""));i.height=`${r+o}px`}else i.height+=o;if(e.position.x<0){const r=Math.abs(e.position.x);if(t.position.x=t.position.x-r,typeof i.width=="string"){const a=Number(i.width.replace("px",""));i.width=`${a+r}px`}else i.width+=r;e.position.x=0}if(e.position.y<0){const r=Math.abs(e.position.y);if(t.position.y=t.position.y-r,typeof i.height=="string"){const a=Number(i.height.replace("px",""));i.height=`${a+r}px`}else i.height+=r;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),typeof t.style=="function"?t.style=r=>{const a=t.style;return{...a(r),...i}}:t.style={...t.style,...i}}}}function sr(e,t){var n,o;const i=e.filter(a=>a.type==="add"||a.type==="remove");for(const a of i)if(a.type==="add")t.findIndex(s=>s.id===a.item.id)===-1&&t.push(a.item);else if(a.type==="remove"){const l=t.findIndex(s=>s.id===a.id);l!==-1&&t.splice(l,1)}const r=t.map(a=>a.id);for(const a of t)for(const l of e)if(l.id===a.id)switch(l.type){case"select":a.selected=l.selected;break;case"position":if(Zt(a)&&(typeof l.position<"u"&&(a.position=l.position),typeof l.dragging<"u"&&(a.dragging=l.dragging),a.expandParent&&a.parentNode)){const s=t[r.indexOf(a.parentNode)];s&&Zt(s)&&bo(a,s)}break;case"dimensions":if(Zt(a)&&(typeof l.dimensions<"u"&&(a.dimensions=l.dimensions),typeof l.updateStyle<"u"&&(a.style={...a.style||{},width:`${(n=l.dimensions)==null?void 0:n.width}px`,height:`${(o=l.dimensions)==null?void 0:o.height}px`}),typeof l.resizing<"u"&&(a.resizing=l.resizing),a.expandParent&&a.parentNode)){const s=t[r.indexOf(a.parentNode)];s&&Zt(s)&&(!!s.dimensions.width&&!!s.dimensions.height?bo(a,s):Me(()=>{bo(a,s)}))}break}return t}function ct(e,t){return{id:e,type:"select",selected:t}}function ur(e){return{item:e,type:"add"}}function cr(e){return{id:e,type:"remove"}}function dr(e,t,n,o,i){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:i||null,type:"remove"}}function ft(e,t=new Set,n=!1){const o=[];for(const[i,r]of e){const a=t.has(i);!(r.selected===void 0&&!a)&&r.selected!==a&&(n&&(r.selected=a),o.push(ct(r.id,a)))}return o}function ee(e){const t=new Set;let n=!1;const o=()=>t.size>0;e&&(n=!0,t.add(e));const i=l=>{t.delete(l)};return{on:l=>{e&&n&&t.delete(e),t.add(l);const s=()=>{i(l),e&&n&&t.add(e)};return Jn(s),{off:s}},off:i,trigger:l=>Promise.all(Array.from(t).map(s=>s(l))),hasListeners:o,fns:t}}function fr(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Mh(e,t,n,o,i){var r,a;const l=[];for(const s of e)(s.selected||s.id===i)&&(!s.parentNode||!fl(s,o))&&(s.draggable||t&&typeof s.draggable>"u")&&l.push(Ot({id:s.id,position:s.position||{x:0,y:0},distance:{x:n.x-((r=s.computedPosition)==null?void 0:r.x)||0,y:n.y-((a=s.computedPosition)==null?void 0:a.y)||0},from:s.computedPosition,extent:s.extent,parentNode:s.parentNode,dimensions:s.dimensions,expandParent:s.expandParent}));return l}function _o({id:e,dragItems:t,findNode:n}){const o=[];for(const i of t){const r=n(i.id);r&&o.push(r)}return[e?o.find(i=>i.id===e):o[0],o]}function vl(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function Vh(e,t,n){const[o,i,r,a]=typeof e!="string"?vl(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-r]]:!1}function Oh(e,t,n,o){let i=e.extent||n;if((i==="parent"||!Array.isArray(i)&&(i==null?void 0:i.range)==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const r=Vh(i,e,o);r&&(i=r)}else t(new Pe(Ie.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const r=(o==null?void 0:o.computedPosition.x)||0,a=(o==null?void 0:o.computedPosition.y)||0;i=[[i[0][0]+r,i[0][1]+a],[i[1][0]+r,i[1][1]+a]]}else if(i!=="parent"&&(i!=null&&i.range)&&Array.isArray(i.range)){const[r,a,l,s]=vl(i.padding),u=(o==null?void 0:o.computedPosition.x)||0,c=(o==null?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+u+s,i.range[0][1]+c+r],[i.range[1][0]+u-a,i.range[1][1]+c-l]]}return i==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function Th({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function _i(e,t,n,o,i){const r=Th(e.dimensions,Oh(e,n,o,i)),a=ol(t,r);return{position:{x:a.x-((i==null?void 0:i.computedPosition.x)||0),y:a.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:a}}function Gn(e,t,n=ne.Left){const o=((t==null?void 0:t.x)??0)+e.computedPosition.x,i=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:r,height:a}=t??Dh(e);switch((t==null?void 0:t.position)??n){case ne.Top:return{x:o+r/2,y:i};case ne.Right:return{x:o+r,y:i+a/2};case ne.Bottom:return{x:o+r/2,y:i+a};case ne.Left:return{x:o,y:i+a/2}}}function hr(e=[],t){return e.length&&(t?e.find(n=>n.id===t):e[0])||null}function $h({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:r,width:a,height:l,viewport:s}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+r)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=sl({x:(0-s.x)/s.zoom,y:(0-s.y)/s.zoom,width:a/s.zoom,height:l/s.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}function Ah(e,t,n=!1){const o=typeof e.zIndex=="number";let i=o?e.zIndex:0;const r=t(e.source),a=t(e.target);return!r||!a?0:(n&&(i=o?e.zIndex:Math.max(r.computedPosition.z||0,a.computedPosition.z||0)),i)}var Ie=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Ie||{});const vr={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Pe extends Error{constructor(t,...n){var o;super((o=vr[t])==null?void 0:o.call(vr,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function Ei(e){return"clientX"in e}function gt(e,t){var n,o;const i=Ei(e),r=i?e.clientX:(n=e.touches)==null?void 0:n[0].clientX,a=i?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}}const Hn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Dh(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function gl(){return{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}}function Eo(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function gr(e,t,n,o){const i=[];for(const r of t[n]||[])if(`${e.id}-${r.id}-${n}`!==o){const{x:a,y:l}=Gn(e,r);i.push({id:r.id||null,type:n,nodeId:e.id,x:a,y:l})}return i}function Rh(e,t,n,o,i,r){const{x:a,y:l}=gt(e),u=t.elementsFromPoint(a,l).find(y=>y.classList.contains("vue-flow__handle"));if(u){const y=u.getAttribute("data-nodeid");if(y){const g=Si(void 0,u),p=u.getAttribute("data-handleid"),b=r({nodeId:y,id:p,type:g});if(b){const w=i.find(O=>O.nodeId===y&&O.type===g&&O.id===p);return{handle:{id:p,type:g,nodeId:y,x:(w==null?void 0:w.x)||n.x,y:(w==null?void 0:w.y)||n.y},validHandleResult:b}}}}let c=[],d=Number.POSITIVE_INFINITY;for(const y of i){const g=Math.sqrt((y.x-n.x)**2+(y.y-n.y)**2);if(g<=o){const p=r(y);g<=d&&(g<d?c=[{handle:y,validHandleResult:p}]:g===d&&c.push({handle:y,validHandleResult:p}),d=g)}}if(!c.length)return{handle:null,validHandleResult:gl()};if(c.length===1)return c[0];const f=c.some(({validHandleResult:y})=>y.isValid),h=c.some(({handle:y})=>y.type==="target");return c.find(({handle:y,validHandleResult:g})=>h?y.type==="target":f?g.isValid:!0)||c[0]}function mr(e,t,n,o,i,r,a,l,s,u,c){const d=r==="target",f=l.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:h,y}=gt(e),g=l.elementFromPoint(h,y),p=g!=null&&g.classList.contains("vue-flow__handle")?g:f,b=gl();if(p){b.handleDomNode=p;const w=Si(void 0,p),O=p.getAttribute("data-nodeid"),S=p.getAttribute("data-handleid"),T=p.classList.contains("connectable"),F=p.classList.contains("connectableend"),$={source:d?O:o,sourceHandle:d?S:i,target:d?o:O,targetHandle:d?i:S};b.connection=$,T&&F&&(n===Nt.Strict?d&&w==="source"||!d&&w==="target":O!==o||S!==i)&&(b.isValid=a($,{edges:s,nodes:u,sourceNode:c($.source),targetNode:c($.target)}),b.endHandle={nodeId:O,handleId:S,type:w,position:b.isValid?p.getAttribute("data-handlepos"):null})}return b}function Bh({nodes:e,nodeId:t,handleId:n,handleType:o}){const i=[];for(let r=0;r<e.length;r++){const a=e[r],{handleBounds:l}=a;let s=[],u=[];l&&(s=gr(a,l,"source",`${t}-${n}-${o}`),u=gr(a,l,"target",`${t}-${n}-${o}`)),i.push(...s,...u)}return i}function Si(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Fh(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}const zh=["production","prod"];function ro(e,...t){ml()&&console.warn(`[Vue Flow]: ${e}`,...t)}function ml(){return!zh.includes("production")}function pr(e,t,n,o){const i=t.querySelectorAll(`.vue-flow__handle${e}`);return Array.from(i).map(a=>{const l=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(l.left-n.left)/o,y:(l.top-n.top)/o,...io(a)}})}function ei(e,t,n,o,i,r=!1,a){i.value=!1,e.selected?(r||e.selected&&t)&&(o([e]),Me(()=>{a.blur()})):n([e])}function Ne(e){return typeof re(e)<"u"}function Lh(e,t,n,o){if(!e||!e.source||!e.target)return n(new Pe(Ie.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let i;return yt(e)?i=e:i={...e,id:al(e)},i=il(i,void 0,o),Ch(i,t)?!1:i}function Gh(e,t,n,o,i,r){if(!t.source||!t.target)return r(new Pe(Ie.EDGE_INVALID,e.id)),!1;const a=o(e.id);if(!a)return r(new Pe(Ie.EDGE_NOT_FOUND,e.id)),!1;const{id:l,...s}=e,u={...s,id:i?al(t):l,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(a),1,u),u}function yr(e,t,n){const o={},i=[];for(let r=0;r<e.length;++r){const a=e[r];if(!kt(a)){n(new Pe(Ie.NODE_INVALID,a==null?void 0:a.id)||`[ID UNKNOWN|INDEX ${r}]`);continue}const l=Sh(a,t(a.id),a.parentNode);a.parentNode&&(o[a.parentNode]=!0),i[r]=l}for(const r of i){const a=t(r.parentNode)||i.find(l=>l.id===r.parentNode);r.parentNode&&!a&&n(new Pe(Ie.NODE_MISSING_PARENT,r.id,r.parentNode)),(r.parentNode||o[r.id])&&(o[r.id]&&(r.isParent=!0),a&&(a.isParent=!0))}return i}function wr(e,t){e.clear();for(const n of t){const{id:o,source:i,target:r,sourceHandle:a=null,targetHandle:l=null}=n,s=`${i}-source-${a}`,u=`${r}-target-${l}`,c=e.get(s)||new Map,d=e.get(u)||new Map,f=Ot({edgeId:o,source:i,target:r,sourceHandle:a,targetHandle:l});e.set(s,c.set(`${r}-${l}`,f)),e.set(u,d.set(`${i}-${a}`,f))}}function br(e,t,n,o,i,r,a,l){const s=[];for(const u of e){const c=yt(u)?u:Lh(u,l,i,r);if(!c)continue;const d=n(c.source),f=n(c.target);if(!d||!f){i(new Pe(Ie.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){i(new Pe(Ie.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!f){i(new Pe(Ie.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:l,nodes:a,sourceNode:d,targetNode:f})){i(new Pe(Ie.EDGE_INVALID,c.id));continue}const h=o(c.id);s.push({...il(c,h,r),sourceNode:d,targetNode:f})}return s}const _r=Symbol("vueFlow"),pl=Symbol("nodeId"),yl=Symbol("nodeRef"),Hh=Symbol("edgeId"),Yh=Symbol("edgeRef"),ao=Symbol("slots");function wl(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodes:r,nodeExtent:a,nodeDragThreshold:l,viewport:s,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:f,findNode:h,multiSelectionActive:y,nodesSelectionActive:g,selectNodesOnDrag:p,removeSelectedElements:b,addSelectedNodes:w,updateNodePositions:O,emits:S}=Se(),{onStart:T,onDrag:F,onStop:$,onClick:K,el:U,disabled:R,id:E,selectable:Q,dragHandle:J}=e,_=ae(!1);let V=[],P,B=null,M={x:void 0,y:void 0},C={x:0,y:0},k=null,A=!1,Y=0,H=!1;const L=Kh(),W=({x:X,y:q})=>{M={x:X,y:q};let m=!1;if(V=V.map(v=>{const D={x:X-v.distance.x,y:q-v.distance.y};n.value&&(D.x=o.value[0]*Math.round(D.x/o.value[0]),D.y=o.value[1]*Math.round(D.y/o.value[1]));const{computedPosition:N}=_i(v,D,S.error,a.value,v.parentNode?h(v.parentNode):void 0);return m=m||v.position.x!==N.x||v.position.y!==N.y,v.position=N,v}),!!m&&(O(V,!0,!0),_.value=!0,k)){const[v,D]=_o({id:E,dragItems:V,findNode:h});F({event:k,node:v,nodes:D})}},ie=()=>{if(!B)return;const[X,q]=hl(C,B,c.value);if(X!==0||q!==0){const m={x:(M.x??0)-X/s.value.zoom,y:(M.y??0)-q/s.value.zoom};f({x:X,y:q})&&W(m)}Y=requestAnimationFrame(ie)},oe=(X,q)=>{A=!0;const m=h(E);!p.value&&!y.value&&m&&(m.selected||b()),m&&ge(Q)&&p.value&&ei(m,y.value,w,b,g,!1,q);const v=L(X);if(M=v,V=Mh(r.value,d.value,v,h,E),V.length){const[D,N]=_o({id:E,dragItems:V,findNode:h});T({event:X.sourceEvent,node:D,nodes:N})}},ce=(X,q)=>{var m;X.sourceEvent.type==="touchmove"&&X.sourceEvent.touches.length>1||(l.value===0&&oe(X,q),M=L(X),B=((m=t.value)==null?void 0:m.getBoundingClientRect())||null,C=gt(X.sourceEvent,B))},te=(X,q)=>{const m=L(X);if(!H&&A&&u.value&&(H=!0,ie()),!A){const v=m.xSnapped-(M.x??0),D=m.ySnapped-(M.y??0);Math.sqrt(v*v+D*D)>l.value&&oe(X,q)}(M.x!==m.xSnapped||M.y!==m.ySnapped)&&V.length&&A&&(k=X.sourceEvent,C=gt(X.sourceEvent,B),W(m))},G=X=>{if(!A){const q=L(X),m=q.xSnapped-(M.x??0),v=q.ySnapped-(M.y??0),D=Math.sqrt(m*m+v*v);D!==0&&D<=l.value&&(K==null||K(X.sourceEvent));return}if(_.value=!1,H=!1,A=!1,cancelAnimationFrame(Y),V.length){O(V,!1,!1);const[q,m]=_o({id:E,dragItems:V,findNode:h});$({event:X.sourceEvent,node:q,nodes:m})}};return se([()=>ge(R),U],([X,q],m,v)=>{if(q){const D=Xe(q);X||(P=Cd().on("start",N=>ce(N,q)).on("drag",N=>te(N,q)).on("end",N=>G(N)).filter(N=>{const I=N.target,j=ge(J);return!N.button&&(!i.value||!fr(I,`.${i.value}`,q)&&(!j||fr(I,j,q)))}),D.call(P)),v(()=>{D.on(".drag",null),P&&(P.on("start",null),P.on("drag",null),P.on("end",null))})}}),_}function Uh(){return{doubleClick:ee(),click:ee(),mouseEnter:ee(),mouseMove:ee(),mouseLeave:ee(),contextMenu:ee(),updateStart:ee(),update:ee(),updateEnd:ee()}}function Xh(e,t){const n=Uh();return n.doubleClick.on(o=>{var i,r;t.edgeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.edgeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.edgeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.edgeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.edgeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.edgeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.updateStart.on(o=>{var i,r;t.edgeUpdateStart(o),(r=(i=e.events)==null?void 0:i.updateStart)==null||r.call(i,o)}),n.update.on(o=>{var i,r;t.edgeUpdate(o),(r=(i=e.events)==null?void 0:i.update)==null||r.call(i,o)}),n.updateEnd.on(o=>{var i,r;t.edgeUpdateEnd(o),(r=(i=e.events)==null?void 0:i.updateEnd)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function Kh(){const{viewport:e,snapGrid:t,snapToGrid:n}=Se();return({sourceEvent:o})=>{const i=o.touches?o.touches[0].clientX:o.clientX,r=o.touches?o.touches[0].clientY:o.clientY,a={x:(i-e.value.x)/e.value.zoom,y:(r-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(a.x/t.value[0]):a.x,ySnapped:n.value?t.value[1]*Math.round(a.y/t.value[1]):a.y,...a}}}function xn(){return!0}function bl({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:r,onEdgeUpdateEnd:a}){const{vueFlowRef:l,connectionMode:s,connectionRadius:u,connectOnClick:c,connectionClickStartHandle:d,nodesConnectable:f,autoPanOnConnect:h,autoPanSpeed:y,findNode:g,panBy:p,startConnection:b,updateConnection:w,endConnection:O,emits:S,viewport:T,edges:F,nodes:$,isValidConnection:K}=Se();let U=null,R=!1,E=null,Q=null;function J(V){var P;const B=ge(n)==="target",M=Ei(V),C=rr(V.target);if(M&&V.button===0||!M){let k=function(N){q=gt(N,G);const{handle:I,validHandleResult:j}=Rh(N,C,Ln(q,T.value,!1,[1,1]),u.value,v,Z=>mr(N,Z,s.value,ge(t),ge(e),B?"target":"source",H,C,F.value,$.value,g));if(L=I,m||(D(),m=!0),U=j.connection,R=j.isValid,E=j.handleDomNode,!(R&&L&&(Q!=null&&Q.endHandle)&&j.endHandle&&Q.endHandle.type===j.endHandle.type&&Q.endHandle.nodeId===j.endHandle.nodeId&&Q.endHandle.handleId===j.endHandle.handleId)){if(w(L&&R?ll({x:L.x,y:L.y},T.value):q,j.endHandle,Fh(!!L,R)),Q=j,!L&&!R&&!E)return Eo(X);U&&U.source!==U.target&&E&&(Eo(X),X=E,E.classList.add("connecting","vue-flow__handle-connecting"),E.classList.toggle("valid",R),E.classList.toggle("vue-flow__handle-valid",R))}},A=function(N){(L||E)&&U&&R&&(r?r(N,U):S.connect(U)),S.connectEnd(N),i&&(a==null||a(N)),Eo(X),cancelAnimationFrame(W),O(N),m=!1,R=!1,U=null,E=null,C.removeEventListener("mousemove",k),C.removeEventListener("mouseup",A),C.removeEventListener("touchmove",k),C.removeEventListener("touchend",A)};const Y=g(ge(t));let H=ge(o)||K.value||xn;!H&&Y&&(H=(B?Y.isValidSourcePos:Y.isValidTargetPos)||xn);let L,W=0;const{x:ie,y:oe}=gt(V),ce=C==null?void 0:C.elementFromPoint(ie,oe),te=Si(ge(i),ce),G=(P=l.value)==null?void 0:P.getBoundingClientRect();if(!G||!te)return;let X,q=gt(V,G),m=!1;const v=Bh({nodes:$.value,nodeId:ge(t),handleId:ge(e),handleType:te}),D=()=>{if(!h.value)return;const[N,I]=hl(q,G,y.value);p({x:N,y:I}),W=requestAnimationFrame(D)};b({nodeId:ge(t),handleId:ge(e),type:te,position:(ce==null?void 0:ce.getAttribute("data-handlepos"))||ne.Top},{x:ie-G.left,y:oe-G.top}),S.connectStart({event:V,nodeId:ge(t),handleId:ge(e),handleType:te}),C.addEventListener("mousemove",k),C.addEventListener("mouseup",A),C.addEventListener("touchmove",k),C.addEventListener("touchend",A)}}function _(V){if(!c.value)return;const P=ge(n)==="target";if(!d.value)S.clickConnectStart({event:V,nodeId:ge(t),handleId:ge(e)}),b({nodeId:ge(t),type:ge(n),handleId:ge(e)},void 0,!0);else{let B=ge(o)||K.value||xn;const M=g(ge(t));if(!B&&M&&(B=(P?M.isValidSourcePos:M.isValidTargetPos)||xn),M&&(typeof M.connectable>"u"?f.value:M.connectable)===!1)return;const C=rr(V.target),{connection:k,isValid:A}=mr(V,{nodeId:ge(t),id:ge(e),type:ge(n)},s.value,d.value.nodeId,d.value.handleId||null,d.value.type,B,C,F.value,$.value,g),Y=k.source===k.target;A&&!Y&&S.connect(k),S.clickConnectEnd(V),O(V,!0)}}return{handlePointerDown:J,handleClick:_}}function Wh(){return lt(pl,"")}function _l(e){const t=e??Wh()??"",n=lt(yl,ae(null)),{findNode:o,edges:i,emits:r}=Se(),a=o(t);return a||r.error(new Pe(Ie.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:a,parentNode:z(()=>o(a.parentNode)),connectedEdges:z(()=>dl([a],i.value))}}function jh(){return{doubleClick:ee(),click:ee(),mouseEnter:ee(),mouseMove:ee(),mouseLeave:ee(),contextMenu:ee(),dragStart:ee(),drag:ee(),dragStop:ee()}}function qh(e,t){const n=jh();return n.doubleClick.on(o=>{var i,r;t.nodeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.nodeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.nodeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.nodeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.nodeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.nodeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.dragStart.on(o=>{var i,r;t.nodeDragStart(o),(r=(i=e.events)==null?void 0:i.dragStart)==null||r.call(i,o)}),n.drag.on(o=>{var i,r;t.nodeDrag(o),(r=(i=e.events)==null?void 0:i.drag)==null||r.call(i,o)}),n.dragStop.on(o=>{var i,r;t.nodeDragStop(o),(r=(i=e.events)==null?void 0:i.dragStop)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function El(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:r,nodesDraggable:a,emits:l}=Se();return(s,u=!1)=>{const c=r.value?i.value[0]:5,d=r.value?i.value[1]:5,f=u?4:1,h=s.x*c*f,y=s.y*d*f,g=[];for(const p of e.value)if(p.draggable||a&&typeof p.draggable>"u"){const b={x:p.computedPosition.x+h,y:p.computedPosition.y+y},{computedPosition:w}=_i(p,b,l.error,t.value,p.parentNode?o(p.parentNode):void 0);g.push({id:p.id,position:w,from:p.position,distance:{x:s.x,y:s.y},dimensions:p.dimensions})}n(g,!0,!1)}}const So=.1;function ut(){return ro("Viewport not initialized yet."),Promise.resolve(!1)}const Zh={zoomIn:ut,zoomOut:ut,zoomTo:ut,fitView:ut,setCenter:ut,fitBounds:ut,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:ut,setTransform:ut,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Qh(e){function t(o,i){return new Promise(r=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(xo(e.d3Selection,i,()=>{r(!0)}),o):r(!1)})}function n(o,i,r,a){return new Promise(l=>{const{x:s,y:u}=ol({x:-o,y:-i},e.translateExtent),c=Gt.translate(-s,-u).scale(r);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(xo(e.d3Selection,a,()=>{l(!0)}),c):l(!1)})}return z(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:i=>t(1.2,i==null?void 0:i.duration),zoomOut:i=>t(1/1.2,i==null?void 0:i.duration),zoomTo:(i,r)=>new Promise(a=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(xo(e.d3Selection,r==null?void 0:r.duration,()=>{a(!0)}),i):a(!1)}),setViewport:(i,r)=>n(i.x,i.y,i.zoom,r==null?void 0:r.duration),setTransform:(i,r)=>n(i.x,i.y,i.zoom,r==null?void 0:r.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(i={padding:So,includeHiddenNodes:!1,duration:0})=>{var r,a;const l=[];for(const f of e.nodes)f.dimensions.width&&f.dimensions.height&&((i==null?void 0:i.includeHiddenNodes)||!f.hidden)&&(!((r=i.nodes)!=null&&r.length)||(a=i.nodes)!=null&&a.length&&i.nodes.includes(f.id))&&l.push(f);if(!l.length)return Promise.resolve(!1);const s=ul(l),{x:u,y:c,zoom:d}=ar(s,e.dimensions.width,e.dimensions.height,i.minZoom??e.minZoom,i.maxZoom??e.maxZoom,i.padding??So,i.offset);return n(u,c,d,i==null?void 0:i.duration)},setCenter:(i,r,a)=>{const l=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:e.maxZoom,s=e.dimensions.width/2-i*l,u=e.dimensions.height/2-r*l;return n(s,u,l,a==null?void 0:a.duration)},fitBounds:(i,r={padding:So})=>{const{x:a,y:l,zoom:s}=ar(i,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,r.padding);return n(a,l,s,r==null?void 0:r.duration)},project:i=>Ln(i,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:i=>{if(e.vueFlowRef){const{x:r,y:a}=e.vueFlowRef.getBoundingClientRect(),l={x:i.x-r,y:i.y-a};return Ln(l,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:i=>{if(e.vueFlowRef){const{x:r,y:a}=e.vueFlowRef.getBoundingClientRect(),l={x:i.x+r,y:i.y+a};return ll(l,e.viewport)}return{x:0,y:0}}}:Zh)}function xo(e,t=0,n){return e.transition().duration(t).on("end",n)}function Jh(e,t,n){const o=Jr(!0);return o.run(()=>{const i=()=>{o.run(()=>{let g,p,b=!!(n.nodes.value.length||n.edges.value.length);g=Vt([e.modelValue,()=>{var w,O;return(O=(w=e.modelValue)==null?void 0:w.value)==null?void 0:O.length}],([w])=>{w&&Array.isArray(w)&&(p==null||p.pause(),n.setElements(w),!p&&!b&&w.length?b=!0:p==null||p.resume())}),p=Vt([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([w,O])=>{var S;(S=e.modelValue)!=null&&S.value&&Array.isArray(e.modelValue.value)&&(g==null||g.pause(),e.modelValue.value=[...w,...O],Me(()=>{g==null||g.resume()}))},{immediate:b}),St(()=>{g==null||g.stop(),p==null||p.stop()})})},r=()=>{o.run(()=>{let g,p,b=!!n.nodes.value.length;g=Vt([e.nodes,()=>{var w,O;return(O=(w=e.nodes)==null?void 0:w.value)==null?void 0:O.length}],([w])=>{w&&Array.isArray(w)&&(p==null||p.pause(),n.setNodes(w),!p&&!b&&w.length?b=!0:p==null||p.resume())}),p=Vt([n.nodes,()=>n.nodes.value.length],([w])=>{var O;(O=e.nodes)!=null&&O.value&&Array.isArray(e.nodes.value)&&(g==null||g.pause(),e.nodes.value=[...w],Me(()=>{g==null||g.resume()}))},{immediate:b}),St(()=>{g==null||g.stop(),p==null||p.stop()})})},a=()=>{o.run(()=>{let g,p,b=!!n.edges.value.length;g=Vt([e.edges,()=>{var w,O;return(O=(w=e.edges)==null?void 0:w.value)==null?void 0:O.length}],([w])=>{w&&Array.isArray(w)&&(p==null||p.pause(),n.setEdges(w),!p&&!b&&w.length?b=!0:p==null||p.resume())}),p=Vt([n.edges,()=>n.edges.value.length],([w])=>{var O;(O=e.edges)!=null&&O.value&&Array.isArray(e.edges.value)&&(g==null||g.pause(),e.edges.value=[...w],Me(()=>{g==null||g.resume()}))},{immediate:b}),St(()=>{g==null||g.stop(),p==null||p.stop()})})},l=()=>{o.run(()=>{se(()=>t.maxZoom,()=>{t.maxZoom&&Ne(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},s=()=>{o.run(()=>{se(()=>t.minZoom,()=>{t.minZoom&&Ne(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{se(()=>t.translateExtent,()=>{t.translateExtent&&Ne(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{se(()=>t.nodeExtent,()=>{t.nodeExtent&&Ne(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{se(()=>t.applyDefault,()=>{Ne(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},f=()=>{o.run(()=>{const g=async p=>{let b=p;typeof t.autoConnect=="function"&&(b=await t.autoConnect(p)),b!==!1&&n.addEdges([b])};se(()=>t.autoConnect,()=>{Ne(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),se(n.autoConnect,(p,b,w)=>{p?n.onConnect(g):n.hooks.value.connect.off(g),w(()=>{n.hooks.value.connect.off(g)})},{immediate:!0})})},h=()=>{const g=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const p of Object.keys(t)){const b=p;if(!g.includes(b)){const w=fe(()=>t[b]),O=n[b];ai(O)&&o.run(()=>{se(w,S=>{Ne(S)&&(O.value=S)},{immediate:!0})})}}};(()=>{i(),r(),a(),s(),l(),u(),c(),d(),f(),h()})()}),()=>o.stop()}function ev(){return{edgesChange:ee(),nodesChange:ee(),nodeDoubleClick:ee(),nodeClick:ee(),nodeMouseEnter:ee(),nodeMouseMove:ee(),nodeMouseLeave:ee(),nodeContextMenu:ee(),nodeDragStart:ee(),nodeDrag:ee(),nodeDragStop:ee(),nodesInitialized:ee(),miniMapNodeClick:ee(),miniMapNodeDoubleClick:ee(),miniMapNodeMouseEnter:ee(),miniMapNodeMouseMove:ee(),miniMapNodeMouseLeave:ee(),connect:ee(),connectStart:ee(),connectEnd:ee(),clickConnectStart:ee(),clickConnectEnd:ee(),paneReady:ee(),init:ee(),move:ee(),moveStart:ee(),moveEnd:ee(),selectionDragStart:ee(),selectionDrag:ee(),selectionDragStop:ee(),selectionContextMenu:ee(),selectionStart:ee(),selectionEnd:ee(),viewportChangeStart:ee(),viewportChange:ee(),viewportChangeEnd:ee(),paneScroll:ee(),paneClick:ee(),paneContextMenu:ee(),paneMouseEnter:ee(),paneMouseMove:ee(),paneMouseLeave:ee(),edgeContextMenu:ee(),edgeMouseEnter:ee(),edgeMouseMove:ee(),edgeMouseLeave:ee(),edgeDoubleClick:ee(),edgeClick:ee(),edgeUpdateStart:ee(),edgeUpdate:ee(),edgeUpdateEnd:ee(),updateNodeInternals:ee(),error:ee(e=>ro(e.message))}}function tv(e,t){ta(()=>{for(const[n,o]of Object.entries(t.value)){const i=r=>{e(n,r)};o.fns.add(i),Jn(()=>{o.off(i)})}})}function Sl(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:bi.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Jt.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:bt.Bezier,style:{}},connectionMode:Nt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:Hn()?"Meta":"Control",zoomActivationKeyCode:Hn()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:ev(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const nv=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function ov(e,t,n){const o=Qh(e),i=m=>{const v=m??[];e.hooks.updateNodeInternals.trigger(v)},r=m=>kh(m,e.nodes,e.edges),a=m=>xh(m,e.nodes,e.edges),l=m=>dl(m,e.edges),s=m=>{if(m)return t.value.get(m)},u=m=>{if(m)return n.value.get(m)},c=(m,v,D)=>{var N,I;const j=[];for(const Z of m){const le={id:Z.id,type:"position",dragging:D,from:Z.from};if(v&&(le.position=Z.position,Z.parentNode)){const de=s(Z.parentNode);le.position={x:le.position.x-(((N=de==null?void 0:de.computedPosition)==null?void 0:N.x)??0),y:le.position.y-(((I=de==null?void 0:de.computedPosition)==null?void 0:I.y)??0)}}j.push(le)}j!=null&&j.length&&e.hooks.nodesChange.trigger(j)},d=m=>{if(!e.vueFlowRef)return;const v=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!v)return;const D=window.getComputedStyle(v),{m22:N}=new window.DOMMatrixReadOnly(D.transform),I=[];for(let j=0;j<m.length;++j){const Z=m[j],le=s(Z.id);if(le){const de=io(Z.nodeElement);if(!!(de.width&&de.height&&(le.dimensions.width!==de.width||le.dimensions.height!==de.height||Z.forceUpdate))){const he=Z.nodeElement.getBoundingClientRect();le.dimensions=de,le.handleBounds.source=pr(".source",Z.nodeElement,he,N),le.handleBounds.target=pr(".target",Z.nodeElement,he,N),I[j]={id:le.id,type:"dimensions",dimensions:de}}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),I.length&&e.hooks.nodesChange.trigger(I)},f=(m,v)=>{const D=new Set,N=new Set;for(const Z of m)kt(Z)?D.add(Z.id):yt(Z)&&N.add(Z.id);const I=ft(t.value,D,!0),j=ft(n.value,N);if(e.multiSelectionActive){for(const Z of D)I.push(ct(Z,v));for(const Z of N)j.push(ct(Z,v))}I.length&&e.hooks.nodesChange.trigger(I),j.length&&e.hooks.edgesChange.trigger(j)},h=m=>{if(e.multiSelectionActive){const v=m.map(D=>ct(D.id,!0));e.hooks.nodesChange.trigger(v);return}e.hooks.nodesChange.trigger(ft(t.value,new Set(m.map(v=>v.id)),!0)),e.hooks.edgesChange.trigger(ft(n.value))},y=m=>{if(e.multiSelectionActive){const v=m.map(D=>ct(D.id,!0));e.hooks.edgesChange.trigger(v);return}e.hooks.edgesChange.trigger(ft(n.value,new Set(m.map(v=>v.id)))),e.hooks.nodesChange.trigger(ft(t.value,new Set,!0))},g=m=>{f(m,!0)},p=m=>{const D=(m||e.nodes).map(N=>(N.selected=!1,ct(N.id,!1)));e.hooks.nodesChange.trigger(D)},b=m=>{const D=(m||e.edges).map(N=>(N.selected=!1,ct(N.id,!1)));e.hooks.edgesChange.trigger(D)},w=m=>{if(!m||!m.length)return f([],!1);const v=m.reduce((D,N)=>{const I=ct(N.id,!1);return kt(N)?D.nodes.push(I):D.edges.push(I),D},{nodes:[],edges:[]});v.nodes.length&&e.hooks.nodesChange.trigger(v.nodes),v.edges.length&&e.hooks.edgesChange.trigger(v.edges)},O=m=>{var v;(v=e.d3Zoom)==null||v.scaleExtent([m,e.maxZoom]),e.minZoom=m},S=m=>{var v;(v=e.d3Zoom)==null||v.scaleExtent([e.minZoom,m]),e.maxZoom=m},T=m=>{var v;(v=e.d3Zoom)==null||v.translateExtent(m),e.translateExtent=m},F=m=>{e.nodeExtent=m,i()},$=m=>{var v;(v=e.d3Zoom)==null||v.clickDistance(m)},K=m=>{e.nodesDraggable=m,e.nodesConnectable=m,e.elementsSelectable=m},U=m=>{const v=m instanceof Function?m(e.nodes):m;!e.initialized&&!v.length||(e.nodes=yr(v,s,e.hooks.error.trigger))},R=m=>{const v=m instanceof Function?m(e.edges):m;if(!e.initialized&&!v.length)return;const D=br(v,e.isValidConnection,s,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);wr(e.connectionLookup,D),e.edges=D},E=m=>{const v=m instanceof Function?m([...e.nodes,...e.edges]):m;!e.initialized&&!v.length||(U(v.filter(kt)),R(v.filter(yt)))},Q=m=>{let v=m instanceof Function?m(e.nodes):m;v=Array.isArray(v)?v:[v];const D=yr(v,s,e.hooks.error.trigger),N=[];for(const I of D)N.push(ur(I));N.length&&e.hooks.nodesChange.trigger(N)},J=m=>{let v=m instanceof Function?m(e.edges):m;v=Array.isArray(v)?v:[v];const D=br(v,e.isValidConnection,s,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),N=[];for(const I of D)N.push(ur(I));N.length&&e.hooks.edgesChange.trigger(N)},_=(m,v=!0,D=!1)=>{const N=m instanceof Function?m(e.nodes):m,I=Array.isArray(N)?N:[N],j=[],Z=[];function le(ve){const he=l(ve);for(const be of he)(!Ne(be.deletable)||be.deletable)&&Z.push(dr(be.id,be.source,be.target,be.sourceHandle,be.targetHandle))}function de(ve){const he=[];for(const be of e.nodes)be.parentNode===ve&&he.push(be);if(he.length){for(const be of he)j.push(cr(be.id));v&&le(he);for(const be of he)de(be.id)}}for(const ve of I){const he=typeof ve=="string"?s(ve):ve;he&&(Ne(he.deletable)&&!he.deletable||(j.push(cr(he.id)),v&&le([he]),D&&de(he.id)))}Z.length&&e.hooks.edgesChange.trigger(Z),j.length&&e.hooks.nodesChange.trigger(j)},V=m=>{const v=m instanceof Function?m(e.edges):m,D=Array.isArray(v)?v:[v],N=[];for(const I of D){const j=typeof I=="string"?u(I):I;j&&(Ne(j.deletable)&&!j.deletable||N.push(dr(typeof I=="string"?I:I.id,j.source,j.target,j.sourceHandle,j.targetHandle)))}e.hooks.edgesChange.trigger(N)},P=(m,v,D=!0)=>Gh(m,v,e.edges,u,D,e.hooks.error.trigger),B=(m,v,D={replace:!1})=>{const N=u(m);if(!N)return;const I=typeof v=="function"?v(N):v;N.data=D.replace?I:{...N.data,...I}},M=m=>sr(m,e.nodes),C=m=>{const v=sr(m,e.edges);return wr(e.connectionLookup,v),v},k=(m,v,D={replace:!1})=>{const N=s(m);if(!N)return;const I=typeof v=="function"?v(N):v;D.replace?e.nodes.splice(e.nodes.indexOf(N),1,I):Object.assign(N,I)},A=(m,v,D={replace:!1})=>{const N=s(m);if(!N)return;const I=typeof v=="function"?v(N):v;N.data=D.replace?I:{...N.data,...I}},Y=(m,v,D=!1)=>{D?e.connectionClickStartHandle=m:e.connectionStartHandle=m,e.connectionEndHandle=null,e.connectionStatus=null,v&&(e.connectionPosition=v)},H=(m,v=null,D=null)=>{e.connectionStartHandle&&(e.connectionPosition=m,e.connectionEndHandle=v,e.connectionStatus=D)},L=(m,v)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,v?e.connectionClickStartHandle=null:e.connectionStartHandle=null},W=m=>{const v=Eh(m),D=v?null:Zt(m)?m:s(m.id);return!v&&!D?[null,null,v]:[v?m:Qo(D),D,v]},ie=(m,v=!0,D=e.nodes)=>{const[N,I,j]=W(m);if(!N)return[];const Z=[];for(const le of D||e.nodes){if(!j&&(le.id===I.id||!le.computedPosition))continue;const de=Qo(le),ve=Jo(de,N);(v&&ve>0||ve>=Number(N.width)*Number(N.height))&&Z.push(le)}return Z},oe=(m,v,D=!0)=>{const[N]=W(m);if(!N)return!1;const I=Jo(N,v);return D&&I>0||I>=Number(N.width)*Number(N.height)},ce=m=>{const{viewport:v,dimensions:D,d3Zoom:N,d3Selection:I,translateExtent:j}=e;if(!N||!I||!m.x&&!m.y)return!1;const Z=Gt.translate(v.x+m.x,v.y+m.y).scale(v.zoom),le=[[0,0],[D.width,D.height]],de=N.constrain()(Z,le,j),ve=e.viewport.x!==de.x||e.viewport.y!==de.y||e.viewport.zoom!==de.k;return N.transform(I,de),ve},te=m=>{const v=m instanceof Function?m(e):m,D=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Ne(v.defaultEdgeOptions)&&(e.defaultEdgeOptions=v.defaultEdgeOptions);const N=v.modelValue||v.nodes||v.edges?[]:void 0;N&&(v.modelValue&&N.push(...v.modelValue),v.nodes&&N.push(...v.nodes),v.edges&&N.push(...v.edges),E(N));const I=()=>{Ne(v.maxZoom)&&S(v.maxZoom),Ne(v.minZoom)&&O(v.minZoom),Ne(v.translateExtent)&&T(v.translateExtent)};for(const j of Object.keys(v)){const Z=j,le=v[Z];![...nv,...D].includes(Z)&&Ne(le)&&(e[Z]=le)}Lo(()=>e.d3Zoom).not.toBeNull().then(I),e.initialized||(e.initialized=!0)};return{updateNodePositions:c,updateNodeDimensions:d,setElements:E,setNodes:U,setEdges:R,addNodes:Q,addEdges:J,removeNodes:_,removeEdges:V,findNode:s,findEdge:u,updateEdge:P,updateEdgeData:B,updateNode:k,updateNodeData:A,applyEdgeChanges:C,applyNodeChanges:M,addSelectedElements:g,addSelectedNodes:h,addSelectedEdges:y,setMinZoom:O,setMaxZoom:S,setTranslateExtent:T,setNodeExtent:F,setPaneClickDistance:$,removeSelectedElements:w,removeSelectedNodes:p,removeSelectedEdges:b,startConnection:Y,updateConnection:H,endConnection:L,setInteractive:K,setState:te,getIntersectingNodes:ie,getIncomers:r,getOutgoers:a,getConnectedEdges:l,isNodeIntersecting:oe,panBy:ce,fitView:m=>o.value.fitView(m),zoomIn:m=>o.value.zoomIn(m),zoomOut:m=>o.value.zoomOut(m),zoomTo:(m,v)=>o.value.zoomTo(m,v),setViewport:(m,v)=>o.value.setViewport(m,v),setTransform:(m,v)=>o.value.setTransform(m,v),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(m,v,D)=>o.value.setCenter(m,v,D),fitBounds:(m,v)=>o.value.fitBounds(m,v),project:m=>o.value.project(m),screenToFlowCoordinate:m=>o.value.screenToFlowCoordinate(m),flowToScreenCoordinate:m=>o.value.flowToScreenCoordinate(m),toObject:()=>{const m=[],v=[];for(const D of e.nodes){const{computedPosition:N,handleBounds:I,selected:j,dimensions:Z,isParent:le,resizing:de,dragging:ve,events:he,...be}=D;m.push(be)}for(const D of e.edges){const{selected:N,sourceNode:I,targetNode:j,events:Z,...le}=D;v.push(le)}return JSON.parse(JSON.stringify({nodes:m,edges:v,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:m=>new Promise(v=>{const{nodes:D,edges:N,position:I,zoom:j,viewport:Z}=m;if(D&&U(D),N&&R(N),Z!=null&&Z.x&&(Z!=null&&Z.y)||I){const le=(Z==null?void 0:Z.x)||I[0],de=(Z==null?void 0:Z.y)||I[1],ve=(Z==null?void 0:Z.zoom)||j||e.viewport.zoom;return Lo(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:le,y:de,zoom:ve}).then(()=>{v(!0)})})}else v(!0)}),updateNodeInternals:i,viewportHelper:o,$reset:()=>{const m=Sl();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const v=Gt.translate(m.defaultViewport.x??0,m.defaultViewport.y??0).scale(It(m.defaultViewport.zoom??1,m.minZoom,m.maxZoom)),D=e.viewportRef.getBoundingClientRect(),N=[[0,0],[D.width,D.height]],I=e.d3Zoom.constrain()(v,N,m.translateExtent);e.d3Zoom.transform(e.d3Selection,I)}te(m)},$destroy:()=>{}}}const iv=["data-id","data-handleid","data-nodeid","data-handlepos"],rv={name:"Handle",compatConfig:{MODE:3}},cn=we({...rv,props:{id:{default:null},type:{},position:{default:()=>ne.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=Qr(e,["position","connectable","connectableStart","connectableEnd","id"]),o=fe(()=>n.type??"source"),i=fe(()=>n.isValidConnection??null),{connectionStartHandle:r,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:s,nodesConnectable:u,noDragClassName:c,noPanClassName:d}=Se(),{id:f,node:h,nodeEl:y,connectedEdges:g}=_l(),p=ae(),b=fe(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),w=fe(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),O=fe(()=>{var R,E,Q,J,_,V;return((R=r.value)==null?void 0:R.nodeId)===f&&((E=r.value)==null?void 0:E.handleId)===e.id&&((Q=r.value)==null?void 0:Q.type)===o.value||((J=l.value)==null?void 0:J.nodeId)===f&&((_=l.value)==null?void 0:_.handleId)===e.id&&((V=l.value)==null?void 0:V.type)===o.value}),S=fe(()=>{var R,E,Q;return((R=a.value)==null?void 0:R.nodeId)===f&&((E=a.value)==null?void 0:E.handleId)===e.id&&((Q=a.value)==null?void 0:Q.type)===o.value}),{handlePointerDown:T,handleClick:F}=bl({nodeId:f,handleId:e.id,isValidConnection:i,type:o}),$=z(()=>typeof e.connectable=="string"&&e.connectable==="single"?!g.value.some(R=>{const E=R[`${o.value}Handle`];return R[o.value]!==f?!1:E?E===e.id:!0}):typeof e.connectable=="number"?g.value.filter(R=>{const E=R[`${o.value}Handle`];return R[o.value]!==f?!1:E?E===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(h,g.value):Ne(e.connectable)?e.connectable:u.value);je(()=>{var R;if(!h.dimensions.width||!h.dimensions.height)return;const E=(R=h.handleBounds[o.value])==null?void 0:R.find(M=>M.id===e.id);if(!s.value||E)return;const Q=s.value.querySelector(".vue-flow__transformationpane");if(!y.value||!p.value||!Q||!e.id)return;const J=y.value.getBoundingClientRect(),_=p.value.getBoundingClientRect(),V=window.getComputedStyle(Q),{m22:P}=new window.DOMMatrixReadOnly(V.transform),B={id:e.id,position:e.position,x:(_.left-J.left)/P,y:(_.top-J.top)/P,...io(p.value)};h.handleBounds[o.value]=[...h.handleBounds[o.value]??[],B]}),Zr(()=>{const R=h.handleBounds[o.value];R&&(h.handleBounds[o.value]=R.filter(E=>E.id!==e.id))});function K(R){const E=Ei(R);$.value&&b.value&&(E&&R.button===0||!E)&&T(R)}function U(R){!f||!a.value&&!b.value||$.value&&F(R)}return t({handleClick:F,handlePointerDown:T,onClick:U,onPointerDown:K}),(R,E)=>(ue(),me("div",{ref_key:"handle",ref:p,"data-id":`${re(f)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":re(f),"data-handlepos":R.position,class:Dt(["vue-flow__handle",[`vue-flow__handle-${R.position}`,`vue-flow__handle-${e.id}`,re(c),re(d),o.value,{connectable:$.value,connecting:S.value,connectablestart:b.value,connectableend:w.value,connectionindicator:$.value&&(b.value&&!O.value||w.value&&O.value)}]]),onMousedown:K,onTouchstartPassive:K,onClick:U},[mt(R.$slots,"default",{id:R.id})],42,iv))}}),lo=function({sourcePosition:e=ne.Bottom,targetPosition:t=ne.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:r,data:a}){const l=a.label||n;return[ye(cn,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof l!="string"&&l?ye(l):ye("div",{innerHTML:l}),ye(cn,{type:"source",position:e,connectable:o,isValidConnection:r})]};lo.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];lo.inheritAttrs=!1;lo.compatConfig={MODE:3};const av=lo,so=function({targetPosition:e=ne.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:i}){const r=i.label||t;return[ye(cn,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof r!="string"&&r?ye(r):ye("div",{innerHTML:r})]};so.props=["targetPosition","label","isValidTargetPos","connectable","data"];so.inheritAttrs=!1;so.compatConfig={MODE:3};const lv=so,uo=function({sourcePosition:e=ne.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:i}){const r=i.label||t;return[typeof r!="string"&&r?ye(r):ye("div",{innerHTML:r}),ye(cn,{type:"source",position:e,connectable:n,isValidConnection:o})]};uo.props=["sourcePosition","label","isValidSourcePos","connectable","data"];uo.inheritAttrs=!1;uo.compatConfig={MODE:3};const sv=uo,uv=["transform"],cv=["width","height","x","y","rx","ry"],dv=["y"],fv={name:"EdgeText",compatConfig:{MODE:3}},hv=we({...fv,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=ae({x:0,y:0,width:0,height:0}),n=ae(null),o=z(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);je(i),se([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const r=n.value.getBBox();(r.width!==t.value.width||r.height!==t.value.height)&&(t.value=r)}return(r,a)=>(ue(),me("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[r.labelShowBg?(ue(),me("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*r.labelBgPadding[0]}px`,height:`${t.value.height+2*r.labelBgPadding[1]}px`,x:-r.labelBgPadding[0],y:-r.labelBgPadding[1],style:He(r.labelBgStyle),rx:r.labelBgBorderRadius,ry:r.labelBgBorderRadius},null,12,cv)):Fe("",!0),et("text",Ee(r.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:r.labelStyle}),[mt(r.$slots,"default",{},()=>[typeof r.label!="string"?(ue(),Be(Rs(r.label),{key:0})):(ue(),me(_e,{key:1},[Ue(vt(r.label),1)],64))])],16,dv)],8,uv))}}),vv=["id","d","marker-end","marker-start"],gv=["d","stroke-width"],mv={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},pn=we({...mv,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=Qr(e,["interactionWidth","labelShowBg"]),o=ae(null),i=ae(null),r=ae(null),a=$s();return t({pathEl:o,interactionEl:i,labelEl:r}),(l,s)=>(ue(),me(_e,null,[et("path",{id:l.id,ref_key:"pathEl",ref:o,d:l.path,style:He(n.style),class:Dt(["vue-flow__edge-path",re(a).class]),"marker-end":l.markerEnd,"marker-start":l.markerStart},null,14,vv),l.interactionWidth?(ue(),me("path",{key:0,ref_key:"interactionEl",ref:i,fill:"none",d:l.path,"stroke-width":l.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,gv)):Fe("",!0),l.label&&l.labelX&&l.labelY?(ue(),Be(hv,{key:1,ref_key:"labelEl",ref:r,x:l.labelX,y:l.labelY,label:l.label,"label-show-bg":l.labelShowBg,"label-bg-style":l.labelBgStyle,"label-bg-padding":l.labelBgPadding,"label-bg-border-radius":l.labelBgBorderRadius,"label-style":l.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):Fe("",!0)],64))}});function xl({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,r=n<e?n+i:n-i,a=Math.abs(o-t)/2,l=o<t?o+a:o-a;return[r,l,i,a]}function kl({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:r,targetControlX:a,targetControlY:l}){const s=e*.125+i*.375+a*.375+n*.125,u=t*.125+r*.375+l*.375+o*.125,c=Math.abs(s-e),d=Math.abs(u-t);return[s,u,c,d]}function kn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Er({pos:e,x1:t,y1:n,x2:o,y2:i,c:r}){let a,l;switch(e){case ne.Left:a=t-kn(t-o,r),l=n;break;case ne.Right:a=t+kn(o-t,r),l=n;break;case ne.Top:a=t,l=n-kn(n-i,r);break;case ne.Bottom:a=t,l=n+kn(i-n,r);break}return[a,l]}function xi(e){const{sourceX:t,sourceY:n,sourcePosition:o=ne.Bottom,targetX:i,targetY:r,targetPosition:a=ne.Top,curvature:l=.25}=e,[s,u]=Er({pos:o,x1:t,y1:n,x2:i,y2:r,c:l}),[c,d]=Er({pos:a,x1:i,y1:r,x2:t,y2:n,c:l}),[f,h,y,g]=kl({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:s,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${s},${u} ${c},${d} ${i},${r}`,f,h,y,g]}function Sr({pos:e,x1:t,y1:n,x2:o,y2:i}){let r,a;switch(e){case ne.Left:case ne.Right:r=.5*(t+o),a=n;break;case ne.Top:case ne.Bottom:r=t,a=.5*(n+i);break}return[r,a]}function Cl(e){const{sourceX:t,sourceY:n,sourcePosition:o=ne.Bottom,targetX:i,targetY:r,targetPosition:a=ne.Top}=e,[l,s]=Sr({pos:o,x1:t,y1:n,x2:i,y2:r}),[u,c]=Sr({pos:a,x1:i,y1:r,x2:t,y2:n}),[d,f,h,y]=kl({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:l,sourceControlY:s,targetControlX:u,targetControlY:c});return[`M${t},${n} C${l},${s} ${u},${c} ${i},${r}`,d,f,h,y]}const xr={[ne.Left]:{x:-1,y:0},[ne.Right]:{x:1,y:0},[ne.Top]:{x:0,y:-1},[ne.Bottom]:{x:0,y:1}};function pv({source:e,sourcePosition:t=ne.Bottom,target:n}){return t===ne.Left||t===ne.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function kr(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function yv({source:e,sourcePosition:t=ne.Bottom,target:n,targetPosition:o=ne.Top,center:i,offset:r}){const a=xr[t],l=xr[o],s={x:e.x+a.x*r,y:e.y+a.y*r},u={x:n.x+l.x*r,y:n.y+l.y*r},c=pv({source:s,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let h,y,g;const p={x:0,y:0},b={x:0,y:0},[w,O,S,T]=xl({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*l[d]===-1){y=i.x??w,g=i.y??O;const $=[{x:y,y:s.y},{x:y,y:u.y}],K=[{x:s.x,y:g},{x:u.x,y:g}];a[d]===f?h=d==="x"?$:K:h=d==="x"?K:$}else{const $=[{x:s.x,y:u.y}],K=[{x:u.x,y:s.y}];if(d==="x"?h=a.x===f?K:$:h=a.y===f?$:K,t===o){const J=Math.abs(e[d]-n[d]);if(J<=r){const _=Math.min(r-1,r-J);a[d]===f?p[d]=(s[d]>e[d]?-1:1)*_:b[d]=(u[d]>n[d]?-1:1)*_}}if(t!==o){const J=d==="x"?"y":"x",_=a[d]===l[J],V=s[J]>u[J],P=s[J]<u[J];(a[d]===1&&(!_&&V||_&&P)||a[d]!==1&&(!_&&P||_&&V))&&(h=d==="x"?$:K)}const U={x:s.x+p.x,y:s.y+p.y},R={x:u.x+b.x,y:u.y+b.y},E=Math.max(Math.abs(U.x-h[0].x),Math.abs(R.x-h[0].x)),Q=Math.max(Math.abs(U.y-h[0].y),Math.abs(R.y-h[0].y));E>=Q?(y=(U.x+R.x)/2,g=h[0].y):(y=h[0].x,g=(U.y+R.y)/2)}return[[e,{x:s.x+p.x,y:s.y+p.y},...h,{x:u.x+b.x,y:u.y+b.y},n],y,g,S,T]}function wv(e,t,n,o){const i=Math.min(kr(e,t)/2,kr(t,n)/2,o),{x:r,y:a}=t;if(e.x===r&&r===n.x||e.y===a&&a===n.y)return`L${r} ${a}`;if(e.y===a){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${r+i*u},${a}Q ${r},${a} ${r},${a+i*c}`}const l=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return`L ${r},${a+i*s}Q ${r},${a} ${r+i*l},${a}`}function ti(e){const{sourceX:t,sourceY:n,sourcePosition:o=ne.Bottom,targetX:i,targetY:r,targetPosition:a=ne.Top,borderRadius:l=5,centerX:s,centerY:u,offset:c=20}=e,[d,f,h,y,g]=yv({source:{x:t,y:n},sourcePosition:o,target:{x:i,y:r},targetPosition:a,center:{x:s,y:u},offset:c});return[d.reduce((b,w,O)=>{let S;return O>0&&O<d.length-1?S=wv(d[O-1],w,d[O+1],l):S=`${O===0?"M":"L"}${w.x} ${w.y}`,b+=S,b},""),f,h,y,g]}function bv(e){const{sourceX:t,sourceY:n,targetX:o,targetY:i}=e,[r,a,l,s]=xl({sourceX:t,sourceY:n,targetX:o,targetY:i});return[`M ${t},${n}L ${o},${i}`,r,a,l,s]}const _v=we({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=bv(e);return ye(pn,{path:n,labelX:o,labelY:i,...t,...e})}}}),Ev=_v,Sv=we({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=ti({...e,sourcePosition:e.sourcePosition??ne.Bottom,targetPosition:e.targetPosition??ne.Top});return ye(pn,{path:n,labelX:o,labelY:i,...t,...e})}}}),Nl=Sv,xv=we({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>ye(Nl,{...e,...t,borderRadius:0})}}),kv=xv,Cv=we({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=xi({...e,sourcePosition:e.sourcePosition??ne.Bottom,targetPosition:e.targetPosition??ne.Top});return ye(pn,{path:n,labelX:o,labelY:i,...t,...e})}}}),Nv=Cv,Iv=we({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Cl({...e,sourcePosition:e.sourcePosition??ne.Bottom,targetPosition:e.targetPosition??ne.Top});return ye(pn,{path:n,labelX:o,labelY:i,...t,...e})}}}),Pv=Iv,Mv={input:sv,default:av,output:lv},Vv={default:Nv,straight:Ev,step:kv,smoothstep:Nl,simplebezier:Pv};function Ov(e,t,n){const o=z(()=>g=>t.value.get(g)),i=z(()=>g=>n.value.get(g)),r=z(()=>{const g={...Vv,...e.edgeTypes},p=Object.keys(g);for(const b of e.edges)b.type&&!p.includes(b.type)&&(g[b.type]=b.type);return g}),a=z(()=>{const g={...Mv,...e.nodeTypes},p=Object.keys(g);for(const b of e.nodes)b.type&&!p.includes(b.type)&&(g[b.type]=b.type);return g}),l=z(()=>e.onlyRenderVisibleElements?cl(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),s=z(()=>{if(e.onlyRenderVisibleElements){const g=[];for(const p of e.edges){const b=t.value.get(p.source),w=t.value.get(p.target);$h({sourcePos:b.computedPosition||{x:0,y:0},targetPos:w.computedPosition||{x:0,y:0},sourceWidth:b.dimensions.width,sourceHeight:b.dimensions.height,targetWidth:w.dimensions.width,targetHeight:w.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&g.push(p)}return g}return e.edges}),u=z(()=>[...l.value,...s.value]),c=z(()=>{const g=[];for(const p of e.nodes)p.selected&&g.push(p);return g}),d=z(()=>{const g=[];for(const p of e.edges)p.selected&&g.push(p);return g}),f=z(()=>[...c.value,...d.value]),h=z(()=>{const g=[];for(const p of e.nodes)p.dimensions.width&&p.dimensions.height&&p.handleBounds!==void 0&&g.push(p);return g}),y=z(()=>l.value.length>0&&h.value.length===l.value.length);return{getNode:o,getEdge:i,getElements:u,getEdgeTypes:r,getNodeTypes:a,getEdges:s,getNodes:l,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:h,areNodesInitialized:y}}class _t{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=vn())==null?void 0:t.appContext.app,o=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??_t.instance;return _t.instance=o??new _t,n&&(n.config.globalProperties.$vueFlowStorage=_t.instance),_t.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=Sl(),i=Bs(o),r={};for(const[f,h]of Object.entries(i.hooks)){const y=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;r[y]=h.on}const a={};for(const[f,h]of Object.entries(i.hooks))a[f]=h.trigger;const l=z(()=>{const f=new Map;for(const h of i.nodes)f.set(h.id,h);return f}),s=z(()=>{const f=new Map;for(const h of i.edges)f.set(h.id,h);return f}),u=Ov(i,l,s),c=ov(i,l,s);c.setState({...i,...n});const d={...r,...u,...c,...Au(i),nodeLookup:l,edgeLookup:s,emits:a,id:t,vueFlowVersion:"1.39.1",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function Se(e){const t=_t.getInstance(),n=ea(),o=typeof e=="object",i=o?e:{id:e},r=i.id,a=r??(n==null?void 0:n.vueFlowId);let l;if(n){const s=lt(_r,null);typeof s<"u"&&s!==null&&(!a||s.id===a)&&(l=s)}if(l||a&&(l=t.get(a)),!l||a&&l.id!==a){const s=r??t.getId(),u=t.create(s,i);l=u,(n??Jr(!0)).run(()=>{se(u.applyDefault,(d,f,h)=>{const y=p=>{u.applyNodeChanges(p)},g=p=>{u.applyEdgeChanges(p)};d?(u.onNodesChange(y),u.onEdgesChange(g)):(u.hooks.value.nodesChange.off(y),u.hooks.value.edgesChange.off(g)),h(()=>{u.hooks.value.nodesChange.off(y),u.hooks.value.edgesChange.off(g)})},{immediate:!0}),Jn(()=>{if(l){const d=t.get(l.id);d?d.$destroy():ro(`No store instance found for id ${l.id} in storage.`)}})})}else o&&l.setState(i);if(n&&(pt(_r,l),n.vueFlowId=l.id),o){const s=vn();(s==null?void 0:s.type.name)!=="VueFlow"&&l.emits.error(new Pe(Ie.USEVUEFLOW_OPTIONS))}return l}function Tv(e){const{emits:t,dimensions:n}=Se();let o;je(()=>{const i=e.value,r=()=>{if(!i)return;const a=io(i);(a.width===0||a.height===0)&&t.error(new Pe(Ie.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:a.width||500,height:a.height||500}};r(),window.addEventListener("resize",r),i&&(o=new ResizeObserver(()=>r()),o.observe(i)),ri(()=>{window.removeEventListener("resize",r),o&&i&&o.unobserve(i)})})}const $v={name:"UserSelection",compatConfig:{MODE:3}},Av=we({...$v,props:{userSelectionRect:{}},setup(e){return(t,n)=>(ue(),me("div",{class:"vue-flow__selection vue-flow__container",style:He({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),Dv=["tabIndex"],Rv={name:"NodesSelection",compatConfig:{MODE:3}},Bv=we({...Rv,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:i,disableKeyboardA11y:r,userSelectionActive:a}=Se(),l=El(),s=ae(null),u=wl({el:s,onStart(y){t.selectionDragStart(y)},onDrag(y){t.selectionDrag(y)},onStop(y){t.selectionDragStop(y)}});je(()=>{var y;r.value||(y=s.value)==null||y.focus({preventScroll:!0})});const c=z(()=>ul(o.value)),d=z(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function f(y){t.selectionContextMenu({event:y,nodes:o.value})}function h(y){r||At[y.key]&&l({x:At[y.key].x,y:At[y.key].y},y.shiftKey)}return(y,g)=>!re(a)&&c.value.width&&c.value.height?(ue(),me("div",{key:0,class:Dt(["vue-flow__nodesselection vue-flow__container",re(i)]),style:He({transform:`translate(${re(n).x}px,${re(n).y}px) scale(${re(n).zoom})`})},[et("div",{ref_key:"el",ref:s,class:Dt([{dragging:re(u)},"vue-flow__nodesselection-rect"]),style:He(d.value),tabIndex:re(r)?void 0:-1,onContextmenu:f,onKeydown:h},null,46,Dv)],6)):Fe("",!0)}});function Fv(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const zv={name:"Pane",compatConfig:{MODE:3}},Lv=we({...zv,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:i,userSelectionActive:r,removeSelectedElements:a,panOnDrag:l,userSelectionRect:s,elementsSelectable:u,nodesSelectionActive:c,getSelectedEdges:d,getSelectedNodes:f,removeNodes:h,removeEdges:y,selectionMode:g,deleteKeyCode:p,multiSelectionKeyCode:b,multiSelectionActive:w,edgeLookup:O,nodeLookup:S}=Se(),T=ae(null),F=ae(0),$=ae(0),K=ae(),U=ae(new Map),R=fe(()=>u.value&&(e.isSelecting||r.value));let E=!1,Q=!1;const J=en(p,{actInsideInputWithModifier:!1}),_=en(b);se(J,H=>{H&&(h(f.value),y(d.value),c.value=!1)}),se(_,H=>{w.value=H});function V(H,L){return W=>{W.target===L&&(H==null||H(W))}}function P(){r.value=!1,s.value=null,F.value=0,$.value=0}function B(H){if(E){E=!1;return}i.paneClick(H),a(),c.value=!1}function M(H){var L;if(Array.isArray(l.value)&&((L=l.value)!=null&&L.includes(2))){H.preventDefault();return}i.paneContextMenu(H)}function C(H){i.paneScroll(H)}function k(H){var L,W,ie,oe,ce;if(K.value=(L=t.value)==null?void 0:L.getBoundingClientRect(),(ie=(W=H.target)==null?void 0:W.setPointerCapture)==null||ie.call(W,H.pointerId),!u.value||!e.isSelecting||H.button!==0||H.target!==T.value||!K.value)return;const{x:te,y:G}=Fv(H,K.value);Q=!0,E=!1,U.value=new Map;for(const[X,q]of O.value)U.value.set(q.source,((oe=U.value.get(q.source))==null?void 0:oe.add(X))||new Set([X])),U.value.set(q.target,((ce=U.value.get(q.target))==null?void 0:ce.add(X))||new Set([X]));a(),s.value={width:0,height:0,startX:te,startY:G,x:te,y:G},r.value=!0,c.value=!1,i.selectionStart(H)}function A(H){if(!K.value||!s.value)return;E=!0;const{x:L,y:W}=gt(H,K.value),{startX:ie=0,startY:oe=0}=s.value,ce={startX:ie,startY:oe,x:L<ie?L:ie,y:W<oe?W:oe,width:Math.abs(L-ie),height:Math.abs(W-oe)},te=cl(n.value,ce,o.value,g.value===bi.Partial,!0),G=new Set,X=new Set;for(const q of te){X.add(q.id);const m=U.value.get(q.id);if(m)for(const v of m)G.add(v)}if(F.value!==X.size){F.value=X.size;const q=ft(S.value,X,!0);i.nodesChange(q)}if($.value!==G.size){$.value=G.size;const q=ft(O.value,G);i.edgesChange(q)}s.value=ce,r.value=!0,c.value=!1}function Y(H){var L;H.button!==0||!Q||((L=H.target)==null||L.releasePointerCapture(H.pointerId),!r.value&&s.value&&H.target===T.value&&B(H),F.value>0&&(c.value=!0),P(),i.selectionEnd(H),e.selectionKeyPressed&&(E=!1),Q=!1)}return(H,L)=>(ue(),me("div",{ref_key:"container",ref:T,class:Dt(["vue-flow__pane vue-flow__container",{selection:H.isSelecting}]),onClick:L[0]||(L[0]=W=>R.value?void 0:V(B,T.value)(W)),onContextmenu:L[1]||(L[1]=W=>V(M,T.value)(W)),onWheelPassive:L[2]||(L[2]=W=>V(C,T.value)(W)),onPointerenter:L[3]||(L[3]=W=>R.value?void 0:re(i).paneMouseEnter(W)),onPointerdown:L[4]||(L[4]=W=>R.value?k(W):re(i).paneMouseMove(W)),onPointermove:L[5]||(L[5]=W=>R.value?A(W):re(i).paneMouseMove(W)),onPointerup:L[6]||(L[6]=W=>R.value?Y(W):void 0),onPointerleave:L[7]||(L[7]=W=>re(i).paneMouseLeave(W))},[mt(H.$slots,"default"),re(r)&&re(s)?(ue(),Be(Av,{key:0,"user-selection-rect":re(s)},null,8,["user-selection-rect"])):Fe("",!0),re(c)&&re(f).length?(ue(),Be(Bv,{key:1})):Fe("",!0)],34))}}),Gv={name:"Transform",compatConfig:{MODE:3}},Hv=we({...Gv,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=Se(),i=z(()=>n.value?!o.value:!1),r=z(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(a,l)=>(ue(),me("div",{class:"vue-flow__transformationpane vue-flow__container",style:He({transform:r.value,opacity:i.value?0:void 0})},[mt(a.$slots,"default")],4))}}),Yv={name:"Viewport",compatConfig:{MODE:3}},Uv=we({...Yv,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:i,zoomActivationKeyCode:r,selectionKeyCode:a,panActivationKeyCode:l,panOnScroll:s,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:f,zoomOnPinch:h,zoomOnScroll:y,preventScrolling:g,noWheelClassName:p,noPanClassName:b,emits:w,connectionStartHandle:O,userSelectionActive:S,paneDragging:T,d3Zoom:F,d3Selection:$,d3ZoomHandler:K,viewport:U,viewportRef:R,paneClickDistance:E}=Se();Tv(R);const Q=ae(!1),J=ae(!1);let _=null,V=!1,P=0,B={x:0,y:0,zoom:0};const M=en(l),C=en(a),k=en(r),A=fe(()=>M.value||d.value),Y=fe(()=>M.value||s.value),H=fe(()=>C.value||a.value===!0&&A.value!==!0);je(()=>{if(!R.value){ro("Viewport element is missing");return}const te=R.value,G=te.getBoundingClientRect(),X=ph().clickDistance(E.value).scaleExtent([t.value,n.value]).translateExtent(i.value),q=Xe(te).call(X),m=q.on("wheel.zoom"),v=Gt.translate(o.value.x??0,o.value.y??0).scale(It(o.value.zoom??1,t.value,n.value)),D=[[0,0],[G.width,G.height]],N=X.constrain()(v,D,i.value);X.transform(q,N),X.wheelDelta(W),F.value=X,$.value=q,K.value=m,U.value={x:N.x,y:N.y,zoom:N.k},X.on("start",I=>{var j;if(!I.sourceEvent)return null;P=I.sourceEvent.button,Q.value=!0;const Z=oe(I.transform);((j=I.sourceEvent)==null?void 0:j.type)==="mousedown"&&(T.value=!0),B=Z,w.viewportChangeStart(Z),w.moveStart({event:I,flowTransform:Z})}),X.on("end",I=>{if(!I.sourceEvent)return null;if(Q.value=!1,T.value=!1,L(A.value,P??0)&&!V&&w.paneContextMenu(I.sourceEvent),V=!1,ie(B,I.transform)){const j=oe(I.transform);B=j,w.viewportChangeEnd(j),w.moveEnd({event:I,flowTransform:j})}}),X.filter(I=>{var j,Z,le;const de=k.value||y.value,ve=h.value&&I.ctrlKey,he=I.button;if((A.value===!0||Array.isArray(A.value)&&A.value.includes(1))&&he===1&&I.type==="mousedown"&&((j=I.target)!=null&&j.closest(".vue-flow__node")||(Z=I.target)!=null&&Z.closest(".vue-flow__edge")))return!0;if(!A.value&&!de&&!Y.value&&!f.value&&!h.value||S.value||!f.value&&I.type==="dblclick"||ce(I,p.value)&&I.type==="wheel"||ce(I,b.value)&&(I.type!=="wheel"||Y.value&&I.type==="wheel"&&!k.value)||!h.value&&I.ctrlKey&&I.type==="wheel"||!de&&!Y.value&&!ve&&I.type==="wheel")return!1;if(!h&&I.type==="touchstart"&&((le=I.touches)==null?void 0:le.length)>1)return I.preventDefault(),!1;if(!A.value&&(I.type==="mousedown"||I.type==="touchstart")||Array.isArray(A.value)&&!A.value.includes(he)&&(I.type==="mousedown"||I.type==="touchstart"))return!1;const be=Array.isArray(A.value)&&A.value.includes(he)||!he||he<=1;return(!I.ctrlKey||I.type==="wheel")&&be}),se([S,A],()=>{S.value&&!Q.value?X.on("zoom",null):S.value||X.on("zoom",I=>{U.value={x:I.transform.x,y:I.transform.y,zoom:I.transform.k};const j=oe(I.transform);V=L(A.value,P??0),w.viewportChange(j),w.move({event:I,flowTransform:j})})},{immediate:!0}),se([S,Y,u,k,h,g,p],()=>{Y.value&&!k.value&&!S.value?q.on("wheel.zoom",I=>{if(ce(I,p.value))return!1;const j=k.value||y.value,Z=h.value&&I.ctrlKey;if(!(!g.value||Y.value||j||Z))return!1;I.preventDefault(),I.stopImmediatePropagation();const de=q.property("__zoom").k||1,ve=Hn();if(I.ctrlKey&&h.value&&ve){const Ps=Qe(I),Ms=W(I),Vs=de*2**Ms;X.scaleTo(q,Vs,Ps,I);return}const he=I.deltaMode===1?20:1;let be=u.value===Jt.Vertical?0:I.deltaX*he,st=u.value===Jt.Horizontal?0:I.deltaY*he;!ve&&I.shiftKey&&u.value!==Jt.Vertical&&!be&&st&&(be=st,st=0),X.translateBy(q,-(be/de)*c.value,-(st/de)*c.value);const Mt=oe(q.property("__zoom"));_&&clearTimeout(_),J.value?(w.move({event:I,flowTransform:Mt}),w.viewportChange(Mt),_=setTimeout(()=>{w.moveEnd({event:I,flowTransform:Mt}),w.viewportChangeEnd(Mt),J.value=!1},150)):(J.value=!0,w.moveStart({event:I,flowTransform:Mt}),w.viewportChangeStart(Mt))},{passive:!1}):typeof m<"u"&&q.on("wheel.zoom",function(I,j){const Z=!g.value&&I.type==="wheel"&&!I.ctrlKey,le=k.value||y.value,de=h.value&&I.ctrlKey;if(!le&&!s.value&&!de&&I.type==="wheel"||Z||ce(I,p.value))return null;I.preventDefault(),m.call(this,I,j)},{passive:!1})},{immediate:!0})});function L(te,G){return G===2&&Array.isArray(te)&&te.includes(2)}function W(te){const G=te.ctrlKey&&Hn()?10:1;return-te.deltaY*(te.deltaMode===1?.05:te.deltaMode?1:.002)*G}function ie(te,G){return te.x!==G.x&&!Number.isNaN(G.x)||te.y!==G.y&&!Number.isNaN(G.y)||te.zoom!==G.k&&!Number.isNaN(G.k)}function oe(te){return{x:te.x,y:te.y,zoom:te.k}}function ce(te,G){return te.target.closest(`.${G}`)}return(te,G)=>(ue(),me("div",{ref_key:"viewportRef",ref:R,class:"vue-flow__viewport vue-flow__container"},[x(Lv,{"is-selecting":H.value,"selection-key-pressed":re(C),class:Dt({connecting:!!re(O),dragging:re(T),draggable:A.value})},{default:pe(()=>[x(Hv,null,{default:pe(()=>[mt(te.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Xv=["id"],Kv=["id"],Wv=["id"],jv={name:"A11yDescriptions",compatConfig:{MODE:3}},qv=we({...jv,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Se();return(i,r)=>(ue(),me(_e,null,[et("div",{id:`${re(el)}-${re(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+vt(re(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Xv),et("div",{id:`${re(tl)}-${re(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Kv),re(n)?Fe("",!0):(ue(),me("div",{key:0,id:`${re(_h)}-${re(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},vt(re(o)),9,Wv))],64))}});function Zv(){const e=Se();se(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function Qv(e,t,n){return n===ne.Left?e-t:n===ne.Right?e+t:e}function Jv(e,t,n){return n===ne.Top?e-t:n===ne.Bottom?e+t:e}const ki=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=ne.Top,type:i}){return ye("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:Qv(t,e,o),cy:Jv(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};ki.props=["radius","centerX","centerY","position","type"];ki.compatConfig={MODE:3};const Cr=ki,eg=we({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:r,nodesSelectionActive:a,noPanClassName:l,getEdgeTypes:s,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:f,multiSelectionActive:h,disableKeyboardA11y:y,elementsSelectable:g,edgesUpdatable:p,edgesFocusable:b}=Se(),w=z(()=>c(e.id)),O=Xh(w.value,r),S=lt(ao),T=vn(),F=ae(!1),$=ae(!1),K=ae(""),U=ae(null),R=ae("source"),E=ae(null),Q=fe(()=>typeof w.value.selectable>"u"?g.value:w.value.selectable),J=fe(()=>typeof w.value.updatable>"u"?p.value:w.value.updatable),_=fe(()=>typeof w.value.focusable>"u"?b.value:w.value.focusable);pt(Hh,e.id),pt(Yh,E);const V=z(()=>w.value.class instanceof Function?w.value.class(w.value):w.value.class),P=z(()=>w.value.style instanceof Function?w.value.style(w.value):w.value.style),B=z(()=>{const m=w.value.type||"default",v=S==null?void 0:S[`edge-${m}`];if(v)return v;let D=w.value.template??s.value[m];if(typeof D=="string"&&T){const N=Object.keys(T.appContext.components);N&&N.includes(m)&&(D=Rt(m,!1))}return D&&typeof D!="string"?D:(r.error(new Pe(Ie.EDGE_TYPE_MISSING,D)),!1)}),{handlePointerDown:M}=bl({nodeId:K,handleId:U,type:R,isValidConnection:f,edgeUpdaterType:R,onEdgeUpdate:A,onEdgeUpdateEnd:Y});return()=>{const m=d(w.value.source),v=d(w.value.target),D="pathOptions"in w.value?w.value.pathOptions:{};if(!m&&!v)return r.error(new Pe(Ie.EDGE_SOURCE_TARGET_MISSING,w.value.id,w.value.source,w.value.target)),null;if(!m)return r.error(new Pe(Ie.EDGE_SOURCE_MISSING,w.value.id,w.value.source)),null;if(!v)return r.error(new Pe(Ie.EDGE_TARGET_MISSING,w.value.id,w.value.target)),null;if(!w.value||w.value.hidden||m.hidden||v.hidden)return null;let N;o.value===Nt.Strict?N=m.handleBounds.source:N=[...m.handleBounds.source||[],...m.handleBounds.target||[]];const I=hr(N,w.value.sourceHandle);let j;o.value===Nt.Strict?j=v.handleBounds.target:j=[...v.handleBounds.target||[],...v.handleBounds.source||[]];const Z=hr(j,w.value.targetHandle),le=(I==null?void 0:I.position)||ne.Bottom,de=(Z==null?void 0:Z.position)||ne.Top,{x:ve,y:he}=Gn(m,I,le),{x:be,y:st}=Gn(v,Z,de);return w.value.sourceX=ve,w.value.sourceY=he,w.value.targetX=be,w.value.targetY=st,ye("g",{ref:E,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${B.value===!1?"default":w.value.type||"default"}`,l.value,V.value,{updating:F.value,selected:w.value.selected,animated:w.value.animated,inactive:!Q.value}],onClick:L,onContextmenu:W,onDblclick:ie,onMouseenter:oe,onMousemove:ce,onMouseleave:te,onKeyDown:_.value?q:void 0,tabIndex:_.value?0:void 0,"aria-label":w.value.ariaLabel===null?void 0:w.value.ariaLabel||`Edge from ${w.value.source} to ${w.value.target}`,"aria-describedby":_.value?`${tl}-${t}`:void 0,role:_.value?"button":"img"},[$.value?null:ye(B.value===!1?s.value.default:B.value,{id:e.id,sourceNode:m,targetNode:v,source:w.value.source,target:w.value.target,type:w.value.type,updatable:J.value,selected:w.value.selected,animated:w.value.animated,label:w.value.label,labelStyle:w.value.labelStyle,labelShowBg:w.value.labelShowBg,labelBgStyle:w.value.labelBgStyle,labelBgPadding:w.value.labelBgPadding,labelBgBorderRadius:w.value.labelBgBorderRadius,data:w.value.data,events:{...w.value.events,...O.on},style:P.value,markerStart:`url('#${un(w.value.markerStart,t)}')`,markerEnd:`url('#${un(w.value.markerEnd,t)}')`,sourcePosition:le,targetPosition:de,sourceX:ve,sourceY:he,targetX:be,targetY:st,sourceHandleId:w.value.sourceHandle,targetHandleId:w.value.targetHandle,interactionWidth:w.value.interactionWidth,...D}),[J.value==="source"||J.value===!0?[ye("g",{onMousedown:G,onMouseenter:C,onMouseout:k},ye(Cr,{position:le,centerX:ve,centerY:he,radius:i.value,type:"source","data-type":"source"}))]:null,J.value==="target"||J.value===!0?[ye("g",{onMousedown:X,onMouseenter:C,onMouseout:k},ye(Cr,{position:de,centerX:be,centerY:st,radius:i.value,type:"target","data-type":"target"}))]:null]])};function C(){F.value=!0}function k(){F.value=!1}function A(m,v){O.emit.update({event:m,edge:w.value,connection:v})}function Y(m){O.emit.updateEnd({event:m,edge:w.value}),$.value=!1}function H(m,v){m.button===0&&($.value=!0,K.value=v?w.value.target:w.value.source,U.value=(v?w.value.targetHandle:w.value.sourceHandle)??"",R.value=v?"target":"source",O.emit.updateStart({event:m,edge:w.value}),M(m))}function L(m){var v;const D={event:m,edge:w.value};Q.value&&(a.value=!1,w.value.selected&&h.value?(u([w.value]),(v=E.value)==null||v.blur()):n([w.value])),O.emit.click(D)}function W(m){O.emit.contextMenu({event:m,edge:w.value})}function ie(m){O.emit.doubleClick({event:m,edge:w.value})}function oe(m){O.emit.mouseEnter({event:m,edge:w.value})}function ce(m){O.emit.mouseMove({event:m,edge:w.value})}function te(m){O.emit.mouseLeave({event:m,edge:w.value})}function G(m){H(m,!0)}function X(m){H(m,!1)}function q(m){var v;!y.value&&nl.includes(m.key)&&Q.value&&(m.key==="Escape"?((v=E.value)==null||v.blur(),u([c(e.id)])):n([c(e.id)]))}}}),tg=eg,ng={[ne.Left]:ne.Right,[ne.Right]:ne.Left,[ne.Top]:ne.Bottom,[ne.Bottom]:ne.Top},og=we({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:i,connectionPosition:r,connectionLineType:a,connectionLineStyle:l,connectionLineOptions:s,connectionStatus:u,viewport:c,findNode:d}=Se(),f=(e=lt(ao))==null?void 0:e["connection-line"],h=z(()=>{var w;return d((w=o.value)==null?void 0:w.nodeId)}),y=z(()=>{var w;return d((w=i.value)==null?void 0:w.nodeId)??null}),g=z(()=>({x:(r.value.x-c.value.x)/c.value.zoom,y:(r.value.y-c.value.y)/c.value.zoom})),p=z(()=>s.value.markerStart?`url(#${un(s.value.markerStart,t)})`:""),b=z(()=>s.value.markerEnd?`url(#${un(s.value.markerEnd,t)})`:"");return()=>{var w,O,S,T;if(!h.value||!o.value)return null;const F=o.value.handleId,$=o.value.type,K=h.value.handleBounds;let U=K==null?void 0:K[$];if(n.value===Nt.Loose&&(U=U||(K==null?void 0:K[$==="source"?"target":"source"])),!U)return null;const R=(F?U.find(C=>C.id===F):U[0])??null,E=(R==null?void 0:R.position)||ne.Top,{x:Q,y:J}=Gn(h.value,R,E);let _=null;y.value&&((w=i.value)!=null&&w.handleId)&&(n.value===Nt.Strict?_=((O=y.value.handleBounds[$==="source"?"target":"source"])==null?void 0:O.find(C=>{var k;return C.id===((k=i.value)==null?void 0:k.handleId)}))||null:_=((S=[...y.value.handleBounds.source||[],...y.value.handleBounds.target||[]])==null?void 0:S.find(C=>{var k;return C.id===((k=i.value)==null?void 0:k.handleId)}))||null);const V=((T=i.value)==null?void 0:T.position)??(E?ng[E]:null);if(!E||!V)return null;const P=a.value??s.value.type??bt.Bezier;let B="";const M={sourceX:Q,sourceY:J,sourcePosition:E,targetX:g.value.x,targetY:g.value.y,targetPosition:V};return P===bt.Bezier?[B]=xi(M):P===bt.Step?[B]=ti({...M,borderRadius:0}):P===bt.SmoothStep?[B]=ti(M):P===bt.SimpleBezier?[B]=Cl(M):B=`M${Q},${J} ${g.value.x},${g.value.y}`,ye("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},ye("g",{class:"vue-flow__connection"},f?ye(f,{sourceX:Q,sourceY:J,sourcePosition:E,targetX:g.value.x,targetY:g.value.y,targetPosition:V,sourceNode:h.value,sourceHandle:R,targetNode:y.value,targetHandle:_,markerEnd:b.value,markerStart:p.value,connectionStatus:u.value}):ye("path",{d:B,class:[s.value.class,u,"vue-flow__connection-path"],style:{...l.value,...s.value.style},"marker-end":b.value,"marker-start":p.value})))}}}),ig=og,rg=["id","markerWidth","markerHeight","markerUnits","orient"],ag={name:"MarkerType",compatConfig:{MODE:3}},lg=we({...ag,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(ue(),me("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===re(qo).ArrowClosed?(ue(),me("polyline",{key:0,style:He({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):Fe("",!0),t.type===re(qo).Arrow?(ue(),me("polyline",{key:1,style:He({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):Fe("",!0)],8,rg))}}),sg={class:"vue-flow__marker vue-flow__container"},ug={name:"MarkerDefinitions",compatConfig:{MODE:3}},cg=we({...ug,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:i}=Se(),r=z(()=>{const a=new Set,l=[],s=u=>{if(u){const c=un(u,t);a.has(c)||(typeof u=="object"?l.push({...u,id:c,color:u.color||i.value}):l.push({id:c,color:i.value,type:u}),a.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])s(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])s(c);return l.sort((u,c)=>u.id.localeCompare(c.id))});return(a,l)=>(ue(),me("svg",sg,[et("defs",null,[(ue(!0),me(_e,null,Un(r.value,s=>(ue(),Be(lg,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,"stroke-width":s.strokeWidth,orient:s.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),dg={name:"Edges",compatConfig:{MODE:3}},fg=we({...dg,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=Se();return(i,r)=>(ue(),me(_e,null,[x(cg),(ue(!0),me(_e,null,Un(re(n),a=>(ue(),me("svg",{key:a.id,class:"vue-flow__edges vue-flow__container",style:He({zIndex:re(Ah)(a,re(t),re(o))})},[x(re(tg),{id:a.id},null,8,["id"])],4))),128)),x(re(ig))],64))}}),hg=we({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:i,multiSelectionActive:r,emits:a,removeSelectedNodes:l,addSelectedNodes:s,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:f,elevateNodesOnSelect:h,disableKeyboardA11y:y,ariaLiveMessage:g,snapToGrid:p,snapGrid:b,nodeDragThreshold:w,nodesDraggable:O,elementsSelectable:S,nodesConnectable:T,nodesFocusable:F}=Se(),$=ae(null);pt(yl,$),pt(pl,e.id);const K=lt(ao),U=vn(),R=El(),{node:E,parentNode:Q}=_l(e.id),J=fe(()=>typeof E.draggable>"u"?O.value:E.draggable),_=fe(()=>typeof E.selectable>"u"?S.value:E.selectable),V=fe(()=>typeof E.connectable>"u"?T.value:E.connectable),P=fe(()=>typeof E.focusable>"u"?F.value:E.focusable),B=fe(()=>!!E.dimensions.width&&!!E.dimensions.height),M=z(()=>{const v=E.type||"default",D=K==null?void 0:K[`node-${v}`];if(D)return D;let N=E.template||d.value[v];if(typeof N=="string"&&U){const I=Object.keys(U.appContext.components);I&&I.includes(v)&&(N=Rt(v,!1))}return N&&typeof N!="string"?N:(a.error(new Pe(Ie.NODE_TYPE_MISSING,N)),!1)}),{emit:C,on:k}=qh(E,a),A=wl({id:e.id,el:$,disabled:()=>!J.value,selectable:_,dragHandle:()=>E.dragHandle,onStart(v){C.dragStart(v)},onDrag(v){C.drag(v)},onStop(v){C.dragStop(v)},onClick(v){q(v)}}),Y=z(()=>E.class instanceof Function?E.class(E):E.class),H=z(()=>{const v=(E.style instanceof Function?E.style(E):E.style)||{},D=E.width instanceof Function?E.width(E):E.width,N=E.height instanceof Function?E.height(E):E.height;return D&&(v.width=typeof D=="string"?D:`${D}px`),N&&(v.height=typeof N=="string"?N:`${N}px`),v}),L=fe(()=>Number(E.zIndex??H.value.zIndex??0));return c(v=>{(v.includes(e.id)||!v.length)&&ie()}),je(()=>{se(()=>E.hidden,(v=!1,D,N)=>{!v&&$.value&&(e.resizeObserver.observe($.value),N(()=>{$.value&&e.resizeObserver.unobserve($.value)}))},{immediate:!0,flush:"post"})}),se([()=>E.type,()=>E.sourcePosition,()=>E.targetPosition],()=>{Me(()=>{u([{id:e.id,nodeElement:$.value,forceUpdate:!0}])})}),se([()=>E.position.x,()=>E.position.y,()=>{var v;return(v=Q.value)==null?void 0:v.computedPosition.x},()=>{var v;return(v=Q.value)==null?void 0:v.computedPosition.y},()=>{var v;return(v=Q.value)==null?void 0:v.computedPosition.z},L,()=>E.selected,()=>E.dimensions.height,()=>E.dimensions.width,()=>{var v;return(v=Q.value)==null?void 0:v.dimensions.height},()=>{var v;return(v=Q.value)==null?void 0:v.dimensions.width}],([v,D,N,I,j,Z])=>{const le={x:v,y:D,z:Z+(h.value&&E.selected?1e3:0)};typeof N<"u"&&typeof I<"u"?E.computedPosition=Ph({x:N,y:I,z:j},le):E.computedPosition=le},{flush:"post",immediate:!0}),se([()=>E.extent,f],([v,D],[N,I])=>{(v!==N||D!==I)&&W()}),E.extent==="parent"||typeof E.extent=="object"&&"range"in E.extent&&E.extent.range==="parent"?Lo(()=>B).toBe(!0).then(W):W(),()=>E.hidden?null:ye("div",{ref:$,"data-id":E.id,class:["vue-flow__node",`vue-flow__node-${M.value===!1?"default":E.type||"default"}`,{[n.value]:J.value,dragging:A==null?void 0:A.value,draggable:J.value,selected:E.selected,selectable:_.value,parent:E.isParent},Y.value],style:{visibility:B.value?"visible":"hidden",zIndex:E.computedPosition.z??L.value,transform:`translate(${E.computedPosition.x}px,${E.computedPosition.y}px)`,pointerEvents:_.value||J.value?"all":"none",...H.value},tabIndex:P.value?0:void 0,role:P.value?"button":void 0,"aria-describedby":y.value?void 0:`${el}-${t}`,"aria-label":E.ariaLabel,onMouseenter:oe,onMousemove:ce,onMouseleave:te,onContextmenu:G,onClick:q,onDblclick:X,onKeydown:m},[ye(M.value===!1?d.value.default:M.value,{id:E.id,type:E.type,data:E.data,events:{...E.events,...k},selected:E.selected,resizing:E.resizing,dragging:A.value,connectable:V.value,position:E.computedPosition,dimensions:E.dimensions,isValidTargetPos:E.isValidTargetPos,isValidSourcePos:E.isValidSourcePos,parent:E.parentNode,parentNodeId:E.parentNode,zIndex:E.computedPosition.z??L.value,targetPosition:E.targetPosition,sourcePosition:E.sourcePosition,label:E.label,dragHandle:E.dragHandle,onUpdateNodeInternals:ie})]);function W(){const v=E.computedPosition;p.value&&(v.x=b.value[0]*Math.round(v.x/b.value[0]),v.y=b.value[1]*Math.round(v.y/b.value[1]));const{computedPosition:D,position:N}=_i(E,v,a.error,f.value,Q.value);(E.computedPosition.x!==D.x||E.computedPosition.y!==D.y)&&(E.computedPosition={...E.computedPosition,...D}),(E.position.x!==N.x||E.position.y!==N.y)&&(E.position=N)}function ie(){$.value&&u([{id:e.id,nodeElement:$.value,forceUpdate:!0}])}function oe(v){A!=null&&A.value||C.mouseEnter({event:v,node:E})}function ce(v){A!=null&&A.value||C.mouseMove({event:v,node:E})}function te(v){A!=null&&A.value||C.mouseLeave({event:v,node:E})}function G(v){return C.contextMenu({event:v,node:E})}function X(v){return C.doubleClick({event:v,node:E})}function q(v){_.value&&(!o.value||!J.value||w.value>0)&&ei(E,r.value,s,l,i,!1,$.value),C.click({event:v,node:E})}function m(v){if(!(Zo(v)||y.value))if(nl.includes(v.key)&&_.value){const D=v.key==="Escape";ei(E,r.value,s,l,i,D,$.value)}else J.value&&E.selected&&At[v.key]&&(g.value=`Moved selected node ${v.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~E.position.x}, y: ${~~E.position.y}`,R({x:At[v.key].x,y:At[v.key].y},v.shiftKey))}}}),vg=hg,gg={height:"0",width:"0"},mg={name:"EdgeLabelRenderer",compatConfig:{MODE:3}},pg=we({...mg,setup(e){const{viewportRef:t}=Se(),n=fe(()=>{var o;return(o=t.value)==null?void 0:o.getElementsByClassName("vue-flow__edge-labels")[0]});return(o,i)=>(ue(),me("svg",null,[(ue(),me("foreignObject",gg,[(ue(),Be(As,{to:n.value,disabled:!n.value},[mt(o.$slots,"default")],8,["to","disabled"]))]))]))}});function yg(e={includeHiddenNodes:!1}){const{nodes:t}=Se();return z(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const wg={class:"vue-flow__nodes vue-flow__container"},bg={name:"Nodes",compatConfig:{MODE:3}},_g=we({...bg,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=Se(),i=yg(),r=ae();return se(i,a=>{a&&Me(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),je(()=>{r.value=new ResizeObserver(a=>{const l=a.map(s=>({id:s.target.getAttribute("data-id"),nodeElement:s.target,forceUpdate:!0}));Me(()=>n(l))})}),ri(()=>{var a;return(a=r.value)==null?void 0:a.disconnect()}),(a,l)=>(ue(),me("div",wg,[r.value?(ue(!0),me(_e,{key:0},Un(re(t),(s,u,c,d)=>{const f=[s.id];if(d&&d.key===s.id&&Fs(d,f))return d;const h=(ue(),Be(re(vg),{id:s.id,key:s.id,"resize-observer":r.value},null,8,["id","resize-observer"]));return h.memo=f,h},l,0),128)):Fe("",!0)]))}});function Eg(){const{emits:e}=Se();je(()=>{if(ml()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new Pe(Ie.MISSING_STYLES))}})}const Sg=et("div",{class:"vue-flow__edge-labels"},null,-1),xg={name:"VueFlow",compatConfig:{MODE:3}},kg=we({...xg,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","init","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","updateNodeInternals","error","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=Ds(),r=go(o,"modelValue",n),a=go(o,"nodes",n),l=go(o,"edges",n),s=Se(o),u=Jh({modelValue:r,nodes:a,edges:l},o,s);return tv(n,s.hooks),Zv(),Eg(),pt(ao,i),Zr(()=>{u()}),t(s),(c,d)=>(ue(),me("div",{ref:re(s).vueFlowRef,class:"vue-flow"},[x(Uv,null,{default:pe(()=>[x(fg),Sg,x(_g),mt(c.$slots,"zoom-pane")]),_:3}),mt(c.$slots,"default"),x(qv)],512))}}),Cg=we({components:{BaseEdge:pn,EdgeLabelRenderer:pg},props:{id:{type:String,required:!0},sourceX:{type:Number,required:!0},sourceY:{type:Number,required:!0},targetX:{type:Number,required:!0},targetY:{type:Number,required:!0},sourcePosition:{type:String,required:!0},targetPosition:{type:String,required:!0},data:{type:Object,required:!1},markerEnd:{type:String,required:!1},style:{type:Object,required:!1}},computed:{path(){const e=this.sourcePosition,t=this.targetPosition;return xi({sourceX:this.sourceX,sourceY:this.sourceY,targetX:this.targetX,targetY:this.targetY,sourcePosition:e,targetPosition:t})},itemAmount(){var e;return((e=this.data)==null?void 0:e.item)??null}}}),Ng=et("br",null,null,-1);function Ig(e,t,n,o,i,r){const a=Rt("BaseEdge"),l=Rt("EdgeLabelRenderer");return ue(),me(_e,null,[x(a,{id:e.id,"marker-end":e.markerEnd,path:e.path[0],style:He(e.style)},null,8,["id","marker-end","path","style"]),x(l,null,{default:pe(()=>{var s,u;return[et("div",{style:He({pointerEvents:"all",position:"absolute",transform:`translate(-50%, -50%) translate(${e.path[1]}px,${e.path[2]}px)`})},[Ue(vt((s=e.itemAmount)==null?void 0:s.item.name)+" ",1),Ng,Ue(" "+vt(parseFloat((((u=e.itemAmount)==null?void 0:u.amountPerMinute)??0).toFixed(3)))+" / min ",1)],4)]}),_:1})],64)}const Il=jn(Cg,[["render",Ig]]),Pg=we({components:{Handle:cn},props:{factoryStep:{type:Object,required:!0}},data(){return{positionLeft:ne.Left,positionRight:ne.Right}},computed:{primaryOutputName(){return this.isFinalProductNode?this.factoryStep.inputs[0].item.name??"none":this.factoryStep.outputs[0].item.name??"none"},numberOfMachines(){return this.displayNumber(this.factoryStep.numberOfBuildings)},machineName(){return this.factoryStep.building?this.factoryStep.numberOfBuildings>1?this.factoryStep.building.name+"s":this.factoryStep.building.name:""},isResourceNode(){return this.factoryStep.isResourceStep},isFinalProductNode(){return this.factoryStep.isFinalProductStep},totalResourceAmount(){if(this.isResourceNode){let e=0;return this.factoryStep.outputs.forEach(t=>e+=t.amountPerMinute),this.displayNumber(e)}else if(this.isFinalProductNode){let e=0;return this.factoryStep.inputs.forEach(t=>e+=t.amountPerMinute),this.displayNumber(e)}else return""},nodeColor(){return this.isResourceNode||this.isFinalProductNode?"primary":""},nodeVariant(){return"outlined"}},methods:{displayNumber(e){return parseFloat(e.toFixed(3)).toString()}}}),Mg={key:0},Vg={key:1};function Og(e,t,n,o,i,r){const a=Rt("Handle");return ue(),me(_e,null,[x(Fo,{color:e.nodeColor,elevation:"3",variant:"elevated"},{default:pe(()=>[x(Bo,{class:"justify-center"},{default:pe(()=>[Ue(vt(e.primaryOutputName),1)]),_:1}),x(nu,{class:"justify-center"},{default:pe(()=>[!e.isResourceNode&&!e.isFinalProductNode?(ue(),me("div",Mg,vt(e.numberOfMachines+" "+e.machineName),1)):(ue(),me("div",Vg,vt(e.totalResourceAmount)+" / min ",1))]),_:1})]),_:1},8,["color"]),e.isResourceNode?Fe("",!0):(ue(),Be(a,{key:0,class:"left-handle",position:e.positionLeft,type:"target"},null,8,["position"])),e.isFinalProductNode?Fe("",!0):(ue(),Be(a,{key:1,class:"right-handle",position:e.positionRight,type:"source"},null,8,["position"]))],64)}const Pl=jn(Pg,[["render",Og],["__scopeId","data-v-099a871e"]]);function Tg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $g="\0",wt="\0",Nr="";let Ag=class{constructor(t){Ce(this,"_isDirected",!0);Ce(this,"_isMultigraph",!1);Ce(this,"_isCompound",!1);Ce(this,"_label");Ce(this,"_defaultNodeLabelFn",()=>{});Ce(this,"_defaultEdgeLabelFn",()=>{});Ce(this,"_nodes",{});Ce(this,"_in",{});Ce(this,"_preds",{});Ce(this,"_out",{});Ce(this,"_sucs",{});Ce(this,"_edgeObjs",{});Ce(this,"_edgeLabels",{});Ce(this,"_nodeCount",0);Ce(this,"_edgeCount",0);Ce(this,"_parent");Ce(this,"_children");t&&(this._isDirected=t.hasOwnProperty("directed")?t.directed:!0,this._isMultigraph=t.hasOwnProperty("multigraph")?t.multigraph:!1,this._isCompound=t.hasOwnProperty("compound")?t.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[wt]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return this._defaultNodeLabelFn=t,typeof t!="function"&&(this._defaultNodeLabelFn=()=>t),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var t=this;return this.nodes().filter(n=>Object.keys(t._in[n]).length===0)}sinks(){var t=this;return this.nodes().filter(n=>Object.keys(t._out[n]).length===0)}setNodes(t,n){var o=arguments,i=this;return t.forEach(function(r){o.length>1?i.setNode(r,n):i.setNode(r)}),this}setNode(t,n){return this._nodes.hasOwnProperty(t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=wt,this._children[t]={},this._children[wt][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return this._nodes.hasOwnProperty(t)}removeNode(t){var n=this;if(this._nodes.hasOwnProperty(t)){var o=i=>n.removeEdge(n._edgeObjs[i]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],this.children(t).forEach(function(i){n.setParent(i)}),delete this._children[t]),Object.keys(this._in[t]).forEach(o),delete this._in[t],delete this._preds[t],Object.keys(this._out[t]).forEach(o),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=wt;else{n+="";for(var o=n;o!==void 0;o=this.parent(o))if(o===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var n=this._parent[t];if(n!==wt)return n}}children(t=wt){if(this._isCompound){var n=this._children[t];if(n)return Object.keys(n)}else{if(t===wt)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var n=this._preds[t];if(n)return Object.keys(n)}successors(t){var n=this._sucs[t];if(n)return Object.keys(n)}neighbors(t){var n=this.predecessors(t);if(n){const i=new Set(n);for(var o of this.successors(t))i.add(o);return Array.from(i.values())}}isLeaf(t){var n;return this.isDirected()?n=this.successors(t):n=this.neighbors(t),n.length===0}filterNodes(t){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var o=this;Object.entries(this._nodes).forEach(function([a,l]){t(a)&&n.setNode(a,l)}),Object.values(this._edgeObjs).forEach(function(a){n.hasNode(a.v)&&n.hasNode(a.w)&&n.setEdge(a,o.edge(a))});var i={};function r(a){var l=o.parent(a);return l===void 0||n.hasNode(l)?(i[a]=l,l):l in i?i[l]:r(l)}return this._isCompound&&n.nodes().forEach(a=>n.setParent(a,r(a))),n}setDefaultEdgeLabel(t){return this._defaultEdgeLabelFn=t,typeof t!="function"&&(this._defaultEdgeLabelFn=()=>t),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(t,n){var o=this,i=arguments;return t.reduce(function(r,a){return i.length>1?o.setEdge(r,a,n):o.setEdge(r,a),a}),this}setEdge(){var t,n,o,i,r=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(t=a.v,n=a.w,o=a.name,arguments.length===2&&(i=arguments[1],r=!0)):(t=a,n=arguments[1],o=arguments[3],arguments.length>2&&(i=arguments[2],r=!0)),t=""+t,n=""+n,o!==void 0&&(o=""+o);var l=Qt(this._isDirected,t,n,o);if(this._edgeLabels.hasOwnProperty(l))return r&&(this._edgeLabels[l]=i),this;if(o!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(n),this._edgeLabels[l]=r?i:this._defaultEdgeLabelFn(t,n,o);var s=Dg(this._isDirected,t,n,o);return t=s.v,n=s.w,Object.freeze(s),this._edgeObjs[l]=s,Ir(this._preds[n],t),Ir(this._sucs[t],n),this._in[n][l]=s,this._out[t][l]=s,this._edgeCount++,this}edge(t,n,o){var i=arguments.length===1?ko(this._isDirected,arguments[0]):Qt(this._isDirected,t,n,o);return this._edgeLabels[i]}edgeAsObj(){const t=this.edge(...arguments);return typeof t!="object"?{label:t}:t}hasEdge(t,n,o){var i=arguments.length===1?ko(this._isDirected,arguments[0]):Qt(this._isDirected,t,n,o);return this._edgeLabels.hasOwnProperty(i)}removeEdge(t,n,o){var i=arguments.length===1?ko(this._isDirected,arguments[0]):Qt(this._isDirected,t,n,o),r=this._edgeObjs[i];return r&&(t=r.v,n=r.w,delete this._edgeLabels[i],delete this._edgeObjs[i],Pr(this._preds[n],t),Pr(this._sucs[t],n),delete this._in[n][i],delete this._out[t][i],this._edgeCount--),this}inEdges(t,n){var o=this._in[t];if(o){var i=Object.values(o);return n?i.filter(r=>r.v===n):i}}outEdges(t,n){var o=this._out[t];if(o){var i=Object.values(o);return n?i.filter(r=>r.w===n):i}}nodeEdges(t,n){var o=this.inEdges(t,n);if(o)return o.concat(this.outEdges(t,n))}};function Ir(e,t){e[t]?e[t]++:e[t]=1}function Pr(e,t){--e[t]||delete e[t]}function Qt(e,t,n,o){var i=""+t,r=""+n;if(!e&&i>r){var a=i;i=r,r=a}return i+Nr+r+Nr+(o===void 0?$g:o)}function Dg(e,t,n,o){var i=""+t,r=""+n;if(!e&&i>r){var a=i;i=r,r=a}var l={v:i,w:r};return o&&(l.name=o),l}function ko(e,t){return Qt(e,t.v,t.w,t.name)}var Ci=Ag,Rg="2.2.2",Bg={Graph:Ci,version:Rg},Fg=Ci,zg={write:Lg,read:Yg};function Lg(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Gg(e),edges:Hg(e)};return e.graph()!==void 0&&(t.value=structuredClone(e.graph())),t}function Gg(e){return e.nodes().map(function(t){var n=e.node(t),o=e.parent(t),i={v:t};return n!==void 0&&(i.value=n),o!==void 0&&(i.parent=o),i})}function Hg(e){return e.edges().map(function(t){var n=e.edge(t),o={v:t.v,w:t.w};return t.name!==void 0&&(o.name=t.name),n!==void 0&&(o.value=n),o})}function Yg(e){var t=new Fg(e.options).setGraph(e.value);return e.nodes.forEach(function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),e.edges.forEach(function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}var Ug=Xg;function Xg(e){var t={},n=[],o;function i(r){t.hasOwnProperty(r)||(t[r]=!0,o.push(r),e.successors(r).forEach(i),e.predecessors(r).forEach(i))}return e.nodes().forEach(function(r){o=[],i(r),o.length&&n.push(o)}),n}let Kg=class{constructor(){Ce(this,"_arr",[]);Ce(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(t){return t.key})}has(t){return this._keyIndices.hasOwnProperty(t)}priority(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(t,n){var o=this._keyIndices;if(t=String(t),!o.hasOwnProperty(t)){var i=this._arr,r=i.length;return o[t]=r,i.push({key:t,priority:n}),this._decrease(r),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key}decrease(t,n){var o=this._keyIndices[t];if(n>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[o].priority+" New: "+n);this._arr[o].priority=n,this._decrease(o)}_heapify(t){var n=this._arr,o=2*t,i=o+1,r=t;o<n.length&&(r=n[o].priority<n[r].priority?o:r,i<n.length&&(r=n[i].priority<n[r].priority?i:r),r!==t&&(this._swap(t,r),this._heapify(r)))}_decrease(t){for(var n=this._arr,o=n[t].priority,i;t!==0&&(i=t>>1,!(n[i].priority<o));)this._swap(t,i),t=i}_swap(t,n){var o=this._arr,i=this._keyIndices,r=o[t],a=o[n];o[t]=a,o[n]=r,i[a.key]=t,i[r.key]=n}};var Ml=Kg,Wg=Ml,Vl=qg,jg=()=>1;function qg(e,t,n,o){return Zg(e,String(t),n||jg,o||function(i){return e.outEdges(i)})}function Zg(e,t,n,o){var i={},r=new Wg,a,l,s=function(u){var c=u.v!==a?u.v:u.w,d=i[c],f=n(u),h=l.distance+f;if(f<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+u+" Weight: "+f);h<d.distance&&(d.distance=h,d.predecessor=a,r.decrease(c,h))};for(e.nodes().forEach(function(u){var c=u===t?0:Number.POSITIVE_INFINITY;i[u]={distance:c},r.add(u,c)});r.size()>0&&(a=r.removeMin(),l=i[a],l.distance!==Number.POSITIVE_INFINITY);)o(a).forEach(s);return i}var Qg=Vl,Jg=em;function em(e,t,n){return e.nodes().reduce(function(o,i){return o[i]=Qg(e,i,t,n),o},{})}var Ol=tm;function tm(e){var t=0,n=[],o={},i=[];function r(a){var l=o[a]={onStack:!0,lowlink:t,index:t++};if(n.push(a),e.successors(a).forEach(function(c){o.hasOwnProperty(c)?o[c].onStack&&(l.lowlink=Math.min(l.lowlink,o[c].index)):(r(c),l.lowlink=Math.min(l.lowlink,o[c].lowlink))}),l.lowlink===l.index){var s=[],u;do u=n.pop(),o[u].onStack=!1,s.push(u);while(a!==u);i.push(s)}}return e.nodes().forEach(function(a){o.hasOwnProperty(a)||r(a)}),i}var nm=Ol,om=im;function im(e){return nm(e).filter(function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}var rm=lm,am=()=>1;function lm(e,t,n){return sm(e,t||am,n||function(o){return e.outEdges(o)})}function sm(e,t,n){var o={},i=e.nodes();return i.forEach(function(r){o[r]={},o[r][r]={distance:0},i.forEach(function(a){r!==a&&(o[r][a]={distance:Number.POSITIVE_INFINITY})}),n(r).forEach(function(a){var l=a.v===r?a.w:a.v,s=t(a);o[r][l]={distance:s,predecessor:r}})}),i.forEach(function(r){var a=o[r];i.forEach(function(l){var s=o[l];i.forEach(function(u){var c=s[r],d=a[u],f=s[u],h=c.distance+d.distance;h<f.distance&&(f.distance=h,f.predecessor=d.predecessor)})})}),o}function Tl(e){var t={},n={},o=[];function i(r){if(n.hasOwnProperty(r))throw new ni;t.hasOwnProperty(r)||(n[r]=!0,t[r]=!0,e.predecessors(r).forEach(i),delete n[r],o.push(r))}if(e.sinks().forEach(i),Object.keys(t).length!==e.nodeCount())throw new ni;return o}class ni extends Error{constructor(){super(...arguments)}}var $l=Tl;Tl.CycleException=ni;var Mr=$l,um=cm;function cm(e){try{Mr(e)}catch(t){if(t instanceof Mr.CycleException)return!1;throw t}return!0}var Al=dm;function dm(e,t,n){Array.isArray(t)||(t=[t]);var o=e.isDirected()?l=>e.successors(l):l=>e.neighbors(l),i=n==="post"?fm:hm,r=[],a={};return t.forEach(l=>{if(!e.hasNode(l))throw new Error("Graph does not have node: "+l);i(l,o,a,r)}),r}function fm(e,t,n,o){for(var i=[[e,!1]];i.length>0;){var r=i.pop();r[1]?o.push(r[0]):n.hasOwnProperty(r[0])||(n[r[0]]=!0,i.push([r[0],!0]),Dl(t(r[0]),a=>i.push([a,!1])))}}function hm(e,t,n,o){for(var i=[e];i.length>0;){var r=i.pop();n.hasOwnProperty(r)||(n[r]=!0,o.push(r),Dl(t(r),a=>i.push(a)))}}function Dl(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}var vm=Al,gm=mm;function mm(e,t){return vm(e,t,"post")}var pm=Al,ym=wm;function wm(e,t){return pm(e,t,"pre")}var bm=Ci,_m=Ml,Em=Sm;function Sm(e,t){var n=new bm,o={},i=new _m,r;function a(s){var u=s.v===r?s.w:s.v,c=i.priority(u);if(c!==void 0){var d=t(s);d<c&&(o[u]=r,i.decrease(u,d))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(s){i.add(s,Number.POSITIVE_INFINITY),n.setNode(s)}),i.decrease(e.nodes()[0],0);for(var l=!1;i.size()>0;){if(r=i.removeMin(),o.hasOwnProperty(r))n.setEdge(r,o[r]);else{if(l)throw new Error("Input graph is not connected: "+e);l=!0}e.nodeEdges(r).forEach(a)}return n}var xm={components:Ug,dijkstra:Vl,dijkstraAll:Jg,findCycles:om,floydWarshall:rm,isAcyclic:um,postorder:gm,preorder:ym,prim:Em,tarjan:Ol,topsort:$l},Vr=Bg,Ze={Graph:Vr.Graph,json:zg,alg:xm,version:Vr.version};let km=class{constructor(){let t={};t._next=t._prev=t,this._sentinel=t}dequeue(){let t=this._sentinel,n=t._prev;if(n!==t)return Or(n),n}enqueue(t){let n=this._sentinel;t._prev&&t._next&&Or(t),t._next=n._next,n._next._prev=t,n._next=t,t._prev=n}toString(){let t=[],n=this._sentinel,o=n._prev;for(;o!==n;)t.push(JSON.stringify(o,Cm)),o=o._prev;return"["+t.join(", ")+"]"}};function Or(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Cm(e,t){if(e!=="_next"&&e!=="_prev")return t}var Nm=km;let Im=Ze.Graph,Pm=Nm;var Mm=Om;let Vm=()=>1;function Om(e,t){if(e.nodeCount()<=1)return[];let n=$m(e,t||Vm);return Tm(n.graph,n.buckets,n.zeroIdx).flatMap(i=>e.outEdges(i.v,i.w))}function Tm(e,t,n){let o=[],i=t[t.length-1],r=t[0],a;for(;e.nodeCount();){for(;a=r.dequeue();)Co(e,t,n,a);for(;a=i.dequeue();)Co(e,t,n,a);if(e.nodeCount()){for(let l=t.length-2;l>0;--l)if(a=t[l].dequeue(),a){o=o.concat(Co(e,t,n,a,!0));break}}}return o}function Co(e,t,n,o,i){let r=i?[]:void 0;return e.inEdges(o.v).forEach(a=>{let l=e.edge(a),s=e.node(a.v);i&&r.push({v:a.v,w:a.w}),s.out-=l,oi(t,n,s)}),e.outEdges(o.v).forEach(a=>{let l=e.edge(a),s=a.w,u=e.node(s);u.in-=l,oi(t,n,u)}),e.removeNode(o.v),r}function $m(e,t){let n=new Im,o=0,i=0;e.nodes().forEach(l=>{n.setNode(l,{v:l,in:0,out:0})}),e.edges().forEach(l=>{let s=n.edge(l.v,l.w)||0,u=t(l),c=s+u;n.setEdge(l.v,l.w,c),i=Math.max(i,n.node(l.v).out+=u),o=Math.max(o,n.node(l.w).in+=u)});let r=Am(i+o+3).map(()=>new Pm),a=o+1;return n.nodes().forEach(l=>{oi(r,a,n.node(l))}),{graph:n,buckets:r,zeroIdx:a}}function oi(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function Am(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}let Rl=Ze.Graph;var Ve={addBorderNode:Ym,addDummyNode:Bl,asNonCompoundGraph:Rm,buildLayerMatrix:Lm,intersectRect:zm,mapValues:qm,maxRank:Fl,normalizeRanks:Gm,notime:Km,partition:Um,pick:jm,predecessorWeights:Fm,range:Ll,removeEmptyRanks:Hm,simplify:Dm,successorWeights:Bm,time:Xm,uniqueId:zl,zipObject:Ni};function Bl(e,t,n,o){let i;do i=zl(o);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function Dm(e){let t=new Rl().setGraph(e.graph());return e.nodes().forEach(n=>t.setNode(n,e.node(n))),e.edges().forEach(n=>{let o=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+i.weight,minlen:Math.max(o.minlen,i.minlen)})}),t}function Rm(e){let t=new Rl({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{e.children(n).length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdge(n,e.edge(n))}),t}function Bm(e){let t=e.nodes().map(n=>{let o={};return e.outEdges(n).forEach(i=>{o[i.w]=(o[i.w]||0)+e.edge(i).weight}),o});return Ni(e.nodes(),t)}function Fm(e){let t=e.nodes().map(n=>{let o={};return e.inEdges(n).forEach(i=>{o[i.v]=(o[i.v]||0)+e.edge(i).weight}),o});return Ni(e.nodes(),t)}function zm(e,t){let n=e.x,o=e.y,i=t.x-n,r=t.y-o,a=e.width/2,l=e.height/2;if(!i&&!r)throw new Error("Not possible to find intersection inside of the rectangle");let s,u;return Math.abs(r)*a>Math.abs(i)*l?(r<0&&(l=-l),s=l*i/r,u=l):(i<0&&(a=-a),s=a,u=a*r/i),{x:n+s,y:o+u}}function Lm(e){let t=Ll(Fl(e)+1).map(()=>[]);return e.nodes().forEach(n=>{let o=e.node(n),i=o.rank;i!==void 0&&(t[i][o.order]=n)}),t}function Gm(e){let t=Math.min(...e.nodes().map(n=>{let o=e.node(n).rank;return o===void 0?Number.MAX_VALUE:o}));e.nodes().forEach(n=>{let o=e.node(n);o.hasOwnProperty("rank")&&(o.rank-=t)})}function Hm(e){let t=Math.min(...e.nodes().map(r=>e.node(r).rank)),n=[];e.nodes().forEach(r=>{let a=e.node(r).rank-t;n[a]||(n[a]=[]),n[a].push(r)});let o=0,i=e.graph().nodeRankFactor;Array.from(n).forEach((r,a)=>{r===void 0&&a%i!==0?--o:r!==void 0&&o&&r.forEach(l=>e.node(l).rank+=o)})}function Ym(e,t,n,o){let i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=o),Bl(e,"border",i,t)}function Fl(e){return Math.max(...e.nodes().map(t=>{let n=e.node(t).rank;return n===void 0?Number.MIN_VALUE:n}))}function Um(e,t){let n={lhs:[],rhs:[]};return e.forEach(o=>{t(o)?n.lhs.push(o):n.rhs.push(o)}),n}function Xm(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}}function Km(e,t){return t()}let Wm=0;function zl(e){var t=++Wm;return toString(e)+t}function Ll(e,t,n=1){t==null&&(t=e,e=0);let o=r=>r<t;n<0&&(o=r=>t<r);const i=[];for(let r=e;o(r);r+=n)i.push(r);return i}function jm(e,t){const n={};for(const o of t)e[o]!==void 0&&(n[o]=e[o]);return n}function qm(e,t){let n=t;return typeof t=="string"&&(n=o=>o[t]),Object.entries(e).reduce((o,[i,r])=>(o[i]=n(r,i),o),{})}function Ni(e,t){return e.reduce((n,o,i)=>(n[o]=t[i],n),{})}let Zm=Mm,Qm=Ve.uniqueId;var Jm={run:ep,undo:np};function ep(e){(e.graph().acyclicer==="greedy"?Zm(e,n(e)):tp(e)).forEach(o=>{let i=e.edge(o);e.removeEdge(o),i.forwardName=o.name,i.reversed=!0,e.setEdge(o.w,o.v,i,Qm("rev"))});function n(o){return i=>o.edge(i).weight}}function tp(e){let t=[],n={},o={};function i(r){o.hasOwnProperty(r)||(o[r]=!0,n[r]=!0,e.outEdges(r).forEach(a=>{n.hasOwnProperty(a.w)?t.push(a):i(a.w)}),delete n[r])}return e.nodes().forEach(i),t}function np(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})}let op=Ve;var ip={run:rp,undo:lp};function rp(e){e.graph().dummyChains=[],e.edges().forEach(t=>ap(e,t))}function ap(e,t){let n=t.v,o=e.node(n).rank,i=t.w,r=e.node(i).rank,a=t.name,l=e.edge(t),s=l.labelRank;if(r===o+1)return;e.removeEdge(t);let u,c,d;for(d=0,++o;o<r;++d,++o)l.points=[],c={width:0,height:0,edgeLabel:l,edgeObj:t,rank:o},u=op.addDummyNode(e,"edge",c,"_d"),o===s&&(c.width=l.width,c.height=l.height,c.dummy="edge-label",c.labelpos=l.labelpos),e.setEdge(n,u,{weight:l.weight},a),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,i,{weight:l.weight},a)}function lp(e){e.graph().dummyChains.forEach(t=>{let n=e.node(t),o=n.edgeLabel,i;for(e.setEdge(n.edgeObj,o);n.dummy;)i=e.successors(t)[0],e.removeNode(t),o.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),t=i,n=e.node(t)})}var co={longestPath:sp,slack:up};function sp(e){var t={};function n(o){var i=e.node(o);if(t.hasOwnProperty(o))return i.rank;t[o]=!0;var r=Math.min(...e.outEdges(o).map(a=>a==null?Number.POSITIVE_INFINITY:n(a.w)-e.edge(a).minlen));return r===Number.POSITIVE_INFINITY&&(r=0),i.rank=r}e.sources().forEach(n)}function up(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var cp=Ze.Graph,Yn=co.slack,Gl=dp;function dp(e){var t=new cp({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});for(var i,r;fp(t,e)<o;)i=hp(t,e),r=t.hasNode(i.v)?Yn(e,i):-Yn(e,i),vp(t,e,r);return t}function fp(e,t){function n(o){t.nodeEdges(o).forEach(i=>{var r=i.v,a=o===r?i.w:r;!e.hasNode(a)&&!Yn(t,i)&&(e.setNode(a,{}),e.setEdge(o,a,{}),n(a))})}return e.nodes().forEach(n),e.nodeCount()}function hp(e,t){return t.edges().reduce((o,i)=>{let r=Number.POSITIVE_INFINITY;return e.hasNode(i.v)!==e.hasNode(i.w)&&(r=Yn(t,i)),r<o[0]?[r,i]:o},[Number.POSITIVE_INFINITY,null])[1]}function vp(e,t,n){e.nodes().forEach(o=>t.node(o).rank+=n)}var gp=Gl,Tr=co.slack,mp=co.longestPath,pp=Ze.alg.preorder,yp=Ze.alg.postorder,wp=Ve.simplify,bp=Pt;Pt.initLowLimValues=Pi;Pt.initCutValues=Ii;Pt.calcCutValue=Hl;Pt.leaveEdge=Ul;Pt.enterEdge=Xl;Pt.exchangeEdges=Kl;function Pt(e){e=wp(e),mp(e);var t=gp(e);Pi(t),Ii(t,e);for(var n,o;n=Ul(t);)o=Xl(t,e,n),Kl(t,e,n,o)}function Ii(e,t){var n=yp(e,e.nodes());n=n.slice(0,n.length-1),n.forEach(o=>_p(e,t,o))}function _p(e,t,n){var o=e.node(n),i=o.parent;e.edge(n,i).cutvalue=Hl(e,t,n)}function Hl(e,t,n){var o=e.node(n),i=o.parent,r=!0,a=t.edge(n,i),l=0;return a||(r=!1,a=t.edge(i,n)),l=a.weight,t.nodeEdges(n).forEach(s=>{var u=s.v===n,c=u?s.w:s.v;if(c!==i){var d=u===r,f=t.edge(s).weight;if(l+=d?f:-f,Sp(e,n,c)){var h=e.edge(n,c).cutvalue;l+=d?-h:h}}}),l}function Pi(e,t){arguments.length<2&&(t=e.nodes()[0]),Yl(e,{},1,t)}function Yl(e,t,n,o,i){var r=n,a=e.node(o);return t[o]=!0,e.neighbors(o).forEach(l=>{t.hasOwnProperty(l)||(n=Yl(e,t,n,l,o))}),a.low=r,a.lim=n++,i?a.parent=i:delete a.parent,n}function Ul(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function Xl(e,t,n){var o=n.v,i=n.w;t.hasEdge(o,i)||(o=n.w,i=n.v);var r=e.node(o),a=e.node(i),l=r,s=!1;r.lim>a.lim&&(l=a,s=!0);var u=t.edges().filter(c=>s===$r(e,e.node(c.v),l)&&s!==$r(e,e.node(c.w),l));return u.reduce((c,d)=>Tr(t,d)<Tr(t,c)?d:c)}function Kl(e,t,n,o){var i=n.v,r=n.w;e.removeEdge(i,r),e.setEdge(o.v,o.w,{}),Pi(e),Ii(e,t),Ep(e,t)}function Ep(e,t){var n=e.nodes().find(i=>!t.node(i).parent),o=pp(e,n);o=o.slice(1),o.forEach(i=>{var r=e.node(i).parent,a=t.edge(i,r),l=!1;a||(a=t.edge(r,i),l=!0),t.node(i).rank=t.node(r).rank+(l?a.minlen:-a.minlen)})}function Sp(e,t,n){return e.hasEdge(t,n)}function $r(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var xp=co,Wl=xp.longestPath,kp=Gl,Cp=bp,Np=Ip;function Ip(e){switch(e.graph().ranker){case"network-simplex":Ar(e);break;case"tight-tree":Mp(e);break;case"longest-path":Pp(e);break;default:Ar(e)}}var Pp=Wl;function Mp(e){Wl(e),kp(e)}function Ar(e){Cp(e)}var Vp=Op;function Op(e){let t=$p(e);e.graph().dummyChains.forEach(n=>{let o=e.node(n),i=o.edgeObj,r=Tp(e,t,i.v,i.w),a=r.path,l=r.lca,s=0,u=a[s],c=!0;for(;n!==i.w;){if(o=e.node(n),c){for(;(u=a[s])!==l&&e.node(u).maxRank<o.rank;)s++;u===l&&(c=!1)}if(!c){for(;s<a.length-1&&e.node(u=a[s+1]).minRank<=o.rank;)s++;u=a[s]}e.setParent(n,u),n=e.successors(n)[0]}})}function Tp(e,t,n,o){let i=[],r=[],a=Math.min(t[n].low,t[o].low),l=Math.max(t[n].lim,t[o].lim),s,u;s=n;do s=e.parent(s),i.push(s);while(s&&(t[s].low>a||l>t[s].lim));for(u=s,s=o;(s=e.parent(s))!==u;)r.push(s);return{path:i.concat(r.reverse()),lca:u}}function $p(e){let t={},n=0;function o(i){let r=n;e.children(i).forEach(o),t[i]={low:r,lim:n++}}return e.children().forEach(o),t}let ii=Ve;var Ap={run:Dp,cleanup:Fp};function Dp(e){let t=ii.addDummyNode(e,"root",{},"_root"),n=Rp(e),o=Math.max(...Object.values(n))-1,i=2*o+1;e.graph().nestingRoot=t,e.edges().forEach(a=>e.edge(a).minlen*=i);let r=Bp(e)+1;e.children().forEach(a=>jl(e,t,i,r,o,n,a)),e.graph().nodeRankFactor=i}function jl(e,t,n,o,i,r,a){let l=e.children(a);if(!l.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}let s=ii.addBorderNode(e,"_bt"),u=ii.addBorderNode(e,"_bb"),c=e.node(a);e.setParent(s,a),c.borderTop=s,e.setParent(u,a),c.borderBottom=u,l.forEach(d=>{jl(e,t,n,o,i,r,d);let f=e.node(d),h=f.borderTop?f.borderTop:d,y=f.borderBottom?f.borderBottom:d,g=f.borderTop?o:2*o,p=h!==y?1:i-r[a]+1;e.setEdge(s,h,{weight:g,minlen:p,nestingEdge:!0}),e.setEdge(y,u,{weight:g,minlen:p,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,s,{weight:0,minlen:i+r[a]})}function Rp(e){var t={};function n(o,i){var r=e.children(o);r&&r.length&&r.forEach(a=>n(a,i+1)),t[o]=i}return e.children().forEach(o=>n(o,1)),t}function Bp(e){return e.edges().reduce((t,n)=>t+e.edge(n).weight,0)}function Fp(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{var o=e.edge(n);o.nestingEdge&&e.removeEdge(n)})}let zp=Ve;var Lp=Gp;function Gp(e){function t(n){let o=e.children(n),i=e.node(n);if(o.length&&o.forEach(t),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(let r=i.minRank,a=i.maxRank+1;r<a;++r)Dr(e,"borderLeft","_bl",n,i,r),Dr(e,"borderRight","_br",n,i,r)}}e.children().forEach(t)}function Dr(e,t,n,o,i,r){let a={width:0,height:0,rank:r,borderType:t},l=i[t][r-1],s=zp.addDummyNode(e,"border",a,n);i[t][r]=s,e.setParent(s,o),l&&e.setEdge(l,s,{weight:1})}var Hp={adjust:Yp,undo:Up};function Yp(e){let t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&ql(e)}function Up(e){let t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&Xp(e),(t==="lr"||t==="rl")&&(Kp(e),ql(e))}function ql(e){e.nodes().forEach(t=>Rr(e.node(t))),e.edges().forEach(t=>Rr(e.edge(t)))}function Rr(e){let t=e.width;e.width=e.height,e.height=t}function Xp(e){e.nodes().forEach(t=>No(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(No),n.hasOwnProperty("y")&&No(n)})}function No(e){e.y=-e.y}function Kp(e){e.nodes().forEach(t=>Io(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(Io),n.hasOwnProperty("x")&&Io(n)})}function Io(e){let t=e.x;e.x=e.y,e.y=t}let Wp=Ve;var jp=qp;function qp(e){let t={},n=e.nodes().filter(l=>!e.children(l).length),o=Math.max(...n.map(l=>e.node(l).rank)),i=Wp.range(o+1).map(()=>[]);function r(l){if(t[l])return;t[l]=!0;let s=e.node(l);i[s.rank].push(l),e.successors(l).forEach(r)}return n.sort((l,s)=>e.node(l).rank-e.node(s).rank).forEach(r),i}let Zp=Ve.zipObject;var Qp=Jp;function Jp(e,t){let n=0;for(let o=1;o<t.length;++o)n+=ey(e,t[o-1],t[o]);return n}function ey(e,t,n){let o=Zp(n,n.map((u,c)=>c)),i=t.flatMap(u=>e.outEdges(u).map(c=>({pos:o[c.w],weight:e.edge(c).weight})).sort((c,d)=>c.pos-d.pos)),r=1;for(;r<n.length;)r<<=1;let a=2*r-1;r-=1;let l=new Array(a).fill(0),s=0;return i.forEach(u=>{let c=u.pos+r;l[c]+=u.weight;let d=0;for(;c>0;)c%2&&(d+=l[c+1]),c=c-1>>1,l[c]+=u.weight;s+=u.weight*d}),s}var ty=ny;function ny(e,t=[]){return t.map(n=>{let o=e.inEdges(n);if(o.length){let i=o.reduce((r,a)=>{let l=e.edge(a),s=e.node(a.v);return{sum:r.sum+l.weight*s.order,weight:r.weight+l.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}let oy=Ve;var iy=ry;function ry(e,t){let n={};e.forEach((i,r)=>{let a=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:r};i.barycenter!==void 0&&(a.barycenter=i.barycenter,a.weight=i.weight)}),t.edges().forEach(i=>{let r=n[i.v],a=n[i.w];r!==void 0&&a!==void 0&&(a.indegree++,r.out.push(n[i.w]))});let o=Object.values(n).filter(i=>!i.indegree);return ay(o)}function ay(e){let t=[];function n(i){return r=>{r.merged||(r.barycenter===void 0||i.barycenter===void 0||r.barycenter>=i.barycenter)&&ly(i,r)}}function o(i){return r=>{r.in.push(i),--r.indegree===0&&e.push(r)}}for(;e.length;){let i=e.pop();t.push(i),i.in.reverse().forEach(n(i)),i.out.forEach(o(i))}return t.filter(i=>!i.merged).map(i=>oy.pick(i,["vs","i","barycenter","weight"]))}function ly(e,t){let n=0,o=0;e.weight&&(n+=e.barycenter*e.weight,o+=e.weight),t.weight&&(n+=t.barycenter*t.weight,o+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0}let sy=Ve;var uy=cy;function cy(e,t){let n=sy.partition(e,c=>c.hasOwnProperty("barycenter")),o=n.lhs,i=n.rhs.sort((c,d)=>d.i-c.i),r=[],a=0,l=0,s=0;o.sort(dy(!!t)),s=Br(r,i,s),o.forEach(c=>{s+=c.vs.length,r.push(c.vs),a+=c.barycenter*c.weight,l+=c.weight,s=Br(r,i,s)});let u={vs:r.flat(!0)};return l&&(u.barycenter=a/l,u.weight=l),u}function Br(e,t,n){let o;for(;t.length&&(o=t[t.length-1]).i<=n;)t.pop(),e.push(o.vs),n++;return n}function dy(e){return(t,n)=>t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}let fy=ty,hy=iy,vy=uy;var gy=Zl;function Zl(e,t,n,o){let i=e.children(t),r=e.node(t),a=r?r.borderLeft:void 0,l=r?r.borderRight:void 0,s={};a&&(i=i.filter(f=>f!==a&&f!==l));let u=fy(e,i);u.forEach(f=>{if(e.children(f.v).length){let h=Zl(e,f.v,n,o);s[f.v]=h,h.hasOwnProperty("barycenter")&&py(f,h)}});let c=hy(u,n);my(c,s);let d=vy(c,o);if(a&&(d.vs=[a,d.vs,l].flat(!0),e.predecessors(a).length)){let f=e.node(e.predecessors(a)[0]),h=e.node(e.predecessors(l)[0]);d.hasOwnProperty("barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+h.order)/(d.weight+2),d.weight+=2}return d}function my(e,t){e.forEach(n=>{n.vs=n.vs.flatMap(o=>t[o]?t[o].vs:o)})}function py(e,t){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)}let yy=Ze.Graph,wy=Ve;var by=_y;function _y(e,t,n){let o=Ey(e),i=new yy({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(r=>e.node(r));return e.nodes().forEach(r=>{let a=e.node(r),l=e.parent(r);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(i.setNode(r),i.setParent(r,l||o),e[n](r).forEach(s=>{let u=s.v===r?s.w:s.v,c=i.edge(u,r),d=c!==void 0?c.weight:0;i.setEdge(u,r,{weight:e.edge(s).weight+d})}),a.hasOwnProperty("minRank")&&i.setNode(r,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),i}function Ey(e){for(var t;e.hasNode(t=wy.uniqueId("_root")););return t}var Sy=xy;function xy(e,t,n){let o={},i;n.forEach(r=>{let a=e.parent(r),l,s;for(;a;){if(l=e.parent(a),l?(s=o[l],o[l]=a):(s=i,i=a),s&&s!==a){t.setEdge(s,a);return}a=l}})}let ky=jp,Cy=Qp,Ny=gy,Iy=by,Py=Sy,My=Ze.Graph,Cn=Ve;var Vy=Ql;function Ql(e,t){if(t&&typeof t.customOrder=="function"){t.customOrder(e,Ql);return}let n=Cn.maxRank(e),o=Fr(e,Cn.range(1,n+1),"inEdges"),i=Fr(e,Cn.range(n-1,-1,-1),"outEdges"),r=ky(e);if(zr(e,r),t&&t.disableOptimalOrderHeuristic)return;let a=Number.POSITIVE_INFINITY,l;for(let s=0,u=0;u<4;++s,++u){Oy(s%2?o:i,s%4>=2),r=Cn.buildLayerMatrix(e);let c=Cy(e,r);c<a&&(u=0,l=Object.assign({},r),a=c)}zr(e,l)}function Fr(e,t,n){return t.map(function(o){return Iy(e,o,n)})}function Oy(e,t){let n=new My;e.forEach(function(o){let i=o.graph().root,r=Ny(o,i,n,t);r.vs.forEach((a,l)=>o.node(a).order=l),Py(o,n,r.vs)})}function zr(e,t){Object.values(t).forEach(n=>n.forEach((o,i)=>e.node(o).order=i))}let Ty=Ze.Graph,dn=Ve;var $y={positionX:Ry,findType1Conflicts:Jl,findType2Conflicts:es,addConflict:Mi,hasConflict:ts,verticalAlignment:ns,horizontalCompaction:os,alignCoordinates:rs,findSmallestWidthAlignment:is,balance:as};function Jl(e,t){let n={};function o(i,r){let a=0,l=0,s=i.length,u=r[r.length-1];return r.forEach((c,d)=>{let f=Ay(e,c),h=f?e.node(f).order:s;(f||c===u)&&(r.slice(l,d+1).forEach(y=>{e.predecessors(y).forEach(g=>{let p=e.node(g),b=p.order;(b<a||h<b)&&!(p.dummy&&e.node(y).dummy)&&Mi(n,g,y)})}),l=d+1,a=h)}),r}return t.length&&t.reduce(o),n}function es(e,t){let n={};function o(r,a,l,s,u){let c;dn.range(a,l).forEach(d=>{c=r[d],e.node(c).dummy&&e.predecessors(c).forEach(f=>{let h=e.node(f);h.dummy&&(h.order<s||h.order>u)&&Mi(n,f,c)})})}function i(r,a){let l=-1,s,u=0;return a.forEach((c,d)=>{if(e.node(c).dummy==="border"){let f=e.predecessors(c);f.length&&(s=e.node(f[0]).order,o(a,u,d,l,s),u=d,l=s)}o(a,u,a.length,s,r.length)}),a}return t.length&&t.reduce(i),n}function Ay(e,t){if(e.node(t).dummy)return e.predecessors(t).find(n=>e.node(n).dummy)}function Mi(e,t,n){if(t>n){let i=t;t=n,n=i}let o=e[t];o||(e[t]=o={}),o[n]=!0}function ts(e,t,n){if(t>n){let o=t;t=n,n=o}return!!e[t]&&e[t].hasOwnProperty(n)}function ns(e,t,n,o){let i={},r={},a={};return t.forEach(l=>{l.forEach((s,u)=>{i[s]=s,r[s]=s,a[s]=u})}),t.forEach(l=>{let s=-1;l.forEach(u=>{let c=o(u);if(c.length){c=c.sort((f,h)=>a[f]-a[h]);let d=(c.length-1)/2;for(let f=Math.floor(d),h=Math.ceil(d);f<=h;++f){let y=c[f];r[u]===u&&s<a[y]&&!ts(n,u,y)&&(r[y]=u,r[u]=i[u]=i[y],s=a[y])}}})}),{root:i,align:r}}function os(e,t,n,o,i){let r={},a=Dy(e,t,n,i),l=i?"borderLeft":"borderRight";function s(d,f){let h=a.nodes(),y=h.pop(),g={};for(;y;)g[y]?d(y):(g[y]=!0,h.push(y),h=h.concat(f(y))),y=h.pop()}function u(d){r[d]=a.inEdges(d).reduce((f,h)=>Math.max(f,r[h.v]+a.edge(h)),0)}function c(d){let f=a.outEdges(d).reduce((y,g)=>Math.min(y,r[g.w]-a.edge(g)),Number.POSITIVE_INFINITY),h=e.node(d);f!==Number.POSITIVE_INFINITY&&h.borderType!==l&&(r[d]=Math.max(r[d],f))}return s(u,a.predecessors.bind(a)),s(c,a.successors.bind(a)),Object.keys(o).forEach(d=>r[d]=r[n[d]]),r}function Dy(e,t,n,o){let i=new Ty,r=e.graph(),a=By(r.nodesep,r.edgesep,o);return t.forEach(l=>{let s;l.forEach(u=>{let c=n[u];if(i.setNode(c),s){var d=n[s],f=i.edge(d,c);i.setEdge(d,c,Math.max(a(e,u,s),f||0))}s=u})}),i}function is(e,t){return Object.values(t).reduce((n,o)=>{let i=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;Object.entries(o).forEach(([l,s])=>{let u=Fy(e,l)/2;i=Math.max(s+u,i),r=Math.min(s-u,r)});const a=i-r;return a<n[0]&&(n=[a,o]),n},[Number.POSITIVE_INFINITY,null])[1]}function rs(e,t){let n=Object.values(t),o=Math.min(...n),i=Math.max(...n);["u","d"].forEach(r=>{["l","r"].forEach(a=>{let l=r+a,s=e[l];if(s===t)return;let u=Object.values(s),c=o-Math.min(...u);a!=="l"&&(c=i-Math.max(...u)),c&&(e[l]=dn.mapValues(s,d=>d+c))})})}function as(e,t){return dn.mapValues(e.ul,(n,o)=>{if(t)return e[t.toLowerCase()][o];{let i=Object.values(e).map(r=>r[o]).sort((r,a)=>r-a);return(i[1]+i[2])/2}})}function Ry(e){let t=dn.buildLayerMatrix(e),n=Object.assign(Jl(e,t),es(e,t)),o={},i;["u","d"].forEach(a=>{i=a==="u"?t:Object.values(t).reverse(),["l","r"].forEach(l=>{l==="r"&&(i=i.map(d=>Object.values(d).reverse()));let s=(a==="u"?e.predecessors:e.successors).bind(e),u=ns(e,i,n,s),c=os(e,i,u.root,u.align,l==="r");l==="r"&&(c=dn.mapValues(c,d=>-d)),o[a+l]=c})});let r=is(e,o);return rs(o,r),as(o,e.graph().align)}function By(e,t,n){return(o,i,r)=>{let a=o.node(i),l=o.node(r),s=0,u;if(s+=a.width/2,a.hasOwnProperty("labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=-a.width/2;break;case"r":u=a.width/2;break}if(u&&(s+=n?u:-u),u=0,s+=(a.dummy?t:e)/2,s+=(l.dummy?t:e)/2,s+=l.width/2,l.hasOwnProperty("labelpos"))switch(l.labelpos.toLowerCase()){case"l":u=l.width/2;break;case"r":u=-l.width/2;break}return u&&(s+=n?u:-u),u=0,s}}function Fy(e,t){return e.node(t).width}let ls=Ve,zy=$y.positionX;var Ly=Gy;function Gy(e){e=ls.asNonCompoundGraph(e),Hy(e),Object.entries(zy(e)).forEach(([t,n])=>e.node(t).x=n)}function Hy(e){let t=ls.buildLayerMatrix(e),n=e.graph().ranksep,o=0;t.forEach(i=>{const r=i.reduce((a,l)=>{const s=e.node(l).height;return a>s?a:s},0);i.forEach(a=>e.node(a).y=o+r/2),o+=r+n})}let Lr=Jm,Gr=ip,Yy=Np,Uy=Ve.normalizeRanks,Xy=Vp,Ky=Ve.removeEmptyRanks,Hr=Ap,Wy=Lp,Yr=Hp,jy=Vy,qy=Ly,Ye=Ve,Zy=Ze.Graph;var Qy=Jy;function Jy(e,t){let n=t&&t.debugTiming?Ye.time:Ye.notime;n("layout",()=>{let o=n("  buildLayoutGraph",()=>u0(e));n("  runLayout",()=>e0(o,n,t)),n("  updateInputGraph",()=>t0(e,o))})}function e0(e,t,n){t("    makeSpaceForEdgeLabels",()=>c0(e)),t("    removeSelfEdges",()=>w0(e)),t("    acyclic",()=>Lr.run(e)),t("    nestingGraph.run",()=>Hr.run(e)),t("    rank",()=>Yy(Ye.asNonCompoundGraph(e))),t("    injectEdgeLabelProxies",()=>d0(e)),t("    removeEmptyRanks",()=>Ky(e)),t("    nestingGraph.cleanup",()=>Hr.cleanup(e)),t("    normalizeRanks",()=>Uy(e)),t("    assignRankMinMax",()=>f0(e)),t("    removeEdgeLabelProxies",()=>h0(e)),t("    normalize.run",()=>Gr.run(e)),t("    parentDummyChains",()=>Xy(e)),t("    addBorderSegments",()=>Wy(e)),t("    order",()=>jy(e,n)),t("    insertSelfEdges",()=>b0(e)),t("    adjustCoordinateSystem",()=>Yr.adjust(e)),t("    position",()=>qy(e)),t("    positionSelfEdges",()=>_0(e)),t("    removeBorderNodes",()=>y0(e)),t("    normalize.undo",()=>Gr.undo(e)),t("    fixupEdgeLabelCoords",()=>m0(e)),t("    undoCoordinateSystem",()=>Yr.undo(e)),t("    translateGraph",()=>v0(e)),t("    assignNodeIntersects",()=>g0(e)),t("    reversePoints",()=>p0(e)),t("    acyclic.undo",()=>Lr.undo(e))}function t0(e,t){e.nodes().forEach(n=>{let o=e.node(n),i=t.node(n);o&&(o.x=i.x,o.y=i.y,o.rank=i.rank,t.children(n).length&&(o.width=i.width,o.height=i.height))}),e.edges().forEach(n=>{let o=e.edge(n),i=t.edge(n);o.points=i.points,i.hasOwnProperty("x")&&(o.x=i.x,o.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}let n0=["nodesep","edgesep","ranksep","marginx","marginy"],o0={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},i0=["acyclicer","ranker","rankdir","align"],r0=["width","height"],Ur={width:0,height:0},a0=["minlen","weight","width","height","labeloffset"],l0={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},s0=["labelpos"];function u0(e){let t=new Zy({multigraph:!0,compound:!0}),n=Mo(e.graph());return t.setGraph(Object.assign({},o0,Po(n,n0),Ye.pick(n,i0))),e.nodes().forEach(o=>{let i=Mo(e.node(o));const r=Po(i,r0);Object.keys(Ur).forEach(a=>{r[a]===void 0&&(r[a]=Ur[a])}),t.setNode(o,r),t.setParent(o,e.parent(o))}),e.edges().forEach(o=>{let i=Mo(e.edge(o));t.setEdge(o,Object.assign({},l0,Po(i,a0),Ye.pick(i,s0)))}),t}function c0(e){let t=e.graph();t.ranksep/=2,e.edges().forEach(n=>{let o=e.edge(n);o.minlen*=2,o.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?o.width+=o.labeloffset:o.height+=o.labeloffset)})}function d0(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.width&&n.height){let o=e.node(t.v),r={rank:(e.node(t.w).rank-o.rank)/2+o.rank,e:t};Ye.addDummyNode(e,"edge-proxy",r,"_ep")}})}function f0(e){let t=0;e.nodes().forEach(n=>{let o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=Math.max(t,o.maxRank))}),e.graph().maxRank=t}function h0(e){e.nodes().forEach(t=>{let n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function v0(e){let t=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,i=0,r=e.graph(),a=r.marginx||0,l=r.marginy||0;function s(u){let c=u.x,d=u.y,f=u.width,h=u.height;t=Math.min(t,c-f/2),n=Math.max(n,c+f/2),o=Math.min(o,d-h/2),i=Math.max(i,d+h/2)}e.nodes().forEach(u=>s(e.node(u))),e.edges().forEach(u=>{let c=e.edge(u);c.hasOwnProperty("x")&&s(c)}),t-=a,o-=l,e.nodes().forEach(u=>{let c=e.node(u);c.x-=t,c.y-=o}),e.edges().forEach(u=>{let c=e.edge(u);c.points.forEach(d=>{d.x-=t,d.y-=o}),c.hasOwnProperty("x")&&(c.x-=t),c.hasOwnProperty("y")&&(c.y-=o)}),r.width=n-t+a,r.height=i-o+l}function g0(e){e.edges().forEach(t=>{let n=e.edge(t),o=e.node(t.v),i=e.node(t.w),r,a;n.points?(r=n.points[0],a=n.points[n.points.length-1]):(n.points=[],r=i,a=o),n.points.unshift(Ye.intersectRect(o,r)),n.points.push(Ye.intersectRect(i,a))})}function m0(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function p0(e){e.edges().forEach(t=>{let n=e.edge(t);n.reversed&&n.points.reverse()})}function y0(e){e.nodes().forEach(t=>{if(e.children(t).length){let n=e.node(t),o=e.node(n.borderTop),i=e.node(n.borderBottom),r=e.node(n.borderLeft[n.borderLeft.length-1]),a=e.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(a.x-r.x),n.height=Math.abs(i.y-o.y),n.x=r.x+n.width/2,n.y=o.y+n.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy==="border"&&e.removeNode(t)})}function w0(e){e.edges().forEach(t=>{if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function b0(e){var t=Ye.buildLayerMatrix(e);t.forEach(n=>{var o=0;n.forEach((i,r)=>{var a=e.node(i);a.order=r+o,(a.selfEdges||[]).forEach(l=>{Ye.addDummyNode(e,"selfedge",{width:l.label.width,height:l.label.height,rank:a.rank,order:r+ ++o,e:l.e,label:l.label},"_se")}),delete a.selfEdges})})}function _0(e){e.nodes().forEach(t=>{var n=e.node(t);if(n.dummy==="selfedge"){var o=e.node(n.e.v),i=o.x+o.width/2,r=o.y,a=n.x-i,l=o.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*a/3,y:r-l},{x:i+5*a/6,y:r-l},{x:i+a,y:r},{x:i+5*a/6,y:r+l},{x:i+2*a/3,y:r+l}],n.label.x=n.x,n.label.y=n.y}})}function Po(e,t){return Ye.mapValues(Ye.pick(e,t),Number)}function Mo(e){var t={};return e&&Object.entries(e).forEach(([n,o])=>{typeof n=="string"&&(n=n.toLowerCase()),t[n]=o}),t}let E0=Ve,S0=Ze.Graph;var x0={debugOrdering:k0};function k0(e){let t=E0.buildLayerMatrix(e),n=new S0({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(o=>{n.setNode(o,{label:o}),n.setParent(o,"layer"+e.node(o).rank)}),e.edges().forEach(o=>n.setEdge(o.v,o.w,{},o.name)),t.forEach((o,i)=>{let r="layer"+i;n.setNode(r,{rank:"same"}),o.reduce((a,l)=>(n.setEdge(a,l,{style:"invis"}),l))}),n}var C0="1.1.3",N0={graphlib:Ze,layout:Qy,debug:x0,util:{time:Ve.time,notime:Ve.notime},version:C0};const Vo=Tg(N0);function I0(){const{findNode:e}=Se(),t=ae(new Vo.graphlib.Graph);function n(o,i){const r=new Vo.graphlib.Graph;t.value=r,r.setGraph({rankdir:"LR",nodesep:200,edgesep:50,ranksep:150}),r.setDefaultNodeLabel(()=>({})),r.setDefaultEdgeLabel(()=>({}));for(const a of o){const l=e(a.id);l&&r.setNode(a.id,{width:l.dimensions.width||150,height:l.dimensions.height||50})}for(const a of i)r.setEdge(a.source,a.target);return Vo.layout(r),o.map((a,l)=>{const s=r.node(a.id);return{...a,targetPosition:ne.Left,sourcePosition:ne.Right,position:{x:s.x+l*10,y:s.y}}})}return{graph:t,layout:n}}const P0=we({components:{GraphEdge:Il,GraphNode:Pl,VueFlow:kg},props:{factory:{type:Object,required:!0}},setup(){const{fitView:e}=Se(),{graph:t,layout:n}=I0();return{fitView:e,graph:t,layout:n}},data(){return{nodes:[],edges:[]}},computed:{},watch:{factory:{handler(){this.constructGraph()},immediate:!0}},mounted(){},methods:{computeLayoutNodes(){this.nodes=this.layout(this.nodes,this.edges),Me(()=>this.fitView())},constructGraph(){this.nodes=[],this.edges=[],this.factory.steps.forEach((e,t)=>{this.nodes.push({id:e.id,type:"factory-step",position:{x:100+150*t,y:10},data:e})}),this.factory.steps.forEach(e=>{e.nextSteps.forEach(t=>{let n=null;const o=this.factory.steps.find(i=>i.id===t);o&&(n=e.inputs.find(i=>o.outputs.some(r=>i.item.slug===r.item.slug))??null),this.edges.push({id:"e"+t+"-"+e.id,source:t,target:e.id,type:"factory",data:{item:n}})})})}}});function M0(e,t,n,o,i,r){const a=Pl,l=Il,s=Rt("VueFlow");return ue(),Be(s,{edges:e.edges,nodes:e.nodes,onNodesInitialized:e.computeLayoutNodes},{"node-factory-step":pe(({data:u})=>[x(a,{"factory-step":u},null,8,["factory-step"])]),"edge-factory":pe(u=>[x(l,{id:u.id,data:u.data,"marker-end":u.markerEnd,"source-position":u.sourcePosition,"source-x":u.sourceX,"source-y":u.sourceY,style:He(u.style),"target-position":u.targetPosition,"target-x":u.targetX,"target-y":u.targetY},null,8,["id","data","marker-end","source-position","source-x","source-y","style","target-position","target-x","target-y"])]),_:1},8,["edges","nodes","onNodesInitialized"])}const ss=jn(P0,[["render",M0]]);var Te=[];for(var Oo=0;Oo<256;++Oo)Te.push((Oo+256).toString(16).slice(1));function V0(e,t=0){return(Te[e[t+0]]+Te[e[t+1]]+Te[e[t+2]]+Te[e[t+3]]+"-"+Te[e[t+4]]+Te[e[t+5]]+"-"+Te[e[t+6]]+Te[e[t+7]]+"-"+Te[e[t+8]]+Te[e[t+9]]+"-"+Te[e[t+10]]+Te[e[t+11]]+Te[e[t+12]]+Te[e[t+13]]+Te[e[t+14]]+Te[e[t+15]]).toLowerCase()}var Nn,O0=new Uint8Array(16);function T0(){if(!Nn&&(Nn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Nn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Nn(O0)}var $0=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Xr={randomUUID:$0};function To(e,t,n){if(Xr.randomUUID&&!t&&!e)return Xr.randomUUID();e=e||{};var o=e.random||(e.rng||T0)();return o[6]=o[6]&15|64,o[8]=o[8]&63|128,V0(o)}const A0=e=>{const t=ba(),n=e.flatMap(l=>l.recipe.producedItems.map(s=>s.item)),o=[],i=e.map(l=>({recipe:l.recipe,amountPerMinute:l.amountPerMinute}));for(;i.length>0;){const{recipe:l,amountPerMinute:s,parentStepId:u}=i.shift(),c=60/l.time,d=c*l.producedItems[0].amount,f=s/d,h=D0(o,l.producedInBuildings[0],l);if(h){if(l.producedItems.forEach(y=>{const g=h.outputs.find(p=>p.item.slug===y.item.slug);g&&(g.amountPerMinute+=s)}),l.ingredientItems.forEach(y=>{const g=y.amount*c*f,p=h.inputs.find(w=>w.item.slug===y.item.slug);p&&(p.amountPerMinute+=g);const b=t.getRecipeBySlug(y.item.slug);b&&i.push({recipe:b,amountPerMinute:g,parentStepId:h.id})}),h.numberOfBuildings+=f,u){const y=o.find(g=>g.id===u);y&&!y.nextSteps.includes(h.id)&&y.nextSteps.push(h.id)}}else{const y={id:To(),inputs:[],outputs:[],building:l.producedInBuildings[0],nextSteps:[],isStartingStep:!1,isFinalStep:!1,isResourceStep:!1,isFinalProductStep:!1,numberOfBuildings:f};if(l.ingredientItems.forEach(g=>{const p=g.amount*c*f;y.inputs.push({...g,amountPerMinute:p});const b=t.getRecipeBySlug(g.item.slug);b?(i.push({recipe:b,amountPerMinute:p,parentStepId:y.id}),y.isStartingStep=!1):y.isStartingStep=!0}),l.producedItems.forEach(g=>{const p=g.amount*c*f;y.outputs.push({...g,amountPerMinute:p}),n.some(b=>b.slug===g.item.slug)&&(y.isFinalStep=!0)}),u){const g=o.find(p=>p.id===u);g&&g.nextSteps.push(y.id)}o.push(y)}}const r=[];o.filter(l=>l.isStartingStep).forEach(l=>{l.inputs.filter(s=>s.item.isResource).forEach(s=>{const u=r.find(c=>c.outputs.some(d=>d.item.slug===s.item.slug));if(u)u.outputs[0].amountPerMinute+=s.amountPerMinute,l.nextSteps.push(u.id);else{const c={id:To(),inputs:[],outputs:[s],building:null,nextSteps:[],isStartingStep:!1,isFinalStep:!1,isResourceStep:!0,isFinalProductStep:!1,numberOfBuildings:0};l.nextSteps.push(c.id),r.push(c)}})});const a=[];return o.filter(l=>l.isFinalStep).forEach(l=>{l.outputs.forEach(s=>{const c=o.filter(f=>f.nextSteps.some(h=>h===l.id)).reduce((f,h)=>{var y;return f+(((y=h.inputs.find(g=>g.item.slug===s.item.slug))==null?void 0:y.amountPerMinute)??0)},0),d=a.find(f=>f.inputs.some(h=>h.item.slug===s.item.slug));if(d)d.inputs[0].amountPerMinute+=s.amountPerMinute-c,d.nextSteps.push(l.id);else{const f={id:To(),inputs:[],outputs:[],building:null,nextSteps:[l.id],isStartingStep:!1,isFinalStep:!1,isResourceStep:!1,isFinalProductStep:!0,numberOfBuildings:0};f.inputs.push({item:s.item,amountPerMinute:s.amountPerMinute-c}),a.push(f)}})}),o.concat(r).concat(a)},D0=(e,t,n)=>e.find(o=>{var i;return((i=o.building)==null?void 0:i.slug)===t.slug&&n.ingredientItems.every(r=>o.inputs.some(a=>a.item.slug===r.item.slug))&&n.producedItems.every(r=>o.outputs.some(a=>a.item.slug===r.item.slug))})??null,R0=we({components:{FactoryGraph:ss},setup(){return{dataStore:ba()}},data(){return{recipeOptions:[],recipes:[],recipeIdCounter:0,factoryPlan:null}},computed:{},async mounted(){await this.dataStore.getData(),this.recipeOptions=this.dataStore.getBaseItemRecipes()},methods:{createRecipeWithAmount(e,t,n){return{recipe:e,amount:t,id:n}},addEmptyRecipe(){this.recipes.push(this.createRecipeWithAmount(null,null,this.recipeIdCounter)),this.recipeIdCounter+=1},removeSelectedRecipe(e){this.recipes=this.recipes.filter(t=>t.id!==e)},generateFactoryPlan(){const e=[];this.recipes.forEach(n=>{n.amount&&n.recipe&&e.push({recipe:n.recipe,amountPerMinute:n.amount})});const t=A0(e);this.factoryPlan={steps:t}}}}),B0=xe({text:String,onClick:rt(),...Le(),...Ht()},"VLabel"),us=Oe()({name:"VLabel",props:B0(),setup(e,t){let{slots:n}=t;return $e(()=>{var o;return x("label",{class:["v-label",{"v-label--clickable":!!e.onClick},e.class],style:e.style,onClick:e.onClick},[e.text,(o=n.default)==null?void 0:o.call(n)])}),{}}}),cs=Symbol.for("vuetify:selection-control-group"),ds=xe({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:De,trueIcon:De,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:na},...Le(),...fi(),...Ht()},"SelectionControlGroup"),F0=xe({...ds({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");Oe()({name:"VSelectionControlGroup",props:F0(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const o=Re(e,"modelValue"),i=Yt(),r=z(()=>e.id||`v-selection-control-group-${i}`),a=z(()=>e.name||r.value),l=new Set;return pt(cs,{modelValue:o,forceUpdate:()=>{l.forEach(s=>s())},onForceUpdate:s=>{l.add(s),St(()=>{l.delete(s)})}}),oa({[e.defaultsTarget]:{color:fe(e,"color"),disabled:fe(e,"disabled"),density:fe(e,"density"),error:fe(e,"error"),inline:fe(e,"inline"),modelValue:o,multiple:z(()=>!!e.multiple||e.multiple==null&&Array.isArray(o.value)),name:a,falseIcon:fe(e,"falseIcon"),trueIcon:fe(e,"trueIcon"),readonly:fe(e,"readonly"),ripple:fe(e,"ripple"),type:fe(e,"type"),valueComparator:fe(e,"valueComparator")}}),$e(()=>{var s;return x("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class],style:e.style,role:e.type==="radio"?"radiogroup":void 0},[(s=n.default)==null?void 0:s.call(n)])}),{}}});const fs=xe({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...Le(),...ds()},"VSelectionControl");function z0(e){const t=lt(cs,void 0),{densityClasses:n}=hi(e),o=Re(e,"modelValue"),i=z(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),r=z(()=>e.falseValue!==void 0?e.falseValue:!1),a=z(()=>!!e.multiple||e.multiple==null&&Array.isArray(o.value)),l=z({get(){const h=t?t.modelValue.value:o.value;return a.value?We(h).some(y=>e.valueComparator(y,i.value)):e.valueComparator(h,i.value)},set(h){if(e.readonly)return;const y=h?i.value:r.value;let g=y;a.value&&(g=h?[...We(o.value),y]:We(o.value).filter(p=>!e.valueComparator(p,i.value))),t?t.modelValue.value=g:o.value=g}}),{textColorClasses:s,textColorStyles:u}=qn(z(()=>{if(!(e.error||e.disabled))return l.value?e.color:e.baseColor})),{backgroundColorClasses:c,backgroundColorStyles:d}=ga(z(()=>l.value&&!e.error&&!e.disabled?e.color:e.baseColor)),f=z(()=>l.value?e.trueIcon:e.falseIcon);return{group:t,densityClasses:n,trueValue:i,falseValue:r,model:l,textColorClasses:s,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:d,icon:f}}const Kr=Oe()({name:"VSelectionControl",directives:{Ripple:va},inheritAttrs:!1,props:fs(),emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:o}=t;const{group:i,densityClasses:r,icon:a,model:l,textColorClasses:s,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:d,trueValue:f}=z0(e),h=Yt(),y=ke(!1),g=ke(!1),p=ae(),b=z(()=>e.id||`input-${h}`),w=z(()=>!e.disabled&&!e.readonly);i==null||i.onForceUpdate(()=>{p.value&&(p.value.checked=l.value)});function O($){w.value&&(y.value=!0,tn($.target,":focus-visible")!==!1&&(g.value=!0))}function S(){y.value=!1,g.value=!1}function T($){$.stopPropagation()}function F($){if(!w.value){p.value&&(p.value.checked=l.value);return}e.readonly&&i&&Me(()=>i.forceUpdate()),l.value=$.target.checked}return $e(()=>{var E,Q;const $=o.label?o.label({label:e.label,props:{for:b.value}}):e.label,[K,U]=ia(n),R=x("input",Ee({ref:p,checked:l.value,disabled:!!e.disabled,id:b.value,onBlur:S,onFocus:O,onInput:F,"aria-disabled":!!e.disabled,"aria-label":e.label,type:e.type,value:f.value,name:e.name,"aria-checked":e.type==="checkbox"?l.value:void 0},U),null);return x("div",Ee({class:["v-selection-control",{"v-selection-control--dirty":l.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":y.value,"v-selection-control--focus-visible":g.value,"v-selection-control--inline":e.inline},r.value,e.class]},K,{style:e.style}),[x("div",{class:["v-selection-control__wrapper",s.value],style:u.value},[(E=o.default)==null?void 0:E.call(o,{backgroundColorClasses:c,backgroundColorStyles:d}),Bt(x("div",{class:["v-selection-control__input"]},[((Q=o.input)==null?void 0:Q.call(o,{model:l,textColorClasses:s,textColorStyles:u,backgroundColorClasses:c,backgroundColorStyles:d,inputNode:R,icon:a.value,props:{onFocus:O,onBlur:S,id:b.value}}))??x(_e,null,[a.value&&x(Ge,{key:"icon",icon:a.value},null),R])]),[[li("ripple"),e.ripple&&[!e.disabled&&!e.readonly,null,["center","circle"]]]])]),$&&x(us,{for:b.value,onClick:T},{default:()=>[$]})])}),{isFocused:y,input:p}}}),L0=xe({indeterminate:Boolean,indeterminateIcon:{type:De,default:"$checkboxIndeterminate"},...fs({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),hs=Oe()({name:"VCheckboxBtn",props:L0(),emits:{"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,t){let{slots:n}=t;const o=Re(e,"indeterminate"),i=Re(e,"modelValue");function r(s){o.value&&(o.value=!1)}const a=z(()=>o.value?e.indeterminateIcon:e.falseIcon),l=z(()=>o.value?e.indeterminateIcon:e.trueIcon);return $e(()=>{const s=Xn(Kr.filterProps(e),["modelValue"]);return x(Kr,Ee(s,{modelValue:i.value,"onUpdate:modelValue":[u=>i.value=u,r],class:["v-checkbox-btn",e.class],style:e.style,type:"checkbox",falseIcon:a.value,trueIcon:l.value,"aria-checked":o.value?"mixed":void 0}),n)}),{}}});function vs(e){const{t}=Kn();function n(o){let{name:i}=o;const r={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[i],a=e[`onClick:${i}`],l=a&&r?t(`$vuetify.input.${r}`,e.label??""):void 0;return x(Ge,{icon:e[`${i}Icon`],"aria-label":l,onClick:a},null)}return{InputIcon:n}}const G0=xe({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Le(),...Zn({transition:{component:da,leaveAbsolute:!0,group:!0}})},"VMessages"),H0=Oe()({name:"VMessages",props:G0(),setup(e,t){let{slots:n}=t;const o=z(()=>We(e.messages)),{textColorClasses:i,textColorStyles:r}=qn(z(()=>e.color));return $e(()=>x(ma,{transition:e.transition,tag:"div",class:["v-messages",i.value,e.class],style:[r.value,e.style],role:"alert","aria-live":"polite"},{default:()=>[e.active&&o.value.map((a,l)=>x("div",{class:"v-messages__message",key:`${l}-${o.value}`},[n.message?n.message({message:a}):a]))]})),{}}}),gs=xe({focused:Boolean,"onUpdate:focused":rt()},"focus");function ms(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ra();const n=Re(e,"focused"),o=z(()=>({[`${t}--focused`]:n.value}));function i(){n.value=!0}function r(){n.value=!1}return{focusClasses:o,isFocused:n,focus:i,blur:r}}const Y0=Symbol.for("vuetify:form");function Vi(){return lt(Y0,null)}const U0=xe({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...gs()},"validation");function X0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ra(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Yt();const o=Re(e,"modelValue"),i=z(()=>e.validationValue===void 0?o.value:e.validationValue),r=Vi(),a=ae([]),l=ke(!0),s=z(()=>!!(We(o.value===""?null:o.value).length||We(i.value===""?null:i.value).length)),u=z(()=>!!(e.disabled??(r==null?void 0:r.isDisabled.value))),c=z(()=>!!(e.readonly??(r==null?void 0:r.isReadonly.value))),d=z(()=>{var T;return(T=e.errorMessages)!=null&&T.length?We(e.errorMessages).concat(a.value).slice(0,Math.max(0,+e.maxErrors)):a.value}),f=z(()=>{let T=(e.validateOn??(r==null?void 0:r.validateOn.value))||"input";T==="lazy"&&(T="input lazy");const F=new Set((T==null?void 0:T.split(" "))??[]);return{blur:F.has("blur")||F.has("input"),input:F.has("input"),submit:F.has("submit"),lazy:F.has("lazy")}}),h=z(()=>{var T;return e.error||(T=e.errorMessages)!=null&&T.length?!1:e.rules.length?l.value?a.value.length||f.value.lazy?null:!0:!a.value.length:!0}),y=ke(!1),g=z(()=>({[`${t}--error`]:h.value===!1,[`${t}--dirty`]:s.value,[`${t}--disabled`]:u.value,[`${t}--readonly`]:c.value})),p=aa("validation"),b=z(()=>e.name??re(n));ta(()=>{r==null||r.register({id:b.value,vm:p,validate:S,reset:w,resetValidation:O})}),ri(()=>{r==null||r.unregister(b.value)}),je(async()=>{f.value.lazy||await S(!0),r==null||r.update(b.value,h.value,d.value)}),Ao(()=>f.value.input,()=>{se(i,()=>{if(i.value!=null)S();else if(e.focused){const T=se(()=>e.focused,F=>{F||S(),T()})}})}),Ao(()=>f.value.blur,()=>{se(()=>e.focused,T=>{T||S()})}),se([h,d],()=>{r==null||r.update(b.value,h.value,d.value)});async function w(){o.value=null,await Me(),await O()}async function O(){l.value=!0,f.value.lazy?a.value=[]:await S(!0)}async function S(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const F=[];y.value=!0;for(const $ of e.rules){if(F.length>=+(e.maxErrors??1))break;const U=await(typeof $=="function"?$:()=>$)(i.value);if(U!==!0){if(U!==!1&&typeof U!="string"){console.warn(`${U} is not a valid value. Rule functions must return boolean true or a string.`);continue}F.push(U||"")}}return a.value=F,y.value=!1,l.value=T,a.value}return{errorMessages:d,isDirty:s,isDisabled:u,isReadonly:c,isPristine:l,isValid:h,isValidating:y,reset:w,resetValidation:O,validate:S,validationClasses:g}}const ps=xe({id:String,appendIcon:De,centerAffix:{type:Boolean,default:!0},prependIcon:De,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":rt(),"onClick:append":rt(),...Le(),...fi(),...Hs(la(),["maxWidth","minWidth","width"]),...Ht(),...U0()},"VInput"),Wr=Oe()({name:"VInput",props:{...ps()},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:n,slots:o,emit:i}=t;const{densityClasses:r}=hi(e),{dimensionStyles:a}=sa(e),{themeClasses:l}=Wn(e),{rtlClasses:s}=si(),{InputIcon:u}=vs(e),c=Yt(),d=z(()=>e.id||`input-${c}`),f=z(()=>`${d.value}-messages`),{errorMessages:h,isDirty:y,isDisabled:g,isReadonly:p,isPristine:b,isValid:w,isValidating:O,reset:S,resetValidation:T,validate:F,validationClasses:$}=X0(e,"v-input",d),K=z(()=>({id:d,messagesId:f,isDirty:y,isDisabled:g,isReadonly:p,isPristine:b,isValid:w,isValidating:O,reset:S,resetValidation:T,validate:F})),U=z(()=>{var R;return(R=e.errorMessages)!=null&&R.length||!b.value&&h.value.length?h.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages});return $e(()=>{var _,V,P,B;const R=!!(o.prepend||e.prependIcon),E=!!(o.append||e.appendIcon),Q=U.value.length>0,J=!e.hideDetails||e.hideDetails==="auto"&&(Q||!!o.details);return x("div",{class:["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix,"v-input--hide-spin-buttons":e.hideSpinButtons},r.value,l.value,s.value,$.value,e.class],style:[a.value,e.style]},[R&&x("div",{key:"prepend",class:"v-input__prepend"},[(_=o.prepend)==null?void 0:_.call(o,K.value),e.prependIcon&&x(u,{key:"prepend-icon",name:"prepend"},null)]),o.default&&x("div",{class:"v-input__control"},[(V=o.default)==null?void 0:V.call(o,K.value)]),E&&x("div",{key:"append",class:"v-input__append"},[e.appendIcon&&x(u,{key:"append-icon",name:"append"},null),(P=o.append)==null?void 0:P.call(o,K.value)]),J&&x("div",{class:"v-input__details"},[x(H0,{id:f.value,active:Q,messages:U.value},{message:o.message}),(B=o.details)==null?void 0:B.call(o,K.value)])])}),{reset:S,resetValidation:T,validate:F,isValid:w,errorMessages:h}}});function K0(e){let{selectedElement:t,containerElement:n,isRtl:o,isHorizontal:i}=e;const r=fn(i,n),a=ys(i,o,n),l=fn(i,t),s=ws(i,t),u=l*.4;return a>s?s-u:a+r<s+l?s-r+l+u:a}function W0(e){let{selectedElement:t,containerElement:n,isHorizontal:o}=e;const i=fn(o,n),r=ws(o,t),a=fn(o,t);return r-i/2+a/2}function jr(e,t){const n=e?"scrollWidth":"scrollHeight";return(t==null?void 0:t[n])||0}function j0(e,t){const n=e?"clientWidth":"clientHeight";return(t==null?void 0:t[n])||0}function ys(e,t,n){if(!n)return 0;const{scrollLeft:o,offsetWidth:i,scrollWidth:r}=n;return e?t?r-i+o:o:n.scrollTop}function fn(e,t){const n=e?"offsetWidth":"offsetHeight";return(t==null?void 0:t[n])||0}function ws(e,t){const n=e?"offsetLeft":"offsetTop";return(t==null?void 0:t[n])||0}const q0=Symbol.for("vuetify:v-slide-group"),bs=xe({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:q0},nextIcon:{type:De,default:"$next"},prevIcon:{type:De,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...Le(),...Ys({mobile:null}),...ui(),..._a({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),qr=Oe()({name:"VSlideGroup",props:bs(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{isRtl:o}=si(),{displayClasses:i,mobile:r}=ua(e),a=Ea(e,e.symbol),l=ke(!1),s=ke(0),u=ke(0),c=ke(0),d=z(()=>e.direction==="horizontal"),{resizeRef:f,contentRect:h}=Tn(),{resizeRef:y,contentRect:g}=Tn(),p=Us(),b=z(()=>({container:f.el,duration:200,easing:"easeOutQuart"})),w=z(()=>a.selected.value.length?a.items.value.findIndex(k=>k.id===a.selected.value[0]):-1),O=z(()=>a.selected.value.length?a.items.value.findIndex(k=>k.id===a.selected.value[a.selected.value.length-1]):-1);if(Ft){let k=-1;se(()=>[a.selected.value,h.value,g.value,d.value],()=>{cancelAnimationFrame(k),k=requestAnimationFrame(()=>{if(h.value&&g.value){const A=d.value?"width":"height";u.value=h.value[A],c.value=g.value[A],l.value=u.value+1<c.value}if(w.value>=0&&y.el){const A=y.el.children[O.value];T(A,e.centerActive)}})})}const S=ke(!1);function T(k,A){let Y=0;A?Y=W0({containerElement:f.el,isHorizontal:d.value,selectedElement:k}):Y=K0({containerElement:f.el,isHorizontal:d.value,isRtl:o.value,selectedElement:k}),F(Y)}function F(k){if(!Ft||!f.el)return;const A=fn(d.value,f.el),Y=ys(d.value,o.value,f.el);if(!(jr(d.value,f.el)<=A||Math.abs(k-Y)<16)){if(d.value&&o.value&&f.el){const{scrollWidth:L,offsetWidth:W}=f.el;k=L-W-k}d.value?p.horizontal(k,b.value):p(k,b.value)}}function $(k){const{scrollTop:A,scrollLeft:Y}=k.target;s.value=d.value?Y:A}function K(k){if(S.value=!0,!(!l.value||!y.el)){for(const A of k.composedPath())for(const Y of y.el.children)if(Y===A){T(Y);return}}}function U(k){S.value=!1}let R=!1;function E(k){var A;!R&&!S.value&&!(k.relatedTarget&&((A=y.el)!=null&&A.contains(k.relatedTarget)))&&_(),R=!1}function Q(){R=!0}function J(k){if(!y.el)return;function A(Y){k.preventDefault(),_(Y)}d.value?k.key==="ArrowRight"?A(o.value?"prev":"next"):k.key==="ArrowLeft"&&A(o.value?"next":"prev"):k.key==="ArrowDown"?A("next"):k.key==="ArrowUp"&&A("prev"),k.key==="Home"?A("first"):k.key==="End"&&A("last")}function _(k){var Y,H;if(!y.el)return;let A;if(!k)A=Do(y.el)[0];else if(k==="next"){if(A=(Y=y.el.querySelector(":focus"))==null?void 0:Y.nextElementSibling,!A)return _("first")}else if(k==="prev"){if(A=(H=y.el.querySelector(":focus"))==null?void 0:H.previousElementSibling,!A)return _("last")}else k==="first"?A=y.el.firstElementChild:k==="last"&&(A=y.el.lastElementChild);A&&A.focus({preventScroll:!0})}function V(k){const A=d.value&&o.value?-1:1,Y=(k==="prev"?-A:A)*u.value;let H=s.value+Y;if(d.value&&o.value&&f.el){const{scrollWidth:L,offsetWidth:W}=f.el;H+=L-W}F(H)}const P=z(()=>({next:a.next,prev:a.prev,select:a.select,isSelected:a.isSelected})),B=z(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!r.value;case!0:return l.value||Math.abs(s.value)>0;case"mobile":return r.value||l.value||Math.abs(s.value)>0;default:return!r.value&&(l.value||Math.abs(s.value)>0)}}),M=z(()=>Math.abs(s.value)>1),C=z(()=>{if(!f.value)return!1;const k=jr(d.value,f.el),A=j0(d.value,f.el);return k-A-Math.abs(s.value)>1});return $e(()=>x(e.tag,{class:["v-slide-group",{"v-slide-group--vertical":!d.value,"v-slide-group--has-affixes":B.value,"v-slide-group--is-overflowing":l.value},i.value,e.class],style:e.style,tabindex:S.value||a.selected.value.length?-1:0,onFocus:E},{default:()=>{var k,A,Y;return[B.value&&x("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!M.value}],onMousedown:Q,onClick:()=>M.value&&V("prev")},[((k=n.prev)==null?void 0:k.call(n,P.value))??x($i,null,{default:()=>[x(Ge,{icon:o.value?e.nextIcon:e.prevIcon},null)]})]),x("div",{key:"container",ref:f,class:"v-slide-group__container",onScroll:$},[x("div",{ref:y,class:"v-slide-group__content",onFocusin:K,onFocusout:U,onKeydown:J},[(A=n.default)==null?void 0:A.call(n,P.value)])]),B.value&&x("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!C.value}],onMousedown:Q,onClick:()=>C.value&&V("next")},[((Y=n.next)==null?void 0:Y.call(n,P.value))??x($i,null,{default:()=>[x(Ge,{icon:o.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:a.selected,scrollTo:V,scrollOffset:s,focus:_}}}),_s=Symbol.for("vuetify:v-chip-group"),Z0=xe({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:na},...bs(),...Le(),..._a({selectedClass:"v-chip--selected"}),...ui(),...Ht(),...pa({variant:"tonal"})},"VChipGroup");Oe()({name:"VChipGroup",props:Z0(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const{themeClasses:o}=Wn(e),{isSelected:i,select:r,next:a,prev:l,selected:s}=Ea(e,_s);return oa({VChip:{color:fe(e,"color"),disabled:fe(e,"disabled"),filter:fe(e,"filter"),variant:fe(e,"variant")}}),$e(()=>{const u=qr.filterProps(e);return x(qr,Ee(u,{class:["v-chip-group",{"v-chip-group--column":e.column},o.value,e.class],style:e.style}),{default:()=>{var c;return[(c=n.default)==null?void 0:c.call(n,{isSelected:i,select:r,next:a,prev:l,selected:s.value})]}})}),{}}});const Q0=xe({activeClass:String,appendAvatar:String,appendIcon:De,closable:Boolean,closeIcon:{type:De,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:De,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:rt(),onClickOnce:rt(),...ou(),...Le(),...fi(),...iu(),...wu(),...ya(),...ru(),...au(),...ui({tag:"span"}),...Ht(),...pa({variant:"tonal"})},"VChip"),Es=Oe()({name:"VChip",directives:{Ripple:va},props:Q0(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:n,emit:o,slots:i}=t;const{t:r}=Kn(),{borderClasses:a}=lu(e),{colorClasses:l,colorStyles:s,variantClasses:u}=su(e),{densityClasses:c}=hi(e),{elevationClasses:d}=uu(e),{roundedClasses:f}=wa(e),{sizeClasses:h}=cu(e),{themeClasses:y}=Wn(e),g=Re(e,"modelValue"),p=bu(e,_s,!1),b=du(e,n),w=z(()=>e.link!==!1&&b.isLink.value),O=z(()=>!e.disabled&&e.link!==!1&&(!!p||e.link||b.isClickable.value)),S=z(()=>({"aria-label":r(e.closeLabel),onClick($){$.preventDefault(),$.stopPropagation(),g.value=!1,o("click:close",$)}}));function T($){var K;o("click",$),O.value&&((K=b.navigate)==null||K.call(b,$),p==null||p.toggle())}function F($){($.key==="Enter"||$.key===" ")&&($.preventDefault(),T($))}return()=>{const $=b.isLink.value?"a":e.tag,K=!!(e.appendIcon||e.appendAvatar),U=!!(K||i.append),R=!!(i.close||e.closable),E=!!(i.filter||e.filter)&&p,Q=!!(e.prependIcon||e.prependAvatar),J=!!(Q||i.prepend),_=!p||p.isSelected.value;return g.value&&Bt(x($,{class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":O.value,"v-chip--filter":E,"v-chip--pill":e.pill},y.value,a.value,_?l.value:void 0,c.value,d.value,f.value,h.value,u.value,p==null?void 0:p.selectedClass.value,e.class],style:[_?s.value:void 0,e.style],disabled:e.disabled||void 0,draggable:e.draggable,href:b.href.value,tabindex:O.value?0:void 0,onClick:T,onKeydown:O.value&&!w.value&&F},{default:()=>{var V;return[fu(O.value,"v-chip"),E&&x(fa,{key:"filter"},{default:()=>[Bt(x("div",{class:"v-chip__filter"},[i.filter?x(ht,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},i.filter):x(Ge,{key:"filter-icon",icon:e.filterIcon},null)]),[[ci,p.isSelected.value]])]}),J&&x("div",{key:"prepend",class:"v-chip__prepend"},[i.prepend?x(ht,{key:"prepend-defaults",disabled:!Q,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},i.prepend):x(_e,null,[e.prependIcon&&x(Ge,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&x($n,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),x("div",{class:"v-chip__content","data-no-activator":""},[((V=i.default)==null?void 0:V.call(i,{isSelected:p==null?void 0:p.isSelected.value,selectedClass:p==null?void 0:p.selectedClass.value,select:p==null?void 0:p.select,toggle:p==null?void 0:p.toggle,value:p==null?void 0:p.value.value,disabled:e.disabled}))??e.text]),U&&x("div",{key:"append",class:"v-chip__append"},[i.append?x(ht,{key:"append-defaults",disabled:!K,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},i.append):x(_e,null,[e.appendIcon&&x(Ge,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&x($n,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),R&&x("button",Ee({key:"close",class:"v-chip__close",type:"button"},S.value),[i.close?x(ht,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},i.close):x(Ge,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[li("ripple"),O.value&&e.ripple,null]])}}}),J0=xe({id:String,...Xn(_u({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:Sa}}),["absolute"])},"VMenu"),Ss=Oe()({name:"VMenu",props:J0(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const o=Re(e,"modelValue"),{scopeId:i}=Eu(),r=Yt(),a=z(()=>e.id||`v-menu-${r}`),l=ae(),s=lt(Di,null),u=ke(0);pt(Di,{register(){++u.value},unregister(){--u.value},closeParents(g){setTimeout(()=>{!u.value&&!e.persistent&&(g==null||g&&!Xs(g,l.value.contentEl))&&(o.value=!1,s==null||s.closeParents())},40)}});async function c(g){var w,O,S;const p=g.relatedTarget,b=g.target;await Me(),o.value&&p!==b&&((w=l.value)!=null&&w.contentEl)&&((O=l.value)!=null&&O.globalTop)&&![document,l.value.contentEl].includes(b)&&!l.value.contentEl.contains(b)&&((S=Do(l.value.contentEl)[0])==null||S.focus())}se(o,g=>{g?(s==null||s.register(),document.addEventListener("focusin",c,{once:!0})):(s==null||s.unregister(),document.removeEventListener("focusin",c))});function d(g){s==null||s.closeParents(g)}function f(g){var p,b,w;if(!e.disabled)if(g.key==="Tab"||g.key==="Enter"&&!e.closeOnContentClick){if(g.key==="Enter"&&(g.target instanceof HTMLTextAreaElement||g.target instanceof HTMLInputElement&&g.target.closest("form")))return;g.key==="Enter"&&g.preventDefault(),Ks(Do((p=l.value)==null?void 0:p.contentEl,!1),g.shiftKey?"prev":"next",S=>S.tabIndex>=0)||(o.value=!1,(w=(b=l.value)==null?void 0:b.activatorEl)==null||w.focus())}else["Enter"," "].includes(g.key)&&e.closeOnContentClick&&(o.value=!1,s==null||s.closeParents())}function h(g){var b;if(e.disabled)return;const p=(b=l.value)==null?void 0:b.contentEl;p&&o.value?g.key==="ArrowDown"?(g.preventDefault(),Ti(p,"next")):g.key==="ArrowUp"&&(g.preventDefault(),Ti(p,"prev")):["ArrowDown","ArrowUp"].includes(g.key)&&(o.value=!0,g.preventDefault(),setTimeout(()=>setTimeout(()=>h(g))))}const y=z(()=>Ee({"aria-haspopup":"menu","aria-expanded":String(o.value),"aria-owns":a.value,onKeydown:h},e.activatorProps));return $e(()=>{const g=Ri.filterProps(e);return x(Ri,Ee({ref:l,id:a.value,class:["v-menu",e.class],style:e.style},g,{modelValue:o.value,"onUpdate:modelValue":p=>o.value=p,absolute:!0,activatorProps:y.value,"onClick:outside":d,onKeydown:f},i),{activator:n.activator,default:function(){for(var p=arguments.length,b=new Array(p),w=0;w<p;w++)b[w]=arguments[w];return x(ht,{root:"VMenu"},{default:()=>{var O;return[(O=n.default)==null?void 0:O.call(n,...b)]}})}})}),Qn({id:a,ΨopenChildren:u},l)}}),ew=xe({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Le(),...Zn({transition:{component:da}})},"VCounter"),tw=Oe()({name:"VCounter",functional:!0,props:ew(),setup(e,t){let{slots:n}=t;const o=z(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return $e(()=>x(ma,{transition:e.transition},{default:()=>[Bt(x("div",{class:["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class],style:e.style},[n.default?n.default({counter:o.value,max:e.max,value:e.value}):o.value]),[[ci,e.active]])]})),{}}}),nw=xe({floating:Boolean,...Le()},"VFieldLabel"),In=Oe()({name:"VFieldLabel",props:nw(),setup(e,t){let{slots:n}=t;return $e(()=>x(us,{class:["v-field-label",{"v-field-label--floating":e.floating},e.class],style:e.style,"aria-hidden":e.floating||void 0},n)),{}}}),ow=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],xs=xe({appendInnerIcon:De,bgColor:String,clearable:Boolean,clearIcon:{type:De,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:De,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>ow.includes(e)},"onClick:clear":rt(),"onClick:appendInner":rt(),"onClick:prependInner":rt(),...Le(),...hu(),...ya(),...Ht()},"VField"),ks=Oe()({name:"VField",inheritAttrs:!1,props:{id:String,...gs(),...xs()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:o,slots:i}=t;const{themeClasses:r}=Wn(e),{loaderClasses:a}=vu(e),{focusClasses:l,isFocused:s,focus:u,blur:c}=ms(e),{InputIcon:d}=vs(e),{roundedClasses:f}=wa(e),{rtlClasses:h}=si(),y=z(()=>e.dirty||e.active),g=z(()=>!e.singleLine&&!!(e.label||i.label)),p=Yt(),b=z(()=>e.id||`input-${p}`),w=z(()=>`${b.value}-messages`),O=ae(),S=ae(),T=ae(),F=z(()=>["plain","underlined"].includes(e.variant)),{backgroundColorClasses:$,backgroundColorStyles:K}=ga(fe(e,"bgColor")),{textColorClasses:U,textColorStyles:R}=qn(z(()=>e.error||e.disabled?void 0:y.value&&s.value?e.color:e.baseColor));se(y,_=>{if(g.value){const V=O.value.$el,P=S.value.$el;requestAnimationFrame(()=>{const B=Su(V),M=P.getBoundingClientRect(),C=M.x-B.x,k=M.y-B.y-(B.height/2-M.height/2),A=M.width/.75,Y=Math.abs(A-B.width)>1?{maxWidth:Wt(A)}:void 0,H=getComputedStyle(V),L=getComputedStyle(P),W=parseFloat(H.transitionDuration)*1e3||150,ie=parseFloat(L.getPropertyValue("--v-field-label-scale")),oe=L.getPropertyValue("color");V.style.visibility="visible",P.style.visibility="hidden",xu(V,{transform:`translate(${C}px, ${k}px) scale(${ie})`,color:oe,...Y},{duration:W,easing:ku,direction:_?"normal":"reverse"}).finished.then(()=>{V.style.removeProperty("visibility"),P.style.removeProperty("visibility")})})}},{flush:"post"});const E=z(()=>({isActive:y,isFocused:s,controlRef:T,blur:c,focus:u}));function Q(_){_.target!==document.activeElement&&_.preventDefault()}function J(_){var V;_.key!=="Enter"&&_.key!==" "||(_.preventDefault(),_.stopPropagation(),(V=e["onClick:clear"])==null||V.call(e,new MouseEvent("click")))}return $e(()=>{var C,k,A;const _=e.variant==="outlined",V=!!(i["prepend-inner"]||e.prependInnerIcon),P=!!(e.clearable||i.clear),B=!!(i["append-inner"]||e.appendInnerIcon||P),M=()=>i.label?i.label({...E.value,label:e.label,props:{for:b.value}}):e.label;return x("div",Ee({class:["v-field",{"v-field--active":y.value,"v-field--appended":B,"v-field--center-affix":e.centerAffix??!F.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":V,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!M(),[`v-field--variant-${e.variant}`]:!0},r.value,$.value,l.value,a.value,f.value,h.value,e.class],style:[K.value,e.style],onClick:Q},n),[x("div",{class:"v-field__overlay"},null),x(gu,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:i.loader}),V&&x("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&x(d,{key:"prepend-icon",name:"prependInner"},null),(C=i["prepend-inner"])==null?void 0:C.call(i,E.value)]),x("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&g.value&&x(In,{key:"floating-label",ref:S,class:[U.value],floating:!0,for:b.value,style:R.value},{default:()=>[M()]}),x(In,{ref:O,for:b.value},{default:()=>[M()]}),(k=i.default)==null?void 0:k.call(i,{...E.value,props:{id:b.value,class:"v-field__input","aria-describedby":w.value},focus:u,blur:c})]),P&&x(fa,{key:"clear"},{default:()=>[Bt(x("div",{class:"v-field__clearable",onMousedown:Y=>{Y.preventDefault(),Y.stopPropagation()}},[x(ht,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[i.clear?i.clear({...E.value,props:{onKeydown:J,onFocus:u,onBlur:c,onClick:e["onClick:clear"]}}):x(d,{name:"clear",onKeydown:J,onFocus:u,onBlur:c},null)]})]),[[ci,e.dirty]])]}),B&&x("div",{key:"append",class:"v-field__append-inner"},[(A=i["append-inner"])==null?void 0:A.call(i,E.value),e.appendInnerIcon&&x(d,{key:"append-icon",name:"appendInner"},null)]),x("div",{class:["v-field__outline",U.value],style:R.value},[_&&x(_e,null,[x("div",{class:"v-field__outline__start"},null),g.value&&x("div",{class:"v-field__outline__notch"},[x(In,{ref:S,floating:!0,for:b.value},{default:()=>[M()]})]),x("div",{class:"v-field__outline__end"},null)]),F.value&&g.value&&x(In,{ref:S,floating:!0,for:b.value},{default:()=>[M()]})])])}),{controlRef:T}}});function iw(e){const t=Object.keys(ks.props).filter(n=>!Ws(n)&&n!=="class"&&n!=="style");return js(e,t)}const rw=["color","file","time","date","datetime-local","week","month"],Oi=xe({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...ps(),...xs()},"VTextField"),hn=Oe()({name:"VTextField",directives:{Intersect:mu},inheritAttrs:!1,props:Oi(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{attrs:n,emit:o,slots:i}=t;const r=Re(e,"modelValue"),{isFocused:a,focus:l,blur:s}=ms(e),u=z(()=>typeof e.counterValue=="function"?e.counterValue(r.value):typeof e.counterValue=="number"?e.counterValue:(r.value??"").toString().length),c=z(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),d=z(()=>["plain","underlined"].includes(e.variant));function f(F,$){var K,U;!e.autofocus||!F||(U=(K=$[0].target)==null?void 0:K.focus)==null||U.call(K)}const h=ae(),y=ae(),g=ae(),p=z(()=>rw.includes(e.type)||e.persistentPlaceholder||a.value||e.active);function b(){var F;g.value!==document.activeElement&&((F=g.value)==null||F.focus()),a.value||l()}function w(F){o("mousedown:control",F),F.target!==g.value&&(b(),F.preventDefault())}function O(F){b(),o("click:control",F)}function S(F){F.stopPropagation(),b(),Me(()=>{r.value=null,Zs(e["onClick:clear"],F)})}function T(F){var K;const $=F.target;if(r.value=$.value,(K=e.modelModifiers)!=null&&K.trim&&["text","search","password","tel","url"].includes(e.type)){const U=[$.selectionStart,$.selectionEnd];Me(()=>{$.selectionStart=U[0],$.selectionEnd=U[1]})}}return $e(()=>{const F=!!(i.counter||e.counter!==!1&&e.counter!=null),$=!!(F||i.details),[K,U]=ia(n),{modelValue:R,...E}=Wr.filterProps(e),Q=iw(e);return x(Wr,Ee({ref:h,modelValue:r.value,"onUpdate:modelValue":J=>r.value=J,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":d.value},e.class],style:e.style},K,E,{centerAffix:!d.value,focused:a.value}),{...i,default:J=>{let{id:_,isDisabled:V,isDirty:P,isReadonly:B,isValid:M}=J;return x(ks,Ee({ref:y,onMousedown:w,onClick:O,"onClick:clear":S,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},Q,{id:_.value,active:p.value||P.value,dirty:P.value||e.dirty,disabled:V.value,focused:a.value,error:M.value===!1}),{...i,default:C=>{let{props:{class:k,...A}}=C;const Y=Bt(x("input",Ee({ref:g,value:r.value,onInput:T,autofocus:e.autofocus,readonly:B.value,disabled:V.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:b,onBlur:s},A,U),null),[[li("intersect"),{handler:f},null,{once:!0}]]);return x(_e,null,[e.prefix&&x("span",{class:"v-text-field__prefix"},[x("span",{class:"v-text-field__prefix__text"},[e.prefix])]),i.default?x("div",{class:k,"data-no-activator":""},[i.default(),Y]):qs(Y,{class:k}),e.suffix&&x("span",{class:"v-text-field__suffix"},[x("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:$?J=>{var _;return x(_e,null,[(_=i.details)==null?void 0:_.call(i,J),F&&x(_e,null,[x("span",null,null),x(tw,{active:e.persistentCounter||a.value,value:u.value,max:c.value,disabled:e.disabled},i.counter)])])}:void 0})}),Qn({},h,y,g)}}),aw=xe({renderless:Boolean,...Le()},"VVirtualScrollItem"),lw=Oe()({name:"VVirtualScrollItem",inheritAttrs:!1,props:aw(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:n,emit:o,slots:i}=t;const{resizeRef:r,contentRect:a}=Tn(void 0,"border");se(()=>{var l;return(l=a.value)==null?void 0:l.height},l=>{l!=null&&o("update:height",l)}),$e(()=>{var l,s;return e.renderless?x(_e,null,[(l=i.default)==null?void 0:l.call(i,{itemRef:r})]):x("div",Ee({ref:r,class:["v-virtual-scroll__item",e.class],style:e.style},n),[(s=i.default)==null?void 0:s.call(i)])})}}),sw=-1,uw=1,$o=100,cw=xe({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function dw(e,t){const n=ua(),o=ke(0);Ro(()=>{o.value=parseFloat(e.itemHeight||0)});const i=ke(0),r=ke(Math.ceil((parseInt(e.height)||n.height.value)/(o.value||16))||1),a=ke(0),l=ke(0),s=ae(),u=ae();let c=0;const{resizeRef:d,contentRect:f}=Tn();Ro(()=>{d.value=s.value});const h=z(()=>{var C;return s.value===document.documentElement?n.height.value:((C=f.value)==null?void 0:C.height)||parseInt(e.height)||0}),y=z(()=>!!(s.value&&u.value&&h.value&&o.value));let g=Array.from({length:t.value.length}),p=Array.from({length:t.value.length});const b=ke(0);let w=-1;function O(C){return g[C]||o.value}const S=Qs(()=>{const C=performance.now();p[0]=0;const k=t.value.length;for(let A=1;A<=k-1;A++)p[A]=(p[A-1]||0)+O(A-1);b.value=Math.max(b.value,performance.now()-C)},b),T=se(y,C=>{C&&(T(),c=u.value.offsetTop,S.immediate(),V(),~w&&Me(()=>{Ft&&window.requestAnimationFrame(()=>{B(w),w=-1})}))});St(()=>{S.clear()});function F(C,k){const A=g[C],Y=o.value;o.value=Y?Math.min(o.value,k):k,(A!==k||Y!==o.value)&&(g[C]=k,S())}function $(C){return C=fo(C,0,t.value.length-1),p[C]||0}function K(C){return fw(p,C)}let U=0,R=0,E=0;se(h,(C,k)=>{k&&(V(),C<k&&requestAnimationFrame(()=>{R=0,V()}))});function Q(){if(!s.value||!u.value)return;const C=s.value.scrollTop,k=performance.now();k-E>500?(R=Math.sign(C-U),c=u.value.offsetTop):R=C-U,U=C,E=k,V()}function J(){!s.value||!u.value||(R=0,E=0,V())}let _=-1;function V(){cancelAnimationFrame(_),_=requestAnimationFrame(P)}function P(){if(!s.value||!h.value)return;const C=U-c,k=Math.sign(R),A=Math.max(0,C-$o),Y=fo(K(A),0,t.value.length),H=C+h.value+$o,L=fo(K(H)+1,Y+1,t.value.length);if((k!==sw||Y<i.value)&&(k!==uw||L>r.value)){const W=$(i.value)-$(Y),ie=$(L)-$(r.value);Math.max(W,ie)>$o?(i.value=Y,r.value=L):(Y<=0&&(i.value=Y),L>=t.value.length&&(r.value=L))}a.value=$(i.value),l.value=$(t.value.length)-$(r.value)}function B(C){const k=$(C);!s.value||C&&!k?w=C:s.value.scrollTop=k}const M=z(()=>t.value.slice(i.value,r.value).map((C,k)=>({raw:C,index:k+i.value})));return se(t,()=>{g=Array.from({length:t.value.length}),p=Array.from({length:t.value.length}),S.immediate(),V()},{deep:!0}),{containerRef:s,markerRef:u,computedItems:M,paddingTop:a,paddingBottom:l,scrollToIndex:B,handleScroll:Q,handleScrollend:J,handleItemResize:F}}function fw(e,t){let n=e.length-1,o=0,i=0,r=null,a=-1;if(e[n]<t)return n;for(;o<=n;)if(i=o+n>>1,r=e[i],r>t)n=i-1;else if(r<t)a=i,o=i+1;else return r===t?i:o;return a}const hw=xe({items:{type:Array,default:()=>[]},renderless:Boolean,...cw(),...Le(),...la()},"VVirtualScroll"),Cs=Oe()({name:"VVirtualScroll",props:hw(),setup(e,t){let{slots:n}=t;const o=aa("VVirtualScroll"),{dimensionStyles:i}=sa(e),{containerRef:r,markerRef:a,handleScroll:l,handleScrollend:s,handleItemResize:u,scrollToIndex:c,paddingTop:d,paddingBottom:f,computedItems:h}=dw(e,fe(e,"items"));return Ao(()=>e.renderless,()=>{function y(){var b,w;const p=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";r.value===document.documentElement?(document[p]("scroll",l,{passive:!0}),document[p]("scrollend",s)):((b=r.value)==null||b[p]("scroll",l,{passive:!0}),(w=r.value)==null||w[p]("scrollend",s))}je(()=>{r.value=Cu(o.vnode.el,!0),y(!0)}),St(y)}),$e(()=>{const y=h.value.map(g=>x(lw,{key:g.index,renderless:e.renderless,"onUpdate:height":p=>u(g.index,p)},{default:p=>{var b;return(b=n.default)==null?void 0:b.call(n,{item:g.raw,index:g.index,...p})}}));return e.renderless?x(_e,null,[x("div",{ref:a,class:"v-virtual-scroll__spacer",style:{paddingTop:Wt(d.value)}},null),y,x("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:Wt(f.value)}},null)]):x("div",{ref:r,class:["v-virtual-scroll",e.class],onScrollPassive:l,onScrollend:s,style:[i.value,e.style]},[x("div",{ref:a,class:"v-virtual-scroll__container",style:{paddingTop:Wt(d.value),paddingBottom:Wt(f.value)}},[y])])}),{scrollToIndex:c}}});function Ns(e,t){const n=ke(!1);let o;function i(l){cancelAnimationFrame(o),n.value=!0,o=requestAnimationFrame(()=>{o=requestAnimationFrame(()=>{n.value=!1})})}async function r(){await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>requestAnimationFrame(l)),await new Promise(l=>{if(n.value){const s=se(n,()=>{s(),l()})}else l()})}async function a(l){var c,d;if(l.key==="Tab"&&((c=t.value)==null||c.focus()),!["PageDown","PageUp","Home","End"].includes(l.key))return;const s=(d=e.value)==null?void 0:d.$el;if(!s)return;(l.key==="Home"||l.key==="End")&&s.scrollTo({top:l.key==="Home"?0:s.scrollHeight,behavior:"smooth"}),await r();const u=s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(l.key==="PageDown"||l.key==="Home"){const f=s.getBoundingClientRect().top;for(const h of u)if(h.getBoundingClientRect().top>=f){h.focus();break}}else{const f=s.getBoundingClientRect().bottom;for(const h of[...u].reverse())if(h.getBoundingClientRect().bottom<=f){h.focus();break}}}return{onListScroll:i,onListKeydown:a}}const Is=xe({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:De,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...tu({itemChildren:!1})},"Select"),vw=xe({...Is(),...Xn(Oi({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Zn({transition:{component:Sa}})},"VSelect");Oe()({name:"VSelect",props:vw(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:o}=Kn(),i=ae(),r=ae(),a=ae(),l=Re(e,"menu"),s=z({get:()=>l.value,set:M=>{var C;l.value&&!M&&((C=r.value)!=null&&C.ΨopenChildren)||(l.value=M)}}),{items:u,transformIn:c,transformOut:d}=ha(e),f=Re(e,"modelValue",[],M=>c(M===null?[null]:We(M)),M=>{const C=d(M);return e.multiple?C:C[0]??null}),h=z(()=>typeof e.counterValue=="function"?e.counterValue(f.value):typeof e.counterValue=="number"?e.counterValue:f.value.length),y=Vi(),g=z(()=>f.value.map(M=>M.value)),p=ke(!1),b=z(()=>s.value?e.closeText:e.openText);let w="",O;const S=z(()=>e.hideSelected?u.value.filter(M=>!f.value.some(C=>e.valueComparator(C,M))):u.value),T=z(()=>e.hideNoData&&!S.value.length||e.readonly||(y==null?void 0:y.isReadonly.value)),F=z(()=>{var M;return{...e.menuProps,activatorProps:{...((M=e.menuProps)==null?void 0:M.activatorProps)||{},"aria-haspopup":"listbox"}}}),$=ae(),{onListScroll:K,onListKeydown:U}=Ns($,i);function R(M){e.openOnClear&&(s.value=!0)}function E(){T.value||(s.value=!s.value)}function Q(M){var H,L;if(!M.key||e.readonly||y!=null&&y.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(M.key)&&M.preventDefault(),["Enter","ArrowDown"," "].includes(M.key)&&(s.value=!0),["Escape","Tab"].includes(M.key)&&(s.value=!1),M.key==="Home"?(H=$.value)==null||H.focus("first"):M.key==="End"&&((L=$.value)==null||L.focus("last"));const C=1e3;function k(W){const ie=W.key.length===1,oe=!W.ctrlKey&&!W.metaKey&&!W.altKey;return ie&&oe}if(e.multiple||!k(M))return;const A=performance.now();A-O>C&&(w=""),w+=M.key.toLowerCase(),O=A;const Y=u.value.find(W=>W.title.toLowerCase().startsWith(w));if(Y!==void 0){f.value=[Y];const W=S.value.indexOf(Y);Ft&&window.requestAnimationFrame(()=>{var ie;W>=0&&((ie=a.value)==null||ie.scrollToIndex(W))})}}function J(M){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!M.props.disabled)if(e.multiple){const k=f.value.findIndex(Y=>e.valueComparator(Y.value,M.value)),A=C??!~k;if(~k){const Y=A?[...f.value,M]:[...f.value];Y.splice(k,1),f.value=Y}else A&&(f.value=[...f.value,M])}else{const k=C!==!1;f.value=k?[M]:[],Me(()=>{s.value=!1})}}function _(M){var C;(C=$.value)!=null&&C.$el.contains(M.relatedTarget)||(s.value=!1)}function V(){var M;p.value&&((M=i.value)==null||M.focus())}function P(M){p.value=!0}function B(M){if(M==null)f.value=[];else if(tn(i.value,":autofill")||tn(i.value,":-webkit-autofill")){const C=u.value.find(k=>k.title===M);C&&J(C)}else i.value&&(i.value.value="")}return se(s,()=>{if(!e.hideSelected&&s.value&&f.value.length){const M=S.value.findIndex(C=>f.value.some(k=>e.valueComparator(k.value,C.value)));Ft&&window.requestAnimationFrame(()=>{var C;M>=0&&((C=a.value)==null||C.scrollToIndex(M))})}}),se(()=>e.items,(M,C)=>{s.value||p.value&&!C.length&&M.length&&(s.value=!0)}),$e(()=>{const M=!!(e.chips||n.chip),C=!!(!e.hideNoData||S.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),k=f.value.length>0,A=hn.filterProps(e),Y=k||!p.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return x(hn,Ee({ref:i},A,{modelValue:f.value.map(H=>H.props.value).join(", "),"onUpdate:modelValue":B,focused:p.value,"onUpdate:focused":H=>p.value=H,validationValue:f.externalValue,counterValue:h.value,dirty:k,class:["v-select",{"v-select--active-menu":s.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":f.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:Y,"onClick:clear":R,"onMousedown:control":E,onBlur:_,onKeydown:Q,"aria-label":o(b.value),title:o(b.value)}),{...n,default:()=>x(_e,null,[x(Ss,Ee({ref:r,modelValue:s.value,"onUpdate:modelValue":H=>s.value=H,activator:"parent",contentClass:"v-select__content",disabled:T.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:V},F.value),{default:()=>[C&&x(di,Ee({ref:$,selected:g.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:H=>H.preventDefault(),onKeydown:U,onFocusin:P,onScrollPassive:K,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var H,L,W;return[(H=n["prepend-item"])==null?void 0:H.call(n),!S.value.length&&!e.hideNoData&&(((L=n["no-data"])==null?void 0:L.call(n))??x(nn,{title:o(e.noDataText)},null)),x(Cs,{ref:a,renderless:!0,items:S.value},{default:ie=>{var X;let{item:oe,index:ce,itemRef:te}=ie;const G=Ee(oe.props,{ref:te,key:ce,onClick:()=>J(oe,null)});return((X=n.item)==null?void 0:X.call(n,{item:oe,index:ce,props:G}))??x(nn,Ee(G,{role:"option"}),{prepend:q=>{let{isSelected:m}=q;return x(_e,null,[e.multiple&&!e.hideSelected?x(hs,{key:oe.value,modelValue:m,ripple:!1,tabindex:"-1"},null):void 0,oe.props.prependAvatar&&x($n,{image:oe.props.prependAvatar},null),oe.props.prependIcon&&x(Ge,{icon:oe.props.prependIcon},null)])}})}}),(W=n["append-item"])==null?void 0:W.call(n)]}})]}),f.value.map((H,L)=>{function W(te){te.stopPropagation(),te.preventDefault(),J(H,!1)}const ie={"onClick:close":W,onKeydown(te){te.key!=="Enter"&&te.key!==" "||(te.preventDefault(),te.stopPropagation(),W(te))},onMousedown(te){te.preventDefault(),te.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},oe=M?!!n.chip:!!n.selection,ce=oe?ca(M?n.chip({item:H,index:L,props:ie}):n.selection({item:H,index:L})):void 0;if(!(oe&&!ce))return x("div",{key:H.value,class:"v-select__selection"},[M?n.chip?x(ht,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:H.title}}},{default:()=>[ce]}):x(Es,Ee({key:"chip",closable:e.closableChips,size:"small",text:H.title,disabled:H.props.disabled},ie),null):ce??x("span",{class:"v-select__selection-text"},[H.title,e.multiple&&L<f.value.length-1&&x("span",{class:"v-select__selection-comma"},[Ue(",")])])])})]),"append-inner":function(){var ie;for(var H=arguments.length,L=new Array(H),W=0;W<H;W++)L[W]=arguments[W];return x(_e,null,[(ie=n["append-inner"])==null?void 0:ie.call(n,...L),e.menuIcon?x(Ge,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),Qn({isFocused:p,menu:s,select:J},i)}});const gw=(e,t,n)=>e==null||t==null?-1:e.toString().toLocaleLowerCase().indexOf(t.toString().toLocaleLowerCase()),mw=xe({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function pw(e,t,n){var l;const o=[],i=(n==null?void 0:n.default)??gw,r=n!=null&&n.filterKeys?We(n.filterKeys):!1,a=Object.keys((n==null?void 0:n.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return o;e:for(let s=0;s<e.length;s++){const[u,c=u]=We(e[s]),d={},f={};let h=-1;if((t||a>0)&&!(n!=null&&n.noFilter)){if(typeof u=="object"){const p=r||Object.keys(c);for(const b of p){const w=Js(c,b),O=(l=n==null?void 0:n.customKeyFilter)==null?void 0:l[b];if(h=O?O(w,t,u):i(w,t,u),h!==-1&&h!==!1)O?d[b]=h:f[b]=h;else if((n==null?void 0:n.filterMode)==="every")continue e}}else h=i(u,t,u),h!==-1&&h!==!1&&(f.title=h);const y=Object.keys(f).length,g=Object.keys(d).length;if(!y&&!g||(n==null?void 0:n.filterMode)==="union"&&g!==a&&!y||(n==null?void 0:n.filterMode)==="intersection"&&(g!==a||!y))continue}o.push({index:s,matches:{...f,...d}})}return o}function yw(e,t,n,o){const i=ae([]),r=ae(new Map),a=z(()=>re(t));Ro(()=>{const s=typeof n=="function"?n():re(n),u=typeof s!="string"&&typeof s!="number"?"":String(s),c=pw(a.value,u,{customKeyFilter:{...e.customKeyFilter,...re(o==null?void 0:o.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),d=re(t),f=[],h=new Map;c.forEach(y=>{let{index:g,matches:p}=y;const b=d[g];f.push(b),h.set(b.value,p)}),i.value=f,r.value=h});function l(s){return r.value.get(s.value)}return{filteredItems:i,filteredMatches:r,getMatches:l}}function ww(e,t,n){if(t==null)return e;if(Array.isArray(t))throw new Error("Multiple matches is not implemented");return typeof t=="number"&&~t?x(_e,null,[x("span",{class:"v-autocomplete__unmask"},[e.substr(0,t)]),x("span",{class:"v-autocomplete__mask"},[e.substr(t,n)]),x("span",{class:"v-autocomplete__unmask"},[e.substr(t+n)])]):e}const bw=xe({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...mw({filterKeys:["title"]}),...Is(),...Xn(Oi({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Zn({transition:!1})},"VAutocomplete"),_w=Oe()({name:"VAutocomplete",props:bw(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:n}=t;const{t:o}=Kn(),i=ae(),r=ke(!1),a=ke(!0),l=ke(!1),s=ae(),u=ae(),c=Re(e,"menu"),d=z({get:()=>c.value,set:G=>{var X;c.value&&!G&&((X=s.value)!=null&&X.ΨopenChildren)||(c.value=G)}}),f=ke(-1),h=z(()=>{var G;return(G=i.value)==null?void 0:G.color}),y=z(()=>d.value?e.closeText:e.openText),{items:g,transformIn:p,transformOut:b}=ha(e),{textColorClasses:w,textColorStyles:O}=qn(h),S=Re(e,"search",""),T=Re(e,"modelValue",[],G=>p(G===null?[null]:We(G)),G=>{const X=b(G);return e.multiple?X:X[0]??null}),F=z(()=>typeof e.counterValue=="function"?e.counterValue(T.value):typeof e.counterValue=="number"?e.counterValue:T.value.length),$=Vi(),{filteredItems:K,getMatches:U}=yw(e,g,()=>a.value?"":S.value),R=z(()=>e.hideSelected?K.value.filter(G=>!T.value.some(X=>X.value===G.value)):K.value),E=z(()=>!!(e.chips||n.chip)),Q=z(()=>E.value||!!n.selection),J=z(()=>T.value.map(G=>G.props.value)),_=z(()=>{var X;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&S.value===((X=R.value[0])==null?void 0:X.title))&&R.value.length>0&&!a.value&&!l.value}),V=z(()=>e.hideNoData&&!R.value.length||e.readonly||($==null?void 0:$.isReadonly.value)),P=ae(),{onListScroll:B,onListKeydown:M}=Ns(P,i);function C(G){e.openOnClear&&(d.value=!0),S.value=""}function k(){V.value||(d.value=!0)}function A(G){V.value||(r.value&&(G.preventDefault(),G.stopPropagation()),d.value=!d.value)}function Y(G){var m,v,D;if(e.readonly||$!=null&&$.isReadonly.value)return;const X=i.value.selectionStart,q=T.value.length;if((f.value>-1||["Enter","ArrowDown","ArrowUp"].includes(G.key))&&G.preventDefault(),["Enter","ArrowDown"].includes(G.key)&&(d.value=!0),["Escape"].includes(G.key)&&(d.value=!1),_.value&&["Enter","Tab"].includes(G.key)&&!T.value.some(N=>{let{value:I}=N;return I===R.value[0].value})&&te(R.value[0]),G.key==="ArrowDown"&&_.value&&((m=P.value)==null||m.focus("next")),["Backspace","Delete"].includes(G.key)){if(!e.multiple&&Q.value&&T.value.length>0&&!S.value)return te(T.value[0],!1);if(~f.value){const N=f.value;te(T.value[f.value],!1),f.value=N>=q-1?q-2:N}else G.key==="Backspace"&&!S.value&&(f.value=q-1)}if(e.multiple){if(G.key==="ArrowLeft"){if(f.value<0&&X>0)return;const N=f.value>-1?f.value-1:q-1;T.value[N]?f.value=N:(f.value=-1,i.value.setSelectionRange((v=S.value)==null?void 0:v.length,(D=S.value)==null?void 0:D.length))}if(G.key==="ArrowRight"){if(f.value<0)return;const N=f.value+1;T.value[N]?f.value=N:(f.value=-1,i.value.setSelectionRange(0,0))}}}function H(G){if(tn(i.value,":autofill")||tn(i.value,":-webkit-autofill")){const X=g.value.find(q=>q.title===G.target.value);X&&te(X)}}function L(){var G;r.value&&(a.value=!0,(G=i.value)==null||G.focus())}function W(G){r.value=!0,setTimeout(()=>{l.value=!0})}function ie(G){l.value=!1}function oe(G){(G==null||G===""&&!e.multiple&&!Q.value)&&(T.value=[])}const ce=ke(!1);function te(G){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!G||G.props.disabled))if(e.multiple){const q=T.value.findIndex(v=>e.valueComparator(v.value,G.value)),m=X??!~q;if(~q){const v=m?[...T.value,G]:[...T.value];v.splice(q,1),T.value=v}else m&&(T.value=[...T.value,G]);e.clearOnSelect&&(S.value="")}else{const q=X!==!1;T.value=q?[G]:[],S.value=q&&!Q.value?G.title:"",Me(()=>{d.value=!1,a.value=!0})}}return se(r,(G,X)=>{var q;G!==X&&(G?(ce.value=!0,S.value=e.multiple||Q.value?"":String(((q=T.value.at(-1))==null?void 0:q.props.title)??""),a.value=!0,Me(()=>ce.value=!1)):(!e.multiple&&S.value==null&&(T.value=[]),d.value=!1,T.value.some(m=>{let{title:v}=m;return v===S.value})||(S.value=""),f.value=-1))}),se(S,G=>{!r.value||ce.value||(G&&(d.value=!0),a.value=!G)}),se(d,()=>{if(!e.hideSelected&&d.value&&T.value.length){const G=R.value.findIndex(X=>T.value.some(q=>X.value===q.value));Ft&&window.requestAnimationFrame(()=>{var X;G>=0&&((X=u.value)==null||X.scrollToIndex(G))})}}),se(()=>e.items,(G,X)=>{d.value||r.value&&!X.length&&G.length&&(d.value=!0)}),$e(()=>{const G=!!(!e.hideNoData||R.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),X=T.value.length>0,q=hn.filterProps(e);return x(hn,Ee({ref:i},q,{modelValue:S.value,"onUpdate:modelValue":[m=>S.value=m,oe],focused:r.value,"onUpdate:focused":m=>r.value=m,validationValue:T.externalValue,counterValue:F.value,dirty:X,onChange:H,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":d.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!Q.value,"v-autocomplete--selecting-index":f.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:X?void 0:e.placeholder,"onClick:clear":C,"onMousedown:control":k,onKeydown:Y}),{...n,default:()=>x(_e,null,[x(Ss,Ee({ref:s,modelValue:d.value,"onUpdate:modelValue":m=>d.value=m,activator:"parent",contentClass:"v-autocomplete__content",disabled:V.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:L},e.menuProps),{default:()=>[G&&x(di,Ee({ref:P,selected:J.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:m=>m.preventDefault(),onKeydown:M,onFocusin:W,onFocusout:ie,onScrollPassive:B,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var m,v,D;return[(m=n["prepend-item"])==null?void 0:m.call(n),!R.value.length&&!e.hideNoData&&(((v=n["no-data"])==null?void 0:v.call(n))??x(nn,{title:o(e.noDataText)},null)),x(Cs,{ref:u,renderless:!0,items:R.value},{default:N=>{var de;let{item:I,index:j,itemRef:Z}=N;const le=Ee(I.props,{ref:Z,key:j,active:_.value&&j===0?!0:void 0,onClick:()=>te(I,null)});return((de=n.item)==null?void 0:de.call(n,{item:I,index:j,props:le}))??x(nn,Ee(le,{role:"option"}),{prepend:ve=>{let{isSelected:he}=ve;return x(_e,null,[e.multiple&&!e.hideSelected?x(hs,{key:I.value,modelValue:he,ripple:!1,tabindex:"-1"},null):void 0,I.props.prependAvatar&&x($n,{image:I.props.prependAvatar},null),I.props.prependIcon&&x(Ge,{icon:I.props.prependIcon},null)])},title:()=>{var ve,he;return a.value?I.title:ww(I.title,(ve=U(I))==null?void 0:ve.title,((he=S.value)==null?void 0:he.length)??0)}})}}),(D=n["append-item"])==null?void 0:D.call(n)]}})]}),T.value.map((m,v)=>{function D(Z){Z.stopPropagation(),Z.preventDefault(),te(m,!1)}const N={"onClick:close":D,onKeydown(Z){Z.key!=="Enter"&&Z.key!==" "||(Z.preventDefault(),Z.stopPropagation(),D(Z))},onMousedown(Z){Z.preventDefault(),Z.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},I=E.value?!!n.chip:!!n.selection,j=I?ca(E.value?n.chip({item:m,index:v,props:N}):n.selection({item:m,index:v})):void 0;if(!(I&&!j))return x("div",{key:m.value,class:["v-autocomplete__selection",v===f.value&&["v-autocomplete__selection--selected",w.value]],style:v===f.value?O.value:{}},[E.value?n.chip?x(ht,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:m.title}}},{default:()=>[j]}):x(Es,Ee({key:"chip",closable:e.closableChips,size:"small",text:m.title,disabled:m.props.disabled},N),null):j??x("span",{class:"v-autocomplete__selection-text"},[m.title,e.multiple&&v<T.value.length-1&&x("span",{class:"v-autocomplete__selection-comma"},[Ue(",")])])])})]),"append-inner":function(){var N;for(var m=arguments.length,v=new Array(m),D=0;D<m;D++)v[D]=arguments[D];return x(_e,null,[(N=n["append-inner"])==null?void 0:N.call(n,...v),e.menuIcon?x(Ge,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:A,onClick:eu,"aria-label":o(y.value),title:o(y.value),tabindex:"-1"},null):void 0])}})}),Qn({isFocused:r,isPristine:a,menu:d,search:S,filteredItems:K,select:te},i)}}),Ew={class:"vue-flow-container",style:{height:"400px",width:"1200px"}};function Sw(e,t,n,o,i,r){const a=ss;return ue(),Be(yu,{fluid:""},{default:pe(()=>[x(ho,null,{default:pe(()=>[x(Ut,null,{default:pe(()=>[x(Fo,{class:"ma-1"},{default:pe(()=>[x(Bo,null,{default:pe(()=>[Ue(" Select outputs ")]),_:1}),x(Ai,null,{default:pe(()=>[x(di,null,{default:pe(()=>[(ue(!0),me(_e,null,Un(e.recipes,l=>(ue(),Be(nn,{key:l.id},{default:pe(()=>[x(ho,{class:"d-flex justify-center align-center"},{default:pe(()=>[x(Ut,{cols:"3"},{default:pe(()=>[x(_w,{modelValue:l.recipe,"onUpdate:modelValue":s=>l.recipe=s,"auto-select-first":"",clearable:"","item-title":"name",items:e.recipeOptions,label:"Output","return-object":""},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),x(Ut,{cols:"3"},{default:pe(()=>[x(hn,{modelValue:l.amount,"onUpdate:modelValue":s=>l.amount=s,type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),x(Ut,{cols:"3"},{default:pe(()=>[x(vo,{onClick:s=>e.removeSelectedRecipe(l.id)},{default:pe(()=>[Ue(" Remove ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),x(vo,{onClick:e.addEmptyRecipe},{default:pe(()=>[Ue(" Add output ")]),_:1},8,["onClick"])]),_:1}),x(pu,null,{default:pe(()=>[x(vo,{onClick:t[0]||(t[0]=l=>e.generateFactoryPlan())},{default:pe(()=>[Ue(" Generate Plan ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),x(ho,null,{default:pe(()=>[x(Ut,{class:"d-flex fill-height",cols:"12"},{default:pe(()=>[x(Fo,{class:"ma-1"},{default:pe(()=>[x(Bo,null,{default:pe(()=>[Ue("Plan")]),_:1}),x(Ai,null,{default:pe(()=>[et("div",Ew,[e.factoryPlan?(ue(),Be(a,{key:0,class:"fill-space",factory:e.factoryPlan},null,8,["factory"])):Fe("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const Aw=jn(R0,[["render",Sw]]);export{Aw as default};
